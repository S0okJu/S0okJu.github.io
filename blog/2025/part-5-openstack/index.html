<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd"> <html><body> <h3>서버 구축기 — Part 5. OpenStack을 설치하면서 마주한 오류들</h3> <h3>br-ex로 옮겼더니 인터넷 연결이 안되요!!</h3> <p>외부 인터페이스를 br-ex 인터페이스에 옮길때<br>netplan(/etc/netplan/00- * )을 확인하여 옮긴 인터페이스가 {} 를 가지는지 확인하자!</p> <pre>network:<br> ethernets:<br>  ...<br>  enp3s0: {}<br>  br-ex :<br>   ...</pre> <h3>Swift — 503 Service Unavailable</h3> <p>만약에 Swift에 Service Unavailable이 나온다면 Swift가 제대로 구성되었는지 확인해보자.</p> <pre>raise UnexpectedResponse(msg, resp)#012<br>swift.common.internal_client.UnexpectedResponse: <br>Unexpected response: <br>503 Service Unavailable\u0000","<br>log_level":"err","Hostname":"server"</pre> <p>디스크에 파티션을 나누고 xfs 파일 시스템으로 포맷팅 할때 globals.yml에서 <strong>지정해준 이름을 무조건 설정</strong>해야 합니다. 그래야 swift를 설치할때 자동으로 폴더가 마운팅됩니다.</p> <p>만약에 이름이 지정되지 않는다면 아래와 같이 sda2,3,4에서 mount가 되지 않습니다.</p> <blockquote>수동으로 fstab를 수정해도 swift를 제대로 사용할 수 없습니다.</blockquote> <figure><img alt="" src="https://cdn-images-1.medium.com/max/701/1*7_XcGqv05RfzABrQOqHEfQ.png"></figure> <h3>glance image upload error</h3> <p>kolla ansible로 cloud image upload를 시도하면 즉각적으로 저장되지 않고 queued 상태가 됩니다. 이는 이미지 저장 시 문제가 생겼다는 의미입니다.</p> <figure><img alt="" src="https://cdn-images-1.medium.com/max/618/1*1uTVW3_r54RPXfPx1CRhgg.png"></figure> <p>Internal Server Error가 발생했다는 것은 glance-api에 문제가 있다고 해석할 수 있습니다.</p> <figure><img alt="" src="https://cdn-images-1.medium.com/max/1024/1*SHteXkcNNByYpZ2szU0QYQ.png"></figure> <p>swift를 찾아보니 glance 관련된 컨테이너가 제대로 생성되지 않았습니다. 하지만 그 외에 swift 컨테이너가 생성된 것을 보아 내부적으로 문제가 생긴 것으로 판단했습니다.<br>그래서 이미지를 저장하는 공간을 swift에서 file(서버 디렉토리)로 변경하여 이미지가 제대로 설치될 수 있게 변경했습니다.</p> <p><img src="https://medium.com/_/stat?event=post.clientViewed&amp;referrerSource=full_rss&amp;postId=6c4d26743df0" width="1" height="1" alt="">&lt;hr&gt;&lt;p&gt;<a href="https://medium.com/s0okju-tech/%EC%84%9C%EB%B2%84-%EA%B5%AC%EC%B6%95%EA%B8%B0-part-5-openstack%EC%9D%84-%EC%84%A4%EC%B9%98%ED%95%98%EB%A9%B4%EC%84%9C-%EB%A7%88%EC%A3%BC%ED%95%9C-%EC%98%A4%EB%A5%98%EB%93%A4-6c4d26743df0" rel="external nofollow noopener" target="_blank">서버 구축기 — Part 5. OpenStack을 설치하면서 마주한 오류들</a> was originally published in <a href="https://medium.com/s0okju-tech" rel="external nofollow noopener" target="_blank">S0okJu Technology Blog</a> on Medium, where people are continuing the conversation by highlighting and responding to this story.&lt;/p&gt;</p> </body></html>