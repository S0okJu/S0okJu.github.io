
[{"content":"","date":"22 May 2024","externalUrl":null,"permalink":"/tags/entgo/","section":"Tags","summary":"","title":"Entgo","type":"tags"},{"content":" ORM ì„ íƒ # Goì˜ ê²½ìš°ì—ëŠ” JAVAì™€ ë‹¬ë¦¬ ëŒ€í‘œì ì¸ ORM í”„ë ˆì„ì›Œí¬ê°€ ì—†ì–´, ê°œë°œìê°€ ì§ì ‘ ì„ íƒí•´ì„œ ì‚¬ìš©í•´ì•¼ í•œë‹¤.\në‹¤ì–‘í•œ Go ORM í”„ë ˆì„ì›Œí¬ ìˆœìœ„ë¥¼ ì•Œê³  ì‹¶ë‹¤ë©´ OSS Insight ë¥¼ ì°¸ê³ í•˜ê¸¸ ë°”ë€ë‹¤.\nê¸°ë³¸ì ìœ¼ë¡œ mysql driver ì‚¬ìš©ì„ ìƒê°í–ˆë‹¤. ê·¸ëŸ¬ë‚˜ ì •êµí•œ ì €ìˆ˜ì¤€ì˜ ì¿¼ë¦¬ë¥¼ ë‹¤ë£¨ëŠ” ê²ƒì´ ì•„ë‹ˆê¸° ë•Œë¬¸ì— ORMë¥¼ ì ê·¹ì ìœ¼ë¡œ í™œìš©í•˜ê³  ì‹¶ì—ˆë‹¤.\nì¡°ê±´ # ê¹”ë”í•œ ë„ë©”ì¸ ì •ì˜ ì—¬ëŸ¬ ì¢…ë¥˜ì˜ DB ì§€ì› ì»´íŒŒì¼ ë ˆë²¨ì—ì„œ ë””ë²„ê¹… ê°€ëŠ¥ Ent # Entë€ Facebookì—ì„œ ê°œë°œí•œ Go ORMì´ë‹¤. ê³µì‹ ì„¤ëª…ì— ì˜í•˜ë©´ ê·¸ë˜í”„ êµ¬ì¡°ì˜ ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆë¥¼ ê°€ì§€ê³  ìˆìœ¼ë©°, ì½”ë“œ ìƒì„±ì„ ê¸°ë°˜ìœ¼ë¡œ í•˜ëŠ” ì •ì  íƒ€ì´í•‘ì„ ì§€ì›í•œë‹¤.1 ì´ëŠ” ìœ„ì—ì„œ ë§í•œ ì¡°ê±´ì— ì–´ëŠ ì •ë„ ì¶©ì¡±ì´ ëœë‹¤.\në‹¤ë§Œ entëŠ” ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤ì— ì í•©í•˜ë©° NoSQL ê¸°ë°˜ ë°ì´í„°ë² ì´ìŠ¤ì—ëŠ” ì í•©í•˜ì§€ ì•Šì•˜ë‹¤.2 ORM ì„ íƒ ì¡°ê±´ì—ëŠ” ë¶€í•©í•˜ì§€ ì•Šì•˜ìœ¼ë‚˜ ëŒ€ë¶€ë¶„ì˜ ORMì´ RDB ìœ„ì£¼ë¡œ ì§€ì›í•œë‹¤ëŠ” ê²ƒ3ì„ ê°ì•ˆí–ˆì„ë•Œ entì€ RDB ì‚¬ìš© ì‹œ ê´œì°®ì€ ì„ íƒì´ë¼ê³  ìƒê°í•œë‹¤.\nì´ˆë°˜ì— Gorm ì‚¬ìš©ë„ ê³ ë ¤í–ˆë‹¤. ê·¸ëŸ¬ë‚˜ ëª¨ë¸ì„ ì •ì˜í•˜ëŠ”ë° ì‚¬ìš©ë˜ëŠ” struct tag ëŠ” ê°œì¸ì ìœ¼ë¡œ ê°€ë…ì„±ì´ ì¢‹ì§€ ì•Šë‹¤ëŠ” ì¸ìƒì´ ë“¤ì—ˆë‹¤.\ntype Model struct { ID uint `gorm:\u0026#34;primaryKey\u0026#34;` CreatedAt time.Time UpdatedAt time.Time DeletedAt gorm.DeletedAt `gorm:\u0026#34;index\u0026#34;` } ì²«ì¸ìƒ # ORM ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ schemaë¥¼ ë³¸ ìˆœê°„ ê·¸ë˜í”„ ë°ì´í„°ë² ì´ìŠ¤ì¸ ì¤„ ì•Œì•˜ë‹¤. ê³¼ê±°ì— Neo4j4ë¼ëŠ” ê·¸ë˜í”„ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì‚¬ìš©í•´ë³¸ ì ì´ ìˆëŠ”ë°, ì´ ë…¸ë“œ, ê·¸ë˜í”„ë¥¼ ë³„ë„ë¡œ ì •ì˜í•´ì„œ êµ¬í˜„í•œ ì ì´ ìƒë‹¹íˆ ìœ ì‚¬í–ˆê¸° ë•Œë¬¸ì´ë‹¤.\ntype Task struct { ent.Schema } // Fields of the Task. func (Task) Fields() []ent.Field { return []ent.Field{ field.Int(\u0026#34;id\u0026#34;), field.String(\u0026#34;title\u0026#34;), field.Int(\u0026#34;total_status\u0026#34;), field.Time(\u0026#34;created_at\u0026#34;).Default(time.Now()), field.Time(\u0026#34;modified_at\u0026#34;).Default(time.Now()), } } // Edges of the Task. func (Task) Edges() []ent.Edge { return []ent.Edge{ edge.To(\u0026#34;subtask\u0026#34;, SubTask.Type), } } ê³µì‹ í™ˆí˜ì´ì§€ë¥¼ ì°¸ê³ í•´ë³´ë©´ Ent ORMì— ëŒ€í•´ ì´ë ‡ê²Œ ì„¤ëª…í–ˆë‹¤.\nEasily model database schema as a graph structure.\nschema êµ¬ì¡°ë¥¼ ê·¸ë˜í”„ êµ¬ì¡°ë¡œ êµ¬í˜„ë˜ì–´ ìˆë‹¤ëŠ” ê²ƒì´ë‹¤. ì•„ë§ˆ entê°€ ê·¸ë˜í”„ íƒìƒ‰ì— ëŒ€í•œ ìì‹ ê°ì„ í‘œí˜„í•œ ê²ƒë„ êµ¬ì¡°ì ì¸ ì´ìœ ë•Œë¬¸ì´ì§€ ì•Šì„ê¹Œ ì‹¶ë‹¤.\nì ìš©í•˜ê¸° # Schema # entì˜ ì°¸ì¡° ë°©ì‹ì€ ë…íŠ¹í•˜ë‹¤. ê¸°ì¡´ì˜ ì°¸ì¡° ë°©ì‹ê³¼ ë°˜ëŒ€ì´ê¸° ë•Œë¬¸ì´ë‹¤.5 ent ê³µì‹ ë¬¸ì„œì— ì˜í•˜ë©´ edge.Toë¥¼ ì‚¬ìš©í•˜ê³  ìˆìœ¼ë©´ ì„¤ì •í•œ Edgeë¥¼ ì†Œìœ í•œë‹¤ê³  ì •ì˜í•œë‹¤.6\nA schema that defines an edge using theÂ edge.ToÂ builder owns the relation, unlike using theÂ edge.FromÂ builder that gives only a back-reference for the relation (with a different name).\nğŸ¤” í•„ìì˜ ê²½ìš° ìœ„ì˜ ì •ì˜ë¥¼ ê³ ë ¤í•˜ê³  êµ¬í˜„í•˜ë‹ˆ ë” í—·ê°ˆë¦¬ê¸° ì‹œì‘í–ˆë‹¤. ê·¸ë˜ì„œ ê´€ê³„ ì†Œìœ ìì¸ schemaë§Œ ì •ì˜í•˜ê³ , ê·¸ ì™¸ì—ëŠ” ì„œë¡œì˜ ì—°ê´€ê´€ê³„ë¥¼ ì„¤ì •í•´ì¤€ë‹¤ëŠ” ë§ˆìŒìœ¼ë¡œ êµ¬í˜„í–ˆë‹¤.\nMember : Task Entityê°€ 1:N ì—°ê´€ ê´€ê³„ë¥¼ ê°€ì§„ë‹¤ê³  ê°€ì •í•´ë³´ì.\nMemberëŠ” tasksë¼ëŠ” ê´€ê³„ì˜ ì†Œìœ ìì´ë‹¤. ê·¸ëŸ¬ë¯€ë¡œ edge.Toë¡œ ê´€ê³„ë¥¼ ì„¤ì •í•œë‹¤. í•˜ì§€ë§Œ TaskëŠ” manyì— í•´ë‹¹ë˜ê¸° ë•Œë¬¸ì— ì•„ë¬´ê²ƒë„ ì„¤ì •í•˜ì§€ ì•ŠëŠ”ë‹¤.\n// Fields of the Member. func (Member) Fields() []ent.Field { return []ent.Field{ field.Int(\u0026#34;id\u0026#34;), field.String(\u0026#34;email\u0026#34;), field.String(\u0026#34;username\u0026#34;), field.String(\u0026#34;password\u0026#34;), field.Time(\u0026#34;created_at\u0026#34;).Default(time.Now()), } } // Edges of the Member. func (Member) Edges() []ent.Edge { return []ent.Edge{ edge.To(\u0026#34;tasks\u0026#34;, Task.Type), } } Taskì—ì„œëŠ” Memberì—ì„œ ì†Œìœ í•œ ê´€ê³„(user)ë¥¼ ì—­ì°¸ì¡°í•´ì„œ ê´€ê³„ë¥¼ ì •ì˜í•˜ê²Œ ëœë‹¤. ì´ë•Œ MemberëŠ” ê´€ê³„ì—ì„œ Oneì— í•´ë‹¹ë˜ë‹ˆ Unique() í•¨ìˆ˜ë¥¼ ë¶™ì´ê²Œ ëœë‹¤.\n// Fields of the Task. func (Task) Fields() []ent.Field { return []ent.Field{ field.Int(\u0026#34;id\u0026#34;), field.String(\u0026#34;title\u0026#34;), field.Int(\u0026#34;total_status\u0026#34;), field.Time(\u0026#34;created_at\u0026#34;).Default(time.Now()), field.Time(\u0026#34;modified_at\u0026#34;).Default(time.Now()), } } // Edges of the Task. func (Task) Edges() []ent.Edge { return []ent.Edge{ edge.From(\u0026#34;member\u0026#34;, Member.Type).Ref(\u0026#34;tasks\u0026#34;).Unique(), } } ì°¸ì¡°í•˜ëŠ” ì´ìœ ëŠ” ì–´ë–¤ schemaì™€ ì°¸ì¡°í•˜ëŠ”ì§€ë¥¼ ëª…ì‹œí•˜ê¸° ìœ„í•´ì„œë¼ê³  ë³´ë©´ ëœë‹¤.\n\u0026hellip; because there can be multiple references from one schema to other.\nì˜ˆì œ - ë°ì´í„° ìƒì„± ì½”ë“œ # ê·¸ëŸ¼ ë°ì´í„°ë¥¼ ìƒì„±í• ë•Œ ì–´ë–»ê²Œ í•´ì•¼í• ê¹Œ? ì°¸ì¡°í•˜ëŠ” Schema(Task)ì—ì„œ Member ì •ë³´ë¥¼ ì¶”ê°€í•´ì£¼ë©´ ëœë‹¤.\nê³µì‹ ë¬¸ì„œì—ì„œëŠ” ì§ì ‘ Queryí•´ì„œ ë°ì´í„°ë¥¼ ê°€ì ¸ì™”ì§€ë§Œ7 , ê·¸ ì™¸ì—ë„ Schema ë°ì´í„°( ì˜ˆì œì—ì„œëŠ” ent.Member) í˜¹ì€ ì•„ì´ë””ë§Œìœ¼ë¡œë„ ì¶”ê°€ê°€ ê°€ëŠ¥í•˜ë‹ˆ ê³µì‹ ë¬¸ì„œë¥¼ ì°¸ê³ í•˜ê¸¸ ë°”ë€ë‹¤.\nfunc (s *Store) Create(ctx *gin.Context, b request.CreateTask) error { // create Task _, err := s.client.Task.Create().SetTitle(b.Title).SetTotalStatus(0) .SetMemberID(b.UserId).Save(ctx) if err != nil { return err } return nil } ì‹¤ì œë¡œ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ë³´ë©´ {ì°¸ì¡°í•˜ëŠ” ê´€ê³„ëª…} _ {ì°¸ì¡°í•˜ëŠ” ê´€ê³„ëª…}ìœ¼ë¡œ ì´ë¤„ì ¸ ìˆë‹¤.\nìœ„ì˜ ì˜ˆì œì—ì„œëŠ” 1:N(One-to-Many)ì¸ ê²½ìš°ì—ë©´ ì„¤ëª…í–ˆì§€ë§Œ (M:N)ì˜ ê²½ìš°ì—ëŠ” {ì°¸ì¡°í•˜ëŠ” ê´€ê³„ëª…} _ {ì°¸ì¡°í•˜ëŠ” ê´€ê³„ëª…}ì˜ ì´ë¦„ì„ ê°€ì§„ í…Œì´ë¸”ì´ ìƒì„±ëœë‹¤.\nhttps://entgo.io/docs/getting-started/\u0026#160;\u0026#x21a9;\u0026#xfe0e;\ní•„ìëŠ” MongoDBì— ì ìš©ì‹œí‚¤ê³ ì ê²€ìƒ‰ì„ ì—¬ëŸ¬ë²ˆ í–ˆì§€ë§Œ ëë‚´ ì°¾ì§€ ëª»í–ˆë‹¤.\u0026#160;\u0026#x21a9;\u0026#xfe0e;\nhttps://blog.billo.io/devposts/go_orm_recommandation/\u0026#160;\u0026#x21a9;\u0026#xfe0e;\nhttps://neo4j.com/docs/getting-started/\u0026#160;\u0026#x21a9;\u0026#xfe0e;\nhttps://umi0410.github.io/blog/golang/how-to-backend-in-go-db/\u0026#160;\u0026#x21a9;\u0026#xfe0e;\nhttps://entgo.io/docs/schema-edges#quick-summary\u0026#160;\u0026#x21a9;\u0026#xfe0e;\nhttps://entgo.io/docs/schema-edges#o2o-two-types\u0026#160;\u0026#x21a9;\u0026#xfe0e;\n","date":"22 May 2024","externalUrl":null,"permalink":"/posts/entgo-1/","section":"Posts","summary":"ORM ì„ íƒ # Goì˜ ê²½ìš°ì—ëŠ” JAVAì™€ ë‹¬ë¦¬ ëŒ€í‘œì ì¸ ORM í”„ë ˆì„ì›Œí¬ê°€ ì—†ì–´, ê°œë°œìê°€ ì§ì ‘ ì„ íƒí•´ì„œ ì‚¬ìš©í•´ì•¼ í•œë‹¤.","title":"Entgo - Ent ORM","type":"posts"},{"content":"","date":"22 May 2024","externalUrl":null,"permalink":"/tags/golang/","section":"Tags","summary":"","title":"Golang","type":"tags"},{"content":"","date":"22 May 2024","externalUrl":null,"permalink":"/","section":"NooOTe","summary":"","title":"NooOTe","type":"page"},{"content":"","date":"22 May 2024","externalUrl":null,"permalink":"/posts/","section":"Posts","summary":"","title":"Posts","type":"posts"},{"content":"","date":"22 May 2024","externalUrl":null,"permalink":"/tags/","section":"Tags","summary":"","title":"Tags","type":"tags"},{"content":"","date":"11 May 2024","externalUrl":null,"permalink":"/tags/gin/","section":"Tags","summary":"","title":"Gin","type":"tags"},{"content":"","date":"11 May 2024","externalUrl":null,"permalink":"/project/","section":"Projects","summary":"","title":"Projects","type":"project"},{"content":"","date":"11 May 2024","externalUrl":null,"permalink":"/tags/testing/","section":"Tags","summary":"","title":"Testing","type":"tags"},{"content":" GitHub : Thumbnail: Designed by Freepik ","date":"11 May 2024","externalUrl":null,"permalink":"/project/todopoint/","section":"Projects","summary":" GitHub : Thumbnail: Designed by Freepik ","title":"Todopoint","type":"project"},{"content":"Goë¥¼ í™œìš©í•˜ì—¬ ì§ì ‘ 2ê°œì˜ ì„œë¹„ìŠ¤ë¥¼ ë§Œë“¤ê³  ë‚˜ë‹ˆ, êµ¬í˜„í• ë•Œ ì§€ë‚˜ì³¤ë˜ ì—ëŸ¬ë“¤ì´ í° ëˆˆë©ì´ë¡œ ë³€í•´ì„œ ë®ì³ì™”ë‹¤. ë¬¸ì œê°€ ìƒê¸´ ì§€ì ì€ ëª…í™•í–ˆì§€ë§Œ, ê·¸ê²ƒë³´ë‹¤ëŠ” ë¬¸ì œ ë°œìƒì˜ ê·¼ë³¸ì ì¸ ì›ì¸ì„ ì°¾ê³ ì í–ˆì—ˆë‹¤. ë‚´ê°€ ìƒê°í•œ ê°€ì¥ í° ì›ì¸ì€ í…ŒìŠ¤íŠ¸ ì½”ë“œì˜ ë¶€ì¬ì˜€ë‹¤. í…ŒìŠ¤íŠ¸ì˜ ì¥ì ì€ ëˆ„êµ¬ë‚˜ ì•Œê³  ìˆì„ ê²ƒì´ë‹¤. ì½”ë“œì˜ ì•ˆì „ì„±ì„ í™•ë³´í•  ìˆ˜ ìˆìœ¼ë©° ë¬¸ì œ ë°œìƒ ì‹œ ë¹ ë¥´ê²Œ ìˆ˜ì •í•  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì´ë‹¤. í˜„ì¬ ì½”ë“œì—ëŠ” ìˆ¨ê²¨ì§„ êµ¬ë©ë“¤ì´ ì¡´ì¬í•˜ëŠ”ë°, ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„œëŠ” ë‹¨ìœ„ í…ŒìŠ¤íŠ¸, í†µí•© í…ŒìŠ¤íŠ¸ê°€ í•„ìš”í–ˆë‹¤. ê¸°ì¡´ì— ìˆë˜ ì½”ë“œë¥¼ í™œìš©í•˜ì—¬ í…ŒìŠ¤íŠ¸ ì½”ë“œë¡œ ì‘ì„±í•˜ë ¤ê³  ì‹œë„í–ˆìœ¼ë‚˜, ì§€ê¸ˆê¹Œì§€ ì ì€ Go ì½”ë“œëŠ” í…ŒìŠ¤íŠ¸ë¥¼ ìš©ì´í•˜ë„ë¡ ì‘ì„±ë˜ì§€ ì•Šì•˜ë‹¤. íŠ¹íˆ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì ì ˆí•˜ê²Œ ì‚¬ìš©í•˜ì§€ ì•Šì•„ì„œ Mockë¥¼ ì‚¬ìš©í•˜ëŠ”ë° ì–´ë ¤ì›€ì´ ìƒê¸°ê¸°ë„ í–ˆë‹¤.\nê·¸ë˜ì„œ ê³¼ê°í•˜ê²Œ ì²˜ìŒë¶€í„° ë‹¤ì‹œ ì“°ê¸°ë¡œ í–ˆë‹¤. ì´ë²ˆê¹Œì§€ í¬í•¨í•´ì„œ ì½”ë“œë¥¼ ì´ 2ë²ˆ ìˆ˜ì •í–ˆëŠ”ë°, ê·¸ ê³¼ì •ì„ ì ê³ ì í•œë‹¤.\nì´ˆê¸° - Go í•œë‹¬ì°¨ì˜ ì ì‘ê¸° # ì—ëŸ¬ íƒ€ì…ê³¼ ìƒíƒœ íƒ€ì… # 1ì°¨ì—ì„œëŠ” ErrorTypeìœ¼ë¡œ íŠ¹ì • ì—ëŸ¬ íƒ€ì…ì„ ì •ì˜í•˜ëŠ”ë° ì‚¬ìš©í•  íƒ€ì…ì„ ì§€ì •í•´ì¤¬ë‹¤.\ntype ErrorType int type Error struct { // Code is a custom error code ErrorType ErrorType // Err is a error string Err error // Description is a human-friendly message. Description string } type ErrorRes struct { // Code is http status code Code int `json:\u0026#34;code\u0026#34;` } ëª¨ë“  ì„œë¹„ìŠ¤ë“¤ì´ ì‚¬ìš©í•  ê²½ìš°, ê° ì„œë¹„ìŠ¤ê°€ ì‚¬ìš©í•  ì—ëŸ¬ ì½”ë“œë¥¼ ì¼ë¦¬ë¦¬ ì§€ì •í–ˆë‹¤. mapë¥¼ í™œìš©í•˜ì—¬ ì—ëŸ¬ íƒ€ì…ì— í•´ë‹¹ë˜ëŠ” ìƒíƒœ ì½”ë“œë¥¼ ë§¤í•‘í–ˆë‹¤.\nconst ( // Common SUCCESS ErrorType = 0 INVALID_JSON_FORMAT ErrorType = 1001 INVALID_URI_FORMAT ErrorType = 1002 // Member INVALID_MEMBER ErrorType = 2001 ERROR_MEMBER_DB ErrorType = 2101 // Task ERROR_TASK_DB ErrorType = 3101 ) var codeMap = map[ErrorType]int{ // Common INVALID_JSON_FORMAT: http.StatusBadRequest, INVALID_URI_FORMAT: http.StatusBadRequest, // Member INVALID_MEMBER: http.StatusUnauthorized, ERROR_MEMBER_DB: http.StatusInternalServerError, // Task ERROR_TASK_DB: http.StatusInternalServerError, } ì—ëŸ¬ ë°˜í™˜ # ì§ì ‘ ì»¤ìŠ¤í…€í•œ ì—ëŸ¬ê°’ì„ ì…ë ¥ê°’ìœ¼ë¡œ í•´ì„œ contextë¥¼ í™œìš©í•´ Json í˜•íƒœë¡œ ë°˜í™˜í•´ì¤¬ë‹¤.\n// getCode is get Status code from codeMap. func getCode(flag ErrorType) *ErrorRes { return \u0026amp;ErrorRes{Code: codeMap[flag]} } func ErrorFunc(ctx *gin.Context, err *Error) { res := getCode(err.ErrorType) log.Println(err) ctx.AbortWithStatusJSON(res.Code, res) return } \u0026ldquo;ì €ë ‡ê²Œ í•˜ë©´ ì˜¤ë¥˜ê°€ ì œëŒ€ë¡œ ë°˜í™˜ë˜ì§€ ì•Šì„í…ë°?\u0026ldquo;ë¼ê³  ìƒê°í•˜ëŠ” ì‚¬ëŒì´ ìˆì„ ê²ƒì´ë‹¤. ì €ë•Œ ë‹¹ì‹œ ginì´ ì—ëŸ¬ë¥¼ ì‘ë‹µí•˜ëŠ” ë§¤ì»¤ë‹ˆì¦˜ì„ ì˜ ëª°ë¼ ë‹¨ìˆœí•˜ê²Œ AbortWithStatusJsonìœ¼ë¡œ ì‘ë‹µí•˜ë„ë¡ í–ˆë‹¤. ë¹„ë¡ ê²°ê³¼ëŠ” ì—ëŸ¬ json + ì„±ê³µ json ë‘˜ë‹¤ ë‚˜ì™”ì§€ë§Œ ë§ì´ë‹¤.\n1ì°¨ - Middlewareê°€ ìˆì—ˆë‹¤ê³ ìš”? # ginì˜ ì˜¤ë¥˜ ì²˜ë¦¬ ë§¤ì»¤ë‹ˆì¦˜ì„ ì œëŒ€ë¡œ ì´í•´í•˜ì§€ ëª»í•´ ë‹¨ìˆœí•˜ê²Œ ì‘ë‹µì„ ì²˜ë¦¬í–ˆë‹¤. ì´ì œëŠ” Middlewareë¥¼ ì œì‘í•¨ìœ¼ë¡œì¨ ì—ëŸ¬ ì‘ë‹µ ë°˜í™˜ì´ ìˆ˜ì›”í•˜ë„ë¡ êµ¬í˜„í–ˆë‹¤.\nì—ëŸ¬ ìƒíƒœ íƒ€ì… # ErrorType -\u0026gt; WebCodeë¡œ ì´ë¦„ì„ ë³€ê²½í–ˆìœ¼ë©°, ì—ëŸ¬ë¿ë§Œ ì•„ë‹ˆë¼ ìƒíƒœ ì „ì²´ë¥¼ í‘œì‹œí–ˆë‹¤. ì—¬ê¸°ì„œ ëˆˆì¹˜ ë¹ ë¥´ì‹  ë¶„ì€ ì•Œê² ì§€ë§Œ ì—ëŸ¬ íƒ€ì…ì—ëŠ” ìƒíƒœê°’ì„ ì§ì ‘ í¬í•¨í•˜ë„ë¡ êµ¬í˜„í–ˆë‹¤. ì™œëƒí•˜ë©´ ìƒíƒœ ì½”ë“œë¥¼ ì¶”ê°€í•  ì¼ì´ ë§ì€ë° ì‘ì—…ì„ ë‘ë²ˆí•´ì•¼ í•˜ê¸° ë•Œë¬¸ì´ë‹¤.\nTaskCreationSuccess WebCode = 220101 SubtaskCreationSuccess WebCode = 220151 ì˜ˆë¡œ 220101 ì´ë¼ë©´ 2(Task Service)/201(Status code)/01(Unique number)ë¡œ êµ¬ì„±í•˜ë„ë¡ í–ˆë‹¤.\nì—ëŸ¬ íƒ€ì…ê³¼ ë°˜í™˜ # ì´ì „ì—ëŠ” ì—ëŸ¬ íƒ€ì…ì„ Errorë¼ê³  ì •í–ˆì§€ë§Œ gin ë‚´ë¶€ì˜ ì—ëŸ¬ë¥¼ ì“°ë©´ì„œ í—·ê°ˆë¦¬ê¸° ì‹œì‘í–ˆë‹¤. ê·¸ë˜ì„œ NetErrorë¡œ ì´ë¦„ì„ ë³€ê²½í–ˆìœ¼ë©°, Description fieldëŠ” ì˜ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ê²ƒ ê°™ì•„ ì‚­ì œí–ˆë‹¤.\ntype NetError struct { Code codes.WebCode Err error } func NewNetError(code codes.WebCode, err error) *NetError { logrus.Errorf(\u0026#34;Code : %d, Error : %v\u0026#34;, code, err) if err != nil { return \u0026amp;NetError{Code: code, Err: err} } return \u0026amp;NetError{Code: code, Err: nil} } ì—ëŸ¬ëŠ” ë™ì¼í•˜ê²Œ codeë§Œ ë°˜í™˜í•˜ë„ë¡ êµ¬í˜„í–ˆë‹¤.\n// Response type ErrorResponse struct { Code codes.WebCode `json:\u0026#34;codes\u0026#34;` } func NewErrorResponse(code codes.WebCode) *ErrorResponse { return \u0026amp;ErrorResponse{Code: code} } ì„±ê³µ # ì‘ë‹µê°’ì„ ìƒê°í•´ë³´ë©´ í¬ê²Œ ë‘ ê°€ì§€ê°€ ì¡´ì¬í•œë‹¤.\në°ì´í„°ê°€ ì—†ëŠ” ê²½ìš° ë°ì´í„°ê°€ ìˆëŠ” ê²½ìš° ì´ ë‘ê°€ì§€ë¥¼ ë‚˜ëˆ ì„œ ë³„ë„ì˜ í•¨ìˆ˜ë¥¼ ë§Œë“¤ì—ˆë‹¤.\nfunc SuccessWith(ctx *gin.Context, code codes.WebCode, data any) { status := codes.GetStatus(code) res := NewSuccessResponseWith(code, data) ctx.Header(\u0026#34;Content-Type\u0026#34;, \u0026#34;application/json\u0026#34;) ctx.AbortWithStatusJSON(status, res) } func Success(ctx *gin.Context, code codes.WebCode) { status := codes.GetStatus(code) ctx.Header(\u0026#34;Content-Type\u0026#34;, \u0026#34;application/json\u0026#34;) res := NewSuccessResponse(code) ctx.JSON(status, res) } ì—ëŸ¬ ë°˜í™˜ ë¡œì§ì€ gin Middlewareë¥¼ ì‚¬ìš©í–ˆë‹¤. ìì„¸í•œ ì‚¬í•­ì€ ì•„ë˜ì˜ ê¸€ì„ ì°¸ê³ í•˜ê¸¸ ë°”ë€ë‹¤.\n2ì°¨ - í”„ë¡ íŠ¸ì—”ë“œë¥¼ í•˜ê³ ë‚˜ë‹ˆ\u0026hellip; # ì™œ ë°±ì—”ë“œì™€ í”„ë¡ íŠ¸ì—”ë“œê°€ ì§ê¿ì´ ë§ì•„ì•¼ í•˜ëŠ”ì§€ ì•Œ ê²ƒ ê°™ì•˜ë‹¤. í”ŒëŸ¬í„°ì˜ ê²½ìš°ì—ëŠ” ì‘ë‹µê°’ê³¼ ë˜‘ê°™ì€ í•„ë“œë¥¼ ê°€ì§„ ëª¨ë¸ë¡œ ë°˜í™˜í•´ì•¼ í•œë‹¤. ë§Œì•½ì— ì •í™•í•˜ê²Œ ë°›ì§€ ëª»í•˜ë©´, ì•„ë¬´ëŸ° ê°’ë„ ë°›ì„ ìˆ˜ ì—†ë‹¤.(ì‹¬ì§€ì–´ ìƒíƒœê°’ë„ ë§ì´ë‹¤.) í”ŒëŸ¬í„°ë¡œì¨ëŠ” í•´ê²° ë°©ì•ˆì„ ì°¾ì§€ ëª»í•´ì„œ ì„œë²„ì¸¡ì—ì„œ ì„±ê³µì´ë“  ì˜¤ë¥˜ë“  ëª¨ë‘ ë™ì¼í•œ í˜•íƒœë¡œ ë°˜í™˜í•˜ë„ë¡ êµ¬í˜„í•´ì•¼ í–ˆì—ˆë‹¤.\nResponse Format # ìœ„ì—ì„œ 1ì°¨, 2ì°¨ë¥¼ ë³´ë©´ êµ¬ì²´ì ì¸ ë©”ì„¸ì§€ê°€ ì—†ì—ˆë‹¤. ë©”ì„¸ì§€ë¥¼ ë„£ì§€ ì•Šì€ ì´ìœ ëŠ” í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ì €ëŸ°ê²ƒê¹Œì§€ ë³´ì—¬ì¤„ í•„ìš”ê°€ ì—†ë‹¤ê³  ìƒê°í•´ì„œì˜€ë‹¤. ê·¸ëŸ¬ë‚˜ ì•±ê°œë°œí•˜ë©´ì„œ ì •ë³´ê°€ ì—†ì–´ì„œ ì •ë§ í˜ë“¤ì—ˆë‹¤. ğŸ˜¥\nError Responseì˜ Best Practiceë¥¼ ì°¾ì•„ë³´ë‹ˆ ëŒ€ë¶€ë¶„ ìì²´ì ì¸ codeì™€ ì´ë¥¼ ì„¤ëª…í•˜ëŠ” ë©”ì„¸ì§€ê°€ í¬í•¨ë˜ì–´ ìˆì—ˆë‹¤.1 ì´ë²ˆì— ìˆ˜ì •í•œ ì‘ë‹µì—ì„œëŠ” ë©”ì„¸ì§€ë¥¼ ì¶”ê°€í•˜ê¸°ë¡œ í–ˆë‹¤.\nì—ëŸ¬ ìƒíƒœ íƒ€ì… # ì¼ë‹¨ ì§€ê¸ˆê¹Œì§€ ì‚¬ìš©í–ˆë˜ ì—ëŸ¬ ì½”ë“œë³´ë‹¤ ê¸¸ì´ë¥¼ ë” ì¶•ì†Œì‹œì¼°ë‹¤. ê·¸ë˜ì„œ ìì£¼ ì‚¬ìš©í•˜ëŠ” ìƒíƒœ ì½”ë“œë¥¼ ë°±ì˜ ìë¦¬ë¡œ ë‘ê³ , 1ì”© ì¹´ìš´íŠ¸ë¥¼ ì¶”ê°€í•˜ë©´ì„œ ì—ëŸ¬ ì½”ë“œë¥¼ ì •ì˜í–ˆë‹¤. ë˜í•œ ì—ëŸ¬ì½”ë“œì— ë§¤í•‘ë˜ëŠ” ì—ëŸ¬ ë©”ì„¸ì§€ë¥¼ ì¶”ê°€í•¨ìœ¼ë¡œì¨, ë™ì¼í•œ ì—ëŸ¬ ë©”ì„¸ì§€ë¥¼ ë°˜í™˜í•˜ë„ë¡ í–ˆë‹¤. ë©”ì„¸ì§€ëŠ” ì •í™•í•˜ê²Œ ì ì§€ ì•Šê³ , ë¬¸ì œë¥¼ ì „ë°˜ì ìœ¼ë¡œ ë³´ì—¬ì¤„ ìˆ˜ ìˆë„ë¡ ì‘ì„±í–ˆë‹¤.\nconst ( // 1xx is Bad Request error code InvalidHeader ErrorCode = 101 InvalidBody ErrorCode = 102 InvalidQuery ErrorCode = 103 // 2xx is Unauthorized error code BadAuthenticationData ErrorCode = 201 TokenExpired ErrorCode = 202 ... ) var errorMessage = map[ErrorCode]string{ InvalidHeader: \u0026#34;The provided header values are invalid.\u0026#34;, InvalidBody: \u0026#34;The body of the request is invalid.\u0026#34;, InvalidQuery: \u0026#34;The query parameters are invalid.\u0026#34;, ... } ì—ëŸ¬ íƒ€ì… # netErrorOptions ë¼ëŠ” ì˜µì…˜ì„ ì¶”ê°€ì‹œì¼°ëŠ”ë°, ì—¬ê¸°ì—ëŠ” ì„œë¹„ìŠ¤ì˜ ë©”íƒ€ ì •ë³´ê°€ í¬í•¨ë˜ì–´ ìˆë‹¤.\n// NetError have options and ErrorCode that contains status code. type NetError struct { // options is metadata about service options netErrorOptions // Type is a unique data that contains http status code. Code ErrorCode // Description is an error details. Description string // Err is an error message. Err error } ë©”íƒ€ ì •ë³´ë¡œì¨ íƒœê·¸ê°€ ìˆëŠ”ë°, ì„œë¹„ìŠ¤ ì´ë¦„ì„ ë¬¸ìì—´ë¡œ í‘œì‹œí•˜ëŠ” ê²ƒì´ë‹¤. íƒœê·¸ëŠ” ì„œë²„ì—ì„œ ë””ë²„ê¹…ì„ ì¡°ê¸ˆë” ìˆ˜ì›”í•˜ê²Œ í•˜ê¸° ìœ„í•´ì„œ ë„ì…í–ˆë‹¤. ì˜¤ë¥˜ì½”ë“œê°€ ëª¨ë‘ ë™ì¼í•´ì„œ ì–´ë–¤ ì„œë¹„ìŠ¤ì˜ ì˜¤ë¥˜ì¸ì§€ ëª…ì‹œí•˜ëŠ” ìš©ë„ë¡œ ì‚¬ìš©ëœë‹¤.\n// netErrorOptions is meta data about service type netErrorOptions struct { // tag is the service name tag string } ì´ íƒœê·¸ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹œì‘í• ë•Œ í•œë²ˆë§Œ ì„¤ì •í•˜ë„ë¡ í•¨ìœ¼ë¡œì¨, ëª¨ë“  NetErrorê°€ í•´ë‹¹ tagë¥¼ ê°€ì§€ë„ë¡ êµ¬í˜„í–ˆë‹¤.\nvar ( opts netErrorOptions ) // netErrorOptions is meta data about service type netErrorOptions struct { // tag is the service name tag string } // SetTag sets the service name func SetTag(tag string) { mu := sync.Mutex{} mu.Lock() defer mu.Unlock() opts.tag = tag } ì—ëŸ¬ ë°˜í™˜ # ì—ëŸ¬ëŠ” í¬ê²Œ ë‘ ê°€ì§€ë¡œ ë‚˜ëˆ ì ¸ ìˆë‹¤.\nStatus: ì‘ë‹µì˜ íƒ€ì… (\u0026ldquo;Success\u0026rdquo; or \u0026ldquo;Error\u0026rdquo;) Data : ì—ëŸ¬ ë°ì´í„° í˜¹ì€ ì„±ê³µ ì‹œ ë°˜í™˜í•  ë°ì´í„° // BaseResponse is common response that use in success and failed type BaseResponse struct { Status string `json:\u0026#34;status\u0026#34;` Data interface{} `json:\u0026#34;data\u0026#34;` } ë‹¤ë§Œ ìƒì„±ìë¥¼ ë§Œë“¤ë•Œ ì„±ê³µ, ì‹¤íŒ¨ ì—¬ë¶€ë¥¼ ë”°ë¡œ ë§Œë“¤ì—ˆë‹¤. ê·¸ ì´ìœ ëŠ” ì…ë ¥í•˜ëŠ” ê°’ì´ ë‹¤ ë‹¬ëê¸° ë•Œë¬¸ì´ë‹¤.\nì„±ê³µí•œ ê²½ìš° ë°˜í™˜í•˜ê³ ì í•˜ëŠ” ë°ì´í„°ë¥¼ Data í•„ë“œì— ë„£ê¸°ë§Œ í•˜ë©´ ëœë‹¤.\nfunc NewSuccessBaseResponse(data interface{}) *BaseResponse { return \u0026amp;BaseResponse{ Status: \u0026#34;Success\u0026#34;, Data: data, } } ê·¸ëŸ¬ë‚˜ ì˜¤ë¥˜ì¸ ê²½ìš°ëŠ” ë‹¤ë¥´ë‹¤. ë°˜í™˜í•  ì˜¤ë¥˜ íƒ€ì…ì€ í˜•ì‹í™”ë˜ì–´ ìˆìœ¼ë¯€ë¡œ, ErrorResponse êµ¬ì¡°ì²´ë¥¼ ë”°ë¡œ ë§Œë“¤ì–´ì„œ Data í•„ë“œì— ì €ì¥í–ˆë‹¤.\n// ErrorResponse is the error response format type ErrorResponse struct { Code ErrorCode `json:\u0026#34;code\u0026#34;` Message string `json:\u0026#34;message\u0026#34;` } func NewErrorBaseResponse(data NetError) *BaseResponse { res := ErrorResponse{Code: data.Code, Message: GetErrorMsg(data.Code)} return \u0026amp;BaseResponse{ Status: \u0026#34;Error\u0026#34;, Data: res, } } BaseResponseê°€ ë°˜í™˜ë˜ë©´, ë©”ì†Œë“œë¡œ ì‘ë‹µê°’ì„ ë°˜í™˜í•˜ë„ë¡ êµ¬í˜„í–ˆë‹¤.\n// Failed response failed formatted response. // It converts NetError to ErrorResponse to extract necessary things. func (b BaseResponse) Failed(ctx *gin.Context) { res := b.GetErrorData() status := parseStatusCode(res.Code) ctx.AbortWithStatusJSON(status, b) return } // OKSuccess uses when status code is 200 func (b BaseResponse) OKSuccess(ctx *gin.Context) { ctx.Header(\u0026#34;Content-Type\u0026#34;, \u0026#34;application/json\u0026#34;) ctx.AbortWithStatusJSON(200, b) } í…ŒìŠ¤íŠ¸ # gin í…ŒìŠ¤íŠ¸ ì‚¬ë¡€2ë¥¼ ì°¸ê³ í•´ì„œ ì„±ê³µí–ˆì„ ê²½ìš°ì˜ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì‘ì„±í•´ë³´ì•˜ë‹¤.\ní…ŒìŠ¤íŠ¸ ì½”ë“œëŠ” í…Œì´ë¸” ì¤‘ì‹¬ í…ŒìŠ¤íŠ¸(Table-Driven Test) ë°©ì‹3ì„ ì±„íƒí–ˆë‹¤. ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ê°€ ë¹„ìŠ·í•œ êµ¬ì¡°ë¡œ ì´ë¤„ì ¸ ìˆëŠ” ê²½ìš°, í…Œì´ë¸” ì¤‘ì‹¬ í…ŒìŠ¤íŠ¸ë¡œ ìˆ˜í–‰í•˜ë©´ ì½”ë“œ ì¤‘ë³µì„ í”¼í•  ìˆ˜ ìˆì–´ ë¡œì§ì„ ë³€ê²½í•˜ê±°ë‚˜ ìƒˆë¡œìš´ ì¼€ì´ìŠ¤ë¥¼ ì¶”ê°€í•˜ê¸° ì‰½ë‹¤ëŠ” ì¥ì ì´ ìˆë‹¤. ì‘ì„±í•œ í…ŒìŠ¤íŠ¸ ì½”ë“œì—ëŠ” í…ŒìŠ¤íŠ¸ êµ¬ì¡°ê°€ ë¹„ìŠ·í•˜ê³ , ë¼ìš°íŒ… ì„¤ì • ë“± ê³µí†µëœ ë¶€ë¶„ì´ ë§ì•„ì„œ í…Œì´ë¸” ì¤‘ì‹¬ í…ŒìŠ¤íŠ¸ë¥¼ ì„ íƒí•˜ê²Œ ë˜ì—ˆë‹¤.\nfunc setupRouter() *gin.Engine { r := gin.Default() r.Use(errorutils.ErrorMiddleware()) return r } func TestSuccessResponse(t *testing.T) { r := setupRouter() res := errorutils.NewSuccessBaseResponse(nil) // Set table tests := []struct { description string fn func(*gin.Context) expectedCode int path string }{ { // Ok Success description: \u0026#34;OKSuccess\u0026#34;, fn: func(c *gin.Context) { res.OKSuccess(c) }, expectedCode: 200, path: \u0026#34;/test/ok\u0026#34;, }, { // Created Success description: \u0026#34;CreatedSuccess\u0026#34;, fn: func(c *gin.Context) { res.CreatedSuccess(c) }, expectedCode: 201, path: \u0026#34;/test/created\u0026#34;, }, } for _, tc := range tests { t.Run(tc.description, func(t *testing.T) { w := httptest.NewRecorder() req, _ := http.NewRequest(\u0026#34;GET\u0026#34;, tc.path, nil) // Specific handler function and serve r.GET(tc.path, tc.fn) r.ServeHTTP(w, req) if w.Code != tc.expectedCode { t.Errorf(\u0026#34;Expected %d, got %d\u0026#34;, tc.expectedCode, w.Code) } }) } } í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì‹¤í–‰í•˜ë©´ ì•„ë˜ì™€ ê°™ì€ ê²°ê³¼ë¥¼ ì–»ì„ ìˆ˜ ìˆë‹¤.\në§ˆì¹˜ë©° # í•˜ë‚˜ì˜ ê°„ë‹¨í•œ CRUDê°€ ìˆëŠ” ì„œë¹„ìŠ¤ 2ê°œë¥¼ ê°€ì§€ê³  ì½”ë“œë¥¼ ì—¬ëŸ¬ë²ˆ ìˆ˜ì •í–ˆë‹¤. ê·¸ ê³¼ì •ì—ì„œ ë‹¤ì–‘í•œ ì˜¤ë¥˜ë¥¼ ë§Œë‚¬ê³ , í…ŒìŠ¤íŠ¸ ì½”ë“œì˜ ì¤‘ìš”ì„±ë„ í™•ì‹¤íˆ ì•Œì•˜ë‹¤. íŠ¹íˆ ì´ë²ˆì— í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì‘ì„±í•˜ë©´ì„œ ì˜¤ë¥˜ë¥¼ ë§ì´ ë§ˆì£¼ í–ˆëŠ”ë°, ì´ë¥¼ ì¬ë¹ ë¥´ê²Œ ìˆ˜ì •í•˜ë©´ì„œ í…ŒìŠ¤íŠ¸ì˜ ì¤‘ìš”ì„±ì„ ëŠë¼ê²Œ ë˜ì—ˆë‹¤.\nhttps://pjh3749.tistory.com/273\u0026#160;\u0026#x21a9;\u0026#xfe0e;\nhttps://gin-gonic.com/docs/testing/\u0026#160;\u0026#x21a9;\u0026#xfe0e;\nhttps://bugoverdose.github.io/development/go-table-driven-tests/\u0026#160;\u0026#x21a9;\u0026#xfe0e;\n","date":"11 May 2024","externalUrl":null,"permalink":"/project/todopoint/gin-fix1-error/","section":"Projects","summary":"Goë¥¼ í™œìš©í•˜ì—¬ ì§ì ‘ 2ê°œì˜ ì„œë¹„ìŠ¤ë¥¼ ë§Œë“¤ê³  ë‚˜ë‹ˆ, êµ¬í˜„í• ë•Œ ì§€ë‚˜ì³¤ë˜ ì—ëŸ¬ë“¤ì´ í° ëˆˆë©ì´ë¡œ ë³€í•´ì„œ ë®ì³ì™”ë‹¤.","title":"Todopoint ì„œë²„ì½”ë“œ ê°œì„ ê¸° - 1. ê³µë™ ì—ëŸ¬ ì²˜ë¦¬í•˜ê¸°","type":"project"},{"content":"","date":"8 May 2024","externalUrl":null,"permalink":"/tags/flutter/","section":"Tags","summary":"","title":"Flutter","type":"tags"},{"content":" MVVM ì•„í‚¤í…ì³ # Model, ViewModel, Viewì˜ ì¤„ì„ë§ Model : ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë°ì´í„° ë° ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ View Model : Viewì— í‘œì‹œë˜ëŠ” ë°ì´í„°ë¥¼ ê´€ë¦¬í•œë‹¤. ìƒíƒœë¥¼ ë³€ê²½ì‹œí‚¤ê³  ë³´ì—¬ì£¼ëŠ” ë¡œì§ì´ í¬í•¨ë˜ì–´ ìˆë‹¤. View : ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ _ ì¶œì²˜ - : https://medium.com/flutterworld/flutter-mvvm-architecture-f8bed2521958 _\nìƒíƒœ ê´€ë¦¬ ë„êµ¬ # ìœ„ì—ì„œ View Modelì—ëŠ” ìƒíƒœë¥¼ ë³€ê²½í•˜ê³  í‘œì‹œí•´ì£¼ëŠ” ë¡œì§ì´ í•„ìš”í•˜ë‹¤ê³  ìˆë‹¤. ì´ê±¸ ì‰½ê²Œ í•´ì£¼ëŠ” í”ŒëŸ¬í„° ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ìˆë‹¤. ëŒ€í‘œì ìœ¼ë¡œ GetX, Provider, Riverpod, blocê°€ ìˆë‹¤.\nê¸°ìˆ ì ì¸ ì¸¡ë©´ì—ì„œ ë³¸ë‹¤ë©´ Provider, blocëŠ” BuildContextë¥¼ í†µí•´ ì˜ì¡´ì„±ì„ ì£¼ì…í•œ ë°˜ë©´ GetXëŠ” ê·¸ë ‡ì§€ ì•ŠëŠ”ë‹¤. GetXê°€ ìƒì‚°ì„± ì¸¡ë©´ì—ì„œëŠ” ë”ìš± íš¨ìœ¨ì ì´ë‚˜ BuildContextë¥¼ ì‚¬ìš©í•œ ì˜ì¡´ì„± ì£¼ì…ì˜ ë¶€ì¬ë¡œ ì˜ˆê¸°ì¹˜ ëª»í•œ ë¬¸ì œê°€ ë°œìƒí•  ìˆ˜ ìˆë‹¤. RiverPodê³¼ Providerì˜ ê°œë°œìëŠ” ë™ì¼í•˜ë©°, Providerì˜ ë‹¨ì ì„ ë³´ì™„í•˜ì—¬ Riverpodë¥¼ ë§Œë“¤ì—ˆë‹¤ê³  í•œë‹¤. ê·¸ë˜ì„œ ì „ë°˜ì ì¸ ë§¤ì»¤ë‹ˆì¦˜ì€ ë¹„ìŠ·í•˜ë‹¤. 1\nìµœì¢…ì ìœ¼ë¡œ Riverpodë¥¼ ì„ íƒí•˜ê²Œ ë˜ì—ˆë‹¤.\nBuildContextë¥¼ ì‚¬ìš©í•œ ì˜ì¡´ì„± ì£¼ì… # BuildContextëŠ” Flutterê°€ ìµœìƒìœ„ ìœ„ì ¯ ë…¸ë“œë¶€í„° í•˜ìœ„ ë…¸ë“œì—ê²Œ BuildContextë¥¼ ì „ë‹¬í•˜ë©´ì„œ ê·¸ë ¤ë‚˜ê°„ë‹¤. ì¦‰, BuildContextë¥¼ í†µí•´ ìµœìƒìœ„ ë¶€ëª¨ ë…¸ë“œë¥¼ ì¶”ì í•˜ë©´ì„œ ìì‹ ì— ëŒ€í•œ ì—¬ëŸ¬ ì •ë³´ë“¤ì„ ì°¾ì„ ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì´ë‹¤. 2\n_ ì¶œì²˜ - ë¼ì¸ ë¸”ë¡œê·¸, # Flutter ì¸ê¸° ì•„í‚¤í…ì²˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ 3ì¢… ë¹„êµ ë¶„ì„ - GetX vs BLoC vs Provider\ní”„ë¡œì íŠ¸ êµ¬ì¡° # í”„ë¡œì íŠ¸ êµ¬ì¡°ëŠ” ì´ 4ê°œì˜ í´ë”ë¡œ ì´ë¤„ì ¸ ìˆë‹¤.\nview : ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ë¥¼ ë‚˜íƒ€ë‚¸ë‹¤. provider : ìƒíƒœê°’ì„ ê´€ë¦¬í•œë‹¤. repository : ë°ì´í„°ë¥¼ ì ‘ê·¼í•˜ê¸° ìœ„í•´ ì‚¬ìš©ëœë‹¤. ì„œë²„ì— ëŒ€í•œ ìš”ì²­ë„ í¬í•¨ëœë‹¤. model : ì‹¤ì œë¡œ ì‚¬ìš©í•  ë°ì´í„°ë¥¼ ì •ì˜í•œë‹¤. ì˜ˆì‹œ - TodoPoint Main View # TodopointëŠ” í• ì¼ì„ ë§ˆë¬´ë¦¬í•˜ë©´ í¬ì¸íŠ¸ë¥¼ ì–»ëŠ” ì•±ì´ë‹¤. ê·¸ë˜ì„œ TodoScreenì—ì„œ í‘œì‹œë˜ì–´ì•¼ í•  ìƒíƒœê°€ í¬ê²Œ ë‘ ê°€ì§€ì´ë‹¤.\nìº˜ë¦°ë”ì— ìˆëŠ” í¬ì¸íŠ¸ í• ì¼ ëª©ë¡ ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ë¡œ ìš”ì²­ì„ ë³´ë‚´ê²Œ ë˜ë©´, providerë¥¼ ì§€ë‚˜ repositoryë¥¼ í™œìš©í•´ ì„œë²„ì™€ í†µì‹ í•˜ì—¬ ì›í•˜ëŠ” ì •ë³´ë¥¼ ì–»ëŠ”ë‹¤. providerì— ìƒíƒœë¥¼ ì €ì¥(ìºì‹±)í•˜ì—¬ ë‹¤ì‹œ ì‚¬ìš©ìì—ê²Œ ë³´ì—¬ì£¼ë„ë¡ êµ¬í˜„í•  ìˆ˜ ìˆë‹¤.\nReference # Flutter: MVVM Architecture MVVM Pattern in Flutter 1 -MVVMì˜ ê¸°ë³¸ êµ¬ì¡° ë¼ì¸ ë¸”ë¡œê·¸, Flutter ì¸ê¸° ì•„í‚¤í…ì²˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ 3ì¢… ë¹„êµ ë¶„ì„ - GetX vs BLoC vs Provider https://engineering.linecorp.com/ko/blog/flutter-architecture-getx-bloc-provider\u0026#160;\u0026#x21a9;\u0026#xfe0e;\nhttps://riverpod.dev/docs/from_provider/provider_vs_riverpod#reading-providers-buildcontext\u0026#160;\u0026#x21a9;\u0026#xfe0e;\n","date":"8 May 2024","externalUrl":null,"permalink":"/project/todopoint/flutter-project-architecture/","section":"Projects","summary":"MVVM ì•„í‚¤í…ì³ # Model, ViewModel, Viewì˜ ì¤„ì„ë§ Model : ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë°ì´í„° ë° ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ View Model : Viewì— í‘œì‹œë˜ëŠ” ë°ì´í„°ë¥¼ ê´€ë¦¬í•œë‹¤.","title":"Flutter - Flutter í”„ë¡œì íŠ¸ êµ¬ì¡°","type":"project"},{"content":"","date":"1 May 2024","externalUrl":null,"permalink":"/tags/aws/","section":"Tags","summary":"","title":"AWS","type":"tags"},{"content":" EKS # Amazon Web Services(AWS)ì—Â KubernetesÂ ì»¨íŠ¸ë¡¤ í”Œë ˆì¸ì„ ì„¤ì¹˜, ìš´ì˜ ë° ìœ ì§€ ê´€ë¦¬í•  í•„ìš”ê°€ ì—†ëŠ” ê´€ë¦¬í˜• ì„œë¹„ìŠ¤ì´ë‹¤1.\nECS vs EKS # ë‘˜ ë‹¤ ì»¨í…Œì´ë„ˆ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜ì´ë¼ëŠ” ì ì—ì„œ ê³µí†µì ì„ ê°€ì§ ECSëŠ” AWSê°€ ë§Œë“  ìì²´ì ì¸ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜ êµ¬ì¡°ë¡œ K8S êµ¬ì¡°ì™€ ì™„ì „ ë‹¤ë¦„ K8SëŠ” ì˜¤í”ˆì†ŒìŠ¤ê°€ í¬ê²Œ í™œì„±í™”ë˜ì–´ ìˆê³ , ë‹¤ì–‘í•œ í”ŒëŸ¬ê·¸ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŒ ECSëŠ” ì˜¤í”ˆì†ŒìŠ¤ê°€ í¬ê²Œ í™œì„±í™”ë˜ì–´ ìˆì§€ ì•ŠìŒ. Auto-scaling ì¸¡ë©´ì—ì„œ EKSëŠ” ìˆ˜ë™ ë° ìë™ ë°°í¬ê°€ ê°€ëŠ¥í•˜ì§€ë§Œ ECSëŠ” ìˆ˜ë™ìœ¼ë¡œë§Œ ê°€ëŠ¥í•˜ë‹¤. ì˜¤ë¥˜ ìˆ˜ì •í•˜ëŠ”ë° ECSëŠ” ì „ë¬¸ê°€ê°€ í•„ìš”í•¨ ğŸ“Œ ìì„¸í•œ ì‚¬í•­ì€ ë¬¼í†µê¿€ê¿€ì´ë‹˜ì˜ ë¸”ë¡œê·¸, [AWS] ECS vs Kubernetesë¥¼ ì°¸ê³ í•˜ê¸¸ ë°”ëŒ.\nEKSê°€ ë¬´ì¡°ê±´ ì •ë‹µì€ ì•„ë‹ˆë‹¤. í”„ë¡œì íŠ¸ì— ë”°ë¼ì„œëŠ” ECSê°€ ë” ì í•©í•œ ì„ íƒì§€ì¼ ìˆ˜ ìˆë‹¤.\nECS ì ìš© ì‚¬ë¡€ - ë°ê¸€ ì™œ EKS ì„¤ì¹˜ëŠ” ì–´ë ¤ìš´ê°€? # ìš°ë¦¬ê°€ ì•Œê³  ìˆëŠ” ì¿ ë²„ë„¤í‹°ìŠ¤ êµ¬ì¡°ì™€ ë‹¬ë¦¬ ì¿ ë²„ë„¤í‹°ìŠ¤ëŠ” ì¼ë¶€ ë„êµ¬ë§Œ ì œê³µí•˜ê³ , ë‚˜ë¨¸ì§€ëŠ” ë³„ë„ì˜ ì„¤ì¹˜ê°€ í•„ìš”í•˜ë‹¤. ì´ëŸ° ì´ìœ ë¡œ ë²„ì „ ê´€ë¦¬ê°€ ì–´ë ¤ì›Œì§€ê¸°ë„ í•œë‹¤.\nì¿ ë²„ë„¤í‹°ìŠ¤ ì œê³µ : kube-proxy, kubelet CNCF Graduated Projectë¥¼ ë³´ë©´ etcd, coreDNS ë“±ì„ ë³¼ ìˆ˜ ìˆë‹¤. EKS êµ¬ì¡° # ì•ì„œ ë§í–ˆë“¯ì´ ì§ì ‘ êµ¬ì¶•í•˜ê²Œ ë˜ë©´, ê´€ë¦¬í•´ì•¼ í•˜ëŠ” ìš”ì†Œë“¤ì´ ë§ë‹¤. ì´ëŸ¬í•œ ì–´ë ¤ì›€ì„ ëœì–´ë‚´ê³ ì EKSë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. EKSëŠ” ê´€ë¦¬í˜• \bì„œë¹„ìŠ¤ë¡œì„œ Control Planeë¥¼ ì§ì ‘ êµ¬ì„±í•˜ì§€ ì•Šê³  K8Së¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. ì¶œì²˜ - https://kubernetes.io/docs/concepts/architecture/\nEKS íŠ¹ì§• # EKS CNIë¥¼ í™œìš©í•˜ì—¬ VPC ë„¤íŠ¸ì›Œí¬ ìƒì—ì„œ íŒŒë“œê°„ í†µì‹  ê°€ëŠ¥ IAMì„ í™œìš©í•˜ì—¬ ê¶Œí•œ ì„¤ì • ê°€ëŠ¥ AWSê°€ ê°€ìš© ì˜ì—­ë³„ API Server ,etcd ë°°í¬í•˜ì—¬ ê³ ê°€ìš©ì„± ë³´ì¥ eksctlë¥¼ í™œìš©í•˜ì—¬ ì›Œì»¤ë…¸ë“œë¥¼ customí•  ìˆ˜ ìˆìŒ. ğŸ“Œ ìì„¸í•œ ì‚¬í•­ì€ Jaden Parkë‹˜ì˜ ë¸”ë¡œê·¸, Amazon EKS ë€?ë¥¼ ì°¸ê³ í•˜ê¸¸ ë°”ë€ë‹¤.\nAWS Side Workflow # ì¶œì²˜- https://nearhome.tistory.com/128\nì¿ ë²„ë„¤í‹°ìŠ¤ì˜ api ì„œë²„ë¥¼ ê° ê°€ìš©ì˜ì—­ì— ë°°í¬ api ë°ì´í„°, ì¿ ë²„ë„¤í‹°ìŠ¤ì˜ ìƒíƒœ ë°ì´í„°ë¥¼ í™•ì¸í•˜ê¸° ìœ„í•´ etcdë¥¼ ê°™ì´ ë°°í¬ ì¿ ë²„ë„¤í‹°ìŠ¤ì—ì„œ ì˜¤ëŠ” call ì— ëŒ€í•œ IAM êµ¬ì„± ì¿ ë²„ë„¤í‹°ìŠ¤ ë§ˆìŠ¤í„° ë…¸ë“œì˜ ì˜¤í† ìŠ¤ì¼€ì¼ë§ ì„¤ì • í´ëŸ¬ìŠ¤í„°ê°€ ì•ˆì •ì ìœ¼ë¡œ êµ¬í˜„í•˜ë„ë¡ ì—¬ê¸°ì— ì—°ê²°í•  ìˆ˜ ìˆëŠ” ë¡œë“œë°¸ëŸ°ì„œë¥¼ êµ¬ì„± Reference # ì´ˆë³´ìë¥¼ ìœ„í•œ EKS ë§› ë³´ê¸° ECS vs Kubernetes https://docs.aws.amazon.com/ko_kr/eks/latest/userguide/what-is-eks.html\u0026#160;\u0026#x21a9;\u0026#xfe0e;\n","date":"1 May 2024","externalUrl":null,"permalink":"/posts/what-is-eks/","section":"Posts","summary":"EKS # Amazon Web Services(AWS)ì—Â KubernetesÂ ì»¨íŠ¸ë¡¤ í”Œë ˆì¸ì„ ì„¤ì¹˜, ìš´ì˜ ë° ìœ ì§€ ê´€ë¦¬í•  í•„ìš”ê°€ ì—†ëŠ” ê´€ë¦¬í˜• ì„œë¹„ìŠ¤ì´ë‹¤1.","title":"AWS - EKSë€ ë¬´ì—‡ì¸ê°€","type":"posts"},{"content":"","date":"1 May 2024","externalUrl":null,"permalink":"/tags/eks/","section":"Tags","summary":"","title":"EKS","type":"tags"},{"content":"","date":"1 May 2024","externalUrl":null,"permalink":"/tags/kubernetes/","section":"Tags","summary":"","title":"Kubernetes","type":"tags"},{"content":" Introduction # Terraform ì½”ë“œë¥¼ ë¶„ì„í•˜ê³  ìˆì—ˆë‹¤. ì–´ë””ì—ì„œëŠ” IAMì„ ì“°ê³ , ì–´ë””ì—ì„œëŠ” Profileì„ ì“´ë‹¤. ê³¼ì—° ê·¸ ë‘˜ì˜ ì°¨ì´ì ì€ ë¬´ì—‡ì¼ê¹Œ? ì•Œì•„ë³´ë„ë¡ í•˜ì!\nProfile # Amazon Ec2ëŠ” IAM roleì„ ê°€ì§„ profileì„ ì‚¬ìš©í•˜ê²Œ ëœë‹¤.\nì§ˆë¬¸ 1. awsclië¥¼ í†µí•´ profileì„ ì§€ì •í•  ìˆ˜ ìˆëŠ”ë°, ì´ê²ƒë„ Instance Profileì¸ê°€? # If you use the AWS CLI, API, or an AWS SDK to create a role, you create the role and instance profile as separate actions, with potentially different names. If you then use the AWS CLI, API, or an AWS SDK to launch an instance with an IAM role or to attach an IAM role to an instance, specify the instance profile name. ì¶œì²˜ - ê³µì‹ ë¬¸ì„œ\nì§ˆë¬¸ì´ ì˜ëª»ë˜ì—ˆë‹¤. EC2ëŠ” í•´ë‹¹ IAM Roleì„ ê°€ì§„ Profileì„ ì‚¬ìš©í•œë‹¤. ê·¸ë˜ì„œ awscliì˜ ê²½ìš° \u0026ndash;profileì„ í†µí•´ ì§ì ‘ profile ì´ë¦„ì„ ì§€ì •í•  ìˆ˜ ìˆë‹¤. ì™œ í•„ìš”í• ê¹Œ? # aws clië¥¼ ì‚¬ìš©í•  ë•Œ profile ê¸°ëŠ¥ì„ ì´ìš©í•˜ë©´ ì—¬ëŸ¬ê°œì˜ ìê²© ì¦ëª…ì„ ë“±ë¡í•˜ê³  ìŠ¤ìœ„ì¹­í•´ì„œ íš¨ìœ¨ì ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\nì¶œì²˜ - https://cloudest.oopy.io/posting/101\nì§ˆë¬¸ 2. IAM Roleê³¼ì˜ ì°¨ì´ì ì€? # Profileì´ í•„ìš”í•œ ì´ìœ ëŠ” ì—¬ëŸ¬ê°œì˜ ìê²© ì¦ëª…ì„ ë“±ë¡í•˜ê³  ìŠ¤ìœ„ì¹­í•´ì„œ íš¨ìœ¨ì ìœ¼ë¡œ ì‚¬ìš©í•˜ê¸° ìœ„í•¨ì´ë¼ê³  í–ˆë‹¤. íŠ¹ì§•ì„ ë´¤ì„ë•Œ IAMì˜ Roleê³¼ ë¹„ìŠ·í•´ ë³´ì˜€ë‹¤.\nRoles are designed to be â€œassumedâ€ by other principals which do define â€œwho am I?â€, such as users, Amazon services, and EC2 instances An instance profile, on the other hand, defines â€œwho am I?â€ Just like an IAM user represents a person, an instance profile represents EC2 instances. The only permissions an EC2 instance profile has is the power to assume a role.\nì¶œì²˜ - https://www.quora.com/In-AWS-what-is-the-difference-between-a-role-and-an-instance-profile\nIAM Roleì€ ë¬´ì—‡ì„ í•  ìˆ˜ ìˆëŠ”ì§€ì— ëŒ€í•œ í–‰ìœ„ë¥¼ ì •ì˜í•˜ëŠ” ê²ƒì´ë¼ë©´ Profile InstanceëŠ” \u0026ldquo;ëˆ„ê°€ ë§Œë“¤ì—ˆëŠ”ì§€ë¥¼ ì •ì˜í•˜ê¸°\u0026rdquo; ìœ„í•¨ì´ë¼ë©´ ë³´ë©´ ëœë‹¤.\nConclusion # ë‚´ê°€ ì´ëŸ¬í•œ ê¶ê¸ˆì¦ì„ ê°€ì§€ê²Œ ëœ ê²ƒì€ IAMì„ í•œì‚¬ëŒì—ê²Œë§Œ ë¶€ì—¬ëœë‹¤ê³  ìƒê°í–ˆê¸° ë•Œë¬¸ì´ì—ˆë‹¤. ê·¸ëŸ° ë§¥ë½ì—ì„œëŠ” profileì´ í•„ìš” ì—†ê¸° ë•Œë¬¸ì´ë‹¤. Reference # https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_use_switch-role-ec2_instance-profiles.html https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/iam-roles-for-amazon-ec2.html ","date":"16 April 2024","externalUrl":null,"permalink":"/posts/iam-and-profile/","section":"Posts","summary":"Introduction # Terraform ì½”ë“œë¥¼ ë¶„ì„í•˜ê³  ìˆì—ˆë‹¤.","title":"AWS - IAM ê·¸ë¦¬ê³  Profile","type":"posts"},{"content":"ì´ì „ì—ëŠ” Ginì´ ì–´ë–»ê²Œ ì˜ˆì™¸ ì²˜ë¦¬ë¥¼ í•˜ëŠ”ì§€ ì–¸ê¸‰í–ˆë‹¤. ì´ì œë¶€í„° ì§ì ‘ êµ¬í˜„í•˜ê³ ì í•œë‹¤.\nError Wrapping # ì§ì ‘ ì œì‘í•œ ì—ëŸ¬ ì½”ë“œì¸ WebCodeì™€ ì—ëŸ¬ë¥¼ ê°ì‹¼ NetErrorë¥¼ ë§Œë“¤ì—ˆë‹¤.\ntype NetError struct { Code codes.WebCode Err error } í”„ë¡œì íŠ¸ êµ¬í˜„í• ë•Œ ì£¼ë¡œ gin í˜¹ì€ ent ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì“´ë‹¤. ë³„ë„ì˜ Error êµ¬ì¡°ì²´(NetError)ë¥¼ ì •ì˜í•¨ìœ¼ë¡œì¨ Errì— gin í˜¹ì€ ent ì—ëŸ¬ë¥¼ ë‹´ê² ë‹¤ëŠ” ì˜ë¯¸ì¸ ê²ƒì´ë‹¤.\nGinì—ì„œì˜ ì˜ˆì™¸ ì²˜ë¦¬ # Gin Error() í•¨ìˆ˜ì— ì˜í•˜ë©´ Ginì˜ Contextì— Errorë¥¼ ë‹´ì€ í›„ì— Middlewareì—ì„œ ì²˜ë¦¬í•˜ëŠ” ê²ƒì„ ê¶Œì¥í•˜ê³  ìˆë‹¤.\nError attaches an error to the current context. The error is pushed to a list of errors. It\u0026rsquo;s a good idea to call Error for each error that occurred during the resolution of a request. A middleware can be used to collect all the errors and push them to a database together, print a log, or append it in the HTTP response. Error will panic if err is nil.\në¼ì´ë¸ŒëŸ¬ë¦¬ ì½”ë“œë¥¼ ë³´ë©´ Errors í•„ë“œê°€ ì •ì˜ë˜ì–´ ìˆëŠ”ë°, errorMsgëŠ” []*Error ì—ëŸ¬ ë¦¬ìŠ¤íŠ¸ë¡œ íƒ€ì…ì„ ê°€ì§€ê³  ìˆë‹¤. ìœ„ì˜ ì„¤ëª…ëŒ€ë¡œ errorì˜ ë¦¬ìŠ¤íŠ¸ê°€ Context ë‚´ë¶€ì— êµ¬í˜„ë˜ì–´ ìˆëŠ” ê²ƒì´ë‹¤.\n// gin/context.go type Context struct { // ... Errors errorMsgs // .. } // gin/errors.go type errorMsgs []*Error ì¦‰, ctx.Errorë¥¼ í™œìš©í•˜ì—¬ ì…ë ¥ë°›ì€ ì—ëŸ¬ë¥¼ Ginì˜ ì—ëŸ¬ë¡œ ê°ì‹¼ í›„ì— Contextì˜ Errors ë¦¬ìŠ¤íŠ¸ì— ë„£ê²Œ ëœë‹¤.\n// gin/context.go // Error attaches an error to the current context. The error is pushed to a list of errors.// It\u0026#39;s a good idea to call Error for each error that occurred during the resolution of a request.// A middleware can be used to collect all the errors and push them to a database together, // print a log, or append it in the HTTP response. // Error will panic if err is nil. func (c *Context) Error(err error) *Error { if err == nil { panic(\u0026#34;err is nil\u0026#34;) } var parsedError *Error ok := errors.As(err, \u0026amp;parsedError) if !ok { parsedError = \u0026amp;Error{ Err: err, Type: ErrorTypePrivate, } } c.Errors = append(c.Errors, parsedError) return parsedError } Context ë‚´ë¶€ì— ìˆëŠ” Error ë¦¬ìŠ¤íŠ¸ëŠ” Middlewareì—ì„œ ì²˜ë¦¬í•˜ê²Œ ëœë‹¤.\nGinì—ì„œëŠ” HandlerFuncë¥¼ sliceë¡œ êµ¬í˜„ëœ HandlerChainì´ ìˆëŠ”ë°, ì´ëŠ” Ginì´ ê°ê°€ì§€ì˜ Handlerë¥¼ Chainë‚´ì— ë„£ê³  ì²˜ë¦¬í•˜ëŠ” ê²ƒì´ë‹¤.\ntype HandlersChain []HandlerFunc ê·¸ëŸ¼ ì˜¤ë¥˜ë¥¼ ì–´ë–»ê²Œ ë°œìƒì‹œí‚¤ë©´ ë ê¹Œ? HandlerChain ë‚´ì— ìˆëŠ” ëŒ€ê¸° ì¤‘ì¸(Pending) Handlerë¥¼ í˜¸ì¶œí•˜ì§€ ì•Šë„ë¡ í•˜ë©´ëœë‹¤. ì¦‰, Contextë¥¼ Abortí•˜ë©´ ë˜ëŠ” ê²ƒì´ë‹¤. ê·¸ ì´í›„ì— ì²˜ë¦¬í•  Handlerê°€ ì—†ì–´ì§€ë©´ì„œ ì¢…ë£Œê°€ ëœë‹¤.\nAbort prevents pending handlers from being called. Note that this will not stop the current handler. Let\u0026rsquo;s say you have an authorization middleware that validates that the current request is authorized. If the authorization fails (ex: the password does not match), call Abort to ensure the remaining handlers for this request are not called.\ní”„ë¡œì íŠ¸ì— ì ìš©í•˜ê¸° # ì ˆì°¨ # ìœ„ì˜ ë‚´ìš©ì„ ê°€ì§€ê³  ì‹¤ì œë¡œ ì ìš©í•´ë³´ì. í”„ë¡œì íŠ¸ êµ¬ì„±ì€ 3ê³„ì¸µìœ¼ë¡œ ì»¤ìŠ¤í…€ ì—ëŸ¬ ê°ì‹¸ê¸°ëŠ” ì„œë¹„ìŠ¤ ë¡œì§ì— ìˆ˜í–‰í•˜ë„ë¡ í–ˆë‹¤.\nService ê³„ì¸µì— Error Wrappingì„ í•œë‹¤. Controllerì— context ë‚´ì— ìˆëŠ” ì—ëŸ¬ ë¦¬ìŠ¤íŠ¸ì— ì˜ˆì™¸ë¥¼ ë„£ëŠ”ë‹¤. Middlewareì— Error Wrappingí•œ ê²ƒì„ Unwrapping í•˜ë©´ì„œ ì˜ˆì™¸ íƒ€ì…ì„ í•™ì¸í•œë‹¤. ì»¤ìŠ¤í…€ ì—ëŸ¬ë¼ë©´ WebCodeì— ë”°ë¥¸ ì‘ë‹µê°’ì„ ë°˜í™˜í•œë‹¤. ê·¸ë¦¼ìœ¼ë¡œ í‘œí˜„í•˜ìë©´ ì•„ë˜ì™€ ê°™ë‹¤. ì½”ë“œ # ì½”ë“œëŠ” ì•„ë˜ì˜ ë‘ ì‚¬ì´íŠ¸ë¥¼ ì°¸ê³ í–ˆìŠµë‹ˆë‹¤.\nNaver D2, Golang, ê·¸ëŒ€ë“¤ì€ ì–´ë–»ê²Œ í•  ê²ƒì¸ê°€ - 3. error ë˜í•‘ Naver D2, Golang, ê·¸ëŒ€ë“¤ì€ ì–´ë–»ê²Œ í•  ê²ƒì¸ê°€ - 4. error í•¸ë“¤ë§ Service Layer # Persistence Layerì—ì„œ ì–»ì€ ì—ëŸ¬ ê°’ì„ ì§ì ‘ ë°›ì€ í›„ì— Service ê³„ì¸µì—ì„œ ì ì ˆí•˜ê²Œ NetErrorë¡œ ê°ì‹¼ë‹¤.\n// service func (s *MemberService) CreateMember(ctx *gin.Context, req data.RegisterReq) (*ent.Member, *errorutils.NetError) { // Check member Exist existedMem, err := s.Store.GetMemberByEmail(ctx, req.Email) if err != nil { return nil, \u0026amp;errorutils.NetError{Code: codes.MemberInternalServerError, Err: err} } if ent.IsNotFound(err) { mem, err2 := s.Store.Create(ctx, req) if err2 != nil { return nil, \u0026amp;errorutils.NetError{Code: codes.MemberCreationError, Err: err2} } return mem, nil } return existedMem, nil } Controller Layer # ControllerëŠ” Service ê³„ì¸µì—ì„œ ê°ì‹¼ ì»¤ìŠ¤í…€ ì—ëŸ¬ë¥¼ ë°›ì€ í›„ì— Contextì˜ ì—ëŸ¬ ë¦¬ìŠ¤íŠ¸ì— ë„£ëŠ”ë‹¤.\nfunc (controller *MemberController) RegisterMember(ctx *gin.Context) { req := data.RegisterReq{} err := ctx.ShouldBindJSON(\u0026amp;req) if err != nil { _ = ctx.Error(errorutils.NewNetError(codes.MemberInvalidJson, err)) return } // Create member mem, err2 := controller.service.CreateMember(ctx, req) if err2 != nil { // Service ê³„ì¸µì—ì„œ ë°›ì€ ì—ëŸ¬ë¥¼ Context ë‚´ ì—ëŸ¬ ë¦¬ìŠ¤íŠ¸ì— ë„£ëŠ”ë‹¤. _ = ctx.Error(err2) return } mid := data.MemberId{MemberId: mem.ID} response.SuccessWith(ctx, codes.MemberCreationSuccess, mid) } Middleware # ì—ëŸ¬ ì‘ë‹µê°’ì„ ë°˜í™˜í•  HandlerFuncë¥¼ êµ¬í˜„í•œë‹¤.\nNextë¥¼ í™œìš©í•˜ì—¬ ëŒ€ê¸° ì¤‘ì¸ í•¸ë“¤ëŸ¬ë¥¼ ì‹¤í–‰ì‹œí‚¨ë‹¤. errors.Asë¥¼ í™œìš©í•˜ì—¬ Context ì—ëŸ¬ ë¦¬ìŠ¤íŠ¸ì— ìˆëŠ” ì—ëŸ¬ê°€ ì»¤ìŠ¤í…€ ì—ëŸ¬ì¸ì§€ í™•ì¸í•œë‹¤. ì •í™•íˆ ë§í•˜ìë©´ ì—ëŸ¬ë¥¼ unwrappingí•˜ë©´ì„œ ì»¤ìŠ¤í…€ ì—ëŸ¬ì¸ì§€ í™•ì¸í•œ í›„ì— ìˆë‹¤ë©´ netErrorì— ë„£ê²Œ ëœë‹¤. WebCodeë¥¼ í™œìš©í•˜ì—¬ ì‘ë‹µê°’ì„ ì–»ì€ í›„ AbortWithStatusJson ë¥¼ í™œìš©í•˜ì—¬ Response jsonì„ ì „ì†¡í•œë‹¤. func ErrorHandler() gin.HandlerFunc { return func(ctx *gin.Context) { // Pending ì¤‘ì¸ í•¸ë“¤ëŸ¬ ì‹¤í–‰ ctx.Next() // JSONì´ ë‘ë²ˆ ì“°ì´ëŠ” ê²ƒì„ ëŒ€ë¹„í•´ì„œ Body í™•ì¸ isBodyWritten := ctx.Writer.Written() err := ctx.Errors.Last() if err != nil { // ì»¤ìŠ¤í…€ ì—ëŸ¬ì¸ì§€ í™•ì¸ var netErr *errorutils.NetError if errors.As(err, \u0026amp;netErr) { code := netErr.GetCode() statusCode := codes.GetStatus(code) res := response.NewErrorResponse(code) if !isBodyWritten { ctx.AbortWithStatusJSON(int(statusCode), res) } } else { res := response.NewErrorResponse(codes.GlobalInternalServerError) if !isBodyWritten { ctx.AbortWithStatusJSON(http.StatusInternalServerError, res) } } } } } ë§ˆë¬´ë¦¬ # Goì˜ ì˜ˆì™¸ ë§¤ì»¤ë‹ˆì¦˜ì€ ë‹¤ë¥¸ ì–¸ì–´ì™€ ë‹¬ë¼ì„œ í‹€ì„ ì¡ëŠ”ë° ë§ì€ ì‹œê°„ì„ ì‚¬ìš©í–ˆë‹¤. ê³µì‹ ë¬¸ì„œë‚˜ ë‹¤ë¥¸ ì‚¬ëŒë“¤ì˜ ì˜ˆì œ ì½”ë“œë¥¼ ë¶„ì„í•˜ë©´ì„œ, Go ìŠ¤ëŸ¬ì›€ì´ ë¬´ì—‡ì¸ì§€ ìì¸° ë°°ì›Œê°„ë‹¤ëŠ” ëŠë‚Œì´ë‹¤. ê·¸ëŸ¬ë‚˜ ì½”ë“œì–‘ì´ ë§ì•„ì§€ë©´ì„œ ì˜¤íˆë ¤ ì½”ë“œê°€ ë³µì¡í•´ì§€ëŠ” ê²ƒ ê°™ê¸°ë„ í•˜ë‹¤.\n","date":"10 April 2024","externalUrl":null,"permalink":"/posts/gin-error-handling2/","section":"Posts","summary":"ì´ì „ì—ëŠ” Ginì´ ì–´ë–»ê²Œ ì˜ˆì™¸ ì²˜ë¦¬ë¥¼ í•˜ëŠ”ì§€ ì–¸ê¸‰í–ˆë‹¤.","title":"Gin ì˜ˆì™¸ì²˜ë¦¬ - 2. ì»¤ìŠ¤í…€ ì˜ˆì™¸ì²˜ë¦¬","type":"posts"},{"content":" Goì™€ ì˜ˆì™¸ì²˜ë¦¬ # Goì—ì„œì˜ ì˜ˆì™¸ì²˜ë¦¬ # Goì—ì„œëŠ” í•¨ìˆ˜ì—ì„œ ë°˜í™˜ëœ ì—ëŸ¬ ê°ì²´(error)ë¡œ ì²˜ë¦¬í•œë‹¤. ë‹¤í–‰íˆë„ multi-returnì´ ê°€ëŠ¥í•˜ê¸°ì— ì—ëŸ¬ ë°˜í™˜ì„ ë”ìš± ìˆ˜ì›”í•˜ê²Œ í•´ì¤„ ìˆ˜ ìˆë‹¤.\nf, err := Sqrt(-1) if err != nil { fmt.Println(err) } try ~ catchê°€ ì—†ëŠ” ì´ìœ  # ê³µì‹ ë¬¸ì„œì— ì˜í•˜ë©´ try ~ catchëŠ” ë‚œí•´í•œ ì½”ë“œë¥¼ ìƒì„±í•˜ë©°, ê°œë°œìì—ê²Œ ë„ˆë¬´ë§ì€ ì¼ë°˜ì ì¸ ì˜ˆì™¸ë¥¼ ì²˜ë¦¬í•˜ë„ë¡ ì¥ë ¤í•œë‹¤ê³  í•œë‹¤.\nWe believe that coupling exceptions to a control structure, as in theÂ try-catch-finallyÂ idiom, results in convoluted code. It also tends to encourage programmers to label too many ordinary errors, such as failing to open a file, as exceptional.\në‹¤ë¥¸ ì–¸ì–´ì²˜ëŸ¼ try ~ catch ë¥¼ ì–´ë ´í’‹ì´ êµ¬í˜„í•  ìˆ˜ ìˆë‹¤. ì¤‘ê°„ì— ì‹¤í–‰ì˜ íë¦„ì„ ëŠëŠ” panic í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ë‹¤. í•˜ì§€ë§Œ ë°˜ëŒ€ë¡œ ìƒê°í•˜ìë©´ ëª¨ë“  ì—ëŸ¬ë“¤ì„ panicìœ¼ë¡œ ì²˜ë¦¬í•´ì•¼ í• ê¹Œ? Goì—ì„œëŠ” ê·¸ê²ƒì´ ì•„ë‹ˆë¼ëŠ” ê²ƒì´ë‹¤. ì´ëŸ° ì´ìœ ë¡œ GoëŠ” ì‹œì˜ì ì ˆí•˜ê¸° ì˜ˆì™¸ì²˜ë¦¬í•  ìˆ˜ ìˆë„ë¡ errorë¥¼ ë°˜í™˜í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ì²˜ë¦¬í•˜ê²Œ ëœë‹¤.\nError - Wrapping # Goì—ì„œëŠ” ì—ëŸ¬ì²˜ë¦¬í•  ë•Œ Error ê°ì²´ë¥¼ ë„˜ê²¨ì¤€ë‹¤ê³  í•œë‹¤. ë¬¼ë¡  ì¼ë°˜ ì—ëŸ¬ ê°ì²´ë¥¼ ë„˜ê²¨ì¤„ ìˆ˜ ìˆì§€ë§Œ ê°œë°œìê°€ ì§ì ‘ ë§Œë“  ì—ëŸ¬ë¥¼ ë§Œë“¤ì–´ì„œ ë„˜ê²¨ì¤„ ìˆ˜ ìˆë‹¤. Error Wrappingì´ë€ ì‰½ê²Œ ë§í•˜ìë©´ error ê°ì²´ë¥¼ ê°ì‹¸ëŠ” ë˜ë‹¤ë¥¸ êµ¬ì¡°ì²´ë¥¼ ë§Œë“œëŠ” ê²ƒì´ë¼ê³  ë³´ë©´ ëœë‹¤.\nginì—ì„œì˜ Errorë¥¼ ë´ë³´ì. ginì˜ Error ë‚´ì— í•„ë“œë¡œ errorê°€ ì¡´ì¬í•œë‹¤. ì´ëŸ¬í•œ ê³¼ì •ì„ Error Wrappingì´ë¼ê³  ë³´ë©´ ëœë‹¤.\n// Error represents a error\u0026#39;s specification. type Error struct { Err error Type ErrorType Meta any } ê·¸ëŸ¼ ì˜ˆë¥¼ ë“¤ì–´ë³´ì. ctx.Errorë¥¼ ì‹¤í–‰í–ˆëŠ”ë° ì˜ë„ì¹˜ ì•Šê²Œ errors.Asê°€ ì ì ˆí•˜ê²Œ ì‹¤í–‰ë˜ì§€ ì•ŠëŠ”ë‹¤ê³  ê°€ì •í•´ë³´ì. error.AsëŠ” Error Typeì„ í™•ì¸í•˜ëŠ” í•¨ìˆ˜ì¸ë°, ë§Œì•½ì— íƒ€ì…ì´ ì ì ˆí•˜ì§€ ì•ŠëŠ”ë‹¤ë©´, ì…ë ¥í•œ errorì„ ê°ì‹¼ Errorë¥¼ ë°˜í™˜í•˜ê²Œ ëœë‹¤.\nfunc (c *Context) Error(err error) *Error { if err == nil { panic(\u0026#34;err is nil\u0026#34;) } var parsedError *Error ok := errors.As(err, \u0026amp;parsedError) if !ok { parsedError = \u0026amp;Error{ Err: err, Type: ErrorTypePrivate, } } c.Errors = append(c.Errors, parsedError) return parsedError } ê·¸ëŸ¼ ì›ë³¸ ì—ëŸ¬(error)ì— ì ‘ê·¼í•  ìˆ˜ ìˆì„ê¹Œ? ë°”ë¡œ Unwrapë¥¼ í†µí•´ ì–»ì„ ìˆ˜ ìˆì€ ê²ƒì´ë‹¤.\n// Unwrap returns the wrapped error, to allow interoperability with errors.Is(), errors.As() and errors.Unwrap() func (msg *Error) Unwrap() error { return msg.Err } ê·¸ë¦¼ìœ¼ë¡œ í‘œí˜„í•˜ë©´ ì•„ë˜ì™€ ê°™ë‹¤.\nê¸°ì¡´ì˜ ë¬¸ì œì  # Gin Contextì˜ ì˜ëª»ëœ í™œìš©ë²• # ê³µì‹ ë¬¸ì„œì—ì„œ ë§í•˜ëŠ” ContextëŠ” ë°ë“œë¼ì¸, ì·¨ì†Œ ì‹œê·¸ë„, APIì— ëŒ€í•œ ê²½ê³„ê°’ì„ ê°€ì§€ëŠ” ê°’ìœ¼ë¡œ ì •ì˜ëœë‹¤. ê·¸ë˜ì„œ ì¡°ê±´ì— ë”°ë¼ ì‹¤í–‰ì´ ì¤‘ë‹¨ë  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒìœ¼ë¡œ ì´í•´í–ˆë‹¤. ginì€ ìì²´ì ì¸ Contextë¥¼ ê°€ì§€ê³  ìˆìœ¼ë©°, contextë¥¼ ì¤‘ë‹¨ì‹œí‚¬ ìˆ˜ ìˆëŠ” ì—¬ëŸ¬ í•¨ìˆ˜ë“¤ì´ ì¡´ì¬í•œë‹¤.\nService Layerì—ì„œ ì»¤ìŠ¤í…€ ì—ëŸ¬ íƒ€ì…ìœ¼ë¡œ ë°˜í™˜í•˜ë„ë¡ êµ¬í˜„í–ˆë‹¤.\nfunc (controller *MemberController) RegisterMember(ctx *gin.Context, req request.RegisterReq) { req = request.RegisterReq{} err := ctx.ShouldBindJSON(req) // ... // Create member err2 := controller.service.CreateMember(ctx, req) if err2 != nil { errorutils.ErrorFunc(ctx, err2) return } webutils.Success(ctx) } ì»¤ìŠ¤í…€ ì—ëŸ¬ íƒ€ì…ì„ ìì„¸íˆ ë³´ë©´, ìì²´ì ìœ¼ë¡œ ì œì‘í•œ ì—ëŸ¬ ì½”ë“œì™€ errorì„ ë‹´ì„ Err í•„ë“œê°€ ì¡´ì¬í•œë‹¤.\ntype Error struct { // Code is a custom error codes ErrorType ErrorType // Err is a error string Err error // Description is a human-friendly message. Description string } ì• í”Œë¦¬ì¼€ì´ì…˜ì— ì˜¤ë¥˜ ë°œìƒì‹œ í˜„ì¬ ì‹¤í–‰ì„ ë©ˆì¶”ê³ , ì‘ë‹µê°’ì„ ë³´ë‚´ëŠ” ErrorFuncë„ ë§Œë“¤ì—ˆë‹¤.\nfunc ErrorFunc(ctx *gin.Context, err *Error) { res := getCode(err.ErrorType) ctx.AbortWithStatusJSON(res.Code, res) return } ê³µì‹ ë¬¸ì„œ ì— ì˜í•˜ë©´AbortWithStatusJSONì—ëŠ” ë‚´ë¶€ì ìœ¼ë¡œ Contextë¥¼ ì¤‘ë‹¨ì‹œí‚¬ ìˆ˜ ìˆëŠ”Abort í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•œë‹¤. êµ¬ì²´ì ìœ¼ë¡œ Abort í•¨ìˆ˜ëŠ” í˜„ì¬ì˜ handlerëŠ” ê·¸ëŒ€ë¡œ ë‚¨ì§€ë§Œ, ê·¸ ì´í›„ì˜ handlerë¥¼ ì²˜ë¦¬í•˜ì§€ ì•Šê² ë‹¤ëŠ” ê²ƒì´ë‹¤.\nAbort prevents pending handlers from being called. Note that this will not stop the current handler. Let\u0026rsquo;s say you have an authorization middleware that validates that the current request is authorized. If the authorization fails (ex: the password does not match), call Abort to ensure the remaining handlers for this request are not called.\në¬¸ì¥ì„ ë³´ë©´ì„œ ë‚´ê°€ Gin í”„ë ˆì„ì›Œí¬ì˜ ì—ëŸ¬ì²˜ë¦¬ë¥¼ ì™„ì „íˆ ì˜ëª»í–ˆìŒì„ ê¹¨ë‹«ê²Œ ë˜ì—ˆë‹¤.\nGin Error ë¯¸ì‚¬ìš© # ê³µì‹ ë¬¸ì„œì— ì˜í•˜ë©´ Ginì€ ìì‹ ë“¤ì˜ Errorë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ê¶Œì¥í•˜ë©°, middlewareê°€ ì´ë¥¼ ì²˜ë¦¬í•˜ì—¬ ì˜¤ë¥˜ responseë¥¼ ì²˜ë¦¬í•˜ë¼ê³  ëª…ì‹œë˜ì–´ ìˆë‹¤.\nError attaches an error to the current context. The error is pushed to a list of errors. It\u0026rsquo;s a good idea to call Error for each error that occurred during the resolution of a request. A middleware can be used to collect all the errors and push them to a database together, print a log, or append it in the HTTP response. Error will panic if err is nil.\nì¦‰, ì˜¤ë¥˜ê°€ ë°œìƒí• ë•Œë§ˆë‹¤ ginì˜ Contextì—ì„œ ì œê³µí•´ì£¼ëŠ” Errorë¡œ ê°ì‹¸ë©°, Middlewareì— ìˆëŠ” Handlerê°€ ì´ë¥¼ ìˆœì°¨ì ìœ¼ë¡œ ì²˜ë¦¬í•´ì•¼ í•œë‹¤ëŠ” ê²ƒì´ë‹¤.\n2ë¶€ì—ì„œëŠ” # ì§€ê¸ˆê¹Œì§€ëŠ” ë‚´ê°€ ë§Œë“¤ì—ˆë˜ ì˜ˆì™¸ì²˜ë¦¬ì—ëŠ” ì–´ë– í•œ ë¬¸ì œì ì´ ìˆëŠ”ì§€ í™•ì¸í•´ë´¤ë‹¤. 2ë¶€ì—ì„œëŠ” ìœ„ì—ì„œ ì„¤ëª…í•œ ì˜ëª»ëœ ì—ëŸ¬ì²˜ë¦¬ë¥¼ ê³µì‹ë¬¸ì„œì—ì„œ ì œì‹œí•œ ì˜¬ë°”ë¥¸ ì—ëŸ¬ì²˜ë¦¬ë¥¼ êµ¬í˜„í•˜ê³ ì í•œë‹¤.\nMiddlewareì— Handler êµ¬í˜„ gin.Errorë¥¼ í™œìš©í•˜ì—¬ Errorë¥¼ wrappingí•˜ê³ , Middlewareì—ì„œ ì²˜ë¦¬í•˜ê¸° ","date":"3 April 2024","externalUrl":null,"permalink":"/posts/gin-error-handling1/","section":"Posts","summary":"Goì™€ ì˜ˆì™¸ì²˜ë¦¬ # Goì—ì„œì˜ ì˜ˆì™¸ì²˜ë¦¬ # Goì—ì„œëŠ” í•¨ìˆ˜ì—ì„œ ë°˜í™˜ëœ ì—ëŸ¬ ê°ì²´(error)ë¡œ ì²˜ë¦¬í•œë‹¤.","title":"Gin ì˜ˆì™¸ì²˜ë¦¬ - 1. Go Error","type":"posts"},{"content":"","date":"25 January 2024","externalUrl":null,"permalink":"/tags/terraform/","section":"Tags","summary":"","title":"Terraform","type":"tags"},{"content":" Terraform ì´ë€ # HashiCorpì—ì„œ ì˜¤í”ˆì†ŒìŠ¤ë¡œ ê°œë°œì¤‘ì¸, í´ë¼ìš°ë“œ ë° ì˜¨í”„ë¡œë¯¸ìŠ¤ ì¸í”„ë¼ë¥¼ ì½”ë“œë¡œ ê´€ë¦¬í•  ìˆ˜ ìˆëŠ” ì½”ë“œì´ë‹¤. ì¸í”„ë¼ í™˜ê²½ êµ¬ì„± ì‹œ ì„ ì–¸ì  ì½”ë“œí˜•ì‹ì„ ì‚¬ìš©í•˜ì—¬ ë¦¬ì†ŒìŠ¤ë¥¼ ìƒì„±, ìˆ˜ì •, ì‚­ì œí•˜ì—¬ ê´€ë¦¬ê°€ ê°€ëŠ¥í•œ laC(Infrastructure as Code) í”„ë¡œë¹„ì €ë‹ ë„êµ¬ì´ë‹¤.\nTerraform ì‘ë™ ë°©ì‹ # ì£¼ë¡œ Write, Plan, Apply ì ˆì°¨ë¡œ ì´ë¤„ì§„ë‹¤.\nWrite : Hashicorpì—ì„œ ìì²´ ê°œë°œí•œ HCL ì–¸ì–´ë¡œ ìŠ¤í¬ë¦½íŠ¸ ì‘ì„± Plan : ìƒíƒœë¥¼ ë¹„êµí•˜ë©° ë³€ê²½ì ì„ ì‚¬ìš©ìì—ê²Œ ë³´ì—¬ì¤Œ Apply : ì‹¤í–‰í•˜ëŠ” ë‹¨ê³„, ìˆœì°¨ì ìœ¼ë¡œ ì‹¤í–‰ ì˜ì¡´ ê´€ê³„ì— ë”°ë¼ ìˆœì„œë¥¼ ëª…ì‹œí•  ìˆ˜ ìˆë‹¤. ì¶œì²˜ - Terraform ê³µì‹ í™ˆí˜ì´ì§€\nìƒíƒœ ë¹„êµë¥¼ í†µí•´ íœ´ë¨¼ ì—ëŸ¬ë¥¼ ì¤„ì¼ ìˆ˜ ìˆë‹¤. ê·¸ëŸ¬ë‚˜ ì½”ë“œì˜ ë¬´ê²Œê°€ ë¬´ê±°ì›Œì§€ë©´, ì‹¤í–‰í•˜ëŠ”ë° ì˜¤ë˜ê±¸ë¦¬ëŠ” ì›ì¸ì´ ë  ìˆ˜ ìˆë‹¤. ê·¸ ì™¸ì—ë„ ë‹¤ì–‘í•œ ë‹¨ì ì´ ì¡´ì¬í•  ê²ƒì´ë‹¤. ê·¸ëŸ¼ì—ë„ ë¶ˆêµ¬í•˜ê³  ìƒì‚°ì„± ì¸¡ë©´, ì¢…ì†ì„± ê·¸ë˜í”„ ë“± ì¥ì ë“¤ì´ ë” í¬ê¸° ë•Œë¬¸ì— ì‚¬ìš©í•˜ëŠ” ê²ƒì´ë‹¤.\ní´ë¼ìš°ë“œ ì»´í“¨íŒ… í™˜ê²½ì€ ì°¸ì¡°ëœ ë¦¬ì†ŒìŠ¤ê°€ ì²˜ìŒì˜ ë¦¬ì†ŒìŠ¤ë¥¼ ì°¸ì¡°í•˜ëŠ” ìˆœí™˜ë£¨í”„ ë¬¸ì œë¥¼ ì§€ë‹ˆê³  ìˆë‹¤. ë¬´í•œí•œ ë°˜ë³µìœ¼ë¡œ ì¸í•´ ì‹œìŠ¤í…œì´ ë¹ ë¥´ê²Œ ê³ ê°ˆë˜ê³ , ì„±ëŠ¥ì´ ì €í•˜ëœë‹¤. Terraformì—ì„œëŠ” ë¦¬ì†ŒìŠ¤ì˜ ì°¸ì¡° ë‚´ìš©ì„ ê·¸ë˜í”„ë¡œ ë³´ì—¬ì£¼ëŠ” Resource Graphë¥¼ ì œê³µí•´ì£¼ëŠ”ë°, ì´ë¥¼ í™œìš©í•´ ìˆœí™˜ë£¨í”„ ë¬¸ì œë¥¼ ì˜ˆë°©í•  ìˆ˜ ìˆë‹¤.\nì—°ìŠµ # ìì„¸í•œ ë¬¸ë²•ì€ Terraform Language Documentationì„ ì°¸ê³ í•˜ê¸¸ ë°”ë€ë‹¤.\nì‹œë‚˜ë¦¬ì˜¤ # AWSë¥¼ í™œìš©í•œë‹¤. ê°œë°œ, ìš´ì˜ VPCë¥¼ êµ¬ì¶•í•œë‹¤. ê° VPCì—ì„œ private, public subnetì´ ì¡´ì¬í•œë‹¤. ì™¸ë¶€ì™€ í†µì‹ ì„ ìœ„í•´ internet gatewayì™€ ë‚´ë¶€ ë¦¬ì†ŒìŠ¤ë¼ë¦¬ë§Œ í†µì‹ í•  ìˆ˜ ìˆëŠ” NAT gatewayë¥¼ ì„¤ì¹˜í•œë‹¤. ì¶œì²˜ - ì €ì\nêµ¬í˜„ # AWSë¥¼ í™œìš©í•œë‹¤. Terraform AWS Registryì—ì„œ ì œê³µí•´ì£¼ëŠ” ì½”ë“œë¥¼ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•œë‹¤. ë‚˜ì˜ ê²½ìš° regionì„ ap-northeast-2 ë¡œ ì„¤ì •í–ˆë‹¤.\n// ./main.tf terraform { required_providers { aws = { source = \u0026#34;hashicorp/aws\u0026#34; version = \u0026#34;~\u0026gt; 5.0\u0026#34; } } } # Configure the AWS Provider provider \u0026#34;aws\u0026#34; { region = \u0026#34;ap-northeast-2\u0026#34; } ê°œë°œ ìš´ì˜ vpcë¥¼ êµ¬ì¶•í•œë‹¤. vpc ëª¨ë“ˆì„ ë³„ë„ë¡œ ë§Œë“¤ì–´ ì½”ë“œë¥¼ ì¬ì‚¬ìš©í–ˆê³ , envë¥¼ ë³€ìˆ˜ë¡œ ì‚¼ì•„ ë¦¬ì†ŒìŠ¤ì˜ ì´ë¦„ì— ê°œë°œ í™˜ê²½ì„ ëª…ì‹œí•˜ë„ë¡ í–ˆë‹¤.\n// ./main.tf // For Dev module \u0026#34;dev_vpc\u0026#34; { source = \u0026#34;./vpc.d\u0026#34; env = \u0026#34;dev\u0026#34; } // For Production module \u0026#34;prd_vpc\u0026#34; { source = \u0026#34;./vpc.d\u0026#34; env = \u0026#34;prd\u0026#34; } ëª¨ë“ˆì˜ main.tfì—ëŠ” public, private Subnet ê·¸ë¦¬ê³  NAT gateway, Internet gatewayë¥¼ ìƒì„±í•˜ëŠ” ì½”ë“œë¥¼ ì‘ì„±í–ˆë‹¤.\nPrivate Subnetì„ êµ¬ì„±í•˜ê¸° ìœ„í•´ì„œëŠ” ë¼ìš°íŒ… í…Œì´ë¸”ì´ í•„ìš”í•˜ì§€ë§Œ, ì„ì‹œì´ë¯€ë¡œ Private NAT Gatewayë§Œ ì‘ì„±í–ˆë‹¤. ì—¬ê¸°ì„œ ì£¼ëª©í•´ì•¼ í•  ì ì€ NAT, Internet Gatewayì˜ ê²½ìš° Subnetì´ ìš°ì„ ì ìœ¼ë¡œ ë§Œë“¤ì–´ì ¸ì•¼ ì‹¤í–‰ëœë‹¤.(ë§Œì•½ì— ê·¸ëŸ¬ì§€ ì•ŠëŠ”ë‹¤ë©´ ì˜¤ë¥˜ê°€ ëœ¬ë‹¤.) ê·¸ëŸ¬ë¯€ë¡œ ì½”ë“œë¥¼ ì‘ì„±í• ë•Œ ê° ë¦¬ì†ŒìŠ¤ì˜ ì˜ì¡´ì„±ì„ ê³ ë ¤í•´ì„œ ì‘ì„±í•´ì•¼ í•œë‹¤.\n// ./vpc.d/main.tf terraform { required_providers { aws = { source = \u0026#34;hashicorp/aws\u0026#34; version = \u0026#34;~\u0026gt; 5.0\u0026#34; } } } // Configure the AWS Provider provider \u0026#34;aws\u0026#34; { region = \u0026#34;ap-northeast-2\u0026#34; } // Create a VPC resource \u0026#34;aws_vpc\u0026#34; \u0026#34;default\u0026#34; { cidr_block = \u0026#34;10.0.0.0/16\u0026#34; tags = { Name = \u0026#34;terraform_default_vpc_${var.env}\u0026#34; } } // public subnet resource \u0026#34;aws_subnet\u0026#34; \u0026#34;public_subnet_1\u0026#34; { vpc_id = aws_vpc.default.id cidr_block = \u0026#34;10.0.0.0/24\u0026#34; tags = { Name = \u0026#34;terraform_public_subnet_1_${var.env}\u0026#34; } } // private subnet resource \u0026#34;aws_subnet\u0026#34; \u0026#34;private_subnet_1\u0026#34; { vpc_id = aws_vpc.default.id cidr_block = \u0026#34;10.0.10.0/24\u0026#34; tags = { Name = \u0026#34;terraform_private_subnet_1_${var.env}\u0026#34; } } // private NAT resource \u0026#34;aws_nat_gateway\u0026#34; \u0026#34;private_nat\u0026#34; { connectivity_type = \u0026#34;private\u0026#34; subnet_id = aws_subnet.private_subnet_1.id tags = { Name = \u0026#34;terraform_nat_${var.env}\u0026#34; } } // Internet gateway resource \u0026#34;aws_internet_gateway\u0026#34; \u0026#34;igw\u0026#34; { vpc_id = aws_vpc.default.id tags = { Name = \u0026#34;terraform_igw_${var.env}\u0026#34; } } Terraform ë„ì…ê³¼ ê´€ë ¨ëœ ê¸°ìˆ  ë¸”ë¡œê·¸ # ì¢Œì¶©ìš°ëŒ Terraform ì…ë¬¸ê¸°, ìš°ì•„í•œí˜•ì œë“¤ ê¸°ìˆ ë¸”ë¡œê·¸ DevOpsíŒ€ì˜ Terraform ëª¨í—˜ Terraform IaC ë„êµ¬ë¥¼ í™œìš©í•œ AWS ì›¹ì½˜ì†” í´ë¦­ ë…¸ê°€ë‹¤ í•´ë°©ê¸° â†’ ë‹¤ë“¤ ì›¹ì½˜ì†”ì—ì„œì˜ í•´ë°©ì„ ì™¸ì¹˜ê³  ìˆì—ˆë‹¤..\n","date":"25 January 2024","externalUrl":null,"permalink":"/posts/basic-terraform1/","section":"Posts","summary":"Terraform ì´ë€ # HashiCorpì—ì„œ ì˜¤í”ˆì†ŒìŠ¤ë¡œ ê°œë°œì¤‘ì¸, í´ë¼ìš°ë“œ ë° ì˜¨í”„ë¡œë¯¸ìŠ¤ ì¸í”„ë¼ë¥¼ ì½”ë“œë¡œ ê´€ë¦¬í•  ìˆ˜ ìˆëŠ” ì½”ë“œì´ë‹¤.","title":"Terraform ê¸°ì´ˆ ë§›ë³´ê¸° - 1. ê¸°ë³¸ ë¬¸ë²• ìµíˆê¸°","type":"posts"},{"content":"","date":"1 January 0001","externalUrl":null,"permalink":"/authors/","section":"Authors","summary":"","title":"Authors","type":"authors"},{"content":"","date":"1 January 0001","externalUrl":null,"permalink":"/categories/","section":"Categories","summary":"","title":"Categories","type":"categories"},{"content":"","date":"1 January 0001","externalUrl":null,"permalink":"/newsletter/","section":"Newsletter","summary":"","title":"Newsletter","type":"newsletter"},{"content":"","date":"1 January 0001","externalUrl":null,"permalink":"/series/","section":"Series","summary":"","title":"Series","type":"series"}]