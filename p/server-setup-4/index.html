<!doctype html><html lang=en dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content="DevStack의 한계 DevStack으로 Openstack을 배포하면서 큰 문제점을 느끼게 되었습니다.\nNova Instance에 직접 접근하는 것이 어렵다. 리소스를 추가 및 삭제하는 것이 어렵다. 위의 문제점은 네트워크로 인해 발생한 것입니다. 예로 제가 Nova Instance를 생성해 Floating ip를 할당한다고 가정해 봅시다. External Network의 IP 범위가 외부와 연결이 불가능해 직접적으로 접근할 수 없게 됩니다. 그럼 ssh로 서버에 직접 접속해서 관리하는 방안도 있습니다. 그럼 Openstack을 왜 쓴거지? 키는 어떻게 관리하지? 등 다양한 꼬리 질문이 따라오게 됩니다.\n"><title>서버 구축기 - 4. Kolla-ansible 설치 시 마주한 네트워크 문제</title>
<link rel=canonical href=https://s0okju.github.io/p/server-setup-4/><link rel=stylesheet href=/scss/style.min.663803bebe609202d5b39d848f2d7c2dc8b598a2d879efa079fa88893d29c49c.css><meta property='og:title' content="서버 구축기 - 4. Kolla-ansible 설치 시 마주한 네트워크 문제"><meta property='og:description' content="DevStack의 한계 DevStack으로 Openstack을 배포하면서 큰 문제점을 느끼게 되었습니다.\nNova Instance에 직접 접근하는 것이 어렵다. 리소스를 추가 및 삭제하는 것이 어렵다. 위의 문제점은 네트워크로 인해 발생한 것입니다. 예로 제가 Nova Instance를 생성해 Floating ip를 할당한다고 가정해 봅시다. External Network의 IP 범위가 외부와 연결이 불가능해 직접적으로 접근할 수 없게 됩니다. 그럼 ssh로 서버에 직접 접속해서 관리하는 방안도 있습니다. 그럼 Openstack을 왜 쓴거지? 키는 어떻게 관리하지? 등 다양한 꼬리 질문이 따라오게 됩니다.\n"><meta property='og:url' content='https://s0okju.github.io/p/server-setup-4/'><meta property='og:site_name' content='S0okJu.dev'><meta property='og:type' content='article'><meta property='article:section' content='Post'><meta property='article:tag' content='Openstack'><meta property='article:tag' content='Kubernetes'><meta property='article:published_time' content='2024-10-01T00:00:00+09:00'><meta property='article:modified_time' content='2024-10-01T00:00:00+09:00'><meta name=twitter:title content="서버 구축기 - 4. Kolla-ansible 설치 시 마주한 네트워크 문제"><meta name=twitter:description content="DevStack의 한계 DevStack으로 Openstack을 배포하면서 큰 문제점을 느끼게 되었습니다.\nNova Instance에 직접 접근하는 것이 어렵다. 리소스를 추가 및 삭제하는 것이 어렵다. 위의 문제점은 네트워크로 인해 발생한 것입니다. 예로 제가 Nova Instance를 생성해 Floating ip를 할당한다고 가정해 봅시다. External Network의 IP 범위가 외부와 연결이 불가능해 직접적으로 접근할 수 없게 됩니다. 그럼 ssh로 서버에 직접 접속해서 관리하는 방안도 있습니다. 그럼 Openstack을 왜 쓴거지? 키는 어떻게 관리하지? 등 다양한 꼬리 질문이 따라오게 됩니다.\n"><link rel="shortcut icon" href=/favicon.ico></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label="Toggle Menu">
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/avatar_hu_c3a763b4e1e1539a.png width=300 height=248 class=site-logo loading=lazy alt=Avatar>
</a><span class=emoji>👾</span></figure><div class=site-meta><h1 class=site-name><a href=/>S0okJu.dev</a></h1><h2 class=site-description>경험으로 학습합니다.</h2></div></header><ol class=menu-social><li><a href=https://github.com/S0okJu target=_blank title=GitHub rel=me><svg class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><svg class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>Home</span></a></li><li><a href=/about/><svg class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg>
<span>About</span></a></li><li><a href=/archives/><svg class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>Archives</span></a></li><li><a href=/search/><svg class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>Search</span></a></li><li><a href=/links/><svg class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg>
<span>Links</span></a></li><li class=menu-bottom-section><ol class=menu><li id=dark-mode-toggle><svg class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>Dark Mode</span></li></ol></li></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">Table of contents</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#devstack의-한계>DevStack의 한계</a></li><li><a href=#kolla-ansible>Kolla Ansible</a></li><li><a href=#설치>설치</a><ol><li><a href=#설치-목록>설치 목록</a></li><li><a href=#all-in-one-or-node>all-in-one or node?</a></li></ol></li><li><a href=#openstack-네트워크>Openstack 네트워크</a></li><li><a href=#테스트용-openstack-서버의-네트워크-접근-문제>테스트용 Openstack 서버의 네트워크 접근 문제</a></li><li><a href=#정리>정리</a></li><li><a href=#reference>Reference</a></li></ol></nav></div></section></aside><main class="main full-width"><article class=main-article><header class=article-header><div class=article-details><header class=article-category><a href=/categories/ops/>Ops</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/p/server-setup-4/>서버 구축기 - 4. Kolla-ansible 설치 시 마주한 네트워크 문제</a></h2></div><footer class=article-time><div><svg class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>Oct 01, 2024</time></div><div><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>5 minute read</time></div></footer></div></header><section class=article-content><h2 id=devstack의-한계>DevStack의 한계</h2><p>DevStack으로 Openstack을 배포하면서 큰 문제점을 느끼게 되었습니다.</p><ul><li>Nova Instance에 직접 접근하는 것이 어렵다.</li><li>리소스를 추가 및 삭제하는 것이 어렵다.</li></ul><p>위의 문제점은 <strong>네트워크로 인해 발생</strong>한 것입니다.
예로 제가 Nova Instance를 생성해 Floating ip를 할당한다고 가정해 봅시다. External Network의 IP 범위가 외부와 연결이 불가능해 직접적으로 접근할 수 없게 됩니다. 그럼 ssh로 서버에 직접 접속해서 관리하는 방안도 있습니다. 그럼 Openstack을 왜 쓴거지? 키는 어떻게 관리하지? 등 다양한 꼬리 질문이 따라오게 됩니다.</p><h2 id=kolla-ansible>Kolla Ansible</h2><p>방안을 모색하는 중 Openstack은 DevStack 이외에도 다양한 배포 방안이 있다는 것을 알게 되었습니다.</p><p><img src=/p/server-setup-4/image.png width=1083 height=609 srcset="/p/server-setup-4/image_hu_d0a000f910760807.png 480w, /p/server-setup-4/image_hu_1c212db233c3f527.png 1024w" loading=lazy alt="출처 - https://docs.openstack.org/contributors/ko_KR/common/introduction.html" class=gallery-image data-flex-grow=177 data-flex-basis=426px></p><blockquote><p>Kolla Ansible이란 Ansible 플레이북을 통해 OpenStack의 모든 서비스를 <strong>컨테이너로 배포</strong>하고 유지 보수하며 운영할 수 있도록 도와주는 프로젝트이다. 이를 통해 복잡한 설치 과정과 수동 설정을 최소화하고, 재현 가능한 환경을 제공하여 효율적이며 안정적인 클라우드 인프라 운영을 가능하게 한다.<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup></p></blockquote><p>즉 우리가 설정한 시스템 서비스를 컨테이너 형태로 구축되는 것입니다.</p><p><img src=/p/server-setup-4/image-1.png width=983 height=925 srcset="/p/server-setup-4/image-1_hu_8352fe0984792688.png 480w, /p/server-setup-4/image-1_hu_50ffe7b3191fc881.png 1024w" loading=lazy alt="출처 - https://velog.io/@larshavin/Kolla-Ansible%EC%9D%84-%ED%99%9C%EC%9A%A9%ED%95%9C-OpenStack-%EC%84%A4%EC%B9%98-1" class=gallery-image data-flex-grow=106 data-flex-basis=255px></p><h2 id=설치>설치</h2><blockquote><p>설치는 <a class=link href=https://parandol.tistory.com/72 target=_blank rel=noopener>파란돌님의 블로그 - Kolla-ansible로 Openstack All-in-one 설치하기(Installing Openstack All-in-one with Kolla-ansible)</a>를 적극 참고했습니다.</p></blockquote><h3 id=설치-목록>설치 목록</h3><p>Kolla-ansible의 장점은 원하는 리소스 선택과 설정이 쉽다는 것입니다. 그래서 저는 기본적인 리소스를 선택하여 설치했습니다.</p><p><strong>설치할 리소스</strong></p><ul><li>Keystone</li><li>Glance</li><li>Nova</li><li>Neutron</li><li>Cinder</li><li>Swift</li><li>Horizon</li></ul><h3 id=all-in-one-or-node>all-in-one or node?</h3><p>오픈스택은 크게 3가지 노드가 있습니다.</p><ul><li>Controller node : 전체 오픈스택 서비스를 관리하기 위해 사용됩니다. 컨트롤러 관리 및 노드 간 연결을 의해서는 최소한 2개 이상의 인터넷 인터페이스가 필요합니다.</li><li>Compute node : Nova 기반의 인스턴스를 작동하기 위해 사용되는 하이퍼바이저를 실행하는 노드입니다.</li><li>Network node : 다양한 네트워크 서비스 에이전트를 실행하며, 이를 가상 네트워크에 인스턴스를 연결합니다.</li></ul><p><img src=/p/server-setup-4/image-2.png width=626 height=686 srcset="/p/server-setup-4/image-2_hu_3563153eabd2edd.png 480w, /p/server-setup-4/image-2_hu_e1b4bbd897ee5577.png 1024w" loading=lazy alt="출처 - https://docs.oracle.com/cd/E36784_01/html/E54155/archover.html" class=gallery-image data-flex-grow=91 data-flex-basis=219px></p><p>여러 가이드를 보면 노드들은 물리적으로 분리되어 있습니다. 서버 내 가상머신을 구축하여 구현하는 방법이 있습니다. 그러나 복잡한 관계로 <strong>서비스 기능을 하나의 호스트에 설치할 수 있는 all-in-one</strong><sup id=fnref:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup>을 선택하게 되었습니다.</p><h2 id=openstack-네트워크>Openstack 네트워크</h2><p><strong>가장 어렵고 앞으로 계속 공부해야 하는 분야</strong>인 것 같습니다. 완전히 이해한 것은 아니지만 알고 있는 그대로 작성하겠습니다.</p><p>오픈 스택에서 네트워크는 Management, Tunnel, External 네트워크가 있습니다.</p><ul><li>Management Network : 관리용 네트워크로 각 컴포넌트와 관련된 API를 호출하는데 사용됩니다.</li><li>Tunnel Network : vm instance 간 네트워크를 구축하는데 사용됩니다.</li><li>External Network : vm instance가 인터넷과 통신하기 위한 네트워크입니다.</li></ul><p>네트워크 서비스는 크게 두 가지 옵션이 있습니다.</p><ul><li>Provider Network : 가상 네트워크를 물리적 네트워크로 연결합니다. 즉 물리적인 네트워크가 vm 인스턴스가 활용하는 네트워크가 됩니다.</li><li>Self-Service Network : 오픈스택을 사용하는 사용자가 직접 자신만의 네트워크를 구축할 수 있는 네트워크 입니다.</li></ul><blockquote><p>Provider 네트워크는 부하분산 서비스 혹은 방화벽 서비스 등 고급 기능을 지원하지 않습니다.</p></blockquote><p>제가 사용하는 옵션은 비교적 간단한 Provider Network 입니다.</p><h2 id=테스트용-openstack-서버의-네트워크-접근-문제>테스트용 Openstack 서버의 네트워크 접근 문제</h2><p>kolla-ansible에서 제공해주는 <code>globals.yml</code> 를 확인해보겠습니다. 환경 파일을 보면 Internal, External Network로 구분되어 있습니다.<br>network_interface는 Internal network에 해당되는 인터페이스를 지정하는 것으로 저는 외부 인터넷과 연결되지 않는 <code>enp2s0</code> 인터페이스를 사용했습니다. 반면 neutron_external_interface는 provider로 제공할 인터페이스로 인터넷과 연결할 수 있는 <code>enp3s0</code> 인터페이스를 사용했습니다.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yml data-lang=yml><span class=line><span class=cl><span class=c>##############################</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># Neutron - Networking Options</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c>##############################</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># ...</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># followed for other types of interfaces.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>network_interface</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;enp2s0&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nn>---</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># ...</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>neutron_external_interface</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;enp3s0&#34;</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>그림을 그려보면 아래와 같습니다.<br>(아래의 그림은 <code>172.17.0.250/24</code>이 아니라 <code>172.16.0.250/24</code> 입니다. )</p><p><img src=/p/server-setup-4/image-3.png width=504 height=423 srcset="/p/server-setup-4/image-3_hu_a9481fa49341ced5.png 480w, /p/server-setup-4/image-3_hu_add6a79d669ec86c.png 1024w" loading=lazy alt="네트워크 토폴로지" class=gallery-image data-flex-grow=119 data-flex-basis=285px></p><p>하지만 이번 오픈스택 서버는 어디까지나 개인으로만 사용되는 공간입니다. 즉 <strong>클라우드 서비스를 쓰는 것도 저 혼자이고, 관리하는 것도 저 혼자인 것입니다</strong>. 관리를 위한 네트워크 접속(Internal Network)도, 오픈스택 리소스 접근할 수 있는 네트워크 접속(External Network)도 가능해야 합니다.</p><p>그러나 저는 클라우드 리소스의 API를 접근할 수 없습니다. 왜냐하면 서로 다른 네트워크 대역을 가지고 있기 때문입니다.</p><p><img src=/p/server-setup-4/image-4.png width=615 height=510 srcset="/p/server-setup-4/image-4_hu_d197fff7b22f75e5.png 480w, /p/server-setup-4/image-4_hu_a4b6f4b5facc9ec2.png 1024w" loading=lazy alt="네트워크 구성도" class=gallery-image data-flex-grow=120 data-flex-basis=289px></p><p>이러한 문제를 해결하기 위해서는 라우팅 테이블을 설정해야 할 것입니다. 라우터에 직접 설정하는 방법과 운영체제에서 처리하는 방법이 있는데, 물리적으로 라우터가 하나만 존재하기 때문에 운영체제에서 처리해야 합니다.</p><p>저는 ip forward를 사용했습니다.</p><blockquote><p>IP-Forward란 커널 기반 라우팅 포워딩으로 하나의 인터페이스로 들어온 패킷을 다른 서브넷을 가진 네트워크 인터페이스로 패킷을 포워딩시키는 것이다.</p></blockquote><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl><span class=c1># Kernel parameter update</span>
</span></span><span class=line><span class=cl>$ sudo sysctl -w net.ipv4.conf.all.forwarding<span class=o>=</span><span class=m>1</span>
</span></span><span class=line><span class=cl>$ sudo sysctl net.ipv4.conf.all.forwarding net.ipv4.conf.all.forwarding <span class=o>=</span> <span class=m>1</span>
</span></span></code></pre></td></tr></table></div></div><p>br-ex 송신되어 enp2s0 인터페이스에 수신되는 것을 허락한다는 의미입니다.</p><blockquote><p>br-ex은 OpenVSwitch(OVS) 적용시 물리 네트워크 인터페이스와 직접 연결되는 가상 스위치입니다. 외부 네트워크에서 가상 머신을 접근할때 사용됩니다.</p></blockquote><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>sudo iptables -I FORWARD -i br-ex -o enp2s0 -j ACCEPT
</span></span><span class=line><span class=cl>sudo iptables -nL FORWARD
</span></span></code></pre></td></tr></table></div></div><p>클라이언트도 설정이 필요합니다.<br>192.168.50.27를 통해 172.16.0.0/24(enp2s0)에 접근한다는 routing rule를 추가합니다.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>sudo route -n add 172.16.0.0/24 192.168.50.27
</span></span></code></pre></td></tr></table></div></div><p>여기서 왜 192.168.50.27를 통해 172.16.0.0/24 네트워크에 접근한다고 설정한 것일까요?<br>오픈 스택 서버에서 ip_forward를 시켰습니다. 즉 서버가 라우터의 역할을 하는 것입니다. 그래서 클라이언트에서 라우팅 룰을 설정할 때에는 172.16.0.250/24에 포워딩을 시킨 서버의 ip 주소로 설정해야 하는 것입니다.</p><h2 id=정리>정리</h2><p>테스트를 수행하기 위해 Openstack 서버를 구축하게 되었습니다. 구축 시 요구사항은 인스턴스에 접근할 수 있으면서 리소스 API에 접근 가능해야 한다는 것이었습니다.
서로 다른 네트워크 대역을 가져 리소스 API에 접근하지 못했으나 서버에 ip forward를 수행하여 문제를 해결했습니다.</p><p>문제를 해결해 보니 Neutron에 대해 모르고 있다는 사실을 알게 되었습니다. 다음 포스팅은 Neutron 톱아보기로 돌아오겠습니다.</p><h2 id=reference>Reference</h2><ul><li><a class=link href=https://velog.io/@lijahong/0%EB%B6%80%ED%84%B0-%EC%8B%9C%EC%9E%91%ED%95%98%EB%8A%94-Linux-%EA%B3%B5%EB%B6%80-%EB%B0%A9%ED%99%94%EB%B2%BD-%EC%BB%B4%ED%93%A8%ED%84%B0 target=_blank rel=noopener>https://velog.io/@lijahong/0%EB%B6%80%ED%84%B0-%EC%8B%9C%EC%9E%91%ED%95%98%EB%8A%94-Linux-%EA%B3%B5%EB%B6%80-%EB%B0%A9%ED%99%94%EB%B2%BD-%EC%BB%B4%ED%93%A8%ED%84%B0</a></li><li><a class=link href=https://velog.io/@larshavin/Kolla-Ansible%EC%9D%84-%ED%99%9C%EC%9A%A9%ED%95%9C-OpenStack-%EC%84%A4%EC%B9%98-1 target=_blank rel=noopener>https://velog.io/@larshavin/Kolla-Ansible%EC%9D%84-%ED%99%9C%EC%9A%A9%ED%95%9C-OpenStack-%EC%84%A4%EC%B9%98-1</a></li><li><a class=link href=https://blog.naver.com/love_tolty/220237750951 target=_blank rel=noopener>https://blog.naver.com/love_tolty/220237750951</a></li></ul><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p><a class=link href=https://tech.osci.kr/openstack_cinder/ target=_blank rel=noopener>https://tech.osci.kr/openstack_cinder/</a>&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:2><p><a class=link href=https://blog.naver.com/love_tolty/220237750951 target=_blank rel=noopener>https://blog.naver.com/love_tolty/220237750951</a>&#160;<a href=#fnref:2 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div></section><footer class=article-footer><section class=article-tags><a href=/tags/openstack/>Openstack</a>
<a href=/tags/kubernetes/>Kubernetes</a></section><section class=article-copyright><svg class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg>
<span>Licensed under CC BY-NC-SA 4.0</span></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>Related content</h2><div class=related-content><div class="flex article-list--tile"><article><a href=/p/openstack-kubernetes-installation-2/><div class=article-details><h2 class=article-title>Openstack - Kubespray를 활용한 Kubernetes 설치 시 Ansible 오류</h2></div></a></article><article><a href=/p/openstack-kubernetes-installation-1/><div class=article-details><h2 class=article-title>Openstack - Kubespray를 활용한 Kubernetes 설치 시 Terraform 오류</h2></div></a></article><article><a href=/p/server-access-dashboard-and-management-problems/><div class=article-details><h2 class=article-title>서버 구축기 - 3. 쿠버네티스에서 대시보드 접속하기 그리고 운영의 문제점</h2></div></a></article><article><a href=/p/server-setup-nfs-in-multipass-instance/><div class=article-details><h2 class=article-title>서버 구축기 - 2. Multipass를 활용한 NFS 구성</h2></div></a></article><article><a href=/p/server-setup-multinode-kubernetes/><div class=article-details><h2 class=article-title>서버 구축기 - 1. 쿠버네티스 멀티 노드 환경 구성하기</h2></div></a></article></div></div></aside><footer class=site-footer><section class=copyright>&copy;
2024 -
2025 S0okJu.dev</section><section class=powerby>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>Theme <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.30.0>Stack</a></b> designed by <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a></section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.1e9a3bafd846ced4c345d084b355fb8c7bae75701c338f8a1f8a82c780137826.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>