<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Openstack on S0okJu.dev</title><link>https://s0okju.github.io/tags/openstack/</link><description>Recent content in Openstack on S0okJu.dev</description><generator>Hugo -- gohugo.io</generator><language>en</language><lastBuildDate>Sun, 16 Mar 2025 00:00:00 +0900</lastBuildDate><atom:link href="https://s0okju.github.io/tags/openstack/index.xml" rel="self" type="application/rss+xml"/><item><title>HexaCTF 12. ì¿ ë²„ë„¤í‹°ìŠ¤ ë©€í‹° ë…¸ë“œ ì„ ì • ì´ìœ ì™€ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ ë°°í¬ íšŒê³ </title><link>https://s0okju.github.io/p/hexactf-12/</link><pubDate>Sun, 16 Mar 2025 00:00:00 +0900</pubDate><guid>https://s0okju.github.io/p/hexactf-12/</guid><description>&lt;p>ì´ì œë¶€í„° ì›Œì»¤ ë…¸ë“œë¥¼ 2ê°œ ì„ ì •í•œ ì´ìœ ì™€ ì¿ ë²„ë„¤í‹°ìŠ¤ì— ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë°°í¬í•˜ë©´ì„œ ëŠë‚€ì ì„ ì‘ì„±í•˜ê² ìŠµë‹ˆë‹¤.&lt;/p>
&lt;h2 id="ì¿ ë²„ë„¤í‹°ìŠ¤-ì›Œì»¤-ë…¸ë“œ-êµ¬ì„±">ì¿ ë²„ë„¤í‹°ìŠ¤ ì›Œì»¤ ë…¸ë“œ êµ¬ì„±
&lt;/h2>&lt;p>ì´ˆê¸°ì— ì €ëŠ” ì‚¬ìš©ìê°€ ë°°í¬í•œ Challengeë§Œì˜ ë…ë¦½ì ì¸ í™˜ê²½ì´ í•„ìš”í–ˆìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ ì›Œì»¤ ë…¸ë“œë¥¼ 2ê°œ ì„¤ì¹˜í•œ í›„ &lt;code>nodeSelector&lt;/code>ë¥¼ í™œìš©í•˜ì—¬ ì• í”Œë¦¬ì¼€ì´ì…˜ ì—­í• ì— ë”°ë¼ ê° ë…¸ë“œì— ë°°ì¹˜ë  ìˆ˜ ìˆë„ë¡ êµ¬ì„±í–ˆìŠµë‹ˆë‹¤.&lt;br>
í•˜ë‚˜ì˜ ì›Œì»¤ ë…¸ë“œì— ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ê³¼ ê¸°íƒ€ ëª¨ë‹ˆí„°ë§ ë„êµ¬ë¥¼ ë°°ì¹˜í•˜ê³  ë‹¤ë¥¸ í•˜ë‚˜ì—ëŠ” Challenge ì„œë²„ë§Œ ë°°ì¹˜í•˜ë„ë¡ ì„¤ê³„í–ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/hexactf-12/image.png"
width="601"
height="281"
srcset="https://s0okju.github.io/p/hexactf-12/image_hu_138392bc5d04347.png 480w, https://s0okju.github.io/p/hexactf-12/image_hu_a8338b3dd0369a20.png 1024w"
loading="lazy"
alt="ì›Œì»¤ ë…¸ë“œ ì• í”Œë¦¬ì¼€ì´ì…˜ ë°°ì¹˜ë„"
class="gallery-image"
data-flex-grow="213"
data-flex-basis="513px"
>&lt;/p>
&lt;h3 id="ì§ˆë¬¸-1-ì™œ-ì›Œì»¤-ë…¸ë“œê°€-3ê°œê°€-ì•„ë‹Œê°€ìš”">ì§ˆë¬¸ 1. ì™œ ì›Œì»¤ ë…¸ë“œê°€ 3ê°œê°€ ì•„ë‹Œê°€ìš”?
&lt;/h3>&lt;p>ì•„ë˜ì˜ ì§ˆë¬¸ì„ í•  ìˆ˜ ìˆì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤.&lt;/p>
&lt;blockquote>
&lt;p>&amp;ldquo;í”„ë¡œê·¸ë¨ ì—­í• ì— ë”°ë¼ ë…¸ë“œ ë³„ë¡œ ë°°ì¹˜í•œë‹¤ê³  í•˜ì…¨ì–ì•„ìš”. ê·¸ë ‡ë‹¤ë©´ ë…¸ë“œ 3ê°œ ë°°í¬í•´ì•¼ í•˜ëŠ” ê²ƒ ì•„ë‹Œê°€ìš”? &amp;quot;&lt;/p>&lt;/blockquote>
&lt;p>ìœ„ì˜ ì§ˆë¬¸ì€ ì˜³ì€ ë§ì´ì§€ë§Œ &lt;strong>ì„œë²„ ë¦¬ì†ŒìŠ¤ê°€ ë¶€ì¡±&lt;/strong>í•˜ì—¬ ë…¸ë“œ 3ê°œë¥¼ ë°°í¬í•˜ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.
ì¿ ë²„ë„¤í‹°ìŠ¤ëŠ” ë°°í¬í• ë•Œ Kubespray í”Œë«í¼ì„ í™œìš©í•©ë‹ˆë‹¤. Kubesprayì— ì›Œì»¤ ë…¸ë“œë¥¼ ë°°í¬í• ë•ŒëŠ” ëª¨ë‘ ë™ì¼í•œ ì´ë¯¸ì§€ì™€ ë¦¬ì†ŒìŠ¤ íƒ€ì…ì´ ì ìš©ë©ë‹ˆë‹¤. ì›Œì»¤ ë…¸ë“œì— ì´ë¯¸ì§€ë¥¼ ubuntu:20.04ì— ë¦¬ì†ŒìŠ¤ íƒ€ì…ìœ¼ë¡œ 2vCPU, 4GBë¡œ ì„ íƒí–ˆë‹¤ë©´ ì›Œì»¤ ë…¸ë“œ ëª¨ë‘ ë™ì¼í•˜ê²Œ ì ìš©ë˜ëŠ” ê²ƒì´ì£ .&lt;/p>
&lt;h4 id="ì¿ ë²„ë„¤í‹°ìŠ¤-ì¸ìŠ¤í„´ìŠ¤ì—-ë°°ì¹˜ëœ-ë¦¬ì†ŒìŠ¤-ì–‘">ì¿ ë²„ë„¤í‹°ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ì— ë°°ì¹˜ëœ ë¦¬ì†ŒìŠ¤ ì–‘
&lt;/h4>&lt;blockquote>
&lt;p>ì›Œì»¤ ë…¸ë“œëŠ” ë©”ëª¨ë¦¬ ì„ ì • ê¸°ì¤€ì´ í™•ì‹¤íˆ ìˆì—ˆìœ¼ë‚˜ ë‚˜ë¨¸ì§€ëŠ”&lt;a class="link" href="https://docs.kublr.com/installation/hardware-recommendation/" target="_blank" rel="noopener"
> kublrì—ì„œ ì œì‹œí•œ ê¸°ì¤€í‘œ&lt;/a>ì˜ 2ë°°ë¥¼ ì‚°ì •í•´ì„œ ìƒì„±í–ˆìŠµë‹ˆë‹¤. ë„‰ë„‰í•˜ë©´ ì¢‹ì§€ ì•Šì„ê¹Œ í•˜ëŠ” ë§ˆìŒìœ¼ë¡œ ë¦¬ì†ŒìŠ¤ë¥¼ ëŠ˜ë ¸ë˜ ê²ƒ ê°™ìŠµë‹ˆë‹¤.&lt;/p>&lt;/blockquote>
&lt;ul>
&lt;li>ë§ˆìŠ¤í„° ë…¸ë“œ : 4vCPU, 8GB&lt;/li>
&lt;li>ì›Œì»¤ ë…¸ë“œ: 8vCPU, 16GB&lt;/li>
&lt;/ul>
&lt;p>ê·¸ëŸ¬ë‚˜ ì‹¤ì œ í•˜ë“œì›¨ì–´ëŠ” 64GBì˜ ë©”ëª¨ë¦¬ë¥¼ ê°€ì§€ê³  ìˆìœ¼ë©° Jenkins, NFS ì„œë²„, OpenStack ì„œë²„ì˜ ë©”ëª¨ë¦¬ ì–‘ì„ ê³ ë ¤í–ˆì„ë•Œ ì›Œì»¤ ë…¸ë“œë¥¼ 3ê°œë¥¼ ë°°ì¹˜í•  ìˆ˜ ì—†ì—ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/hexactf-12/image-1.png"
width="811"
height="170"
srcset="https://s0okju.github.io/p/hexactf-12/image-1_hu_6ff0a98be6b391d8.png 480w, https://s0okju.github.io/p/hexactf-12/image-1_hu_cca59a81745b2c66.png 1024w"
loading="lazy"
alt="ì˜¤í”ˆ ìŠ¤íƒ ì»´í“¨íŒ… ë¦¬ì†ŒìŠ¤ ì”ì—¬ëŸ‰"
class="gallery-image"
data-flex-grow="477"
data-flex-basis="1144px"
>&lt;/p>
&lt;h3 id="ì§ˆë¬¸-2-ì›Œì»¤-ë…¸ë“œì˜-ë©”ëª¨ë¦¬ë¥¼-16gbë¡œ-ì„ íƒí•œ-ì´ìœ ">ì§ˆë¬¸ 2. ì›Œì»¤ ë…¸ë“œì˜ ë©”ëª¨ë¦¬ë¥¼ 16GBë¡œ ì„ íƒí•œ ì´ìœ 
&lt;/h3>&lt;blockquote>
&lt;p>CPUëŠ” ì—°ì‚°í• ë•Œ ì£¼ë¡œ ë§ì´ ì“°ì´ëŠ” ë¦¬ì†ŒìŠ¤ì…ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ CTF ëŒ€íšŒ ë¬¸ì œ ì¤‘ì—ì„œ ì—°ì‚° ì§‘ì¤‘ì ì¸ ë¬¸ì œê°€ í° ë¹„ì¤‘ì„ ì°¨ì§€í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì „ë°˜ì ìœ¼ë¡œ CPU ì‚¬ìš©ëŸ‰ì´ ë¬´ë‚œí•˜ë‹¤ê³  íŒë‹¨í•´ ì¶”ê°€ì ì¸ CPU ì‚¬ìš© ê¸°ì¤€ì„ ì„¤ì •í•˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.&lt;/p>&lt;/blockquote>
&lt;p>Challengeì˜ ìµœëŒ€ ì‚¬ìš©ëŸ‰ì„ ê³„ì‚°í–ˆì„ë•Œ 16GB ë©”ëª¨ë¦¬ê°€ ì ë‹¹í•˜ë‹¤ê³  ìƒê°í•˜ê³  ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>ì¶œì œí•  ë¬¸ì œì˜ ë² ì´ìŠ¤ ì´ë¯¸ì§€ëŠ” ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ë¥¼ ë°°í¬í•  ë•Œ ì•Œ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ë¯¸ë¦¬ ì˜ˆì¸¡í•´ì„œ ë°°í¬í•´ì•¼ í•©ë‹ˆë‹¤. ê·¸ëŸ¬ë¯€ë¡œ ìµœëŒ€ ì‚¬ìš© ê°€ëŠ¥í•œ ì»´í“¨íŒ… ìì›ëŸ‰ì„ ê³„ì‚°í•˜ì—¬ ìì› ë¶€ì¡±ìœ¼ë¡œ ì¸í•´ ë¬¸ì œê°€ ë°œìƒí•˜ì§€ ì•Šë„ë¡ ì„¤ê³„í•´ì•¼ í–ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;strong>Challenge ë¬¸ì œì— ì¿ ë²„ë„¤í‹°ìŠ¤ limit quotaë¥¼ í™œìš©í•´ ë¦¬ì†ŒìŠ¤ì˜ ìµœëŒ€ ì‚¬ìš©ëŸ‰ì„ ì„¤ì •í•  ê²ƒì…ë‹ˆë‹¤. ì´ ì •ë„ë¥¼ í† ëŒ€ë¡œ ì´ ì˜ˆìƒ ì‚¬ìš©ëŸ‰ì„ ê³„ì‚°í•˜ê¸°ë¡œ ê²°ì •í–ˆìŠµë‹ˆë‹¤.&lt;/strong>&lt;/p>
&lt;h4 id="challenge-ì„œë²„ì˜-íŠ¹ì§•">Challenge ì„œë²„ì˜ íŠ¹ì§•
&lt;/h4>&lt;p>Challenge ì„œë²„ëŠ” &lt;strong>íŠ¹ì • ê¸°ëŠ¥ í•˜ë‚˜ë§Œ êµ¬í˜„ë˜ì–´ ìˆì–´ ë‹¨ìˆœí•˜ë‹¤ëŠ” íŠ¹ì§•&lt;/strong>ì„ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤. ë˜í•œ í•œëª…ë§Œ ì„œë²„ì— ì ‘ì†í•  ìˆ˜ ìˆì£ .
CPU, ë©”ëª¨ë¦¬ í™œìš© ê´€ì ì—ì„œ ì˜ˆì¸¡í•˜ë©´ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.&lt;/p>
&lt;ol>
&lt;li>CPU - ë¹Œë“œ ì´ˆê¸°ì— ë§ì´ ì“°ì¸ë‹¤. ê·¸ ì´ì™¸ì—ëŠ” ë¬´ë‚œí•  ê²ƒ ê°™ë‹¤.&lt;/li>
&lt;li>ë©”ëª¨ë¦¬ - ë©”ëª¨ë¦¬ ìƒí•œì„ ì´ ì •í•´ì ¸ ìˆì„ ê²ƒ ê°™ë‹¤.&lt;/li>
&lt;/ol>
&lt;blockquote>
&lt;p>&lt;a class="link" href="https://s0okju.github.io/p/hexactf2025-review/" target="_blank" rel="noopener"
>ì‹¤ì œ ëŒ€íšŒë¥¼ ìš´ì˜í•˜ë©´ì„œ&lt;/a> ì˜ˆìƒí•œ íŒ¨í„´ì´ ì–´ëŠì •ë„ ë§ê¸´ í–ˆìŠµë‹ˆë‹¤.&lt;/p>&lt;/blockquote>
&lt;h4 id="ë©”ëª¨ë¦¬-ì‚¬ìš©ëŸ‰ë§Œ-ê³ ë ¤í•œ-ì´ìœ ">ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ë§Œ ê³ ë ¤í•œ ì´ìœ 
&lt;/h4>&lt;p>ìš°ì„  CPUëŠ” ì„ ì • ê¸°ì¤€ì„ ì•„ì§ê¹Œì§€ë„ ê°ì„ ì°¾ì§€ ëª»í–ˆìŠµë‹ˆë‹¤. ğŸ¥¹ ì´ê±´ ì‹¤ë¬´ì—ì„œ í•œë²ˆ ë°°ìš°ê³  ì‹¶ë„¤ìš”.&lt;/p>
&lt;p>ë©”ëª¨ë¦¬ëŠ” CPUê³¼ ë‹¤ë¥´ê²Œ ì´ˆê¸°ì— ë°ì´í„°ë¥¼ ì ì¬í•œ í›„ì— ì‹¤í–‰ë˜ëŠ” íŠ¹ì§•ì„ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤. CPUê°€ ì‚¬ìš© í›„ ë°”ë¡œ ë°˜ë‚©í•˜ëŠ” ëŠë‚Œì´ë¼ë©´ ë©”ëª¨ë¦¬ëŠ” ëˆ„ì ì˜ ëŠë‚Œì´ ê°•í•©ë‹ˆë‹¤.(ê°œì¸ì ì¸ ìƒê°ì…ë‹ˆë‹¤.)
ë©”ëª¨ë¦¬ëŠ” ê´€ë¦¬ë¥¼ ì œëŒ€ë¡œ í•˜ì§€ ì•Šìœ¼ë©´ ë¹¨ë¦¬ ì†Œëª¨ë˜ëŠ” ìì›ì¸ ì…ˆì´ì£ . ê·¸ëŸ¬ë¯€ë¡œ limit, request quotaë¡œ ì‚¬ìš© ê°€ëŠ¥í•œ ìµœëŒ€ ë©”ëª¨ë¦¬ ìš©ëŸ‰ë¥¼ ì§€ì •í•˜ì—¬ ë¶ˆí•„ìš”í•œ ì‚¬ìš©ëŸ‰ì„ ì¤„ì´ëŠ” ê²ƒì´ ì¤‘ìš”í•˜ë‹¤ê³  ìƒê°í–ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;h4 id="ì˜ˆìƒ-ì‚¬ìš©-ë©”ëª¨ë¦¬-ìš©ëŸ‰-ê³„ì‚°">ì˜ˆìƒ ì‚¬ìš© ë©”ëª¨ë¦¬ ìš©ëŸ‰ ê³„ì‚°
&lt;/h4>&lt;p>Challengeë¥¼ í™œìš©í•˜ëŠ” CTF ë¬¸ì œëŠ” ì£¼ë¡œ Web, Systemì…ë‹ˆë‹¤. Systemì€ ê°€ë²¼ìš´ ë¦¬ëˆ…ìŠ¤ ì´ë¯¸ì§€ë¥¼ í™œìš©í•˜ë©° ìì› ì‚¬ìš©ëŸ‰ì˜ í¸ì°¨ê°€ í¬ì§€ ì•ŠìŠµë‹ˆë‹¤. ë°˜ë©´ Webì˜ ê²½ìš°ì—ëŠ” ì–´ë–¤ ì´ë¯¸ì§€ë¥¼ í™œìš©í–ˆëƒì— ë”°ë¼ í¸ì°¨ê°€ ë§¤ìš° í½ë‹ˆë‹¤. ê·¸ëŸ¬ë¯€ë¡œ ìƒí•œì„ ì„ ì„ íƒí•  ë•ŒëŠ” ìŠ¤í”„ë§ë¶€íŠ¸ í”Œë«í¼ì˜ í‰ê·  ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ 256MBë¥¼ ê¸°ì¤€ìœ¼ë¡œ ê³„ì‚°í–ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;blockquote>
&lt;p>256MB(ìŠ¤í”„ë§ë¶€íŠ¸ ê¸°ì¤€ ë©”ëª¨ë¦¬ ì–‘) x 3(ì‚¬ìš©ì ë‹¹ ë™ì‹œ ì‹¤í–‰ ì»¨í…Œì´ë„ˆ ìˆ˜) x 20(ì‚¬ìš©ì) = 15GB&lt;/p>&lt;/blockquote>
&lt;p>15GBëŠ” ì œê°€ ìƒê°í•œ ìµœëŒ€ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ì´ë¼ê³  ìƒê°í•©ë‹ˆë‹¤. ì‚¬ìš©ì ìˆ˜ê°€ 2ë°°, 3ë°°ë¡œ í¬ê²Œ ì¦ê°€í•˜ì§€ ì•ŠëŠ” í•œ ì˜ˆìƒ ë²”ìœ„ ë‚´ë¡œ ë©”ëª¨ë¦¬ë¥¼ í™œìš©í•  ê²ƒìœ¼ë¡œ ë³´ì…ë‹ˆë‹¤.&lt;/p>
&lt;blockquote>
&lt;p>&lt;strong>ì—¬ë‹´&lt;/strong>
System ë¬¸ì œì™€ Web ë¬¸ì œì˜ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ì€ 2ë°° ~ 4ë°° ì°¨ì´ë¡œ ìƒë‹¹íˆ í½ë‹ˆë‹¤. ëŒ€íšŒë§ˆë‹¤ ë¬¸ì œ ì–‘ê³¼ ìœ í˜•ì´ í¬ê²Œ ë³€í™”í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì— ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ì„ ë¹„ìœ¨ë¡œ ê³„ì‚°í• ê¹Œ ê³ ë¯¼í–ˆìŠµë‹ˆë‹¤.
ì‹¤ì œ ëŒ€íšŒì— ì°¸ê°€í•œ ì¹œêµ¬ë“¤ì—ê²Œ ë¬¼ì–´ë³´ë‹ˆ Web ë¬¸ì œì— ê°€ì¥ ë§ì´ ë„ì „í•˜ê³  ì‹œê°„ íˆ¬ìë¥¼ ë§ì´ í•œë‹¤ê³  í•©ë‹ˆë‹¤. ê·¸ë˜ì„œ Web ë¬¸ì œì˜ ìµœëŒ€ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ì„ ê¸°ì¤€ìœ¼ë¡œ ì„ íƒí–ˆìŠµë‹ˆë‹¤.&lt;/p>&lt;/blockquote>
&lt;h4 id="challenge-request-limit-quota">Challenge request, limit quota
&lt;/h4>&lt;p>ì €ëŠ” ëª¨ë“  Challengeì˜ Deploymentì— ì•„ë˜ì™€ ê°™ì€ resource quotaë¥¼ ì„¤ì •í–ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">resources&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">limits&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">cpu&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;500m&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">memory&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;512Mi&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">requests&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">cpu&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;250m&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">memory&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;256Mi&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ì™œ ìµœëŒ€ ì‚¬ìš©ëŸ‰ì„ 256MBìœ¼ë¡œ ì§€ì •í–ˆìœ¼ë©´ì„œ ì‹¤ì œë¡œëŠ” 512MBë¡œ ì„ ì •í–ˆëŠ”ì§€ ê¶ê¸ˆí•˜ì…¨ì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤.&lt;/p>
&lt;blockquote>
&lt;p>ì™œ DevOps, SREê°€ ê°œë°œ ê²½í—˜ì´ ìˆì–´ì•¼ í•˜ëŠ”ì§€ ë¼ˆì €ë¦¬ê²Œ ëŠê¼ˆìŠµë‹ˆë‹¤. ê²½í—˜ì´ ì—†ìœ¼ë‹ˆ ì „ë°˜ì ìœ¼ë¡œ ê°ì„ ì¡ì„ ìˆ˜ ì—†ì—ˆìŠµë‹ˆë‹¤.&lt;/p>&lt;/blockquote>
&lt;p>Challenge ì„œë²„ì—ì„œ ê¸°ëŠ¥ì€ í•˜ë‚˜ ë¿ì´ê³  ì‚¬ìš©ìë„ ì‹¤ì§ˆì ìœ¼ë¡œ í•œëª…ì´ê¸° ë•Œë¬¸ì— ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ëŸ‰ì´ í¬ê²Œ ë³€í•˜ì§€ ì•Šì„ ê²ƒì´ë¼ê³  ìƒê°í–ˆìŠµë‹ˆë‹¤. ê·¸ëŸ°ë° ëˆˆìœ¼ë¡œ ì§ì ‘ ë³´ì§€ ì•ŠëŠ” ì´ìƒ ëª¨ë¥´ê² ë‹¤ëŠ” ìƒê°ì„ í–ˆìŠµë‹ˆë‹¤.&lt;br>
ë§ˆì¹¨ ì°¸ì—¬ê°€ í™•ì •ëœ ì‚¬ìš©ìëŠ” ì˜ˆìƒë³´ë‹¤ ì ì–´ì„œ ì‚¬ìš© íŒ¨í„´ì„ í™•ì¸í•  ê²¸ limitë¥¼ 512MBë¡œ ì„ ì •í•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;h2 id="ì¿ ë²„ë„¤í‹°ìŠ¤-hexactf-ì„œë¹„ìŠ¤-ì•„í‚¤í…ì²˜-ì„¤ê³„-ë°-íšŒê³ ">ì¿ ë²„ë„¤í‹°ìŠ¤ HexaCTF ì„œë¹„ìŠ¤ ì•„í‚¤í…ì²˜ ì„¤ê³„ ë° íšŒê³ 
&lt;/h2>&lt;p>ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì€ hexactfë¼ëŠ” ë„¤ì„ ìŠ¤í˜ì´ìŠ¤ì— ë°°í¬í–ˆìŠµë‹ˆë‹¤.
hexactf ë‚´ì— ìˆëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì€ ëª¨ë‘ í•˜ë‚˜ì˜ Helmìœ¼ë¡œ ë°°í¬í–ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;blockquote>
&lt;p>Operator ë°°í¬ ë°©ì‹ì— ëŒ€í•œ ìì„¸í•œ ë‚´ìš©ì€ &lt;a class="link" href="https://s0okju.github.io/p/hexactf-9/" target="_blank" rel="noopener"
>HexaCTF9&lt;/a>ë¥¼ ì°¸ê³ í•˜ì‹œê¸¸ ë°”ëë‹ˆë‹¤.&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>ëˆˆì°ë¯¸ ì¢‹ìœ¼ì‹  ë¶„ë“¤ì€ ì•Œê² ì§€ë§Œ Queue ë˜í•œ ë©”ì„¸ì§€ë¥¼ ì €ì¥í•´ì•¼ í•˜ë¯€ë¡œ Statefulsetìœ¼ë¡œ ë°°í¬í•´ì•¼ í•©ë‹ˆë‹¤.&lt;/p>&lt;/blockquote>
&lt;p>&lt;img src="https://s0okju.github.io/p/hexactf-12/image-2.png"
width="624"
height="241"
srcset="https://s0okju.github.io/p/hexactf-12/image-2_hu_c3a21299daae4a6d.png 480w, https://s0okju.github.io/p/hexactf-12/image-2_hu_f07ed3800517c945.png 1024w"
loading="lazy"
alt="ì¿ ë²„ë„¤í‹°ìŠ¤ HexaCTF ì• í”Œë¦¬ì¼€ì´ì…˜ êµ¬ì„±ë„"
class="gallery-image"
data-flex-grow="258"
data-flex-basis="621px"
>&lt;/p>
&lt;h3 id="ì•„ì‰¬ìš´-ì ">ì•„ì‰¬ìš´ ì 
&lt;/h3>&lt;p>ê°€ì¥ ì•„ì‰¬ìš´ ì ì€ ëª¨ë“  ì• í”Œë¦¬ì¼€ì´ì…˜ì„ í•˜ë‚˜ì˜ Helmìœ¼ë¡œ ë°°í¬í•œ ê²ƒì…ë‹ˆë‹¤.&lt;/p>
&lt;ol>
&lt;li>ë°ì´í„°ë² ì´ìŠ¤&lt;/li>
&lt;/ol>
&lt;p>ìš´ì˜í•˜ë©´ì„œ DBì— ì§„ì§œ ì˜¤ë¥˜ê°€ ë§ì•˜ìŠµë‹ˆë‹¤. &lt;code>kubectl logs&lt;/code> ë¡œ ë§¤ì¼ ë¬¸ì œì ì„ íŒŒì•…í–ˆëŠ”ë°ìš”. ë¡œê·¸ë§Œìœ¼ë¡œëŠ” ëª…í™•í•œ ì›ì¸ì€ íŒŒì•…í•  ìˆ˜ ì—†ì—ˆì§€ë§Œ &lt;a class="link" href="https://hiwony.tistory.com/85" target="_blank" rel="noopener"
>InterfaceErrorê°€ ë¹ˆë²ˆí•˜ê²Œ ë‚˜íƒ€ë‚˜ëŠ” ê²ƒì„ ë³´ì•„ Connection leak ë¬¸ì œë¼ê³  ìƒê°í–ˆìŠµë‹ˆë‹¤. &lt;/a>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">pymysql.err.InterfaceError: (0, &amp;#39;&amp;#39;)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ê·¸ë˜ì„œ ë¬¸ì œì˜ ê·¼ê±°ë¥¼ ì°¾ê³ ì Prometheusì˜ ServiceMonitor ì—°ê²°ì„ ì‹œë„í–ˆìœ¼ë‚˜ ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ì‹œê°„ì´ ì—†ì–´ì„œ ëê¹Œì§€ í•´ë³´ì§€ëŠ” ëª»í–ˆìŠµë‹ˆë‹¤.&lt;br>
ëŒ€íšŒê°€ ëë‚˜ê³  ë‹¤ì‹œ ìƒê°í•´ë³´ë‹ˆ Operatorë¡œ MariaDBë¥¼ ë”°ë¡œ ë°°í¬í•˜ë©´ ì¢‹ì§€ ì•Šì•˜ì„ê¹Œ í•˜ëŠ” ì•„ì‰¬ì›€ì´ ìˆìŠµë‹ˆë‹¤. ë‚´ë¶€ì ìœ¼ë¡œ ëª¨ë‹ˆí„°ë§ ê¸°ëŠ¥ì„ ì‰½ê²Œ ì„¤ì •í•  ìˆ˜ ìˆìœ¼ë©° ìƒí™©ì— ë”°ë¼ì„œ í™•ì¥ê³¼ ê´€ë¦¬ê°€ ìš©ì´í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.&lt;/p>
&lt;ol start="2">
&lt;li>í&lt;/li>
&lt;/ol>
&lt;p>ì‚¬ì§„ì—ëŠ” Queueë¼ê³  ì ì—ˆì§€ë§Œ ì •í™•í•˜ê²Œ Kafkaì…ë‹ˆë‹¤.&lt;/p>
&lt;blockquote>
&lt;p>Kafkaë¥¼ ì„ ì •í•œ ì´ìœ ëŠ” í•œë²ˆì´ë¼ë„ ì¨ë³´ê³  ì‹¶ì—ˆê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. ^-^! ì“°ê³  ë‚˜ì„œ í›„íšŒí–ˆìŠµë‹ˆë‹¤.&lt;/p>&lt;/blockquote>
&lt;p>ëˆˆì°ë¯¸ê°€ ì¢‹ìœ¼ì‹  ë¶„ë“¤ì€ ì•Œê³  ê³„ì…¨ê² ì§€ë§Œ Queue ë˜í•œ StatefulSetìœ¼ë¡œ ë°°í¬í•´ì•¼ í•©ë‹ˆë‹¤. íì—ëŠ” ë©”ì„¸ì§€ê°€ ì €ì¥ë˜ì–´ ìˆê¸° ë•Œë¬¸ì— ìƒíƒœë¥¼ ì €ì¥í•´ì•¼ í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.&lt;br>
í”„ë¡œì íŠ¸ì—ì„œëŠ” ìš´ì´ ì¢‹ê²Œë„ íì— ë¬¸ì œê°€ ìƒê¸°ì§€ ì•Šì•„ ë°ì´í„° ìœ ì‹¤ì´ ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‹¤ ëŒ€íšŒë¥¼ ë§ˆë¬´ë¦¬í•˜ê³  ë‚˜ì„œ ë³´ë‹ˆ ë°°í¬ ë¦¬ì†ŒìŠ¤ë¥¼ ì˜ëª» ì„¤ì •í–ˆë‹¤ëŠ” ê²ƒì„ ê¹¨ë‹«ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>Queueë„ í”„ë¡œì íŠ¸ì˜ Helmìœ¼ë¡œ ê´€ë¦¬í•˜ëŠ” ê²ƒì´ ì•„ë‹Œ ë¶„ë¦¬í•´ì„œ Operatorë¡œ ê´€ë¦¬í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤ê³  ìƒê°í–ˆìŠµë‹ˆë‹¤. ë°ì´í„°ë² ì´ìŠ¤ì™€ ë™ì¼í•œ ì´ìœ ë¡œ í™•ì¥ê³¼ ê´€ë¦¬ê°€ ìš©ì´í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.&lt;/p>
&lt;h2 id="ë°°í¬-í”„ë¡œì„¸ìŠ¤-íšŒê³ ">ë°°í¬ í”„ë¡œì„¸ìŠ¤ íšŒê³ 
&lt;/h2>&lt;h3 id="ì‘ì€-ì¼ë„-ìˆ˜ì‘ì—…ì€-í˜ë“¤ë‹¤">ì‘ì€ ì¼ë„ ìˆ˜ì‘ì—…ì€ í˜ë“¤ë‹¤.
&lt;/h3>&lt;p>í”„ë¡œì íŠ¸ ë‹¹ì‹œ &lt;strong>ìë™í™”ëŠ” í•˜ë‚˜ë„ í•˜ì§€ ì•Šê³  ìˆ˜ì‘ì—…ìœ¼ë¡œ ë³€ê²½ì‚¬í•­ì„ ì¼ë¦¬ë¦¬ í™•ì¸í•˜ê³  ë¹Œë“œí•˜ê³  ë°°í¬&lt;/strong>í–ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>ì  í‚¨ìŠ¤ ì„œë²„ëŠ” ì¡´ì¬í•©ë‹ˆë‹¤. ê·¸ëŸ°ë° ì£¼ìš” ëª©ì ì€ &lt;strong>ìˆ˜ë™&lt;/strong>ìœ¼ë¡œ HexaCTF ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜, Challenge ì´ë¯¸ì§€ë¥¼ ë¹Œë“œí•˜ì—¬ ì´ë¯¸ì§€ ë ˆì§€ìŠ¤íŠ¸ë¦¬ì— ì „ì†¡í•˜ëŠ” ìš©ë„ì˜€ìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>ì´ˆê¸°ì—ëŠ” í”„ë¡œì íŠ¸ê°€ ì†Œê·œëª¨ì´ë¯€ë¡œ CI/CDëŠ” í•„ìš”ì—†ë‹¤ëŠ” ì˜ê²¬ì´ ëŒ€ë‹¤ìˆ˜ì˜€ìŠµë‹ˆë‹¤. ì €ë„ ì–´ëŠ ì •ë„ ë™ì˜í–ˆìœ¼ë©° í•œ ì‚¬ëŒ(ë³¸ì¸)ì´ ëª¨ë“  ë°°í¬ í”„ë¡œì„¸ìŠ¤ë¥¼ ìˆ˜ìš©í•  ìˆ˜ ìˆì„ ê²ƒì´ë¼ê³  ìƒê°í–ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>ëŒ€íšŒ ì¼ì£¼ì¼ ì „ì— git pull, helm upgrade ëª…ë ¹ì–´ë§Œ ë¬´í•œ ë°˜ë³µìœ¼ë¡œ ì¹˜ë‹ˆ ë‹¤ì–‘í•œ ìƒê°ì´ ë“¤ì—ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;ul>
&lt;li>Helmìœ¼ë¡œ ë™ì‹œì— ë°°í¬í–ˆëŠ”ë° ì• í”Œë¦¬ì¼€ì´ì…˜ í•˜ë‚˜ëŠ” ì´ì „ ë²„ì „ìœ¼ë¡œ ë¡¤ë°±í•˜ê³  ë‹¤ë¥¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì€ ì—…ê·¸ë ˆì´ë“œ ë²„ì „ì„ í™œìš©í•´ì•¼ í•˜ëŠ” ê²½ìš° -&amp;gt; í•˜ë‚˜ë¡œ ë°°í¬í•˜ëŠ”ê²Œ ì•„ë‹ˆë¼ íŒ€ ë‹¨ìœ„ë¡œ ìª¼ê°œì„œ CI/CD ì“¸ê±¸&lt;/li>
&lt;li>Helm upgrade í–ˆëŠ”ë° ë¹Œë“œ ê³¼ì •ì„ ìƒëµí•˜ì—¬ ë³€ê²½ ì‚¬í•­ì´ ë°˜ì˜ë˜ì§€ ì•Šì€ ê²½ìš° -&amp;gt; ì  í‚¨ìŠ¤ë¡œ ì´ë¯¸ì§€ë¥¼ ìë™ìœ¼ë¡œ ë¹Œë“œí• ê±¸&lt;/li>
&lt;li>branchë¥¼ ì˜ëª» ì„¤ì •í–ˆìœ¼ë©´ì„œ ìˆ˜ë™ìœ¼ë¡œ ë¹Œë“œí•˜ê¸° ëˆŒëŸ¬ êµ¬ë²„ì „ìœ¼ë¡œ ì´ë¯¸ì§€ ë¹Œë“œí•˜ê¸° -&amp;gt; ì  í‚¨ìŠ¤ë¡œ ì´ë¯¸ì§€ë¥¼ ìë™ìœ¼ë¡œ ë¹Œë“œí–ˆìœ¼ë©´ ë‚´ê°€ ë¸Œëœì¹˜ë¥¼ ì˜ëª» ì¼ë‹¤ëŠ” ê±¸ ì•Œì•˜ì„í…ë°&lt;/li>
&lt;li>helm íŒŒì¼ ìˆ˜ì •ë³¸ì´ ë°˜ì˜ë˜ì§€ ì•ŠëŠ” ê²½ìš° -&amp;gt; ArgoCD ì“¸ê±¸&lt;/li>
&lt;li>ë¬¸ì œ ë°œìƒ ì‹œ íŒ€ì›ì—ê²Œ ì§ì ‘ ì•Œë¦¬ê¸° -&amp;gt; CI/CDì— ìˆëŠ” ì•Œë¦¼ ê¸°ëŠ¥ì„ í™œìš©í• ê±¸&lt;/li>
&lt;li>ê¸°íƒ€ ë“±ë“± &amp;hellip;&lt;/li>
&lt;/ul>
&lt;p>íœ´ë¨¼ ì´ìŠˆë¡œ ì¸í•´ ì˜ˆìƒë³´ë‹¤ ë¬¸ì œëŠ” ë§ì•˜ê³  ìë™í™”ë¥¼ ì•ˆí•œ ê²ƒì„ ë¼ˆì €ë¦¬ê²Œ í›„íšŒí–ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/hexactf-12/image-3.png"
width="400"
height="300"
srcset="https://s0okju.github.io/p/hexactf-12/image-3_hu_76fcfbc179472712.png 480w, https://s0okju.github.io/p/hexactf-12/image-3_hu_49815617fdd2ab21.png 1024w"
loading="lazy"
alt="Challenge Operator, API ë²„ê·¸ ìˆ˜ì •í•˜ê³  ë˜ â€¦ ì‚´ë ¤ì¤˜"
class="gallery-image"
data-flex-grow="133"
data-flex-basis="320px"
>&lt;/p>
&lt;h2 id="ë§ˆì¹˜ë©°">ë§ˆì¹˜ë©°
&lt;/h2>&lt;p>ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ ë°°í¬ì— ëŒ€í•´ ê¸°ìˆ ì ìœ¼ë¡œ ì‘ì„±í• ë§Œí•œ ê²ƒì€ ì—†ì—ˆìŠµë‹ˆë‹¤. ìë™í™”ë¼ëŠ” ì¢‹ì€ ì‹œìŠ¤í…œì„ ë²„ë¦¬ê³  ì„ ì‚¬ ì‹œëŒ€ì˜ ë°©ì‹ìœ¼ë¡œ ìˆ˜í–‰í–ˆìœ¼ë‹ˆê¹Œìš”. ê·¸ë§Œí¼ ëª¸ì†Œ ëŠë‚€ì ì´ ë§ìœ¼ë©° ì œëª©ë„ ë°°í¬ê°€ ì•„ë‹Œ &amp;ldquo;íšŒê³ &amp;quot;ë¡œ ì§€ì€ ê²ƒ ê°™ìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>ì´ì œ ê¸°ìˆ ì ì¸ ë‚´ìš©ì€ ëì…ë‹ˆë‹¤. 5ê°œì›” ëì— ë“œë””ì–´ ê¸€ì„ ëª¨ë‘ ì‘ì„±í•  ìˆ˜ ìˆì—ˆë„¤ìš”.&lt;br>
ë‹¤ìŒì— &amp;ldquo;HexaCTF ì‹œë¦¬ì¦ˆ ì–´ì›Œë“œ&amp;quot;ë¥¼ ë§ˆì§€ë§‰ìœ¼ë¡œ ì‹œë¦¬ì¦ˆë¥¼ ë§ˆì¹˜ê² ìŠµë‹ˆë‹¤.&lt;/p></description></item><item><title>HexaCTF 8. ì»¤ìŠ¤í…€ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ í†µí•œ Challenge ìƒì„± ë° ì‚­ì œ êµ¬í˜„</title><link>https://s0okju.github.io/p/hexactf-8/</link><pubDate>Tue, 04 Mar 2025 00:00:00 +0900</pubDate><guid>https://s0okju.github.io/p/hexactf-8/</guid><description>&lt;ul>
&lt;li>2025-03-07 - ë‚´ìš© ìˆ˜ì •&lt;/li>
&lt;/ul>
&lt;p>ì´ì „ ê¸€ì—ëŠ” ìƒíƒœë¥¼ ì–´ë–»ê²Œ ì •ì˜í–ˆëŠ”ì§€ ì„¤ëª…í–ˆìŠµë‹ˆë‹¤. ì§€ê¸ˆë¶€í„° ì–´ë–»ê²Œ Challengeë¥¼ ìƒì„±, ì‚­ì œí•  ìˆ˜ ìˆëŠ”ì§€ ì„¤ëª…í•˜ê² ìŠµë‹ˆë‹¤.&lt;/p>
&lt;h2 id="ì¡°ê±´-ìƒê°í•˜ê¸°">ì¡°ê±´ ìƒê°í•˜ê¸°
&lt;/h2>&lt;p>ìš°ì„  ìƒì„±ê³¼ ì‚­ì œ ë¡œì§ì„ ì„¤ëª…í•˜ê¸° ì´ì „ì— ìƒì„±ê³¼ ì‚­ì œ ì‹œ ë¬´ì¡°ê±´ ìˆ˜í–‰ë˜ì–´ì•¼ í•˜ëŠ” ì¡°ê±´ì„ ì •ë¦¬í•´ì•¼ í•©ë‹ˆë‹¤.&lt;/p>
&lt;ul>
&lt;li>ìƒì„±
&lt;ul>
&lt;li>Deployment, Service ìƒì„±&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>ì‚­ì œ
&lt;ul>
&lt;li>ì¡°ê±´ì— ë”°ë¼ 30ë¶„ í›„ ì‚­ì œ -&amp;gt; ìƒì„±ì¼ ê¸°ì¤€ìœ¼ë¡œ ì¢…ë£Œì¼ ì§€ì •&lt;/li>
&lt;li>Challenge ì‚­ì œ ì‹œ ê´€ë ¨ Deployment, Service ì‚­ì œ -&amp;gt; ë¬´ì–¸ê°€ë¥¼ í†µí•´ ì—°ê²°ë˜ì–´ì•¼ í•¨&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>ì£¼ë¡œ &lt;strong>ì‚­ì œ ë¡œì§ì„ ì¤‘ì‹¬&lt;/strong>ìœ¼ë¡œ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤. ì‚­ì œë¥¼ ì œëŒ€ë¡œ ì œì–´í•˜ì§€ ì•Šìœ¼ë©´ ê³ ì•„ ë¦¬ì†ŒìŠ¤ê°€ ìƒê¸°ëŠ” ë¬¸ì œê°€ ë°œìƒí•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.&lt;/p>
&lt;h2 id="builderë¥¼-í†µí•´-controllerë¥¼-ì„¤ì •í•œë‹¤">Builderë¥¼ í†µí•´ Controllerë¥¼ ì„¤ì •í•œë‹¤.
&lt;/h2>&lt;p>ê³µì‹ ë¬¸ì„œì— ì˜í•˜ë©´ BuilderëŠ” controller-runtimeì„ ê°ì‹¸ë©°, ì¼ë°˜ì ì¸ controllerë¥¼ êµ¬ì¶•í•˜ê¸° ìœ„í•œ íŒ¨í„´ì„ ì œê³µí•œë‹¤ê³  í•©ë‹ˆë‹¤.&lt;/p>
&lt;p>ì´ì „ ê¸€ì—ì„œ ì œê°€ í–ˆë˜ ì´ì•¼ê¸° ìƒê° ë‚˜ì‹œë‚˜ìš”? &lt;strong>ì˜¤í¼ë ˆì´í„°ë¥¼ ë§Œë“ ë‹¤ëŠ” ê²ƒì€ ëŒ€ìƒ ë¦¬ì†ŒìŠ¤ë¥¼ ì œì–´í•˜ëŠ” controllerì™€ Controllerë¥¼ ê´€ë¦¬í•˜ëŠ” Manangerë¥¼ ë§Œë“ ë‹¤&lt;/strong>ëŠ” ê²ƒì´ê³ , &lt;strong>KubebuilderëŠ” controllerë¥¼ ë¹Œë“œí•˜ëŠ” í”„ë¡œê·¸ë¨&lt;/strong>ì´ë¼ê³  ë§í–ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;blockquote>
&lt;p>&lt;strong>Manager&lt;/strong>
controllerë¥¼ ì œì‘í•˜ëŠ”ë° í•„ìš”í•˜ë©° client, caches, schemesë“± ì˜ ê³µìœ  ë””íœë˜ì‹œë¥¼ ì œê³µí•œë‹¤. ì»¨íŠ¸ë¡¤ëŸ¬ëŠ” Manager.Startë¥¼ í˜¸ì¶œí•˜ì—¬ ì‹œì‘ë˜ì–´ì•¼ í•œë‹¤.
&lt;a class="link" href="https://pkg.go.dev/sigs.k8s.io/controller-runtime/pkg/manager" target="_blank" rel="noopener"
>ê³µì‹ ë¬¸ì„œ &lt;/a>&lt;/p>&lt;/blockquote>
&lt;p>ì‹¤ì œ ì½”ë“œ ìƒì—ì„œëŠ” kubebuilderê°€ Managerë¼ëŠ” ê°ì²´ ìƒì„±í•´ì¤ë‹ˆë‹¤.(&lt;code>cmd/main.go&lt;/code>)&lt;/p>
&lt;blockquote>
&lt;p>ManagerëŠ” ê³ ê°€ìš©ì„±ì„ ìœ„í•´ Controllerë“¤ì˜ leader electionë„ ìˆ˜í–‰í•©ë‹ˆë‹¤.&lt;/p>&lt;/blockquote>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">mgr&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">ctrl&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NewManager&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">ctrl&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">GetConfigOrDie&lt;/span>&lt;span class="p">(),&lt;/span> &lt;span class="nx">ctrl&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Options&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Scheme&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">scheme&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Metrics&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">metricsServerOptions&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">WebhookServer&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">webhookServer&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">HealthProbeBindAddress&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">probeAddr&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">LeaderElection&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">enableLeaderElection&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">LeaderElectionID&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;958dbbf6.hexactf.io&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// LeaderElectionReleaseOnCancel defines if the leader should step down voluntarily&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// when the Manager ends. This requires the binary to immediately end when the&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Manager is stopped, otherwise, this setting is unsafe. Setting this significantly&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// speeds up voluntary leader transitions as the new leader don&amp;#39;t have to wait&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// LeaseDuration time first.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">//&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// In the default scaffold provided, the program ends immediately after&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// the manager stops, so would be fine to enable this option. However,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// if you are doing or is intended to do any operation such as perform cleanups&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// after the manager stops then its usage might be unsafe.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// LeaderElectionReleaseOnCancel: true,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">setupLog&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Error&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;unable to start manager&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Exit&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ìš”êµ¬ì‚¬í•­ì— ë”°ë¼ì„œ í•˜ë‚˜ì˜ í”„ë¡œì íŠ¸ì— 2ê°œ ì´ìƒì˜ controllerë¥¼ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í˜„ì¬ ì €í¬ ëŒ€íšŒì—ì„œëŠ” Challenge Controller í•˜ë‚˜ë§Œ í•„ìš”í•˜ê¸° ë•Œë¬¸ì— í•˜ë‚˜ë§Œ ë§Œë“  ê²ƒ ë¿ì…ë‹ˆë‹¤.
ManagerëŠ” Controllerë¥¼ ì œì–´í•˜ëŠ” ì—­í• ì„ ê°€ì§„ë‹¤ê³  ì„¤ëª…í–ˆì£ ? &lt;strong>ì²˜ìŒ Manangerê°€ ì—¬ëŸ¬ê°œì˜ controllerë¥¼ ì œì–´í•˜ê¸° ìœ„í•´ì„œëŠ” Managerì— Controller ë“±ë¡ ì‘ì—…ì´ í•„ìš”í•©ë‹ˆë‹¤.&lt;/strong> ê·¸ë¦¬ê³  ì´ ë¶€ë¶„ì€ ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ controller íŒŒì¼ ìƒì„± ì‹œ ìë™ìœ¼ë¡œ ì œê³µí•©ë‹ˆë‹¤.&lt;/p>
&lt;p>ë‹¤ì‹œ ëŒì•„ì™€ì„œ BuilderëŠ” Challenge Controllerë¥¼ ìƒì„±í•˜ê¸° ìœ„í•´ ì–´ë–¤ ì •ë³´ê°€ í•„ìš”í• ê¹Œìš”?&lt;/p>
&lt;ul>
&lt;li>Controllerë¥¼ ì œì–´í•  Manager&lt;/li>
&lt;li>Controller ëŒ€ìƒ ë¦¬ì†ŒìŠ¤&lt;/li>
&lt;li>Controllerì— ì‚½ì…í•  Reconcile í•¨ìˆ˜&lt;/li>
&lt;/ul>
&lt;p>kubebuilderë¥¼ í†µí•´ ìë™ìœ¼ë¡œ controllerë¥¼ ìƒì„±í•˜ë©´ ì•„ë˜ì™€ ê°™ì´ ë¹Œë“œ ë¡œì§ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// SetupWithManager sets up the controller with the Manager.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">r&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">ChallengeReconciler&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nf">SetupWithManager&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">mgr&lt;/span> &lt;span class="nx">ctrl&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Manager&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="kt">error&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Builder ì´ˆê¸°í™”&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">ctrl&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NewControllerManagedBy&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">mgr&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Challengeë¼ëŠ” ëŒ€ìƒ ë¦¬ì†ŒìŠ¤&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">For&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">hexactfproj&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Challenge&lt;/span>&lt;span class="p">{}).&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">Owns&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">appsv1&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Deployment&lt;/span>&lt;span class="p">{}).&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">Owns&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">corev1&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Service&lt;/span>&lt;span class="p">{}).&lt;/span>&lt;span class="o">/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">Named&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;challenge&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Controllerì— ChallengeReconcilerë¥¼ ì‚½ì…&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">Complete&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">r&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="controllerëŠ”-reconcilerë¥¼-í†µí•´-reconcileë¥¼-ì‹¤í–‰í•œë‹¤">ControllerëŠ” Reconcilerë¥¼ í†µí•´ Reconcile()ë¥¼ ì‹¤í–‰í•œë‹¤.
&lt;/h2>&lt;p>ControllerëŠ” íƒ€ê²Ÿ ë¦¬ì†ŒìŠ¤(Challenge)ë¥¼ ëª¨ë‹ˆí„°ë§í•˜ê³  ë³€ê²½ ì‹œ &lt;code>Reconciler&lt;/code> í•¨ìˆ˜ë¥¼ ì‹¤í–‰ì‹œí‚µë‹ˆë‹¤. Reconciler í•¨ìˆ˜ëŠ” kube-apiserverë¥¼ í†µí•´ ëŒ€ìƒ ë¦¬ì†ŒìŠ¤ì˜ ë³€ê²½ ì‚¬í•­ì„ í™•ì¸í•©ë‹ˆë‹¤. ë§Œì•½ì— ë³€ê²½ ì‚¬í•­ì´ ê°ì§€ê°€ ë˜ì—ˆë‹¤ë©´ &lt;code>Reconcile&lt;/code> í•¨ìˆ˜ë¥¼ ì‹¤í–‰ì‹œí‚µë‹ˆë‹¤.&lt;/p>
&lt;p>ë§¨ ì²«ë¶€ë¶„ì— ë§í•œ ì¡°ê±´ì€ ëª¨ë‘ &lt;code>Reconcile&lt;/code> í•¨ìˆ˜ ë‚´ì— êµ¬í˜„í•˜ê²Œ ë©ë‹ˆë‹¤.&lt;/p>
&lt;blockquote>
&lt;p>êµ¬ì²´ì ì¸ ë‚´ìš©ì€ &lt;a class="link" href="https://nakamasato.medium.com/kubernetes-operator-series-6-controller-runtime-component-controller-604c8905a1e1" target="_blank" rel="noopener"
>Kubernetes Operator series 6 â€” controller-runtime component â€” Controller | by Masato Naka | Medium&lt;/a> ì½ëŠ” ê²ƒì„ ì¶”ì²œë“œë¦½ë‹ˆë‹¤.&lt;/p>&lt;/blockquote>
&lt;h2 id="challenge-ë¦¬ì†ŒìŠ¤-ìƒì„±">Challenge ë¦¬ì†ŒìŠ¤ ìƒì„±
&lt;/h2>&lt;h3 id="ì‰½ê²Œ-ì‚­ì œí• -ìˆ˜-ìˆë„ë¡-challengeë¥¼-ë§Œë“¤ì">ì‰½ê²Œ ì‚­ì œí•  ìˆ˜ ìˆë„ë¡ Challengeë¥¼ ë§Œë“¤ì!
&lt;/h3>&lt;p>ChallengeëŠ” Deployment, Serviceë¥¼ í•˜ë‚˜ì˜ ì»´í¬ë„ŒíŠ¸ë¡œ êµ¬ì„±í•˜ì—¬ ìƒì„±í•˜ê²Œ ë©ë‹ˆë‹¤. &lt;strong>ì‚­ì œ ì‹œ ê³ ì•„ ë¦¬ì†ŒìŠ¤ê°€ ë°œìƒí•˜ì§€ ì•Šë„ë¡ ìƒì„±í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤.&lt;/strong>
ìœ„ì˜ ê³¼ì œë¥¼ ë‹¬ì„±í•˜ê¸° ìœ„í•´ì„œ Challenge-Deployment, Serviceê°„ ë¶€ëª¨-ìì‹ ê´€ê³„ë¥¼ ì§€ì •í–ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;blockquote>
&lt;p>Ownsì— ëŒ€í•´ì„œ ì†Œìœ  ê´€ê³„ë¼ê³  ë§í•˜ëŠ” ì‚¬ëŒì´ ìˆê³ , ì–´ëŠ ì±…ì—ì„œëŠ” ë¶€ëª¨-ìì‹ ê´€ê³„ë¼ê³  ì„¤ëª…í•˜ê¸°ë„ í–ˆìŠµë‹ˆë‹¤. ì €ëŠ” ìƒí•˜ ê´€ê³„ë¥¼ ëšœë ·í•˜ê²Œ í‘œí˜„í•  ìˆ˜ ìˆì–´ &lt;strong>ë¶€ëª¨-ìì‹ ê´€ê³„&lt;/strong>ë¡œ ì„¤ëª…í•˜ê² ìŠµë‹ˆë‹¤.&lt;/p>&lt;/blockquote>
&lt;p>ì‰½ê²Œ ë§í•´ ì»¤ìŠ¤í…€ ë¦¬ì†ŒìŠ¤(Challenge) ë¶€ëª¨ì´ê³  Deployment, Service ìì‹ ê´€ê³„ë¼ê³  ìƒê°í•˜ì‹œë©´ ë©ë‹ˆë‹¤. Challengeê°€ Deploymentê³¼ ì—°ê´€ëœë‹¤ëŠ” ê²ƒì€ Deploymentì— ë³€ê²½ ì‚¬í•­ ë°œìƒ ì‹œ Reconcile()ì´ ë°œìƒí•œë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤.&lt;/p>
&lt;p>ë¶€ëª¨-ìì‹ ê´€ê³„ë¥¼ ì‚¬ìš©í•œ ì´ìœ ëŠ” ì‚­ì œ ì‹œ í¸ë¦¬í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. êµ¬ì²´ì ìœ¼ë¡œ ë§í•˜ìë©´ &lt;strong>ìì‹ ë¦¬ì†ŒìŠ¤ê°€ ë¶€ëª¨ ë¦¬ì†ŒìŠ¤ì— ì†Œì†ëœ ê²ƒìœ¼ë¡œ ì„¤ì •ë˜ì–´ ìˆë‹¤ë©´ ë¶€ëª¨ ë¦¬ì†ŒìŠ¤ ì‚­ì œ ì¿ ë²„ë„¤í‹°ìŠ¤ì˜ ê°€ë¹„ì§€ ì»¬ë ‰ì…˜ì€ ëª¨ë“  ìì‹ ë¦¬ì†ŒìŠ¤ë¥¼ ìë™ìœ¼ë¡œ ì •ë¦¬&lt;/strong>í•©ë‹ˆë‹¤.&lt;/p>
&lt;h4 id="êµ¬í˜„">êµ¬í˜„
&lt;/h4>&lt;p>ìƒì„± ì‹œ ì•„ë˜ì˜ ë¡œì§ì„ ë”°ë¦…ë‹ˆë‹¤.&lt;/p>
&lt;ol>
&lt;li>Challenge ê°ì²´ ì´ˆê¸°í™”&lt;/li>
&lt;li>LoadDefinitionì„ ë¡œë“œ&lt;/li>
&lt;li>LoadDefinition ê¸°ë°˜ìœ¼ë¡œ Deployment, Serviceë¥¼ ìƒì„±(ë¶€ëª¨-ìì‹ ê´€ê³„)&lt;/li>
&lt;li>Challengeì— í•„ìš” ë ˆì´ë¸”ì„ ì¶”ê°€&lt;/li>
&lt;/ol>
&lt;p>ì—¬ê¸°ì„œ ì´ˆê¸°í™” ë¶€ë¶„ì— &lt;code>challenge.Status.StartedAt&lt;/code> ë¥¼ í˜„ì¬ ì‹œê°„ìœ¼ë¡œ ì €ì¥í–ˆìŠµë‹ˆë‹¤. ì´ ì†ì„±ê°’ì€ ì´ˆê¸°í™” í˜¹ì€ ì¶”í›„ 30ë¶„ í›„ì— ì‚­ì œí•˜ê¸° ìœ„í•´ ë¹„êµê°’ìœ¼ë¡œ í™œìš©ë©ë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// ì²˜ìŒ ìƒì„± ì‹œ StartedAt ë“± Status ì´ˆê¸°í™”&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">challenge&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Status&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">StartedAt&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">ctx&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">req&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">NamespacedName&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">challenge&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">handleError&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">ctx&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">req&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">challenge&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">now&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">metav1&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Now&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">challenge&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Status&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">StartedAt&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">now&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">challenge&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Status&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">CurrentStatus&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">hexactfproj&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NewCurrentStatus&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Status&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="nf">Update&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">ctx&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">challenge&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Error&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;Failed to initialize status&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">handleError&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">ctx&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">req&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">challenge&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ìµœì‹  ìƒíƒœë¡œ ê°±ì‹ &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">ctx&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">req&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">NamespacedName&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">challenge&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// NotFound ì—ëŸ¬ ë“±ì€ ë¬´ì‹œ&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">handleError&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">ctx&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">req&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">challenge&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// í˜„ì¬ ìƒíƒœì— ë”°ë¼ ë¶„ê¸°&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">switch&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">case&lt;/span> &lt;span class="nx">challenge&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Status&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">CurrentStatus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">IsNone&lt;/span>&lt;span class="p">():&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">ctx&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">req&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">NamespacedName&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">challenge&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">handleError&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">ctx&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">req&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">challenge&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ì‹¤ì œ Challengeì— í•„ìš”í•œ ë¦¬ì†ŒìŠ¤ë“¤(Deployment, Service ë“±) ìƒì„± ë¡œì§&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">loadChallengeDefinition&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">ctx&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">req&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">challenge&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">handleError&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">ctx&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">req&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">challenge&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// í•œ ë²ˆ ë” ì¬í(Requeue)í•˜ì—¬ ë°”ë¡œ ë‹¤ìŒ ë‹¨ê³„ í™•ì¸&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">ctrl&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Result&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="nx">Requeue&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">},&lt;/span> &lt;span class="kc">nil&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Deployment, Service ìƒì„± ì‹œ Challengeì— ëŒ€í•œ &lt;code>SetControllerReference&lt;/code> ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤. ê·¸ë¦¬ê³  &lt;code>Client.Create&lt;/code>ë¥¼ í†µí•´ Deployment,Serviceë¥¼ ìƒì„±í•©ë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Deploymentê°€ ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">ctx&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">client&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">ObjectKey&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Namespace&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">challenge&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Namespace&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Name&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">deploy&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Name&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span> &lt;span class="nx">deploy&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">errors&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">IsNotFound&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Info&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Creating Deployment&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;Deployment.Namespace&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">deploy&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Namespace&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;Deployment.Name&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">deploy&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Name&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Owner Reference ì„¤ì •&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">ctrl&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SetControllerReference&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">challenge&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">deploy&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Scheme&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Error&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;failed to set controller reference&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">err&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Deployment ìƒì„±&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">err&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Client&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Create&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">ctx&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">deploy&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Error&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;failed to create Deployment&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">err&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Error&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;failed to get Deployment&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">err&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ê·¸ë¦¬ê³  ì»¨íŠ¸ë¡¤ëŸ¬ Builder ì´ˆê¸°í™” ë¶€ë¶„ì—ì„œ ì†Œìœ  ê´€ê³„ë¥¼ ëª…í™•íˆ êµ¬í˜„í•˜ì‹œë©´ ë©ë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// SetupWithManager sets up the controller with the Manager.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">r&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">ChallengeReconciler&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nf">SetupWithManager&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">mgr&lt;/span> &lt;span class="nx">ctrl&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Manager&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="kt">error&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Builderë¥¼ ì´ˆê¸°í™”&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">ctrl&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NewControllerManagedBy&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">mgr&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Challenge(ë¶€ëª¨ ë¦¬ì†ŒìŠ¤)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">For&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">hexactfproj&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Challenge&lt;/span>&lt;span class="p">{}).&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Deployment(ìì‹ ë¦¬ì†ŒìŠ¤)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">Owns&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">appsv1&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Deployment&lt;/span>&lt;span class="p">{}).&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Service(ìì‹ ë¦¬ì†ŒìŠ¤)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">Owns&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">corev1&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Service&lt;/span>&lt;span class="p">{}).&lt;/span>&lt;span class="o">/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">Named&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;challenge&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Controllerì— ChallengeReconcilerë¥¼ ì‚½ì…&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">Complete&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">r&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="ìƒíƒœë¥¼-ê°ì§€í•˜ê³ -ë³€ê²½í•˜ëŠ”-ë°©ë²•">ìƒíƒœë¥¼ ê°ì§€í•˜ê³  ë³€ê²½í•˜ëŠ” ë°©ë²•
&lt;/h3>&lt;p>ì™„ì „ ìƒˆë¡œìš´ Challengeë¼ë©´ ìƒíƒœ ê°’ê³¼ ê°™ì€ ê¸°íƒ€ ì •ë³´ë¥¼ ì´ˆê¸°í™”í•˜ì—¬ í•„ìš” ë¦¬ì†ŒìŠ¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤. ì´ ê³¼ì •ì—ì„œ None -&amp;gt; Running ìƒíƒœë¡œ ë³€ê²½í•˜ê²Œ ë˜ëŠ”ë°, ì½”ë“œ ìƒì—ì„œ ì°¸ì¡°í•˜ê³  ìˆëŠ” challengeì˜ status ê°’ì„ Runningë¥¼ ë³€ê²½í•˜ì—¬ ìƒˆë¡œìš´ ìƒíƒœë¥¼ ì¿ ë²„ë„¤í‹°ìŠ¤ì— ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">challenge&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Status&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">CurrentStatus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SetRunning&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">now&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">metav1&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Now&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">challenge&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Status&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">StartedAt&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">now&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Status&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="nf">Update&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">ctx&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">challenge&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">handleError&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">ctx&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">req&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">challenge&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="ì»¨íŠ¸ë¡¤ëŸ¬-êµ¬í˜„ì—-ì¤‘ìš”í•œ-ê²ƒì€---ë©±ë“±ì„±">ì»¨íŠ¸ë¡¤ëŸ¬ êµ¬í˜„ì— ì¤‘ìš”í•œ ê²ƒì€? - ë©±ë“±ì„±
&lt;/h3>&lt;p>ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ë§í•˜ëŠ” &lt;strong>ë©±ë“±ì„±&lt;/strong>ì€ ë³€ê²½ ë˜ì§€ ì•ŠëŠ” ë¦¬ì†ŒìŠ¤ì˜ ì¡°ì • ìš”ì²­ì´ ì—¬ëŸ¬ë²ˆ ìˆë”ë¼ë„ &lt;strong>ë§¤ë²ˆ ë™ì¼í•œ ê²°ê³¼&lt;/strong>ë¥¼ ê°€ì ¸ì™€ì•¼ í•œë‹¤ëŠ” ì˜ë¯¸ì…ë‹ˆë‹¤. ë§Œì•½ì— í•˜ë‚˜ì˜ ë¶€ëª¨ ë¦¬ì†ŒìŠ¤ì— Deployment 1ê°œë¡œ êµ¬ì„±ëœ ìì‹ ë¦¬ì†ŒìŠ¤ë¥¼ ê°€ì ¸ì•¼ í•œë‹¤ê³  ê°€ì •í•´ë´…ì‹œë‹¤. ë¬´ìŠ¨ ì¼ì´ ë°œìƒí•˜ë”ë¼ë„ í•˜ë‚˜ì˜ ë¶€ëª¨ ë¦¬ì†ŒìŠ¤ì— ë¬´ì¡°ê±´ í•˜ë‚˜ì˜ Deploymentë¥¼ ê°€ì ¸ì•¼ í•©ë‹ˆë‹¤. ì¤‘ê°„ì— ì¶”ê°€ì ì¸ ìš”ì²­ì´ ë°œìƒí•˜ì—¬ Deploymentê°€ 2ê°œ ìƒì„±ëœë‹¤ë©´ ì´ê²ƒì€ ë©±ë“±ì„±ì´ ê¹¨ì§„ ê²ƒì…ë‹ˆë‹¤.&lt;/p>
&lt;p>ë©±ë“±ì„±ì€ Challenge Controllerë¥¼ êµ¬í˜„í•˜ë©´ì„œ í˜„ì¬ê¹Œì§€ë„ ê°€ì¥ ì–´ë ¤ì›Œí•˜ëŠ” ë¶€ë¶„ì´ê¸°ë„ í•©ë‹ˆë‹¤.
ChallengeëŠ” ì¿ ë²„ë„¤í‹°ìŠ¤ì˜ ê¸°ë³¸ ë¦¬ì†ŒìŠ¤ë¥¼ ê°€ì§€ê³  ìˆì§€ë§Œ ì ˆì°¨ì— ë”°ë¼ ë ˆì´ë¸”, ìƒíƒœ ê°’ì´ ì—…ë°ì´íŠ¸ ë©ë‹ˆë‹¤. ë³€ê²½ ì‚¬í•­ì´ ë§ì€ íƒ“ì— &lt;strong>Reconcile ë¡œì§ì„ êµ¬í˜„í•  ë•ŒëŠ” ìµœì‹ ì˜ Challengeë¥¼ ë¶ˆëŸ¬ì˜¤ë„ë¡ êµ¬í˜„&lt;/strong>í•´ì•¼ í•©ë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">ctx&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">req&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">NamespacedName&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">challenge&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">handleError&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">ctx&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">req&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">challenge&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ê·¸ë ‡ì§€ ì•Šìœ¼ë©´ Kubernetes Clientê°€ ì´ìš©í•˜ëŠ” Kubernetes Cacheì— ìˆëŠ” ìƒíƒœ ê°’ê³¼ ì‹¤ì œ ë°ì´í„°ì— ë¶ˆì¼ì¹˜ê°€ ë°œìƒí•´ ë¬¸ì œê°€ ë°œìƒí•˜ê²Œ ë©ë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-json" data-lang="json">&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;controller&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;challenge&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;controllerGroup&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;apps.hexactf.io&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;controllerKind&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;Challenge&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;Challenge&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;name&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;challenge-59-sample&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;namespace&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;default&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;namespace&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;default&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;name&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;challenge-59-sample&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;reconcileID&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;bf0eee44-a54d-417d-8322-7dc81e52152e&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;error&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;Operation cannot be fulfilled on challenges.apps.hexactf.io \&amp;#34;challenge-59-sample\&amp;#34;: the object has been modified; please apply your changes to the latest version and try again&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="challenge-ë¦¬ì†ŒìŠ¤-ì‚­ì œ">Challenge ë¦¬ì†ŒìŠ¤ ì‚­ì œ
&lt;/h2>&lt;h3 id="ì‚­ì œ-ìƒíƒœë¥¼-ì•Œë¦¬ê¸°-ìœ„í•œ-finalizer-ì´ìš©">ì‚­ì œ ìƒíƒœë¥¼ ì•Œë¦¬ê¸° ìœ„í•œ Finalizer ì´ìš©
&lt;/h3>&lt;p>ìƒí™©ì— ë”°ë¼ íŠ¹ë³„í•œ ì •ë¦¬ ë¡œì§ì´ í•„ìš”í•œ ê²½ìš°ê°€ ìˆìŠµë‹ˆë‹¤. ì´ëŸ´ ê²½ìš° Finzliazerë¥¼ í†µí•´ ë¦¬ì†ŒìŠ¤ë¥¼ ì‚­ì œí•˜ì§€ ëª»í•˜ê²Œ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ëŒ€í‘œì ì¸ ì˜ˆì‹œë¡œ pvc-protectionê°€ ìˆìœ¼ë©° ì´ìƒ íŒŒë“œê°€ ì ê·¹ì ìœ¼ë¡œ ì‚¬ìš©ë˜ì§€ ì•Šì„ë•Œê¹Œì§€ pvcì˜ ì‚­ì œê°€ ì—°ê¸°ë©ë‹ˆë‹¤.&lt;/p>
&lt;blockquote>
&lt;p>ì‹¤ì œë¡œ Finalizerë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šìœ¼ë©´ ì‚­ì œëŠ” ë¹ ë¥´ê²Œ ë°œìƒë©ë‹ˆë‹¤.&lt;/p>&lt;/blockquote>
&lt;p>í”„ë¡œì íŠ¸ì—ì„œëŠ” ë¦¬ì†ŒìŠ¤ ê°„ ì¢…ì†ì ì¸ ê´€ê³„ë¥¼ ê°€ì§€ì§€ ì•Šê³  ëª¨ë‘ ë…ë¦½ì ìœ¼ë¡œ ì‚¬ìš©ë©ë‹ˆë‹¤. ê·¸ëŸ¬ë¯€ë¡œ pvc ì‚¬ë¡€ì²˜ëŸ¼ Finalizerê°€ í•„ìš” ì—†ë‹¤ê³  ìƒê°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ê·¸ëŸ¬ë‚˜ ì €í¬ í”„ë¡œì íŠ¸ëŠ” ì‚­ì œ ìƒíƒœ ì •ë³´ë¥¼ ì„¤ì •í•˜ì—¬ ì™¸ë¶€ì— ë³´ë‚´ì•¼ í•©ë‹ˆë‹¤. ë’¤ì—ì„œ ë§ì”€í•˜ê² ì§€ë§Œ ìƒíƒœ ì •ë³´ë¥¼ íë¥¼ í†µí•´ ì „ì†¡í•˜ê²Œ ë˜ëŠ”ë°, ì´ë•Œ ì‚­ì œ ìš”ì²­ -&amp;gt; ìƒíƒœ ë©”ì„¸ì§€ ì „ì†¡ -&amp;gt; ì‚­ì œ ë¡œì§ì´ êµ¬í˜„ì´ ë˜ì–´ì•¼ í•©ë‹ˆë‹¤. ê²°êµ­ ë¦¬ì†ŒìŠ¤ ì •ë¦¬ê°€ ì•„ë‹ˆë”ë¼ë„ &lt;strong>ì‚­ì œê°€ ë˜ì—ˆë‹¤ëŠ” ìƒíƒœ ì •ë³´ë¥¼ ë‹¤ë¥¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ê²Œ ì•Œë ¤ì¤˜ì•¼ í•˜ëŠ” ì‹œê°„ì´ í•„ìš”í•˜ê²Œ ë©ë‹ˆë‹¤.&lt;/strong>
ì €ëŠ” ì´ëŸ¬í•œ ë¡œì§ì„ êµ¬í˜„í•˜ê¸° ìœ„í•´ Finalizerë¥¼ ì‚¬ìš©í•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">const&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">challengeFinalizer&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;challenge.hexactf.io/finalizer&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">r&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">ChallengeReconciler&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nf">addFinalizer&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">ctx&lt;/span> &lt;span class="nx">context&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Context&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">challenge&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">hexactfproj&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Challenge&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">ctrl&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Result&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">error&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">challenge&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Finalizers&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nb">append&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">challenge&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Finalizers&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">challengeFinalizer&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Update&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">ctx&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">challenge&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">ctrl&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Result&lt;/span>&lt;span class="p">{},&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Errorf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;failed to add finalizer: %w&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">ctrl&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Result&lt;/span>&lt;span class="p">{},&lt;/span> &lt;span class="kc">nil&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="ë¦¬ì†ŒìŠ¤ê°€-ì‚­ì œë˜ëŠ”-2ê°€ì§€-ë°©ë²•">ë¦¬ì†ŒìŠ¤ê°€ ì‚­ì œë˜ëŠ” 2ê°€ì§€ ë°©ë²•
&lt;/h3>&lt;p>ë¦¬ì†ŒìŠ¤ê°€ ì‚­ì œë˜ëŠ” ë°©ë²•ì€ í¬ê²Œ ë‘ ê°€ì§€ì…ë‹ˆë‹¤.&lt;/p>
&lt;ol>
&lt;li>ì‚¬ìš©ìê°€ ì‚­ì œë¥¼ ìš”ì²­í•œë‹¤.&lt;/li>
&lt;li>ì´ìš© ì‹œê°„ì´ 30ë¶„ ì´ìƒì´ë©´ ì‚­ì œë¥¼ ìš”ì²­í•œë‹¤.&lt;/li>
&lt;/ol>
&lt;p>ì‚­ì œ ìš”ì²­ì€ &amp;ldquo;ì‚­ì œ ìš”ì²­í•˜ê² ìŠµë‹ˆë‹¤!&amp;rdquo; ë¼ëŠ” &lt;code>deletionTimestamp &lt;/code>ì†ì„±ë§Œ ê¸°ë¡ë˜ëŠ” ê²ƒ ë¿ì…ë‹ˆë‹¤. ì‹¤ì œë¡œëŠ” &lt;code>deletionTimestamp&lt;/code>ê°€ ì„¤ì •ëœ ê²ƒì„ í™•ì¸í•˜ê³  Finalizerê°€ ì œê±°ëœ í›„ì— ëŒ€ìƒ ë¦¬ì†ŒìŠ¤ê°€ ì‚­ì œëœ ê²ƒì…ë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">r&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">ChallengeReconciler&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nf">handleDeletion&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">ctx&lt;/span> &lt;span class="nx">context&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Context&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">challenge&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">hexactfproj&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Challenge&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">ctrl&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Result&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">error&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Info&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Processing deletion&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;challenge&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">challenge&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Name&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">crStatusMetric&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">WithLabelValues&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">challenge&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Labels&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s">&amp;#34;apps.hexactf.io/challengeId&amp;#34;&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="nx">challenge&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Name&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">challenge&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Labels&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s">&amp;#34;apps.hexactf.io/user&amp;#34;&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="nx">challenge&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Namespace&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Set&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Finalizerê°€ ë‚¨ì•„ìˆëŠ”ì§€ í™•ì¸&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">controllerutil&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ContainsFinalizer&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">challenge&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;challenge.hexactf.io/finalizer&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// íŒŒì´ë„ë¼ì´ì € ì œê±°&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">controllerutil&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">RemoveFinalizer&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">challenge&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;challenge.hexactf.io/finalizer&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ë©”íƒ€ë°ì´í„° ì—…ë°ì´íŠ¸&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Update&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">ctx&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">challenge&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Error&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;Failed to remove finalizer&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ì¬ì‹œë„ ìœ„í•´ Requeue&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">ctrl&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Result&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="nx">RequeueAfter&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Second&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="p">},&lt;/span> &lt;span class="nx">err&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// í•„ìš”í•˜ë‹¤ë©´ Deleted ì´ë²¤íŠ¸ ì „ì†¡&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">KafkaClient&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SendStatusChange&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">challenge&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Labels&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s">&amp;#34;apps.hexactf.io/user&amp;#34;&lt;/span>&lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">challenge&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Labels&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s">&amp;#34;apps.hexactf.io/challengeId&amp;#34;&lt;/span>&lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;Deleted&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Error&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;Failed to send status change message&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ì—¬ê¸°ì„œë„ ì—ëŸ¬ ì‹œ ì¬ì‹œë„&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">ctrl&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Result&lt;/span>&lt;span class="p">{},&lt;/span> &lt;span class="nx">err&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">go&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Sleep&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Minute&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">// scrape_intervalì´ 30ì´ˆë¼ë©´ 1ë¶„ ì •ë„ ê¸°ë‹¤ë¦¬ë©´ ì•ˆì „&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">crStatusMetric&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">DeleteLabelValues&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">challenge&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Labels&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s">&amp;#34;apps.hexactf.io/challengeId&amp;#34;&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="nx">challenge&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Name&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">challenge&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Labels&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s">&amp;#34;apps.hexactf.io/user&amp;#34;&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="nx">challenge&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Namespace&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Info&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Successfully completed deletion process&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ì´ ì‹œì ì—ì„œ finalizersê°€ ë¹„ì–´ ìˆìœ¼ë¯€ë¡œ, K8sê°€ ì˜¤ë¸Œì íŠ¸ë¥¼ ì‹¤ì œ ì‚­ì œí•¨&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">ctrl&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Result&lt;/span>&lt;span class="p">{},&lt;/span> &lt;span class="kc">nil&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol>
&lt;li>ì‚¬ìš©ìê°€ ì‚­ì œë¥¼ ìš”ì²­í•œë‹¤.
ì‚¬ìš©ìê°€ ì‚­ì œë¥¼ ìš”ì²­í•˜ëŠ” ê²ƒì€ ì‚¬ìš©ìê°€ ì‚­ì œ ì´ë²¤íŠ¸ë¥¼ ì§ì ‘ í•˜ëŠ” ê²ƒê³¼ ê°™ìŠµë‹ˆë‹¤. ìš”ì²­ ì´í›„ì—ëŠ” ìë™ìœ¼ë¡œ deletionTimestampê°€ ê¸°ë¡ë  ê²ƒ ì…ë‹ˆë‹¤.&lt;/li>
&lt;/ol>
&lt;p>ì•„ë˜ Reconcile() ë¡œì§ì— ì˜í•´ì„œ ì‚­ì œë¥¼ ìˆ˜í–‰í•  ê²ƒì…ë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">!&lt;/span>&lt;span class="nx">challenge&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">DeletionTimestamp&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">IsZero&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">handleDeletion&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">ctx&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">challenge&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="2">
&lt;li>ì´ìš© ì‹œê°„ì´ 30ë¶„ ì´ìƒì´ë©´ ì‚­ì œë¥¼ ìš”ì²­í•œë‹¤.&lt;br>
Challenge ìƒì„± ë¶€ë¶„ì— ì‹¤í–‰ 30ë¶„ í›„ ì‚­ì œë¥¼ êµ¬í˜„í•˜ê¸° ìœ„í•´ &lt;code>startedAt&lt;/code> ë¥¼ ì„¤ì •í•œë‹¤ê³  ë§í–ˆì£ ? startedAt ê¸°ì¤€ìœ¼ë¡œ 30ë¶„ í›„ì— ì‚­ì œë˜ë„ë¡ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Since&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">challenge&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Status&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">StartedAt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Time&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">&amp;gt;&lt;/span> &lt;span class="nx">challengeDuration&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ì•„ì§ DeletionTimestampê°€ ì—†ë‹¤ë©´ Delete ìš”ì²­&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">challenge&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">DeletionTimestamp&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">IsZero&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Info&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Time exceeded; issuing a Delete request&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;challenge&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">challenge&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Name&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Delete&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">ctx&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">challenge&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Error&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;Failed to delete challenge&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">handleError&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">ctx&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">req&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">challenge&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Delete ìš”ì²­ í›„ì—ëŠ” Kubernetesê°€ DeletionTimestampë¥¼ ì„¤ì •í•˜ê³ &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ë‹¤ì‹œ Reconcileì´ í˜¸ì¶œë˜ë©´ handleDeletion()ì´ ìˆ˜í–‰ë¨&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">ctrl&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Result&lt;/span>&lt;span class="p">{},&lt;/span> &lt;span class="kc">nil&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ì´ë¯¸ Delete ì§„í–‰ì¤‘ì´ë©´ handleDeletionìœ¼ë¡œ&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">handleDeletion&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">ctx&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">challenge&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ë§Œì•½ ì œí•œ ì‹œê°„ ì´ë‚´ì— ìˆë‹¤ë©´ requeueë¥¼ í•©ë‹ˆë‹¤.&lt;br>
kube-apiserverë¥¼ í†µí•´ ëŒ€ìƒ ë¦¬ì†ŒìŠ¤ì˜ ë³€ê²½ ì‚¬í•­ ê°ì§€í•˜ë©´ ì´ë²¤íŠ¸ë¥¼ work queueì— ë„£ìŠµë‹ˆë‹¤. Controllerê°€ ì‹œì‘ë˜ë©´ Watch ë¡œì§ì„ í†µí•´ íì— ìˆëŠ” ë°ì´í„°ë¥¼ êµ¬ë…í•˜ê²Œ ë˜ê³  Reconcile() ë¡œì§ì„ ìˆ˜í–‰í•˜ê²Œ ë©ë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl"> &lt;span class="k">case&lt;/span> &lt;span class="nx">challenge&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Status&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">CurrentStatus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">IsRunning&lt;/span>&lt;span class="p">():&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">ctx&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">req&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">NamespacedName&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">challenge&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">handleError&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">ctx&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">challenge&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// isOneì´ falseì´ë©´ ì¼ì • ì‹œê°„ ë‚´ì—ë§Œ ì‘ë™&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">!&lt;/span>&lt;span class="nx">challenge&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Status&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">IsOne&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Since&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">challenge&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Status&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">StartedAt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Time&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">&amp;gt;&lt;/span> &lt;span class="nx">challengeDuration&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">handleDeletion&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">ctx&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">challenge&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">!&lt;/span>&lt;span class="nx">challenge&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">DeletionTimestamp&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">IsZero&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">handleDeletion&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">ctx&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">challenge&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Running ë©”ì„¸ì§€ ì „ì†¡&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">KafkaClient&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SendStatusChange&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">challenge&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Labels&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s">&amp;#34;apps.hexactf.io/user&amp;#34;&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="nx">challenge&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Labels&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s">&amp;#34;apps.hexactf.io/challengeId&amp;#34;&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="s">&amp;#34;Running&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Error&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;Failed to send status change message&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">handleError&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">ctx&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">challenge&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">ctrl&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Result&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="nx">RequeueAfter&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">requeueInterval&lt;/span>&lt;span class="p">},&lt;/span> &lt;span class="kc">nil&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>í”„ë¡œì íŠ¸ì— ëŒ€ì…í•´ë³´ìë©´ ì œí•œ ì‹œê°„ ë‚´ì— ìˆìœ¼ë©´ ëª‡ ë¶„ ê°„ê²©ìœ¼ë¡œ 30ë¶„ì´ ì§€ë‚¬ëŠ”ì§€ í™•ì¸í•œë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/hexactf-8/image-1.png"
width="720"
height="340"
srcset="https://s0okju.github.io/p/hexactf-8/image-1_hu_70aac238b179c19.png 480w, https://s0okju.github.io/p/hexactf-8/image-1_hu_25498fcfb3aa3dca.png 1024w"
loading="lazy"
alt="ì¶œì²˜ - https://nakamasato.medium.com/kubernetes-operator-series-6-controller-runtime-component-controller-604c8905a1e1"
class="gallery-image"
data-flex-grow="211"
data-flex-basis="508px"
>&lt;/p>
&lt;p>&lt;strong>requeue Intervalì— ëŒ€í•œ ìƒê°&lt;/strong>&lt;/p>
&lt;p>ê¸°ë³¸ì ìœ¼ë¡œ ì¿ ë²„ë„¤í‹°ìŠ¤ëŠ” 30ì´ˆ ê°„ê²©ìœ¼ë¡œ ëª¨ë“  ë¦¬ì†ŒìŠ¤ì˜ ìƒíƒœë¥¼ í™•ì¸í•©ë‹ˆë‹¤. Operator ë˜í•œ work queueì— requeueí•˜ì—¬ ë¦¬ì†ŒìŠ¤ ê°„ê²© ì‹œê°„ì„ ì„¤ì •í•  ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤. ì—¬ê¸°ì„œ ëª‡ ì´ˆ ê°„ê²©ìœ¼ë¡œ ë³´ëŠ” ê²ƒì´ ì¢‹ì„ê¹Œìš”?&lt;/p>
&lt;p>ìì£¼ ë¦¬ì†ŒìŠ¤ë¥¼ ê´€ì°°í•˜ê²Œ ë˜ë©´ íì— ë§ì€ ë°ì´í„°ê°€ ìŒ“ì´ê²Œ ë˜ë©´ì„œ ìµœì¢…ì ìœ¼ë¡œ ì‹œê°„ ì§€ì—°ì´ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë°˜ë©´ í° ì‹œê°„ ê°„ê²©ìœ¼ë¡œ ê´€ì°°í•˜ê²Œ ë˜ë©´ &amp;ldquo;ì§€ì†ì ìœ¼ë¡œ í™•ì¸í•˜ì—¬ ìƒíƒœ ì •ë³´ë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ í™•ì¸í•œë‹¤&amp;quot;ë¼ëŠ” ì¥ì ì„ ìƒì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ì €ëŠ” ìµœì¢…ì ìœ¼ë¡œ 30ì´ˆ ê°„ê²©ìœ¼ë¡œ Challengeì˜ ìƒíƒœë¥¼ í™•ì¸í–ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;blockquote>
&lt;p>&lt;strong>ì—¬ë‹´&lt;/strong> .&lt;br>
ê¸€ë¡œ ì •ë¦¬í•˜ë‹¤ë³´ë‹ˆ 30ì´ˆ ê°„ê²©ìœ¼ë¡œ requeueí•  í•„ìš”ê°€ ì—†ë‹¤ê³  ìƒê°í–ˆìŠµë‹ˆë‹¤. ì´ˆê¸°ì—ëŠ” ë¬´ìŠ¨ì¼ì´ ì¼ì–´ë‚ ì§€ ëª¨ë¥´ë‹ˆ 30ì´ˆ ê°„ê²©ìœ¼ë¡œ í™•ì¸í•˜ëŠ”ê²Œ ì¢‹ê² ë‹¤ê³  ìƒê°ì„ í–ˆìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ Challenge í•˜ìœ„ ë¦¬ì†ŒìŠ¤ì— ë³€ê²½ì‚¬í•­ì´ ê°ì§€ë˜ì–´ Reconcileë¥¼ ìˆ˜í–‰í•œë‹¤ë©´ 30ì´ˆ ê°„ê²©ì˜ RequeueëŠ” í•„ìš” ì—†ê² ì£ ?&lt;/p>&lt;/blockquote>
&lt;h2 id="ì •ë¦¬">ì •ë¦¬
&lt;/h2>&lt;p>ìœ„ì˜ ë‚´ìš©ì„ íë¦„ë„ë¡œ ì •ë¦¬í•˜ë©´ ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/hexactf-8/image.png"
width="919"
height="652"
srcset="https://s0okju.github.io/p/hexactf-8/image_hu_a34d715bd16cc892.png 480w, https://s0okju.github.io/p/hexactf-8/image_hu_d1ab6704279ab332.png 1024w"
loading="lazy"
alt="Challenge Operator íë¦„ë„"
class="gallery-image"
data-flex-grow="140"
data-flex-basis="338px"
>&lt;/p>
&lt;h2 id="ë§ˆì¹˜ë©°">ë§ˆì¹˜ë©°
&lt;/h2>&lt;p>ê¸€ë¡œ ì •ë¦¬í•˜ë‹¤ë³´ë‹ˆ ìŠ¤ìŠ¤ë¡œ ì˜ëª» ìƒê°í•œ ë¶€ë¶„ì„ ì°¾ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. ëŒ€í‘œì ì¸ ì˜ˆë¡œ Requeue(ì¬ì‹œë„) í•  í•„ìš” ì—†ëŠ”ë° êµ¬í˜„í•œ ê²ƒì²˜ëŸ¼ ë§ì´ì£ . ì´ê±´ ë‹¤ìŒì— ìˆ˜ì •í•´ì•¼ í•  ê²ƒ ê°™ìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>ì´ë²ˆ ê¸€ì„ ëìœ¼ë¡œ ë¡œì§ ë¶€ë¶„ ì„¤ëª…ì€ ëë‚œ ê²ƒ ê°™ìŠµë‹ˆë‹¤. ë‹¤ìŒ ê¸€ì—ì„œëŠ” ì–´ë–»ê²Œ ì»¤ìŠ¤í…€ ë©”íŠ¸ë¦­ì„ í†µí•´ Challengeë¥¼ ì‹œê°í™”í•  ìˆ˜ ìˆëŠ”ì§€ ì„¤ëª…í•˜ê² ìŠµë‹ˆë‹¤.&lt;/p>
&lt;h2 id="ì°¸ê³ ">ì°¸ê³ 
&lt;/h2>&lt;ul>
&lt;li>&lt;a class="link" href="https://kmaster.tistory.com/106" target="_blank" rel="noopener"
>Finalizers, ownerReferences&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://togomi.tistory.com/28" target="_blank" rel="noopener"
>Kubernetes operator ë©”ì»¤ë‹ˆì¦˜&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://nakamasato.medium.com/kubernetes-operator-series-5-controller-runtime-component-reconciler-501f71b7397a" target="_blank" rel="noopener"
>Kubernetes Operator series 5â€” controller-runtime component â€” Reconciler | by Masato Naka | Medium&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://nakamasato.medium.com/kubernetes-operator-series-6-controller-runtime-component-controller-604c8905a1e1" target="_blank" rel="noopener"
>Kubernetes Operator series 6 â€” controller-runtime component â€” Controller | by Masato Naka | Medium&lt;/a>&lt;/li>
&lt;li>ì œì‹œìŠ¨ ì œì‹œìŠ¨, ì¡°ìŠˆì•„ ìš°ë“œ. (2021). ì¿ ë²„ë„¤í‹°ìŠ¤ ì˜¤í¼ë ˆì´í„°. ì—ì´ì½˜.&lt;/li>
&lt;/ul></description></item><item><title>HexaCTF 7. Challenge CR ìƒíƒœ ì •ì˜ì™€ Operator ê°œë… ì •ë¦¬</title><link>https://s0okju.github.io/p/hexactf-7/</link><pubDate>Thu, 27 Feb 2025 00:00:00 +0900</pubDate><guid>https://s0okju.github.io/p/hexactf-7/</guid><description>&lt;p>2025-03-04 - ë‚´ìš© ìˆ˜ì •&lt;/p>
&lt;p>ì¼ë°˜ì ìœ¼ë¡œ ì¿ ë²„ë„¤í‹°ìŠ¤ì˜ íŒŒë“œëŠ” ë¼ì´í”„ ì‚¬ì´í´ì„ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/hexactf-7/image-1.png"
width="720"
height="399"
srcset="https://s0okju.github.io/p/hexactf-7/image-1_hu_f53b648197a6a3f5.png 480w, https://s0okju.github.io/p/hexactf-7/image-1_hu_bef52eebabe97354.png 1024w"
loading="lazy"
alt="ì¶œì²˜ - https://medium.com/@ollycare/a-guide-to-thekubernetes-pod-lifecycle-dc7992255001"
class="gallery-image"
data-flex-grow="180"
data-flex-basis="433px"
>&lt;/p>
&lt;p>ì´ì²˜ëŸ¼ Challenge CRë„ ìì²´ ë¼ì´í”„ ì‚¬ì´í´ì„ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;h2 id="challenge-ìƒíƒœ">Challenge ìƒíƒœ
&lt;/h2>&lt;h3 id="challenge-lifecycle">Challenge Lifecycle
&lt;/h3>&lt;p>Challengeì˜ ë¼ì´í”„ ì‚¬ì´í´ì€ í¬ê²Œ 3ê°€ì§€ í˜•íƒœë¡œ ë‚˜ë‰©ë‹ˆë‹¤.&lt;/p>
&lt;ul>
&lt;li>None&lt;/li>
&lt;li>Running&lt;/li>
&lt;li>Error or Deleted&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://s0okju.github.io/p/hexactf-7/image.png"
width="261"
height="321"
srcset="https://s0okju.github.io/p/hexactf-7/image_hu_8c54e86c13c588f2.png 480w, https://s0okju.github.io/p/hexactf-7/image_hu_5f5d9eec313a4595.png 1024w"
loading="lazy"
alt="challenge lifecycle"
class="gallery-image"
data-flex-grow="81"
data-flex-basis="195px"
>&lt;/p>
&lt;p>&lt;strong>Challenge ë‚´ë¶€ì˜ ì¿ ë²„ë„¤í‹°ìŠ¤ ë¦¬ì†ŒìŠ¤ê°€ ì •ìƒì ìœ¼ë¡œ ìƒì„±, ì‚­ì œë˜ì—ˆëŠ”ì§€ë¥¼ ê¸°ì¤€&lt;/strong>ìœ¼ë¡œ ìƒíƒœê°€ ê²°ì •ë©ë‹ˆë‹¤.&lt;/p>
&lt;p>Challengeì˜ ìƒíƒœê°’ì´ ë¬´ì¡°ê±´ í•„ìš”í•œ ì´ìœ ê°€ ìˆìŠµë‹ˆë‹¤. ë°”ë¡œ &lt;strong>ì°¸ê°€ìê°€ ìì‹ ì´ ì‹¤í–‰í•œ Challengeì˜ ìƒíƒœê°’&lt;/strong>ì„ ì•Œì•„ì•¼ í•©ë‹ˆë‹¤.
ì˜ˆë¥¼ ë“¤ì–´ë³¼ê¹Œìš”? ë§Œì•½ì— ì°¸ê°€ìê°€ íŠ¹ì • ë¬¸ì œì˜ ì»¨í…Œì´ë„ˆë¥¼ ìƒì„±í–ˆë‹¤ê³  ê°€ì •í–ˆìŠµë‹ˆë‹¤. ë¬´ìŠ¨ ì´ìœ ë¡œ ì„œë²„ë¥¼ ìƒˆë¡œê³ ì¹¨í•˜ê²Œ ë˜ì–´ ì•„ë˜ì™€ ê°™ì€ ì„œë²„ ìƒì„±í•˜ê¸° ë²„íŠ¼ì´ í™œì„±í™”ê°€ ë  ê²ƒì…ë‹ˆë‹¤. ì„œë²„ ìƒì„±í•˜ê¸° ë²„íŠ¼ì„ ì•„ë¬´ë¦¬ ëˆŒëŸ¬ë„ ì¿ ë²„ë„¤í‹°ìŠ¤ ìƒì—ëŠ” ì»¨í…Œì´ë„ˆê°€ ì´ë¯¸ ì¡´ì¬í•˜ë‹ˆ ê³„ì† ì˜¤ë¥˜ê°€ ëœ¨ê² ì£ ?&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/hexactf-7/image-2.png"
width="410"
height="111"
srcset="https://s0okju.github.io/p/hexactf-7/image-2_hu_9c5f956acff824d4.png 480w, https://s0okju.github.io/p/hexactf-7/image-2_hu_74a0e4f73e291f27.png 1024w"
loading="lazy"
alt="ì¶œì²˜ - CTF ì‚¬ì´íŠ¸ DreamHack ì˜ VM ì ‘ì†í•˜ê¸° ë²„íŠ¼ "
class="gallery-image"
data-flex-grow="369"
data-flex-basis="886px"
>&lt;/p>
&lt;h3 id="challengeì˜-ìƒíƒœ-êµ¬í˜„">Challengeì˜ ìƒíƒœ êµ¬í˜„
&lt;/h3>&lt;p>Kubebuilderì—ì„œ CRë¥¼ ìƒì„±í•˜ë©´ &lt;code>metatdata&lt;/code>, &lt;code>spec&lt;/code>, &lt;code>status&lt;/code> ì„¸ ê°€ì§€ í•„ë“œë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// +kubebuilder:object:root=true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// +kubebuilder:subresource:status&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// Challenge is the Schema for the challenges API.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">Challenge&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">metav1&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">TypeMeta&lt;/span> &lt;span class="s">`json:&amp;#34;,inline&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">metav1&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">ObjectMeta&lt;/span> &lt;span class="s">`json:&amp;#34;metadata,omitempty&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Spec&lt;/span> &lt;span class="nx">ChallengeSpec&lt;/span> &lt;span class="s">`json:&amp;#34;spec,omitempty&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Status&lt;/span> &lt;span class="nx">ChallengeStatus&lt;/span> &lt;span class="s">`json:&amp;#34;status,omitempty&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ê·¸ ì¤‘ ChallengeStatusì— Challengeì— ê´€í•œ ìƒíƒœ ì •ë³´ë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤.(&lt;code>CurrentStatus&lt;/code>) CurrentStatusëŠ” ê°„ë‹¨í•œ êµ¬ì¡°ì²´ë¡œ ì„¤ê³„í•œ 4ê°œì˜ ìƒíƒœë¥¼ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// ChallengeStatus defines the observed state of Challenge.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">ChallengeStatus&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// INSERT ADDITIONAL STATUS FIELD - define observed state of cluster&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Important: Run &amp;#34;make&amp;#34; to regenerate code after modifying this file&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// StartedAt: Challenge ì‹œì‘ ì‹œê°„&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">StartedAt&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">metav1&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Time&lt;/span> &lt;span class="s">`json:&amp;#34;startedAt,omitempty&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// CurrentStatus: Challenge í˜„ì¬ ìƒíƒœ&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">CurrentStatus&lt;/span> &lt;span class="nx">CurrentStatus&lt;/span> &lt;span class="s">`json:&amp;#34;currentStatus,omitempty&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// isOneëŠ” ì˜ì†ì„±ì„ ë‚˜íƒ€ë‚¸ë‹¤.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// +optional&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">IsOne&lt;/span> &lt;span class="kt">bool&lt;/span> &lt;span class="s">`json:&amp;#34;isOne,omitempty&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Endpoint: Challengeì˜ Endpoint&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ì™¸ë¶€ì— ë…¸ì¶œë  í¬íŠ¸ ë²ˆí˜¸ê°€ ì €ì¥ë©ë‹ˆë‹¤.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Endpoint&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="s">`json:&amp;#34;endpoint,omitempty&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="operatorì˜-ë§¤ì»¤ë‹ˆì¦˜">Operatorì˜ ë§¤ì»¤ë‹ˆì¦˜
&lt;/h2>&lt;h3 id="operator-sdk-vs-kubebuilder">Operator SDK vs Kubebuilder
&lt;/h3>&lt;p>Kubernetes OperatorëŠ” ë¹„ë‹¨ Kubebuilderë§Œ ìˆëŠ” ê²ƒì´ ì•„ë‹™ë‹ˆë‹¤. Operator SDKë„ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;a class="link" href="https://tiewei.github.io/posts/kubebuilder-vs-operator-sdk" target="_blank" rel="noopener"
>Tech-Reset - kubebuilder vs operator-sdk&lt;/a>ì˜ ë‚´ìš©ì„ ì°¸ê³ í•˜ì—¬ ì°¨ì´ì ì„ ì„¤ëª…í•˜ê² ìŠµë‹ˆë‹¤.&lt;/p>
&lt;ul>
&lt;li>Operator SDKëŠ” ê¸°ë³¸ì ìœ¼ë¡œ namespace-scoped, Kubebuilder cluster-scoped&lt;/li>
&lt;li>Operator SDKëŠ” helm watcherë„ í•¨ê»˜ ë°°í¬ë˜ê¸° ë•Œë¬¸ì— Helmê³¼ í†µí•©í•˜ê¸° ìš©ì´í•˜ê³ , KubebuilderëŠ” kubernetes-sigsì˜ í”„ë¡œì íŠ¸ì™€ í†µí•©ì´ ìš©ì´í•˜ë‹¤ê³  í•©ë‹ˆë‹¤.&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;p>&lt;strong>ì—¬ë‹´&lt;/strong>
ìœ ëª…í•œ CNCF í”„ë¡œì íŠ¸ OperatorëŠ” ëŒ€ë¶€ë¶„ Operator SDKë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒ ê°™ìŠµë‹ˆë‹¤. ìœ ëª… CNCF í”„ë¡œì íŠ¸ëŠ” Helmìœ¼ë¡œ ë°°í¬í•˜ëŠ” ê²½ìš°ê°€ ë§ì€ë° Operator SDKëŠ” ë‹¹ì—°í•œ ì„ íƒì§€ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p>&lt;/blockquote>
&lt;p>ì•ìœ¼ë¡œ Kubebuilderë¥¼ ê¸°ì¤€ìœ¼ë¡œ ì„¤ëª…í•˜ê² ìŠµë‹ˆë‹¤.&lt;/p>
&lt;h3 id="ì¿ ë²„ë„¤í‹°ìŠ¤ì—ì„œ-ë§í•˜ëŠ”-controller">ì¿ ë²„ë„¤í‹°ìŠ¤ì—ì„œ ë§í•˜ëŠ” Controller
&lt;/h3>&lt;p>ìš°ì„  Kubebuilderì— ì´ì•¼ê¸° í•˜ê¸° ì „ì— ê¸°ë³¸ì ì¸ ì¿ ë²„ë„¤í‹°ìŠ¤ê°€ í™œìš©í•˜ëŠ” kube-control-managerì™€ controllerì— ëŒ€í•œ ì´ì•¼ê¸°ê°€ í•„ìš”í•©ë‹ˆë‹¤.&lt;br>
ì¿ ë²„ë„¤í‹°ìŠ¤ëŠ” &lt;a class="link" href="https://kubernetes.io/docs/reference/command-line-tools-reference/kube-controller-manager/" target="_blank" rel="noopener"
>kube-control-manager&lt;/a> í†µí•´ ë‚´ì¥ controllerë“¤ì„ ì œì–´í•©ë‹ˆë‹¤.(control managerë¼ê³  ë¶€ë¦…ë‹ˆë‹¤.) ê¸°ë³¸ì ìœ¼ë¡œ ì¿ ë²„ë„¤í‹°ìŠ¤ê°€ ê°€ì§€ê³  ìˆëŠ” ë¦¬ì†ŒìŠ¤ ìœ í˜•ì— ë”°ë¼ controllerë¥¼ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤. ì¿ ë²„ë„¤í‹°ìŠ¤ ê¸°ë³¸ ë¦¬ì†ŒìŠ¤ë§ˆë‹¤ íŠ¹ì§•ì´ ëšœë ·í•˜ê¸° ë•Œë¬¸ì— ì—­í• ì„ í™•ì‹¤íˆ ë‚˜ëˆ”ìœ¼ë¡œì¨ ìœ ì§€ë³´ìˆ˜ì„±ì´ë‚˜ í™•ì¥ì„±ì„ ë†’ì´ê¸° ìœ„í•´ ì‚¬ìš©ëœ ê²ƒìœ¼ë¡œ ë³´ì…ë‹ˆë‹¤.&lt;sup id="fnref:1">&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref">1&lt;/a>&lt;/sup>&lt;/p>
&lt;p>control manager ë‚´ë¶€ì— ìˆëŠ” controllerë“¤ì€ &lt;code>kube-apiserver&lt;/code> ì™€ í†µì‹ í•˜ëŠ” client-goë“± ë‹¤ì–‘í•œ ê³µìœ  ë””íœë˜ì‹œ(shared dependency)ë¥¼ í™œìš©í•˜ì—¬ ë‹¤ì–‘í•œ ê¸°ëŠ¥ì„ ìˆ˜í–‰í•˜ê²Œ ë©ë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/hexactf-7/image-3.png"
width="1384"
height="856"
srcset="https://s0okju.github.io/p/hexactf-7/image-3_hu_7f129315e919b981.png 480w, https://s0okju.github.io/p/hexactf-7/image-3_hu_e4c8c5048e670049.png 1024w"
loading="lazy"
alt="ì¶œì²˜ - https://www.sobyte.net/post/2022-07/k8s-controller-manager/"
class="gallery-image"
data-flex-grow="161"
data-flex-basis="388px"
>&lt;/p>
&lt;p>ì¿ ë²„ë„¤í‹°ìŠ¤ëŠ” controllerë¥¼ ì§ì ‘ ì œì‘í•¨ìœ¼ë¡œì¨ ë‹¤ì–‘í•œ ê¸°ëŠ¥ì„ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë‹¨ìˆœí•˜ê²Œ ë‚´ì¥ëœ ë¦¬ì†ŒìŠ¤ì— êµ­í•œë˜ì§€ ì•Šê³  ë‹¤ì–‘í•œ ì¢…ë¥˜ì˜ í”„ë¡œì íŠ¸ë¥¼ ìˆ˜ìš©í•  ìˆ˜ ìˆì—ˆë˜ ê²ƒë„ custom controller ë•ë¶„ì¼ ê²ƒì…ë‹ˆë‹¤.&lt;br>
ì¿ ë²„ë„¤í‹°ìŠ¤ëŠ” ì´ˆê¸°ë¶€í„° í™•ì¥ì„±ì„ ê³ ë ¤í•˜ì—¬ ì„¤ê³„ëœ ê²ƒì¼ì§€ë„ ëª¨ë¦…ë‹ˆë‹¤. &lt;strong>ì¦‰, control-managerë¥¼ ì§ì ‘ êµ¬í˜„í•  ìˆ˜ ìˆë‹¤ë©´ ìë™í™”ëœ ìš´ì˜, ëª¨ë‹ˆí„°ë§ ë“± ë‹¤ì–‘í•œ ê¸°ëŠ¥ì„ í™•ì¥ì‹œí‚¬ ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤.&lt;/strong>&lt;/p>
&lt;h3 id="operator-controller">Operator? Controller?
&lt;/h3>&lt;p>KubebuilderëŠ” ì˜¤í¼ë ˆì´í„°ë¥¼ ë¹Œë“œí•˜ëŠ”ë° ì‚¬ìš©ë˜ëŠ” ë„êµ¬ë¼ê³  ì•Œë ¤ì ¸ ìˆìŠµë‹ˆë‹¤. ì˜¤í¼ë ˆì´í„°ëŠ” CoreOSì—ì„œ ê³µê°œëœ ë””ìì¸ íŒ¨í„´ìœ¼ë¡œ, ë‹¨ì–´ ê·¸ëŒ€ë¡œ ìš´ì˜ìì˜ ì—­í• ì„ ì†Œí”„íŠ¸ì›¨ì–´ì— ìƒˆê¸´ ê°œë…ì…ë‹ˆë‹¤.&lt;sup id="fnref:2">&lt;a href="#fn:2" class="footnote-ref" role="doc-noteref">2&lt;/a>&lt;/sup>&lt;/p>
&lt;p>ìœ„ì˜ ì„¤ëª…ì€ ì˜¤í¼ë ˆì´í„°ëŠ” ê¸°ëŠ¥ì ì¸ ê´€ì ì—ì„œ ë°”ë¼ë³´ëŠ” ê²ƒì´ê³  &lt;strong>ê¸°ìˆ ì ìœ¼ë¡œëŠ” ìš´ì˜ ëŒ€ìƒì„ ì œì–´í•˜ëŠ” control-managerë¥¼ ì œì‘&lt;/strong>í•˜ëŠ” ê²ƒì´ë¼ê³  ë´…ë‹ˆë‹¤.&lt;/p>
&lt;h3 id="kubebuilder-êµ¬ì¡°ì—-ëŒ€í•œ-ê°„ë‹¨í•œ-ì„¤ëª…">kubebuilder êµ¬ì¡°ì— ëŒ€í•œ ê°„ë‹¨í•œ ì„¤ëª…
&lt;/h3>&lt;p>ìœ„ì˜ ì„¤ëª…ì„ ë³´ë©´ kubebuilder ì•„í‚¤í…ì³ë¥¼ ì‰½ê²Œ ì´í•´í•  ìˆ˜ ìˆì„ ê²ƒì…ë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/hexactf-7/image-4.png"
width="919"
height="826"
srcset="https://s0okju.github.io/p/hexactf-7/image-4_hu_225722d8c6f0eb82.png 480w, https://s0okju.github.io/p/hexactf-7/image-4_hu_5d7f6e3e356956f4.png 1024w"
loading="lazy"
alt="ì¶œì²˜ - Architecture - The Kubebuilder Book"
class="gallery-image"
data-flex-grow="111"
data-flex-basis="267px"
>&lt;/p>
&lt;p>kubebuilderëŠ” &lt;strong>Controllerë¥¼ ë¹Œë“œí•˜ëŠ” í”„ë¡œê·¸ë¨&lt;/strong>ì´ë¼ê³  ë³´ë©´ ë©ë‹ˆë‹¤.
ê³µì‹ ë¬¸ì„œ ìƒì—ì„œ KubebuilderëŠ” ìœ„ì™€ ê°™ì€ êµ¬ì¡°ë¥¼ ê°€ì§€ì§€ë§Œ ì‹¤ì œ ì½”ë“œë¡œ êµ¬í˜„í•´ì•¼ í•  ë¶€ë¶„ì€ &lt;code>Manager&lt;/code>, &lt;code>Builder&lt;/code>, &lt;code>Reconciler&lt;/code> ê°€ ë©ë‹ˆë‹¤.&lt;/p>
&lt;ul>
&lt;li>Builder : controller-runtime ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ê°ì‹¸ë©°, ì¼ë°˜ì ì¸ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ êµ¬ì¶•í•˜ê¸° ìœ„í•œ íŒ¨í„´ì„ ì œê³µí•œë‹¤.(&lt;a class="link" href="https://pkg.go.dev/sigs.k8s.io/controller-runtime/pkg/builder" target="_blank" rel="noopener"
>builder package ë¬¸ì„œ&lt;/a>)&lt;/li>
&lt;li>Manager : controllerë¥¼ ì œì‘í•˜ëŠ”ë° í•„ìš”í•˜ë©° client, caches, schemesë“± ì˜ ê³µìœ  ë””íœë˜ì‹œë¥¼ ì œê³µí•œë‹¤. ì»¨íŠ¸ë¡¤ëŸ¬ëŠ” Manager.Startë¥¼ í˜¸ì¶œí•˜ì—¬ ì‹œì‘ë˜ì–´ì•¼ í•œë‹¤.(&lt;a class="link" href="https://pkg.go.dev/sigs.k8s.io/controller-runtime/pkg/manager" target="_blank" rel="noopener"
>manager package ë¬¸ì„œ&lt;/a> )&lt;/li>
&lt;li>Reconciler: ì¡°ì • ë™ê¸°í™” ì‘ì—…ìœ¼ë¡œ ëŒ€ìƒì˜ ìƒíƒœë¥¼ ì›í•˜ëŠ” ìƒíƒœë¡œ ì¼ì¹˜ì‹œí‚¤ëŠ” ê³¼ì •ì„ ì˜ë¯¸í•œë‹¤.&lt;/li>
&lt;/ul>
&lt;p>ëŒ€ë¶€ë¶„ì˜ ê·¸ë¦¼ì—ì„œëŠ” Builderì— ëŒ€í•œ ë‚´ìš©ì´ ì—†ëŠ”ë° ê·¸ ì´ìœ ëŠ” Operator-SDKê°€ Builderì˜ ì—­í• ì„ í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.
ìì„¸í•œ ì´ì•¼ê¸°ëŠ” Challenge ìƒì„±, ì‚­ì œ ë¶€ë¶„ì—ì„œ ìì„¸í•˜ê²Œ ë§ì”€ ë“œë¦¬ê² ìŠµë‹ˆë‹¤.&lt;/p>
&lt;h3 id="challenge-crë¡œ-operatorë¥¼-ì œì‘í•´ë„-ë ê¹Œ">Challenge CRë¡œ Operatorë¥¼ ì œì‘í•´ë„ ë ê¹Œ?
&lt;/h3>&lt;p>&lt;a class="link" href="https://developers.redhat.com/articles/2021/06/11/kubernetes-operators-101-part-1-overview-and-key-features#operators_extend_kubernetes_to_automate_tasks" target="_blank" rel="noopener"
>Kubernetes Operators 101 Overview | Red Hat Developer&lt;/a> ë¬¸ì„œì— ì˜í•˜ë©´ ì˜¤í¼ë ˆì´í„°ëŠ” statefulí•œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì„¬ì„¸í•˜ê²Œ ê´€ë¦¬í•˜ê¸° ìœ„í•´ ì‚¬ìš©ë©ë‹ˆë‹¤.&lt;/p>
&lt;blockquote>
&lt;p>While Kubernetes is great at managing stateless applications, operators are useful when you need more complex configuration details for a stateful application such as a database. A stateful workload is more difficult to manage than a stateless workload.&lt;/p>&lt;/blockquote>
&lt;p>ChallengeëŠ” &lt;strong>ìƒíƒœ ì •ë³´ê°€ ìœ ì§€ ë˜ì§€ ì•ŠëŠ” Statelessí•œ ì• í”Œë¦¬ì¼€ì´ì…˜&lt;/strong>ì…ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ìœ„ì˜ ì„¤ëª…ì„ ë³´ë©´ ChallengeëŠ” ì˜¤í¼ë ˆì´í„°ë¥¼ ì‚¬ìš©í•˜ë©´ ì•ˆë  ê²ƒ ê°™ìŠµë‹ˆë‹¤.&lt;br>
ì£¼ìš” í™œìš© ëŒ€ìƒì´ Statefulí•œ ì• í”Œë¦¬ì¼€ì´ì…˜ì¼ ë¿ Statelessí•œ ë¦¬ì†ŒìŠ¤ë„ ì ìš© ê°€ëŠ¥í•˜ë‹¤ê³  ìƒê°í•©ë‹ˆë‹¤. lstioë„ statelessí•œ data planeë¥¼ ì œì–´í•œë‹¤ê³  í•©ë‹ˆë‹¤.&lt;sup id="fnref:3">&lt;a href="#fn:3" class="footnote-ref" role="doc-noteref">3&lt;/a>&lt;/sup> ì˜¤í¼ë ˆì´í„°ëŠ” ìš´ì˜ìì˜ ì—­í• ì„ ì†Œí”„íŠ¸ì›¨ì–´ì— ìƒˆê¸´ ê°œë…ì„ ê°€ì§€ê³  ìˆëŠ” ë§Œí¼ ëª¨ë“  ì• í”Œë¦¬ì¼€ì´ì…˜ì— ì ìš© ê°€ëŠ¥í•˜ê² ì£ ?&lt;/p>
&lt;h2 id="ë‹¤ìŒ-ì´ì•¼ê¸°">ë‹¤ìŒ ì´ì•¼ê¸°
&lt;/h2>&lt;p>ì˜¤í¼ë ˆì´í„°ì— ëŒ€í•´ ê³µë¶€ë¥¼ í•˜ë‹¤ë³´ë‹ˆ ì¿ ë²„ë„¤í‹°ìŠ¤ì˜ êµ¬ì¡°ì— ëŒ€í•´ íŒŒì•…í•˜ê³  ìˆì–´ì•¼ë§Œ ì´í•´ê°€ ë˜ëŠ” ë¶€ë¶„ì´ ë§ë‹¤ê³  ìƒê°í•©ë‹ˆë‹¤. ì¿ ë²„ë„¤í‹°ìŠ¤ ê¸°ë³¸ êµ¬ì¡°ì— ëŒ€í•´ ì¡°ì‚¬í•´ë³´ë‹ˆ ì´ë²ˆ ê¸€ì—ëŠ” í”„ë¡œì íŠ¸ì— ëŒ€í•œ ë§ì€ ì´ì•¼ê¸°ë¥¼ ë‹´ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.&lt;br>
ë‹¤ìŒ ê¸€ë¶€í„°ëŠ” kubebuilderë¥¼ í™œìš©í•˜ì—¬ Challengeë¥¼ ìƒì„±, ì‚­ì œí•  ìˆ˜ ìˆëŠ”ì§€ ì„¤ëª…í•˜ê² ìŠµë‹ˆë‹¤.&lt;/p>
&lt;hr>
&lt;h2 id="ì°¸ê³ ">ì°¸ê³ 
&lt;/h2>&lt;ul>
&lt;li>&lt;a class="link" href="https://nakamasato.medium.com/kubernetes-operator-series-3-controller-runtime-component-manager-bdaf633601a3" target="_blank" rel="noopener"
>Kubernetes Operator series 3 â€” controller-runtime component â€” Manager | by Masato Naka | Medium&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://nakamasato.medium.com/kubernetes-operator-series-4-controller-runtime-component-builder-c649c0ad2dc0" target="_blank" rel="noopener"
>Kubernetes Operator series 4â€” controller-runtime component â€” Builder | by Masato Naka | Medium&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://www.sobyte.net/post/2022-07/k8s-controller-manager/" target="_blank" rel="noopener"
>How kubernetes Controller Manager works - SoByte&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://kubernetes.io/docs/concepts/architecture/controller/" target="_blank" rel="noopener"
>Controllers | Kubernetes&lt;/a>&lt;/li>
&lt;/ul>
&lt;div class="footnotes" role="doc-endnotes">
&lt;hr>
&lt;ol>
&lt;li id="fn:1">
&lt;p>&lt;a class="link" href="https://www.sobyte.net/post/2022-07/k8s-controller-manager/" target="_blank" rel="noopener"
>How kubernetes Controller Manager works - SoByte&lt;/a>&amp;#160;&lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;li id="fn:2">
&lt;p>&lt;a class="link" href="https://dev.gmarket.com/65" target="_blank" rel="noopener"
>ì¿ ë²„ë„¤í‹°ìŠ¤ ì˜¤í¼ë ˆì´í„° ì ìš©í•˜ê¸°&lt;/a>&amp;#160;&lt;a href="#fnref:2" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;li id="fn:3">
&lt;p>&lt;a class="link" href="https://tetrate.io/blog/what-is-a-service-mesh/" target="_blank" rel="noopener"
>What is a service mesh? Architecture, features &amp;amp; relation with Kubernetes&lt;/a>&amp;#160;&lt;a href="#fnref:3" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/div></description></item><item><title>HexaCTF 6. Kubebuilderë¥¼ í™œìš©í•œ ChallengeDefinition&amp;Challenge Type êµ¬í˜„</title><link>https://s0okju.github.io/p/hexactf-6/</link><pubDate>Fri, 24 Jan 2025 00:00:00 +0900</pubDate><guid>https://s0okju.github.io/p/hexactf-6/</guid><description>&lt;h2 id="ì´ì „-ì´ì•¼ê¸°">ì´ì „ ì´ì•¼ê¸°
&lt;/h2>&lt;p>ì´ì „ ê¸€ì—ëŠ” ChallengeDefinition, Challenge ê°œë…ì„ ì •ì˜í•˜ê³  ì„¤ê³„í•˜ëŠ” ê³¼ì •ì„ ì„¤ëª…í–ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>ì´ì œë¶€í„° ChallengeDefinitionê³¼ Challengeì˜ ì†ì„±ì€ ë¬´ì—‡ì¸ì§€ ì½”ë“œì™€ í•¨ê»˜ ì†Œê°œí•˜ê² ìŠµë‹ˆë‹¤.&lt;/p>
&lt;h2 id="challengedefinitionchallenge-êµ¬ì„±">ChallengeDefinition&amp;amp;Challenge êµ¬ì„±
&lt;/h2>&lt;p>HexaCTFëŠ” ë‘ ê°œì˜ ì¿ ë²„ë„¤í‹°ìŠ¤ CRë¡œ êµ¬ì„±ë˜ì–´ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;ul>
&lt;li>ChallengeDefinition : ë¬¸ì œ ìƒì„¸ ì •ë³´ë¥¼ ë‚˜íƒ€ë‚´ë©° ì±Œë¦°ì§€ ì •ë³´, êµ¬ì„± ë¦¬ì†ŒìŠ¤ë¥¼ ì»´í¬ë„ŒíŠ¸ ë‹¨ìœ„ë¡œ ì •ì˜í•œë‹¤.&lt;/li>
&lt;li>Challenge : ì‚¬ìš©ì(ë¬¸ì œ í’€ì´ì)ê°€ ìƒì„±í•˜ëŠ” ë¬¸ì œì˜ ë‹¨ìœ„ë¡œ ì°¸ì¡°ëœ ChallengeDefinitionì„ ê¸°ë°˜ìœ¼ë¡œ ë¦¬ì†ŒìŠ¤ë¥¼ ìƒì„±í•˜ê³  ì‚­ì œí•œë‹¤.&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://s0okju.github.io/p/hexactf-6/image.png"
width="862"
height="492"
srcset="https://s0okju.github.io/p/hexactf-6/image_hu_8aa7f99b6fd840b5.png 480w, https://s0okju.github.io/p/hexactf-6/image_hu_dc443c05dda744a.png 1024w"
loading="lazy"
alt="ChallengeDefinition&amp;Challenge êµ¬ì„±ë„"
class="gallery-image"
data-flex-grow="175"
data-flex-basis="420px"
>&lt;/p>
&lt;p>ì´ì œë¶€í„° ê°ê°ì˜ ë¦¬ì†ŒìŠ¤ê°€ ì–´ë–¤ êµ¬ì„±ìš”ì†Œë¥¼ ê°€ì§€ê³  ìˆëŠ”ì§€ ì„¤ëª…í•˜ê² ìŠµë‹ˆë‹¤.&lt;/p>
&lt;h3 id="challenge">Challenge
&lt;/h3>&lt;p>Flask ì„œë²„ëŠ” Challenge ìƒì„± ìš”ì²­ì„ í†µí•´ ì‚¬ìš©ì ì´ë¦„(username)ê³¼ ë¬¸ì œ ë²ˆí˜¸(challenge_id) ì–»ê²Œ ë©ë‹ˆë‹¤. ê·¸ë¦¬ê³  íŒŒì´ì¬ ì¿ ë²„ë„¤í‹°ìŠ¤ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ í™œìš©í•˜ì—¬ Challenge CRì„ ì‹¤í–‰ì‹œí‚¤ê²Œ ë©ë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/hexactf-6/image-1.png"
width="579"
height="252"
srcset="https://s0okju.github.io/p/hexactf-6/image-1_hu_c3470e8cff99fcc3.png 480w, https://s0okju.github.io/p/hexactf-6/image-1_hu_fd596b7f452226ef.png 1024w"
loading="lazy"
alt="ëŒ€ëµì ì¸ ì‹œìŠ¤í…œ êµ¬ì„±ë„"
class="gallery-image"
data-flex-grow="229"
data-flex-basis="551px"
>&lt;/p>
&lt;p>ìš”êµ¬ì‚¬í•­ì„ ì •ì˜í•˜ìë©´ &lt;strong>ë‘ ê°œì˜ ì •ë³´ ë§Œìœ¼ë¡œë„ Challengeë¥¼ ìƒì„±í•  ìˆ˜ ìˆì–´ì•¼ í•˜ë©° ëª¨ë“  ë¬¸ì œê°€ ì‹¤í–‰ ê°€ëŠ¥í•˜ë„ë¡ ì¼ê´€ëœ êµ¬ì¡°ë¥¼ ê°€ì§€ê³  ìˆì–´ì•¼ í•©ë‹ˆë‹¤.&lt;/strong> ê·¸ë˜ì•¼ ì„œë²„ê°€ íŒŒì¼ì„ ë¶ˆëŸ¬ì˜¤ëŠ” í˜•ì‹ì´ ì•„ë‹Œ Kubernetes APIì— CR ìƒì„±ì„ ìš”ì²­í•  ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤.&lt;/p>
&lt;h4 id="íŒŒì¼ì„-ë¶ˆëŸ¬ì˜¤ëŠ”-ë°©ì‹">íŒŒì¼ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ë°©ì‹
&lt;/h4>&lt;p>Challengeì˜ êµ¬ì¡°ê°€ ë¬¸ì œ ìœ í˜•ë§ˆë‹¤ ë‹¤ë¥´ë©´ Challenge CR íŒŒì¼ì„ ë³„ë„ë¡œ ì €ì¥í•´ì„œ í˜¸ì¶œí•´ì•¼ í•©ë‹ˆë‹¤. íŒŒì¼ì´ ì•„ë‹ˆë”ë¼ë„ ì–´ë–»ê²Œ ë‹¤ë¥¸ì§€ë¥¼ ì €ì¥í•´ì•¼ í•  ê²ƒì…ë‹ˆë‹¤.&lt;/p>
&lt;h3 id="êµ¬ì¡°">êµ¬ì¡°
&lt;/h3>&lt;h4 id="metadata">Metadata
&lt;/h4>&lt;ul>
&lt;li>name : ì±Œë¦°ì§€ ì´ë¦„&lt;/li>
&lt;li>namespace : Challengeë¥¼ ì‹¤í–‰ì‹œí‚¬ namespace&lt;/li>
&lt;li>labels
&lt;ul>
&lt;li>username : ì‚¬ìš©ì ì´ë¦„&lt;/li>
&lt;li>challenge_id : Challenge id&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h4 id="spec">Spec
&lt;/h4>&lt;ul>
&lt;li>definition : ChallengeDefinition ì´ë¦„&lt;/li>
&lt;/ul>
&lt;p>MetadataëŠ” go map í˜•ì‹ìœ¼ë¡œ ì´ë¤„ì ¸ ìˆìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë¯€ë¡œ ì†ì‰½ê²Œ keyë¥¼ í†µí•´ì„œ ê°’ì„ ê°€ì ¸ì˜¬ ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤.
ì§ì ‘ êµ¬ì¡°ì²´ë¡œ ëª…ì‹œí•´ì•¼ í•˜ëŠ” ë¶€ë¶„ì€ ë°”ë¡œ &lt;code>Spec&lt;/code> ì…ë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">ChallengeSpec&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Definition: ChallengeDefinition ì´ë¦„&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Definition&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="s">`json:&amp;#34;definition&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Kubebuilderì˜ ëª…ë ¹ì–´ë¥¼ í†µí•´ ì½”ë“œë¥¼ CRDë¡œ ë³€í™˜ì‹œí‚¨ í›„ ì„¤ì¹˜í•˜ëŠ” ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. (&lt;a class="link" href="https://book.kubebuilder.io/quick-start" target="_blank" rel="noopener"
>Kubebuilder ê³µì‹ë¬¸ì„œ Quickstart&lt;/a>) ëª¨ë“  ì‘ì—…ì´ ëë‚˜ë©´ ì•„ë˜ì˜ yaml íŒŒì¼ì„ í†µí•´ Challengeë¥¼ ìƒì„±í•  ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">apiVersion&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">apps.hexactf.io/v1alpha1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">kind&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Challenge&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">metadata&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">ubuntu-instance-1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">namespace&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">default&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">labels&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">apps.hexactf.io/challengeId&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;1&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">apps.hexactf.io/user&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;test&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">spec&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># ì‚¬ìš©í•  ChallengeDefinitionì˜ ì´ë¦„&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">definition&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">ubuntu-basic&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ì£¼ëœ ëª©í‘œëŠ” ì„œë²„ê°€ &lt;strong>ì‚¬ìš©ìì˜ Challenge&lt;/strong>ë¥¼ ë§Œë“œëŠ” ê²ƒì…ë‹ˆë‹¤. ë‹¤ì‹œ ë§í•´ ì„œë²„ê°€ ì‚¬ìš©ì ì •ë³´ê°€ ë‹´ê¸´ yaml íŒŒì¼ì„ ì„ ì–¸í•˜ê³  ì‹¤í–‰ì‹œì¼œì•¼ í•œë‹¤ëŠ” ì˜ë¯¸ì™€ ê°™ìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>ì‚¬ì „ì— ë¬¸ì œ ë“±ë¡ ê³¼ì •ì´ ìˆê¸°ì— ì‚¬ìš©ì, Challengeì— ëŒ€í•œ ê¸°ë³¸ ì •ë³´ëŠ” ì €ì¥ë˜ì–´ ìˆìŠµë‹ˆë‹¤.
ì´í›„ì— ì„¤ëª…í•˜ê² ì§€ë§Œ definitionëŠ” ChallengeDefinitionì˜ ì´ë¦„ìœ¼ë¡œ Challengeì˜ ì´ë¦„(ì œëª©)ì— í•´ë‹¹ë©ë‹ˆë‹¤. ë‹¤ë¥¸ ë§ë¡œ &lt;strong>Challenge idë§Œìœ¼ë¡œë„ definitionì„ ì•Œ ìˆ˜ ìˆì–´ ìµœì†Œí•œì˜ ì •ë³´ë¡œ Challengeë¥¼ ìƒì„±í•  ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤.&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl"> &lt;span class="n">user_challenge_repo&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">UserChallengesRepository&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># Challenge definition ì¡°íšŒ&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">challenge_definition&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">ChallengeRepository&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">get_challenge_name&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">challenge_id&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="ow">not&lt;/span> &lt;span class="n">challenge_definition&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">raise&lt;/span> &lt;span class="n">ChallengeNotFound&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">error_msg&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="sa">f&lt;/span>&lt;span class="s2">&amp;#34;Challenge definition not found for ID: &lt;/span>&lt;span class="si">{&lt;/span>&lt;span class="n">challenge_id&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># Challenge name ìƒì„± ë° ê²€ì¦&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">challenge_name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="sa">f&lt;/span>&lt;span class="s2">&amp;#34;challenge-&lt;/span>&lt;span class="si">{&lt;/span>&lt;span class="n">challenge_id&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">-&lt;/span>&lt;span class="si">{&lt;/span>&lt;span class="n">username&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="ow">not&lt;/span> &lt;span class="bp">self&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">_is_valid_k8s_name&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">challenge_name&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">raise&lt;/span> &lt;span class="n">UserChallengeCreationError&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">error_msg&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="sa">f&lt;/span>&lt;span class="s2">&amp;#34;Invalid challenge name: &lt;/span>&lt;span class="si">{&lt;/span>&lt;span class="n">challenge_name&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># ...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># Challenge manifest ìƒì„±&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">challenge_manifest&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;apiVersion&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;apps.hexactf.io/v1alpha1&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;kind&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;Challenge&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;metadata&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;name&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">challenge_name&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;labels&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;apps.hexactf.io/challengeId&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nb">str&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">challenge_id&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;apps.hexactf.io/user&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">username&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;spec&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;namespace&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">namespace&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;definition&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">challenge_definition&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">challenge&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="bp">self&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">custom_api&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">create_namespaced_custom_object&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">group&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;apps.hexactf.io&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">version&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;v1alpha1&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">namespace&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">namespace&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">plural&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;challenges&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">body&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">challenge_manifest&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="challengedefinition">ChallengeDefinition
&lt;/h2>&lt;p>ChallengeDefinitionì€ Challengeì˜ &lt;strong>ì¸í”„ë¼ êµ¬ì„±ì„ ê¸°ìˆ í•˜ëŠ” ë¶€ë¶„&lt;/strong>ì…ë‹ˆë‹¤. &amp;ldquo;ì–´ë–¤ ì´ë¯¸ì§€ë¥¼ ì»¨í…Œì´ë„ˆë¡œ ë§Œë“¤ì–´ì„œ ì–´ë–»ê²Œ ë„¤íŠ¸ì›Œí¬ë¥¼ êµ¬ì„±í• ê±´ë°?&amp;rdquo; ë¥¼ ëª…ì‹œí•˜ëŠ” êµ¬ê°„ì…ë‹ˆë‹¤.&lt;/p>
&lt;h3 id="êµ¬ì¡°-1">êµ¬ì¡°
&lt;/h3>&lt;h5 id="metadata-1">Metadata
&lt;/h5>&lt;ul>
&lt;li>name: ì±Œë¦°ì§€ ì´ë¦„(ì œëª©)&lt;/li>
&lt;/ul>
&lt;h5 id="spec-1">Spec
&lt;/h5>&lt;ul>
&lt;li>isOne : ì˜ì†ì„± ì—¬ë¶€ì…ë‹ˆë‹¤. ê°’ì´ Trueì¸ ê²½ìš° 1:1 ë¬¸ì œ ìœ í˜•ìœ¼ë¡œ 30ë¶„ í›„ì— ì‚­ì œë˜ì–´ì•¼ í•©ë‹ˆë‹¤.&lt;/li>
&lt;li>component : ì¿ ë²„ë„¤í‹°ìŠ¤ ë¦¬ì†ŒìŠ¤ì¸ Deployment &amp;amp; Serviceë¥¼ í•˜ë‚˜ì˜ Componentë¡œ ì •ì˜í•©ë‹ˆë‹¤.&lt;/li>
&lt;/ul>
&lt;p>Component ë‚´ì— ìˆëŠ” Deployment, ServiceëŠ” ê¸°ì¡´ì˜ yaml ì„ ì–¸ í˜•ì‹ê³¼ ë™ì¼í•©ë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">apiVersion&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">apps.hexactf.io/v1alpha1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">kind&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">ChallengeDefinition&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">metadata&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">web-basic&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">namespace&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">default&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">spec&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">isOne&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">false&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">components&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">web&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">deployment&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">spec&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">replicas&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">template&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">spec&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">containers&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">nginx&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">nginx:1.25&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">containerPort&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">80&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="l">....&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">service&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">spec&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">http&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">port&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">80&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">targetPort&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">80&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">protocol&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">TCP&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">type&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">NodePort&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="challengedefinitionì€-deploymentì˜-ëª¨ë“ -í•„ë“œë¥¼-ì§€ì›í•˜ëŠ”-ê²ƒì´-ì•„ë‹ˆë‹¤">ChallengeDefinitionì€ Deploymentì˜ ëª¨ë“  í•„ë“œë¥¼ ì§€ì›í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë‹¤.
&lt;/h4>&lt;p>ì•ì„œ Component ë‚´ì— ìˆëŠ” DeploymentëŠ” ê¸°ì¡´ì˜ yaml ì„ ì–¸ í˜•ì‹ê³¼ ë™ì¼í•˜ë‹¤ê³  ë§ì”€ì„ ë“œë ¸ì§€ë§Œ ì¼ë¶€ëŠ” ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>Kubebuilderë¥¼ í™œìš©í•˜ì—¬ ì½”ë“œë¥¼ ì œì‘í• ë•Œ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ í†µí•´ ì¿ ë²„ë„¤í‹°ìŠ¤ì˜ ë¦¬ì†ŒìŠ¤ë¥¼ í™œìš©í•©ë‹ˆë‹¤.
Serviceë¥¼ ì˜ˆë¡œ ë“¤ë©´ yamlì— ì •ì˜ëœ í•„ë“œê°€ êµ¬ì¡°ì²´ í˜•ì‹ìœ¼ë¡œ ì„ ì–¸ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ì¿ ë²„ë„¤í‹°ìŠ¤ì˜ ë¦¬ì†ŒìŠ¤ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ êµ¬ì¡°ì²´ë¥¼ í™œìš©í•˜ëŠ” ê²ƒì´ë¼ê³  ë³´ë©´ ë©ë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">Service&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">metav1&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">TypeMeta&lt;/span> &lt;span class="s">`json:&amp;#34;,inline&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Standard object&amp;#39;s metadata.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#metadata&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// +optional&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">metav1&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">ObjectMeta&lt;/span> &lt;span class="s">`json:&amp;#34;metadata,omitempty&amp;#34; protobuf:&amp;#34;bytes,1,opt,name=metadata&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Spec defines the behavior of a service.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#spec-and-status&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// +optional&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Spec&lt;/span> &lt;span class="nx">ServiceSpec&lt;/span> &lt;span class="s">`json:&amp;#34;spec,omitempty&amp;#34; protobuf:&amp;#34;bytes,2,opt,name=spec&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Most recently observed status of the service.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Populated by the system.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Read-only.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#spec-and-status&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// +optional&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Status&lt;/span> &lt;span class="nx">ServiceStatus&lt;/span> &lt;span class="s">`json:&amp;#34;status,omitempty&amp;#34; protobuf:&amp;#34;bytes,3,opt,name=status&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì ì ˆí•˜ê²Œ ì‚¬ìš©í•˜ì—¬ Componentì˜ Deployment, Serviceë¥¼ ì„ ì–¸í•©ë‹ˆë‹¤.
ì´ë²ˆ í”„ë¡œì íŠ¸ì˜ ê²½ìš° ServiceëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ì„œ ì œê³µí•˜ëŠ” êµ¬ì¡°ì²´ë¥¼ ëª¨ë‘ ì‚¬ìš©í–ˆì§€ë§Œ DeploymentëŠ” í•„ìš”í•œ ë¶€ë¶„ë§Œ ì¶”ì¶œí•´ì„œ ì„ ì–¸í–ˆìŠµë‹ˆë‹¤.
ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ì„œ ì œê³µí•˜ëŠ” Deploymentë¥¼ ì‚¬ìš©í•˜ë©´ &lt;strong>Deploymentì˜ ìˆ˜ë§ì€ ì˜µì…˜ì´ í¬í•¨ëœ êµ¬ì¡°ì²´ë¥¼ Copyí•˜ëŠ” ê³¼ì •ì—ì„œ ìš©ëŸ‰ì´ ì´ˆê³¼ë˜ì–´ CRD ìƒì„±ì— ì‹¤íŒ¨í•˜ê²Œ ë©ë‹ˆë‹¤.&lt;/strong>&lt;/p>
&lt;p>ChallengeDefinitionì˜ Deploymentì—ì„œëŠ” ì»¨í…Œì´ë„ˆ êµ¬ì„± ë¶€ë¶„ì¸ Containersì™€ Replicasë§Œìœ¼ë¡œ êµ¬ì„±í–ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">corev1&lt;/span> &lt;span class="s">&amp;#34;k8s.io/api/core/v1&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">metav1&lt;/span> &lt;span class="s">&amp;#34;k8s.io/apimachinery/pkg/apis/meta/v1&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// ChallengeDefinitionSpec defines the desired state of ChallengeDefinition.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">ChallengeDefinitionSpec&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// INSERT ADDITIONAL SPEC FIELDS - desired state of cluster&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Important: Run &amp;#34;make&amp;#34; to regenerate code after modifying this file&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// IsOne: í•˜ë‚˜ë§Œ ìƒì„±í•  ê²½ìš°&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Falseì¼ ê²½ìš° ì¼ì • ì‹œê°„ ë‚´ì—ì„œë§Œ ì‘ë™ëœë‹¤.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">IsOne&lt;/span> &lt;span class="kt">bool&lt;/span> &lt;span class="s">`json:&amp;#34;isOne,omitempty&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Components: Challengeë¥¼ êµ¬ì„±í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ë“¤&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Components&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="nx">Component&lt;/span> &lt;span class="s">`json:&amp;#34;components,omitempty&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// Component ëŠ” ì´ë¦„ê³¼ ë¦¬ì†ŒìŠ¤ë¥¼ ì •ì˜&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">Component&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Name&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="s">`json:&amp;#34;name,omitempty&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Deployment&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">CustomDeployment&lt;/span> &lt;span class="s">`json:&amp;#34;deployment,omitempty&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Service&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">corev1&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Service&lt;/span> &lt;span class="s">`json:&amp;#34;service,omitempty&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// Deployment ê´€ë ¨ êµ¬ì¡°ì²´&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// CustomDeploymentSpec ëŠ” Replicasì™€ Templateì„ ì •ì˜&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// ìì„¸í•œ ë‚´ìš©ì€ Kubernetes Deployment API ë¬¸ì„œ ì°¸ê³ &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// https://kubernetes.io/docs/concepts/workloads/controllers/deployment/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">CustomDeployment&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Spec&lt;/span> &lt;span class="nx">CustomDeploymentSpec&lt;/span> &lt;span class="s">`json:&amp;#34;spec,omitempty&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">CustomDeploymentSpec&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Replicas&lt;/span> &lt;span class="kt">int32&lt;/span> &lt;span class="s">`json:&amp;#34;replicas,omitempty&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Template&lt;/span> &lt;span class="nx">CustomPodTemplateSpec&lt;/span> &lt;span class="s">`json:&amp;#34;template,omitempty&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">CustomPodTemplateSpec&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Spec&lt;/span> &lt;span class="nx">CustomPodSpec&lt;/span> &lt;span class="s">`json:&amp;#34;spec,omitempty&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">CustomPodSpec&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Containers&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="nx">corev1&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Container&lt;/span> &lt;span class="s">`json:&amp;#34;containers,omitempty&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="component-êµ¬ì„±-ì´ìœ ">Component êµ¬ì„± ì´ìœ 
&lt;/h4>&lt;p>ì´ì „ ê¸€ì—ì„œ ì–¸ê¸‰í•œ SQL Injection ì‚¬ë¡€ ê¸°ì–µë‚˜ì‹œë‚˜ìš”? ë¬¸ì œë¥¼ ë°°í¬í•˜ê¸° ìœ„í•´ì„œëŠ” server- dbê°€ í•„ìš”í•˜ë‹¤ê³  ë§ì”€ë“œë ¸ìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>ë¬¸ì œë¥¼ ì‹¤í–‰ì‹œí‚¤ê¸° ìœ„í•´ì„œëŠ” serverëŠ” dbê°€ ì–´ë””ì— ìˆëŠ”ì§€ ì•Œì•„ì•¼ í•©ë‹ˆë‹¤.
ì–´ë–¤ ë¬¸ì œë¥¼ ì‚¬ìš©í•˜ë©´ì„œ ì‚¬ìš©ìê°€ ëˆ„êµ¬ì¸ì§€ ì•Œì•˜ì§€ë§Œ ì–´ë–¤ ì„œë¹„ìŠ¤ì¸ì§€ ì•Œ ìˆ˜ ìˆëŠ” ë°©ë²•ì´ ìˆì„ê¹Œìš”? ë‹¨ìˆœíˆ Deployment, Serviceë¥¼ ë‚˜ì—´í•˜ëŠ” êµ¬ì¡°ë¼ê³  í–ˆì„ë•Œ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ íŠ¹ì§•ì— ë§ëŠ” prefixë¥¼ ì¶”ê°€í•˜ë©´ ë©ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ì¼ê´€ì„±ì´ ë–¨ì–´ì§ˆ ìˆ˜ ìˆë‹¤ê³  ìƒê°í•˜ì—¬ Component ë‹¨ìœ„ë¡œ Deployment, Serviceë¥¼ ë¬¶ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;h4 id="component-ë‚´-label-selector">Component ë‚´ Label Selector
&lt;/h4>&lt;p>ì¿ ë²„ë„¤í‹°ìŠ¤ì—ì„œ labelì€ ì¤‘ìš”í•œ ì—­í• ì„ í•©ë‹ˆë‹¤. ë¦¬ì†ŒìŠ¤ ê°„ ì—°ê²°í•´ì£¼ëŠ” ë‹¤ë¦¬ ì—­í• ì„ í•©ë‹ˆë‹¤.&lt;/p>
&lt;p>ê¸°ë³¸ì ìœ¼ë¡œ ì¿ ë²„ë„¤í‹°ìŠ¤ëŠ” Deploymentì˜ ë„¤íŠ¸ì›Œí¬ë¥¼ ì •ì˜í•˜ê¸° ìœ„í•´ì„œëŠ” label selectorë¥¼ í†µí•´ Serviceì™€ ì—°ê²°í•©ë‹ˆë‹¤. ê·¸ë ‡ë‹¤ë©´ ChallengeDefinitionì„ ì •ì˜í• ë•Œ labelì„ ì‚¬ìš©ìê°€ ì§€ì •í•´ì•¼ í• ê¹Œìš”?&lt;/p>
&lt;p>ë‹µì€ &lt;strong>Operatorê°€ ìë™ìœ¼ë¡œ ì§€ì •í•´ì¤ë‹ˆë‹¤.&lt;/strong>&lt;/p>
&lt;p>ë¦¬ì†ŒìŠ¤ì˜ ì´ë¦„ì— ëŒ€í•´ ì´ì•¼ê¸°ë¥¼ í•´ë³´ê² ìŠµë‹ˆë‹¤.
Challengeì„ í†µí•´ ìƒì„±ëœ ë¦¬ì†ŒìŠ¤ëŠ” Challengeì˜ challenge_id, user ì •ë³´ì™€ ChallengeDefinitionì—ì„œ ì–»ì€ Component ì´ë¦„ì„ ì¡°í•©í•œ ê³ ìœ í•œ prefixë¥¼ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤. ì—­í• ì— ë”°ë¼ deploy, svcë¥¼ ì¶”ê°€ë¡œ ë¶™ì—¬ì„œ ë¦¬ì†ŒìŠ¤ì˜ ì´ë¦„ì„ ì •í•˜ê²Œ ë©ë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// ChallengeIdentifier&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// ë„ë©”ì¸ì— ë§ëŠ” ì‹ë³„ìë¥¼ ìƒì„±í•´ì£¼ëŠ” êµ¬ì¡°ì²´&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">ChallengeIdentifier&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">prefix&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">labels&lt;/span> &lt;span class="kd">map&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">NewChallengeIdentifier&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">challenge&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">hexactfproj&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Challenge&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">component&lt;/span> &lt;span class="nx">hexactfproj&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Component&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">ChallengeIdentifier&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// prefix ìƒì„± (ë¦¬ì†ŒìŠ¤ ì´ë¦„ì— ì‚¬ìš©)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">prefix&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Sprintf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;chall-%s-%s-%s&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">challenge&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Labels&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s">&amp;#34;apps.hexactf.io/challengeId&amp;#34;&lt;/span>&lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">component&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Name&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">challenge&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Labels&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s">&amp;#34;apps.hexactf.io/user&amp;#34;&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ë‹¨ì¼ ë ˆì´ë¸” ë§µ ì‚¬ìš©&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">labels&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="kd">map&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;apps.hexactf.io/instance&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">prefix&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;apps.hexactf.io/name&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">component&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Name&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;apps.hexactf.io/part-of&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">challenge&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Name&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;apps.hexactf.io/managed-by&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;challenge-operator&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">ChallengeIdentifier&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">prefix&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">prefix&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">labels&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">labels&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">#&lt;/span> &lt;span class="o">...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">ChallengeIdentifier&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nf">GetDeploymentPrefix&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">prefix&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s">&amp;#34;-deploy&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">ChallengeIdentifier&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nf">GetServicePrefix&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">prefix&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s">&amp;#34;-svc&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ë˜í•œ Challengeë¡œë¶€í„° ìƒì„±ëœ Deployment ë¦¬ì†ŒìŠ¤ëŠ” ì•„ë˜ì™€ ê°™ì€ ë ˆì´ë¸”ì„ ì¶”ê°€ë¡œ ê°€ì§€ê²Œ ë©ë‹ˆë‹¤. ê·¸ ì¤‘ &lt;code>apps.hexactf.io/instance&lt;/code> Serviceì˜ &lt;code>selector&lt;/code> ë¡œ ì„ ì–¸í•˜ì—¬ ì„œë¡œ ì—°ê²°í•´ì¤ë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">prefix&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Sprintf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;chall-%s-%s-%s&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">challenge&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Labels&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s">&amp;#34;apps.hexactf.io/challengeId&amp;#34;&lt;/span>&lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">component&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Name&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">challenge&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Labels&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s">&amp;#34;apps.hexactf.io/user&amp;#34;&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ë‹¨ì¼ ë ˆì´ë¸” ë§µ ì‚¬ìš©&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">labels&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="kd">map&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;apps.hexactf.io/instance&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">prefix&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;apps.hexactf.io/name&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">component&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Name&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;apps.hexactf.io/part-of&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">challenge&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Name&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;apps.hexactf.io/managed-by&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;challenge-operator&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="ì»´í¬ë„ŒíŠ¸-ê°„-í†µì‹ ì€-ì–´ë–»ê²Œí•´ìš”">ì»´í¬ë„ŒíŠ¸ ê°„ í†µì‹ ì€ ì–´ë–»ê²Œí•´ìš”?
&lt;/h4>&lt;p>SQL Injection ë¬¸ì œë¥¼ ë‹¤ì‹œ ìƒê°í•´ë³´ê² ìŠµë‹ˆë‹¤. ServerëŠ” ë°ì´í„°ë² ì´ìŠ¤ì™€ í†µì‹ í•˜ê¸° ìœ„í•´ì„œ ë°ì´í„°ë² ì´ìŠ¤ì˜ host ì£¼ì†Œë¥¼ ì§€ì •í•´ì¤˜ì•¼ í•©ë‹ˆë‹¤. host ì£¼ì†Œë¥¼ ì–´ë–»ê²Œ ì•Œ ìˆ˜ ìˆì„ê¹Œìš”?&lt;/p>
&lt;ol>
&lt;li>ìë™ìœ¼ë¡œ ì°¾ì•„ì¤€ë‹¤. : ğŸ¥¹&lt;/li>
&lt;li>ì§ì ‘ ì§€ì •í•´ì¤€ë‹¤. : IaC ë„êµ¬ì²˜ëŸ¼ ì„œë¹„ìŠ¤ ì´ë¦„ì„ ì§€ì •í•´ì¤€ë‹¤. ê°€ë³€ ì¸ìë¥¼ ì‚½ì…í•  ìˆ˜ ìˆëŠ” ë¡œì§ì„ êµ¬í˜„í•´ì•¼ í•œë‹¤.&lt;/li>
&lt;li>localhostë¡œ ì„¤ì •í•œë‹¤. : ì¼ê´€ëœ hostë¥¼ ê°€ì§ˆ ìˆ˜ ìˆë‹¤.&lt;/li>
&lt;/ol>
&lt;p>ì´ê±¸ ë‹¤ë¥´ê²Œ í•´ì„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;ol>
&lt;li>ìë™ìœ¼ë¡œ ì°¾ì•„ì¤€ë‹¤. : ğŸ¥¹&lt;/li>
&lt;li>ì§ì ‘ ì§€ì •í•´ì¤€ë‹¤. : ë‹¤ë¥¸ ì»´í¬ë„ŒíŠ¸ì˜ Serviceë¥¼ ì§€ì •í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ì»´í¬ë„ŒíŠ¸ ê°„ í†µì‹ ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.&lt;/li>
&lt;li>localhostë¡œ ì„¤ì •í•œë‹¤. : ì»´í¬ë„ŒíŠ¸ ê°„ í†µì‹ ì´ ë¶ˆê°€ëŠ¥í•©ë‹ˆë‹¤. Pod ë‚´ ì—¬ëŸ¬ê°œì˜ ì»¨í…Œì´ë„ˆë¥¼ ë°°í¬í•©ë‹ˆë‹¤.&lt;/li>
&lt;/ol>
&lt;p>3ë²ˆì¸ &lt;strong>Pod ë‚´ì— ë‹¤ì–‘í•œ ì»¨í…Œì´ë„ˆë¥¼ ì‚½ì…í•˜ëŠ” ë°©í–¥ì„ ì„ íƒ&lt;/strong>í–ˆìŠµë‹ˆë‹¤.
ì„œë¹„ìŠ¤ë¥¼ ì§€ì›í•˜ë ¤ë©´ ChallengeDefinition êµ¬ì¡°ë¥¼ í¬ê²Œ ë°”ê¿”ì•¼ í•©ë‹ˆë‹¤. ì‹œê°„ ì—¬ìœ ë„ ì—†ì§€ë§Œ ê¸°ìˆ ì ìœ¼ë¡œ ë¶€ë‹´ì´ ë©ë‹ˆë‹¤. ë˜í•œ 2ê°œ ì´ìƒì˜ ì»´í¬ë„ŒíŠ¸ë¥¼ ì œê³µí•˜ëŠ” ê²½ìš°ëŠ” ë“œë¬¼ê³  ëŒ€ë¶€ë¶„ ì œí•œ ì‹œê°„ í›„ì— ì‚­ì œë˜ëŠ” ìœ í˜•(1:1)ì…ë‹ˆë‹¤. í˜„ì¬ë¡œì„œ ê¸‰í•œ ê¸°ëŠ¥ì€ ì•„ë‹ˆê¸° ë•Œë¬¸ì— ì œì™¸í–ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;h2 id="ë‹¤ìŒ-ì´ì•¼ê¸°">ë‹¤ìŒ ì´ì•¼ê¸°
&lt;/h2>&lt;p>ì´ë²ˆ ê¸€ì—ì„œëŠ” ChallengeDefinitionê³¼ Challenge typeì— ëŒ€í•œ êµ¬ì„± ìš”ì†Œì™€ ê´€ë ¨ ì½”ë“œë¥¼ ë³´ì—¬ë“œë ¸ìŠµë‹ˆë‹¤.
ì´ì œë¶€í„° Operator êµ¬í˜„ ì‹œì‘ì´ë¼ê³  ìƒê°í•©ë‹ˆë‹¤. &amp;ldquo;CRì„ ì–´ë–»ê²Œ ìƒíƒœ ê´€ë¦¬í• ë˜?&amp;ldquo;ë¥¼ êµ¬í˜„í•œ controllerë¥¼ ì œì‘í•´ì•¼ í•©ë‹ˆë‹¤.
ë‹¤ìŒ ê¸€ì—ëŠ” controller êµ¬í˜„ ë¶€ë¶„ì¸ &amp;ldquo;ìƒíƒœ ê´€ë¦¬ íŒŒíŠ¸&amp;quot;ë¡œ ì°¾ì•„ì˜¤ê² ìŠµë‹ˆë‹¤.&lt;/p></description></item><item><title>HexaCTF 5. Kubernetes CRë¥¼ í™œìš©í•œ Challenge ì„¤ê³„</title><link>https://s0okju.github.io/p/hexactf-5/</link><pubDate>Sat, 18 Jan 2025 00:00:00 +0900</pubDate><guid>https://s0okju.github.io/p/hexactf-5/</guid><description>&lt;h2 id="ì´ì „-ì´ì•¼ê¸°">ì´ì „ ì´ì•¼ê¸°
&lt;/h2>&lt;p>ì´ì „ê¸€ì—ì„œëŠ” ë¬¸ì œ ì»¨í…Œì´ë„ˆ(Challenge)ì˜ íŠ¹ì§•ê³¼ ê·¸ì— ë”°ë¥¸ ìš”êµ¬ì‚¬í•­ì„ ì •ì˜í–ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;ol>
&lt;li>ì»¨í…Œì´ë„ˆ ìƒíƒœë¥¼ ì§€ì†ì ìœ¼ë¡œ í™•ì¸í•  ìˆ˜ ìˆì–´ì•¼ í•¨&lt;/li>
&lt;li>ë‹¤ì–‘í•œ ì»¨í…Œì´ë„ˆë¥¼ í•˜ë‚˜ì˜ êµ¬ì¡°ë¡œ ì§ì ‘ ì •ì˜í•˜ê³  ê´€ë¦¬í•  ìˆ˜ ìˆì–´ì•¼ í•¨&lt;/li>
&lt;/ol>
&lt;p>Dockerë¡œ ìœ„ì˜ ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ëŠ” ê²ƒì€ ê¸°ìˆ ì ì¸ í•œê³„ê°€ ìˆìœ¼ë¯€ë¡œ Kubernetesë¥¼ ì„ íƒí–ˆë‹¤ê³  ë§ì”€ë“œë ¸ìŠµë‹ˆë‹¤. Kubernetesë¥¼ í†µí•´ ì–´ë–»ê²Œ CTFë¥¼ ì œì‘í–ˆëŠ”ì§€ ì‘ì„±í•˜ê² ìŠµë‹ˆë‹¤.&lt;/p>
&lt;h2 id="kubernetesë¥¼-ì„ íƒí•œ-ì´ìœ ">Kubernetesë¥¼ ì„ íƒí•œ ì´ìœ 
&lt;/h2>&lt;p>ê¸€ ì´ˆë°˜ì— ë‘ ê°€ì§€ì˜ ìš”êµ¬ì‚¬í•­ì€ ì¶©ì¡±ë˜ì–´ì•¼ í•œë‹¤ê³  ë§ì”€ ë“œë ¸ìŠµë‹ˆë‹¤. ì¿ ë²„ë„¤í‹°ìŠ¤ë¥¼ ì‚¬ìš©í•˜ë©´ ìš”êµ¬ì‚¬í•­ì„ ì¶©ì¡±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;ol>
&lt;li>
&lt;p>ì»¨í…Œì´ë„ˆ ìƒíƒœë¥¼ ì§€ì†ì ìœ¼ë¡œ í™•ì¸í•  ìˆ˜ ìˆì–´ì•¼ í•¨
ì¿ ë²„ë„¤í‹°ìŠ¤ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ë¦¬ì†ŒìŠ¤ì˜ ìƒíƒœë¥¼ ì£¼ê¸°ì ìœ¼ë¡œ í™•ì¸í•˜ë©° ì˜¤ë¥˜ ë°œìƒì‹œ ì¬ì‹œì‘ì„ ìˆ˜í–‰í•˜ëŠ” íŠ¹ì§•ì„ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤. ë³„ë„ì˜ êµ¬í˜„ ì—†ì´ ì§€ì†ì ìœ¼ë¡œ ì»¨í…Œì´ë„ˆ ìƒíƒœë¥¼ í™•ì¸í•˜ëŠ” ê¸°ëŠ¥ì„ í™œìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ë‹¤ì–‘í•œ ì»¨í…Œì´ë„ˆë¥¼ í•˜ë‚˜ì˜ êµ¬ì¡°ë¡œ ì§ì ‘ ì •ì˜í•˜ê³  ê´€ë¦¬í•  ìˆ˜ ìˆì–´ì•¼ í•¨&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>&lt;img src="https://s0okju.github.io/p/hexactf-5/image.png"
width="1920"
height="1080"
srcset="https://s0okju.github.io/p/hexactf-5/image_hu_f66ec269c2b8996f.png 480w, https://s0okju.github.io/p/hexactf-5/image_hu_9fa085d9a7445b35.png 1024w"
loading="lazy"
alt="ì¶œì²˜ - https://www.cncf.io/blog/2022/06/15/kubernetes-operators-what-are-they-some-examples/"
class="gallery-image"
data-flex-grow="177"
data-flex-basis="426px"
>&lt;/p>
&lt;blockquote>
&lt;p>NOTICE!
ë¬¼ë¡  ì¿ ë²„ë„¤í‹°ìŠ¤ê°€ ì‰½ë‹¤ëŠ” ê²ƒì€ ì•„ë‹™ë‹ˆë‹¤. í˜„ì¬ë¡œì„œ ìœ„ì˜ ìš”êµ¬ì‚¬í•­ì„ ì§ì ‘ êµ¬í˜„í•œ ê²ƒë³´ë‹¤ëŠ” ì¿ ë²„ë„¤í‹°ìŠ¤ë¥¼ í™œìš©í•˜ëŠ” ê²ƒì´ í˜„ì‹¤ì ìœ¼ë¡œ ê°€ëŠ¥í•œ ë°©ë²•ì´ë¼ê³  ìƒê°í–ˆìŠµë‹ˆë‹¤.&lt;/p>&lt;/blockquote>
&lt;h2 id="challenge-ê°œë…-ì¬ì •ì˜">Challenge ê°œë… ì¬ì •ì˜
&lt;/h2>&lt;p>ê¸°ìˆ ì ì¸ ì´ì•¼ê¸°ë¥¼ ë§í•˜ê¸° ì•ì„œ ë„ë©”ì¸ ì •ì˜ê°€ í•„ìš”í•©ë‹ˆë‹¤.&lt;/p>
&lt;h3 id="ctf-ì‚¬ìš©ì-ë¶„ë¥˜">CTF ì‚¬ìš©ì ë¶„ë¥˜
&lt;/h3>&lt;ul>
&lt;li>ëŒ€íšŒ ìš´ì˜ì
&lt;ul>
&lt;li>CTF ëŒ€íšŒ ì‚¬ì´íŠ¸ë¥¼ ìš´ì˜í•˜ëŠ” ì‚¬ëŒ&lt;/li>
&lt;li>ë¬¸ì œ ë°œìƒ ì‹œ ì¦‰ì‹œ í•´ê²°í•´ì•¼ í•¨&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>ë¬¸ì œ ì¶œì œì
&lt;ul>
&lt;li>ë¬¸ì œ íŒŒì¼ì„ ì œì‘ í›„ ìš´ì˜ìì—ê²Œ ì œê³µ&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>ëŒ€íšŒ ì°¸ê°€ì
&lt;ul>
&lt;li>CTF ì‚¬ì´íŠ¸ì—ì„œ ì œê³µí•œ ë¬¸ì œë¥¼ í•´ê²°&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>ëŒ€íšŒ ìš´ì˜ ë°©ì‹ë§ˆë‹¤ ê° ì—­í• ì´ í•˜ëŠ” ë²”ìœ„ëŠ” ë‹¬ë¼ì§ˆ ê²ƒì…ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ì €í¬ í”„ë¡œì íŠ¸ì—ì„œëŠ” ë¬¸ì œ ë“±ë¡ê³¼ ë¦¬ì†ŒìŠ¤ ê´€ë¦¬ë¥¼ ëŒ€íšŒ ìš´ì˜ìê°€ í•˜ê¸°ë¡œ ê²°ì •í–ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/hexactf-5/image-1.png"
width="1006"
height="507"
srcset="https://s0okju.github.io/p/hexactf-5/image-1_hu_995a9d39471bf59b.png 480w, https://s0okju.github.io/p/hexactf-5/image-1_hu_8c6e4b2059596945.png 1024w"
loading="lazy"
alt="ì—­í• ì— ë”°ë¥¸ Challenge êµ¬ì„±ë„"
class="gallery-image"
data-flex-grow="198"
data-flex-basis="476px"
>&lt;/p>
&lt;h3 id="ê°œë…-ì •ì˜">ê°œë… ì •ì˜
&lt;/h3>&lt;p>ì¿ ë²„ë„¤í‹°ìŠ¤ë¥¼ ì ìš©í•˜ê¸° ì´ì „ì— ê°œë…ì„ ë‹¤ì‹œ ì •ë¦¬í•´ë´…ì‹œë‹¤.&lt;/p>
&lt;p>ì‚¬ì „ì— ë“±ë¡í•œ ë¬¸ì œë¥¼ ì‚¬ìš©ìê°€ ì‹¤í–‰ì‹œí‚¤ê¸° ìœ„í•´ì„œëŠ” ì–´ë–»ê²Œ í•´ì•¼í• ê¹Œìš”?&lt;br>
ë“±ë¡í•˜ëŠ” &lt;strong>ì‚¬ëŒì€ ë¬¸ì œ(Challenge) ì»¨í…Œì´ë„ˆì— ëŒ€í•œ êµ¬ì„±ì„ ì •ì˜í•˜ê³  ì‚¬ìš©ìëŠ” ê·¸ ì •ì˜í•œ ë‚´ìš©ì„ ê·¸ëŒ€ë¡œ ì‹¤í–‰ì‹œí‚¤ëŠ” ê²ƒì…ë‹ˆë‹¤.&lt;/strong> ìƒì„±ëœ ë¬¸ì œë“¤ì€ ì‚¬ìš©ì ì •ë³´ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ì‹ë³„ë˜ì–´ì•¼ í•©ë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/hexactf-5/image-2.png"
width="664"
height="315"
srcset="https://s0okju.github.io/p/hexactf-5/image-2_hu_3ab6201f1884f269.png 480w, https://s0okju.github.io/p/hexactf-5/image-2_hu_71bdb1956457a80c.png 1024w"
loading="lazy"
alt="Challenge ìƒì„± íŠ¹ì§•"
class="gallery-image"
data-flex-grow="210"
data-flex-basis="505px"
>&lt;/p>
&lt;p>ê·¸ë ‡ë‹¤ë©´ ë¬¸ì œë¥¼ ìƒì„±í•˜ê¸° ìœ„í•´ì„œëŠ” ìµœì¢…ì ìœ¼ë¡œ ë‘ ê°€ì§€ê°€ í•„ìš”í•˜ê²Œ ë©ë‹ˆë‹¤.&lt;/p>
&lt;ul>
&lt;li>ë¬¸ì œ ì •ì˜ì„œ(ChallengeDefinition)&lt;/li>
&lt;li>ì‚¬ìš©ìì˜ ì •ë³´ê°€ í¬í•¨ëœ ë¬¸ì œ(Challenge)&lt;/li>
&lt;/ul>
&lt;p>ì´ì œë¶€í„° ë¬¸ì œ ì •ì˜ì„œì™€ ì‚¬ìš©ìê°€ í’€ì–´ì•¼ í•˜ëŠ” ë¬¸ì œë¥¼ ChallengeDefinitionê³¼ Challengeë¼ê³  ë¶€ë¥´ê² ìŠµë‹ˆë‹¤.&lt;/p>
&lt;h2 id="crë¡œ-challengedefinitionê³¼-challenge-ì •ì˜í•˜ê¸°">CRë¡œ ChallengeDefinitionê³¼ Challenge ì •ì˜í•˜ê¸°
&lt;/h2>&lt;h3 id="í”„ë¡œì íŠ¸ì—ì„œ-kubernetes-operatorë¥¼-ì‚¬ìš©í•˜ëŠ”-ë°©ë²•">í”„ë¡œì íŠ¸ì—ì„œ Kubernetes Operatorë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ë²•
&lt;/h3>&lt;p>Kubernetes OperatorëŠ” ì‚¬ìš©ìê°€ ì •ì˜í•œ ë¦¬ì†ŒìŠ¤(CR)ë¥¼ ê´€ë¦¬í•˜ëŠ” í”„ë¡œê·¸ë¨ì…ë‹ˆë‹¤. ì¦‰, ì˜¤í¼ë ˆì´í„°ë¥¼ ì œì‘í•œë‹¤ëŠ” ê²ƒì€ ì‚¬ìš©ìê°€ ì •ì˜í•œ ë¦¬ì†ŒìŠ¤ë¥¼ ëª¨ë‹ˆí„°ë§í•˜ëŠ” ë£¨í”„ë¥¼ ì‹¤í–‰ì‹œí‚¤ëŠ” í”„ë¡œê·¸ë¨ì„ ì œì‘í•œë‹¤ëŠ” ì˜ë¯¸ì…ë‹ˆë‹¤.&lt;sup id="fnref:1">&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref">1&lt;/a>&lt;/sup>&lt;/p>
&lt;p>&lt;strong>ë¦¬ì†ŒìŠ¤ë¥¼ ëª¨ë‹ˆí„°ë§í•œë‹¤ëŠ” ê²ƒì€ ìƒíƒœë¥¼ ê´€ë¦¬í•œë‹¤ëŠ” ì˜ë¯¸ì™€ ê°™ìŠµë‹ˆë‹¤. ê·¸ ëŒ€ìƒì€ ìƒíƒœ ë¼ì´í”„ì‚¬ì´í´ì„ ê°€ì§ˆ ê²ƒì…ë‹ˆë‹¤&lt;/strong> Kubernetes Operator SDK (kubebuilder, kopf &amp;hellip;)ë¥¼ í™œìš©í•˜ì—¬ ìƒíƒœ ë¼ì´í”„ì‚¬ì´í´ì„ ì •ì˜í•˜ê³  êµ¬í˜„í•  ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤. Kubernetes Operatorì˜ í™œìš©ì€ ìš”êµ¬ì‚¬í•­ ëª¨ë‘ ì¶©ì¡±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>ì´ë²ˆ í”„ë¡œì íŠ¸ì—ì„œëŠ” Challengeì˜ Controllerë¡œì„œ Kubernetes Operatorë¥¼ êµ¬í˜„í•  ì˜ˆì •ì…ë‹ˆë‹¤.&lt;/p>
&lt;h3 id="crcustom-resourcecrdcustom-resource-definition">CR(Custom Resource)&amp;amp;CRD(Custom Resource Definition)
&lt;/h3>&lt;p>ì§ì ‘ ì •ì˜í•œ ë¦¬ì†ŒìŠ¤ì˜ ìŠ¤í™ì„ CRD(CustomResourceDefinition)ìœ¼ë¡œ ì •ì˜í•œ í›„ ìŠ¤í™ì— ë§ê²Œ CR(CustomResource)ë¥¼ ìƒì„±í•˜ëŠ” YAMLë¥¼ ì‹¤í–‰ì‹œí‚¤ë©´ ì»¤ìŠ¤í…€ ë¦¬ì†ŒìŠ¤ë¥¼ ì‹¤í–‰ì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;blockquote>
&lt;p>CR&amp;amp;CRDì— ëŒ€í•œ ê¸°ìˆ ì ì¸ ë‚´ìš©ì€ ccamboë‹˜ì˜ &lt;a class="link" href="https://ccambo.tistory.com/entry/Kubernetes-%ED%99%95%EC%9E%A5%EC%9D%B8-CRD%EC%99%80-CR-%EC%97%90-%EB%8C%80%ED%95%9C-%EA%B0%9C%EB%85%90-%EC%A0%95%EB%A6%AC" target="_blank" rel="noopener"
>Kubernetes í™•ì¥ì¸ CRDì™€ CR ì— ëŒ€í•œ ê°œë… ì •ë¦¬&lt;/a> ë¥¼ ì°¸ê³ í•˜ì‹œê¸¸ ë°”ëë‹ˆë‹¤.&lt;/p>&lt;/blockquote>
&lt;p>ì›í•˜ëŠ” ë¦¬ì†ŒìŠ¤ë¥¼ ì§ì ‘ ì •ì˜í•´ì„œ ë°°í¬í•  ìˆ˜ ìˆë‹¤ëŠ” íŠ¹ì§•ì€ ìš”êµ¬ì‚¬í•­ 2ë²ˆì¸ &amp;ldquo;ë‹¤ì–‘í•œ ì»¨í…Œì´ë„ˆë¥¼ í•˜ë‚˜ì˜ êµ¬ì¡°ë¡œ ì§ì ‘ ì •ì˜í•œë‹¤&amp;quot;ë¥¼ ê°€ëŠ¥í•˜ê²Œ ë§Œë“¤ì–´ì¤ë‹ˆë‹¤.
ì´ë²ˆ í”„ë¡œì íŠ¸ì—ì„œëŠ” CR&amp;amp;CRDë¥¼ ì ê·¹ì ìœ¼ë¡œ í™œìš©í•  ì˜ˆì •ì…ë‹ˆë‹¤.&lt;/p>
&lt;h3 id="challengedefinitionchallenge-ê°„ë‹¨í•˜ê²Œ-ì •ì˜í•˜ê¸°">ChallengeDefinition&amp;amp;Challenge ê°„ë‹¨í•˜ê²Œ ì •ì˜í•˜ê¸°
&lt;/h3>&lt;p>ì´ë²ˆ í”„ë¡œì íŠ¸ì—ì„œëŠ” ë‘ ê°œì˜ ì»¤ìŠ¤í…€ ë¦¬ì†ŒìŠ¤ë¥¼ ìƒì„±í•  ê²ƒì…ë‹ˆë‹¤.&lt;/p>
&lt;ul>
&lt;li>ChallengeDefinition : ë¬¸ì œ ìƒì„¸ ì •ë³´ë¥¼ ë‚˜íƒ€ë‚´ë©´ ì±Œë¦°ì§€ ì •ë³´, êµ¬ì„± ë¦¬ì†ŒìŠ¤ë¥¼ ì»´í¬ë„ŒíŠ¸ ë‹¨ìœ„ë¡œ ì •ì˜í•œë‹¤. CTF ë¬¸ì œë¥¼ ë“±ë¡í• ë•Œ &lt;code>ChallengeDefinition&lt;/code>ì„ ë“±ë¡í•œë‹¤.&lt;/li>
&lt;li>Challenge : ì‚¬ìš©ì ì •ë³´ë¥¼ metadataì— ì£¼ë¡œ ì €ì¥í•˜ê³  specìœ¼ë¡œ &lt;code>ChallengeDefinition&lt;/code>ë¥¼ ì°¸ì¡°í•˜ì—¬ ì •ì˜í•œë‹¤. ì£¼ë¡œ ì‚¬ìš©ìê°€ ì±Œë¦°ì§€ ì»¨í…Œì´ë„ˆë¥¼ ìƒì„±í•˜ê³  ì‹¤í–‰í• ë•Œ &lt;code>Challenge&lt;/code>ë¥¼ ì •ì˜í•˜ê³  ì‹¤í–‰ì‹œí‚¨ë‹¤.&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://s0okju.github.io/p/hexactf-5/image-3.png"
width="862"
height="492"
srcset="https://s0okju.github.io/p/hexactf-5/image-3_hu_c7cc7fbe726d4d4c.png 480w, https://s0okju.github.io/p/hexactf-5/image-3_hu_ba57c42f629ce5bc.png 1024w"
loading="lazy"
alt="ChallengeDefinition&amp;Challenge êµ¬ì²´ì ì¸ êµ¬ì„±ë„"
class="gallery-image"
data-flex-grow="175"
data-flex-basis="420px"
>&lt;/p>
&lt;h4 id="ì™œ-ì €ë ‡ê²Œ-êµ¬ì„±í–ˆì„ê¹Œìš”">ì™œ ì €ë ‡ê²Œ êµ¬ì„±í–ˆì„ê¹Œìš”?
&lt;/h4>&lt;p>êµ¬ì²´ì ì¸ ì´ìœ ëŠ” ë’¤ì— êµ¬í˜„ê³¼ í•¨ê»˜ ì„¤ëª…í•  ì˜ˆì •ì…ë‹ˆë‹¤. ê°„ë‹¨í•˜ê²Œ ë§ì”€ë“œë¦¬ìë©´ &lt;strong>ëª¨ë“  ë¦¬ì†ŒìŠ¤ê°€ ì‚¬ìš©ìë§ˆë‹¤ ì‹ë³„ ê°€ëŠ¥í•´ì•¼ í•©ë‹ˆë‹¤.&lt;/strong>&lt;br>
ì‚¬ìš©ìì˜ ê³ ìœ  ë°ì´í„°, ë¬¸ì œì˜ ê³ ìœ  ë°ì´í„°ë¥¼ ê°€ì§€ê³  ChallengeDefinitionì— ì •ì˜ëœ ë¦¬ì†ŒìŠ¤ë“¤ì´ ì„œë¡œ ì‹ë³„ ê°€ëŠ¥í•˜ë„ë¡ ì´ë¦„ì„ ì •í•  ê²ƒì…ë‹ˆë‹¤. ê·¸ë˜ì•¼ ë™ì¼í•œ ë¦¬ì†ŒìŠ¤ë”ë¼ë„ ì¶©ëŒì´ ë°œìƒí•˜ì§€ ì•Šì„ ê²ƒì…ë‹ˆë‹¤.&lt;/p>
&lt;h2 id="ë‹¤ìŒ-ì´ì•¼ê¸°">ë‹¤ìŒ ì´ì•¼ê¸°
&lt;/h2>&lt;p>ì§€ê¸ˆê¹Œì§€ Challengeë¼ëŠ” ê°œë…ì„ ì¬ì •ì˜í•˜ê³  Kubernetes ì»¤ìŠ¤í…€ ë¦¬ì†ŒìŠ¤ë¡œì¨ ì–´ë–»ê²Œ êµ¬ì„±í•  ê²ƒì¸ì§€ ì‘ì„±í–ˆìŠµë‹ˆë‹¤.&lt;br>
ë‹¤ìŒ ê¸€ì—ì„œëŠ” ì–´ë–»ê²Œ ì½”ë“œë¡œ ChallengeDefinition, Challengeë¥¼ êµ¬í˜„í–ˆëŠ”ì§€ ì„¤ëª…í•˜ê² ìŠµë‹ˆë‹¤.&lt;/p>
&lt;h2 id="reference">Reference
&lt;/h2>&lt;ul>
&lt;li>&lt;a class="link" href="https://ccambo.tistory.com/entry/Kubernetes-%ED%99%95%EC%9E%A5%EC%9D%B8-CRD%EC%99%80-CR-%EC%97%90-%EB%8C%80%ED%95%9C-%EA%B0%9C%EB%85%90-%EC%A0%95%EB%A6%AC" target="_blank" rel="noopener"
>Kubernetes í™•ì¥ì¸ CRDì™€ CR ì— ëŒ€í•œ ê°œë… ì •ë¦¬&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://bcho.tistory.com/1391" target="_blank" rel="noopener"
>ê°„ë‹¨í•˜ê²Œ ì•Œì•„ë³´ëŠ” Kubernetes Operatorì˜ ê°œë…ê³¼ Kopf í”„ë ˆì„ì›&lt;/a>&lt;/li>
&lt;/ul>
&lt;div class="footnotes" role="doc-endnotes">
&lt;hr>
&lt;ol>
&lt;li id="fn:1">
&lt;p>ì¿ ë²„ë„¤í‹°ìŠ¤ ì˜¤í¼ë ˆì´í„°. ì œì´ìŠ¨ ë„ë¹„ìŠ¤, ì¡°ìŠˆì•„ ìš°ë“œ ì§€ìŒ, ì—ì´ì½˜&amp;#160;&lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/div></description></item><item><title>HexaCTF 4. Dockerë¥¼ í™œìš©í•œ Challenge ì„¤ê³„ ë° í•œê³„ì </title><link>https://s0okju.github.io/p/hexactf-4/</link><pubDate>Thu, 16 Jan 2025 00:00:00 +0900</pubDate><guid>https://s0okju.github.io/p/hexactf-4/</guid><description>&lt;ul>
&lt;li>2025.01.18: ì œëª© ìˆ˜ì •&lt;/li>
&lt;/ul>
&lt;h2 id="ctfì˜-ë¬¸ì œ-íŠ¹ì§•">CTFì˜ ë¬¸ì œ íŠ¹ì§•
&lt;/h2>&lt;h3 id="ë¬¸ì œ-ì¢…ë¥˜">ë¬¸ì œ ì¢…ë¥˜
&lt;/h3>&lt;p>Challengeë¥¼ ì–´ë–»ê²Œ êµ¬ì„±í•  ê²ƒì¸ê°€ë¥¼ ìƒê°í•˜ê¸° ì „ì— ë¬¸ì œ ë°°í¬ ê´€ì ì—ì„œ CTF ë¬¸ì œ ì¢…ë¥˜ë¥¼ íŒŒì•…í•´ì•¼ í•©ë‹ˆë‹¤.
í¬ê²Œ 5ê°€ì§€ì˜ ì¹´í…Œê³ ë¦¬ê°€ ìˆìœ¼ë©° ë¬¸ì œë¥¼ ì¶œì œí•˜ëŠ” ë°©ì‹ì€ í¬ê²Œ ë‘ ê°€ì§€ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;ul>
&lt;li>Live : ì‹¤ì œë¡œ ìš´ì˜ì¤‘ì¸ ì„œë²„ë¥¼ í†µí•´ ë¬¸ì œë¥¼ í‘¸ëŠ” ê²½ìš°&lt;/li>
&lt;li>File : íŒŒì¼ì„ ë‹¤ìš´ë°›ì•„ì„œ ë¬¸ì œë¥¼ í‘¸ëŠ” ê²½ìš°&lt;/li>
&lt;/ul>
&lt;p>Live ë°©ì‹ ì¤‘ì—ì„œ ë‘ ê°€ì§€ë¥¼ ë” ë‚˜ëˆŒ ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;ul>
&lt;li>1:1 : í•œ ì‚¬ëŒë‹¹ ê³ ìœ í•œ ì„œë²„ì— ì ‘ì†í•´ì•¼ í•˜ëŠ” ê²½ìš°, ì£¼ë¡œ ìƒíƒœê°€ ìˆëŠ”(Stateful) ì• í”Œë¦¬ì¼€ì´ì…˜ ë¬¸ì œì— ì í•©&lt;/li>
&lt;li>1:N : í•˜ë‚˜ì˜ ì„œë²„ì— ì—¬ëŸ¬ ì‚¬ëŒì´ ì ‘ì†í•´ì•¼ í•˜ëŠ” ê²½ìš°, ì£¼ë¡œ ìƒíƒœê°€ ì—†ëŠ”(Stateless) ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë¬¸ì œì— ì í•©&lt;/li>
&lt;/ul>
&lt;p>ì˜ˆë¥¼ í•œë²ˆ ë“¤ì–´ë³´ê² ìŠµë‹ˆë‹¤.
ë‹¨ìˆœí•˜ê²Œ nginx, serverë¡œë§Œ êµ¬ì„±ëœ ê°„ë‹¨í•œ XSS ë¬¸ì œê°€ ìˆë‹¤ê³  ìƒê°í•´ë´…ì‹œë‹¤.&lt;br>
ìë°”ìŠ¤í¬ë¦½íŠ¸ ì½”ë“œë¥¼ ì‚½ì…í•´ ì•…ì˜ì ì¸ í–‰ìœ„ë¥¼ í•˜ëŠ” ê³µê²© ë°©ë²•ì…ë‹ˆë‹¤.&lt;sup id="fnref:1">&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref">1&lt;/a>&lt;/sup> XSS CTF ë¬¸ì œì—ì„œëŠ” ì˜ë„í•œ ì•…ì˜ì ì¸ í–‰ìœ„ë¥¼ ìˆ˜í–‰í•˜ë©´ í”Œë˜ê·¸ë¥¼ ë°˜í™˜í•˜ê²Œ ë©ë‹ˆë‹¤.&lt;br>
ì´ë•Œ ì—¬ëŸ¬ ì‚¬ëŒë“¤ì´ ë™ì¼í•œ XSS ë¬¸ì œ ì‚¬ì´íŠ¸ ì ‘ì†í–ˆì„ë•Œ ì„œë¡œ ì˜í–¥ì„ ë°›ì„ê¹Œìš”? ê·¸ë ‡ì§€ ì•ŠìŠµë‹ˆë‹¤. ì‚¬ìš©ìëŠ” ìì‹ ë§Œì˜ ë…ë¦½ì ì¸ í™˜ê²½ì—ì„œ nginxê°€ ë°˜í™˜í•˜ëŠ” ìë°”ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‚¬ìš©í•˜ê³  ìˆê¸° ë•Œë¬¸ì— ì„œë¡œ ì˜í–¥ì„ ë°›ì§€ ì•Šê²Œ ë˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ì´ëŸ° ë¬¸ì œ ìœ í˜•ì€ ìœ„ì—ì„œ ë§í•œ 1:N ë°©ì‹ì„ ì‚¬ìš©í•˜ê²Œ ë©ë‹ˆë‹¤.&lt;/p>
&lt;p>SQL Injection ë¬¸ì œë¥¼ ìƒê°í•´ë´…ì‹œë‹¤.
SQL Injectionì„ ì‹œë„í•˜ê¸° ìœ„í•´ ë‹¤ì–‘í•œ ëª…ë ¹ì–´ë¥¼ ì‹œë„í•˜ê²Œ ë©ë‹ˆë‹¤. ê·¸ ê³¼ì •ì—ì„œ ë¬¸ì œë¥¼ í•´ê²°í•œ ì‚¬ëŒì˜ ë°ì´í„°ë¥¼ í™•ì¸í•  ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤. ì´ëŠ” ëŒ€íšŒì— í° ì˜í–¥ì„ ì£¼ê¸° ë•Œë¬¸ì— ì‚¬ìš©ìë§ˆë‹¤ ê²©ë¦¬ê°€ í•„ìš”í•©ë‹ˆë‹¤.(ì„œë¡œ ë…ë¦½ëœ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ê°€ì ¸ì•¼ í•©ë‹ˆë‹¤.) ì´ëŸ° ë¬¸ì œ ìœ í˜•ì€ ìœ„ì—ì„œ ë§í•œ 1:1 ë°©ì‹ì„ ì‚¬ìš©í•˜ê²Œ ë©ë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/hexactf-4/image.png"
width="670"
height="592"
srcset="https://s0okju.github.io/p/hexactf-4/image_hu_67fc72af7361ccf5.png 480w, https://s0okju.github.io/p/hexactf-4/image_hu_89283d698eddbe03.png 1024w"
loading="lazy"
alt="CTF ë¬¸ì œ êµ¬ì„±ë„"
class="gallery-image"
data-flex-grow="113"
data-flex-basis="271px"
>&lt;/p>
&lt;h3 id="ì£¼ëª©í• ë§Œí•œ-íŠ¹ì§•">ì£¼ëª©í• ë§Œí•œ íŠ¹ì§•
&lt;/h3>&lt;p>Live 1:1 ì„œë¹„ìŠ¤ëŠ” ìì› ë‚­ë¹„ë¥¼ ìµœì†Œí™”í•˜ê¸° ìœ„í•´ ë¬¸ì œê°€ ì‹¤í–‰ëœì§€ 30ë¶„ í›„ì— ìë™ìœ¼ë¡œ ì‚­ì œê°€ ë©ë‹ˆë‹¤. ëŒ€ë¶€ë¶„ì˜ CTF ë¬¸ì œ í’€ì´ ì‚¬ì´íŠ¸ëŠ” íŠ¹ì • ë¬¸ì œì— ì œí•œ ì‹œê°„ì„ ë‘ëŠ” ë“± ë§ì´ ì‚¬ìš©í•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤.&lt;/p>
&lt;ul>
&lt;li>Live 1:1 ì„œë¹„ìŠ¤ : ì‹¤í–‰í•œì§€ 30ë¶„ì´ ì§€ë‚˜ë©´ ì‚­ì œë˜ì–´ì•¼ í•œë‹¤.&lt;/li>
&lt;/ul>
&lt;p>CTF ëŒ€íšŒë¥¼ ë§ì´ ê²½í—˜í•´ë³¸ ì¹œêµ¬ì—ê²Œ ì œí•œ ì‹œê°„ì„ ê±¸ì–´ë‘ëŠ” ê²ƒì— ëŒ€í•´ ì˜ê²¬ì„ ë‚˜ëˆˆ ì ì´ ìˆìŠµë‹ˆë‹¤. ì¹œêµ¬ê°€ ë§í•˜ê¸¸ ì¤‘ê°„ì— ì‹œê°„ ë§Œë£Œë¡œ ë¬¸ì œ ì‚¬ì´íŠ¸ê°€ ë‹¤ìš´ë˜ë”ë¼ë„ ì¼ë°˜ì ì¸ í˜„ìƒìœ¼ë¡œ ë°›ì•„ë“¤ì¸ë‹¤ê³  í•©ë‹ˆë‹¤.&lt;/p>
&lt;h2 id="ë¬¸ì œ-ì»¨í…Œì´ë„ˆ-ì´ˆê¸°-êµ¬ì„±-1---docker-ì‚¬ìš©">ë¬¸ì œ ì»¨í…Œì´ë„ˆ ì´ˆê¸° êµ¬ì„± (1) - Docker ì‚¬ìš©
&lt;/h2>&lt;p>Python Docker SDKë¥¼ í™œìš©í•´ì„œ ë„ì»¤ë¥¼ ìƒì„±í•˜ê³  ì‚­ì œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ˆê¸°ì—ëŠ” ê°„ë‹¨í•˜ê²Œ Docker SDKë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ì‹ì„ ì±„íƒí–ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;h3 id="ì»¨í…Œì´ë„ˆì˜-ë¬´í•œ-ì¦ì‹ì„-ë§‰ì•„ë¼">ì»¨í…Œì´ë„ˆì˜ ë¬´í•œ ì¦ì‹ì„ ë§‰ì•„ë¼
&lt;/h3>&lt;p>ë™ì¼í•œ í”„ë¡œì íŠ¸ë¥¼ ìˆ˜í–‰í•œ ë™ì•„ë¦¬ì›ì„ ë§Œë‚˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. í”„ë¡œì íŠ¸ ê´€ë ¨ëœ ì´ì•¼ê¸°ë¥¼ í•˜ë‹¤ê°€ &lt;strong>ì»¨í…Œì´ë„ˆì˜ ë¬´í•œ ì¦ì‹ìœ¼ë¡œ ì¸í•œ ì„œë²„ ê³¼ë¶€í•˜ í˜„ìƒ í•´ê²°ì´ í•„ìš”í•˜ë‹¤ëŠ” ì˜ê²¬ì„ ë°›ì•˜ìŠµë‹ˆë‹¤.&lt;/strong>&lt;/p>
&lt;p>ì œê°€ ì˜ˆìƒí•œ ë¬¸ì œì˜ ì›ì¸ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.&lt;/p>
&lt;ol>
&lt;li>ë¬¸ì œ ìƒì„±ì„ ìš”ì²­í• ë•Œ ë¬¸ì œ ì»¨í…Œì´ë„ˆ ì‹¤í–‰ ìƒíƒœë¥¼ ê²€ì¦í•˜ì§€ ì•Šê±°ë‚˜ ì €ì¥ëœ ìƒíƒœì™€ ì‹¤ì œ ìƒíƒœì— ë¶ˆì¼ì¹˜ê°€ ë°œìƒí–ˆë‹¤.&lt;/li>
&lt;li>ì»¨í…Œì´ë„ˆ ì´ë¦„ì— ì‚¬ìš©ì ì‹ë³„ê°’ + ë‚œìˆ˜ê°€ ì„ì—¬ ìˆë‹¤.&lt;/li>
&lt;/ol>
&lt;p>ë¬¸ì œ ìƒì„±ì„ ìš”ì²­í• ë•Œ ë¬¸ì œ ì»¨í…Œì´ë„ˆ ì‹¤í–‰ ìƒíƒœë¥¼ ê²€ì¦í•˜ì§€ ì•Šì•˜ë‹¤ë©´ ë°ì´í„°ë² ì´ìŠ¤ì— ê°’ì„ ì €ì¥í•˜ë©´ ë©ë‹ˆë‹¤. &lt;strong>ë¬¸ì œëŠ” ì €ì¥ëœ ìƒíƒœì™€ ì‹¤ì œ ìƒíƒœì— ë¶ˆì¼ì¹˜ê°€ ë°œìƒì„ ì–´ë–»ê²Œ í•´ê²°í•  ê²ƒì¸ê°€ ì…ë‹ˆë‹¤.&lt;/strong>&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/hexactf-4/image-1.png"
width="790"
height="742"
srcset="https://s0okju.github.io/p/hexactf-4/image-1_hu_b1127a67be3ee039.png 480w, https://s0okju.github.io/p/hexactf-4/image-1_hu_4e379ba41e41ca26.png 1024w"
loading="lazy"
alt="Docker ì„œë²„ êµ¬ì„±ë„"
class="gallery-image"
data-flex-grow="106"
data-flex-basis="255px"
>&lt;/p>
&lt;h3 id="ìƒíƒœ-ë¶ˆì¼ì¹˜-í•´ê²°ë°©ì•ˆì€-ê°„ë‹¨í•˜ì§€ë§Œ-êµ¬í˜„í•˜ê¸°-ì–´ë µë‹¤">ìƒíƒœ ë¶ˆì¼ì¹˜ í•´ê²°ë°©ì•ˆì€ ê°„ë‹¨í•˜ì§€ë§Œ êµ¬í˜„í•˜ê¸° ì–´ë µë‹¤.
&lt;/h3>&lt;p>ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥ëœ ìƒíƒœì™€ ì‹¤ì œ ìƒíƒœì˜ ë¶ˆì¼ì¹˜ë¥¼ í•´ê²°í•˜ëŠ” ë°©ë²•ì€ &lt;strong>ì£¼ê¸°ì ìœ¼ë¡œ ëŒ€ìƒì„ í™•ì¸&lt;/strong>í•˜ëŠ” ê²ƒì´ë¼ê³  ìƒê°í•©ë‹ˆë‹¤.
ë‹¨ìˆœí•˜ê²Œ í•˜ë‚˜ì˜ ì• í”Œë¦¬ì¼€ì´ì…˜ë§Œ ì£¼ê¸°ì ìœ¼ë¡œ ìƒíƒœë¥¼ í™•ì¸í•˜ëŠ” ê²ƒì€ ë¹„êµì  êµ¬í˜„ì´ ì‰½ìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ì»¨í…Œì´ë„ˆê°€ ì—¬ëŸ¬ê°œì¸ ê²½ìš°ì—ëŠ” ë³‘ë ¬ ì²˜ë¦¬ë¡œ ì¸í•´ êµ¬í˜„ ë‚œì´ë„ê°€ ì˜¬ë¼ê°€ê²Œ ë©ë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/hexactf-4/image-2.png"
width="700"
height="250"
srcset="https://s0okju.github.io/p/hexactf-4/image-2_hu_a7edf729cd76099f.png 480w, https://s0okju.github.io/p/hexactf-4/image-2_hu_a102f2d1a2858878.png 1024w"
loading="lazy"
alt="ì¶œì²˜ - https://kwahome.medium.com/concurrency-is-not-parallelism-a5451d1cde8d"
class="gallery-image"
data-flex-grow="280"
data-flex-basis="672px"
>&lt;/p>
&lt;p>ìƒíƒœ ë¶ˆì¼ì¹˜ë¥¼ í™•ì¸í•´ì•¼ í•˜ëŠ” ëŒ€ìƒì€ Liveì´ë©´ì„œ í•œì‚¬ëŒë‹¹ í•˜ë‚˜ì˜ ì»¨í…Œì´ë„ˆê°€ ë°°í¬ë˜ì–´ì•¼ í•˜ëŠ” 1:1 ì„œë¹„ìŠ¤ì¼ ê²ƒì…ë‹ˆë‹¤. ê·¸ëŸ°ë° ì‹œê°„ ë§Œë£Œë¡œ ì¸í•´ ë¬¸ì œ ì»¨í…Œì´ë„ˆëŠ” ìì£¼ ì‚­ì œë˜ê³  ìƒì„±ë©ë‹ˆë‹¤. 2ê°œì˜ 1:1 ë¬¸ì œë¥¼ ì¶œì œí•œë‹¤ê³  ê°€ì •í–ˆì„ë•Œ 10ëª…ì´ ë¬¸ì œì— ì ‘ì†í•œë‹¤ê³  í•œë‹¤ë©´ ì»¨í…Œì´ë„ˆì˜ ì´í•©ì€ ì ˆëŒ€ ì‘ì€ ìˆ«ìëŠ” ì•„ë‹™ë‹ˆë‹¤.&lt;br>
ì´ëŸ¬í•œ ìƒí™©ì—ì„œ í•œì •ëœ ìì› ë‚´ì— ì¼ë°˜ì ì¸ ë°©ë²•(ìˆœì°¨ì )ìœ¼ë¡œ ì„œë¹„ìŠ¤ë¥¼ ì°¾ê³  ëŒ€ìƒì„ ì§€ì†ì ìœ¼ë¡œ í™•ì¸í•˜ëŠ” ê²ƒì€ ë¹„íš¨ìœ¨ì ì…ë‹ˆë‹¤. ê·¸ëŸ¬ë¯€ë¡œ ë³‘ë ¬ì²˜ë¦¬ ë˜ëŠ” ë™ì‹œì„± ì²˜ë¦¬ë¥¼ í†µí•´ íš¨ìœ¨ì„±ì„ ë†’ì´ëŠ” ì‘ì—…ì´ í•„ìš”í•˜ê²Œ ë©ë‹ˆë‹¤.&lt;/p>
&lt;h3 id="ì»¨í…Œì´ë„ˆ-íŒ¨í‚¤ì§€-ë¬¸ì œ">ì»¨í…Œì´ë„ˆ íŒ¨í‚¤ì§€ ë¬¸ì œ
&lt;/h3>&lt;p>SQL Injection ë¬¸ì œë¥¼ ì¶œì œí•œë‹¤ê³  ê°€ì •í•˜ê² ìŠµë‹ˆë‹¤. nginx, server, db ì»¨í…Œì´ë„ˆ 3ê°œê°€ í•„ìš”í•˜ê²Œ ë©ë‹ˆë‹¤. ê´€ë¦¬í•˜ëŠ” ì‚¬ëŒ ì…ì¥ì—ì„œëŠ” 3ê°œë¥¼ ì¼ê´„ì ìœ¼ë¡œ ê´€ë¦¬í•˜ëŠ” ê²ƒì´ íš¨ìœ¨ì ì…ë‹ˆë‹¤.&lt;br>
ì´ì™€ ê°™ì€ ê¸°ëŠ¥ì„ í•˜ëŠ” ê²ƒì´ docker-composeì…ë‹ˆë‹¤. docker-composeë¥¼ ì‚¬ìš©í•˜ì—¬ ì—¬ëŸ¬ê°œì˜ ì»¨í…Œì´ë„ˆë¥¼ í•˜ë‚˜ì˜ ì„œë¹„ìŠ¤ë¡œ êµ¬ì„±í•´ì„œ ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/hexactf-4/image-3.png"
width="800"
height="262"
srcset="https://s0okju.github.io/p/hexactf-4/image-3_hu_cccb9a68fdafc357.png 480w, https://s0okju.github.io/p/hexactf-4/image-3_hu_9d1be009d35bf0af.png 1024w"
loading="lazy"
alt="ì¶œì²˜ - https://dev.to/arif_hossain/introduction-to-docker-compose-ddh"
class="gallery-image"
data-flex-grow="305"
data-flex-basis="732px"
>&lt;/p>
&lt;p>ê·¸ëŸ¬ë‚˜ ë³„ë„ì˜ íŒŒì´ì¬ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¡œ ì œê³µë˜ì§€ ì•Šê³  subprocessì— ëª…ë ¹ì–´ í˜•íƒœë¡œ êµ¬í˜„í•´ì•¼ í•©ë‹ˆë‹¤. êµ¬í˜„í•˜ë”ë¼ë„ ì˜ ì•ˆë˜ëŠ” ê²½ìš°ê°€ ìˆìŠµë‹ˆë‹¤.&lt;br>
ì‚¬ìš©ìë§ˆë‹¤ ê³ ìœ í•œ ì»¨í…Œì´ë„ˆë¥¼ ê°€ì ¸ì•¼ í•œë‹¤ëŠ” ê²ƒì€ ë‹¤ë¥¸ ë§ë¡œ ê°ê° ê³ ìœ í•œ ì»¨í…Œì´ë„ˆ ì´ë¦„ì„ ê°€ì ¸ì•¼ í•œë‹¤ëŠ” ê²ƒê³¼ ê°™ìŠµë‹ˆë‹¤. ê²°êµ­ ì¼ë°˜ì ì¸ docker-compose ë§Œìœ¼ë¡œëŠ” ë¬¸ì œ ì»¨í…Œì´ë„ˆë¥¼ ë§Œë“œëŠ”ë° í•œê³„ê°€ ìˆìœ¼ë©° ì›í™œí•œ ì²˜ë¦¬ë¥¼ ìœ„í•´ì„œëŠ” ì§ì ‘ êµ¬ì¡°ë¥¼ ì •ì˜í•´ì•¼ í•©ë‹ˆë‹¤.&lt;/p>
&lt;h3 id="ìš”êµ¬ì‚¬í•­">ìš”êµ¬ì‚¬í•­
&lt;/h3>&lt;ol>
&lt;li>ì»¨í…Œì´ë„ˆ ìƒíƒœë¥¼ ì§€ì†ì ìœ¼ë¡œ í™•ì¸&lt;/li>
&lt;li>ë‹¤ì–‘í•œ ì»¨í…Œì´ë„ˆë¥¼ í•˜ë‚˜ì˜ êµ¬ì¡°ë¡œ ì§ì ‘ ì •ì˜í•˜ê³  ê´€ë¦¬&lt;/li>
&lt;/ol>
&lt;p>ìœ„ì˜ ìš”êµ¬ì‚¬í•­ì„ ì¶©ì¡±í•˜ê¸° ìœ„í•´ì„œëŠ” ê¸°ëŠ¥ì„ ì²˜ìŒë¶€í„° êµ¬í˜„í•´ì•¼ í•©ë‹ˆë‹¤.
ì‹œê°„ì´ ë§ì´ ì†Œìš”ë˜ë©° ê¶ê·¹ì ì¸ ëª©í‘œì¸ CTF ëŒ€íšŒ ê°œìµœì™€ ë©€ì–´ì§ˆ ìˆ˜ ìˆë‹¤ê³  ìƒê°í–ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;h2 id="ë‹¤ìŒí™”---kubernetes-ì‚¬ìš©">ë‹¤ìŒí™” - Kubernetes ì‚¬ìš©
&lt;/h2>&lt;p>ì§€ê¸ˆê¹Œì§€ CTF ë¬¸ì œ ì»¨í…Œì´ë„ˆë¥¼ dockerë¡œ ì„¤ê³„í•˜ë©´ì„œ ëŠë‚€ í•œê³„ì ì— ëŒ€í•´ ì„¤ëª…í–ˆìŠµë‹ˆë‹¤.&lt;br>
íŒ€ì›ë“¤ê³¼ ìƒì˜í•´ë³¸ ê²°ê³¼ dockerë§Œìœ¼ë¡œëŠ” ìš°ë¦¬ê°€ ì›í•˜ëŠ” ê¸°ìˆ ì„ êµ¬í˜„í•  ìˆ˜ ì—†ë‹¤ê³  ê²°ë¡ ì„ ì§€ì—ˆìŠµë‹ˆë‹¤. ê·¸ ëŒ€ì‹  ì£¼ê¸°ì ìœ¼ë¡œ ë¦¬ì†ŒìŠ¤ì˜ ìƒíƒœë¥¼ í™•ì¸í•  ìˆ˜ ìˆìœ¼ë©° CRë¥¼ í†µí•´ ì»¤ìŠ¤í…€ìœ¼ë¡œ ë¦¬ì†ŒìŠ¤ë¥¼ ì •ì˜í•  ìˆ˜ ìˆëŠ” ì¿ ë²„ë„¤í‹°ìŠ¤ë¥¼ ì„ íƒí•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.&lt;br>
ë‹¤ìŒ ê¸€ì—ì„œëŠ” ì¿ ë²„ë„¤í‹°ìŠ¤ë¥¼ í†µí•´ ì–´ë–»ê²Œ ì„¤ê³„í–ˆëŠ”ì§€ ì„¤ëª…í•˜ê² ìŠµë‹ˆë‹¤.&lt;/p>
&lt;div class="footnotes" role="doc-endnotes">
&lt;hr>
&lt;ol>
&lt;li id="fn:1">
&lt;p>&lt;a class="link" href="https://www.skshieldus.com/blog-security/security-trend-idx-06" target="_blank" rel="noopener"
>XSS(í¬ë¡œìŠ¤ ì‚¬ì´íŠ¸ ìŠ¤í¬ë¦½íŠ¸)ë€? ê³µê²© ìœ í˜•ë¶€í„° ë³´ì•ˆëŒ€ì±…ê¹Œì§€! | SKì‰´ë”ìŠ¤&lt;/a>&amp;#160;&lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/div></description></item><item><title>HexaCTF - 3. Jenkinsë¥¼ í™œìš©í•œ CI í™˜ê²½ êµ¬ì„±í•˜ê¸°</title><link>https://s0okju.github.io/p/hexactf-3/</link><pubDate>Sun, 05 Jan 2025 00:00:00 +0900</pubDate><guid>https://s0okju.github.io/p/hexactf-3/</guid><description>&lt;h2 id="jenkins-í™˜ê²½-êµ¬ì„±">Jenkins í™˜ê²½ êµ¬ì„±
&lt;/h2>&lt;h3 id="ì–´ë””ì—-ì  í‚¨ìŠ¤ë¥¼-ì„¤ì¹˜í•´ì•¼-í• ê¹Œ">ì–´ë””ì— ì  í‚¨ìŠ¤ë¥¼ ì„¤ì¹˜í•´ì•¼ í• ê¹Œ?
&lt;/h3>&lt;p>ì¿ ë²„ë„¤í‹°ìŠ¤ë¥¼ ì²˜ìŒ ê³µë¶€í–ˆì„ë•Œ â€œì¿ ë²„ë„¤í‹°ìŠ¤ ë‚´ì— ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ìš´ì˜í•˜ëŠ” ê²ƒì´ ê³¼ì—° ì•ˆì „í• ê¹Œ?â€ì— ëŒ€í•´ ì˜ë¬¸ì ì„ ê°€ì§€ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. ë°ì´í„° ì†ì‹¤ì´ ìš°ë ¤ëœë‹¤ëŠ” ê³¼ê±°ì˜ ì˜ê²¬ê³¼ ë‹¬ë¦¬ í˜„ì¬ëŠ” ë‹¤ì–‘í•œ ê¸°ì—…ë“¤ì´ DBaaSë¥¼ ë„ì…í•˜ê³  ìˆì—ˆìŠµë‹ˆë‹¤.&lt;sup id="fnref:1">&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref">1&lt;/a>&lt;/sup>&lt;sup id="fnref:2">&lt;a href="#fn:2" class="footnote-ref" role="doc-noteref">2&lt;/a>&lt;/sup>&lt;br>
ì´ëŸ° íë¦„ìœ¼ë¡œ ì  í‚¨ìŠ¤ ë˜í•œ ì¿ ë²„ë„¤í‹°ìŠ¤ ë‚´ì— ìš´ì˜í• ê¹Œìš”? ë ˆë”§ê³¼ ê°™ì€ ì§€ì‹ ê³µìœ  í”Œë«í¼ì„ ì¢…í•©í•´ë³´ë©´ ì¿ ë²„ë„¤í‹°ìŠ¤ ë‚´ì— ì  í‚¨ìŠ¤ë¥¼ ìš´ì˜í•˜ëŠ”
ê²½ìš°ê°€ ë§ì´ ë³´ì…ë‹ˆë‹¤.&lt;sup id="fnref:3">&lt;a href="#fn:3" class="footnote-ref" role="doc-noteref">3&lt;/a>&lt;/sup>&lt;br>
ê·¸ëŸ¬ë‚˜ ì €í¬ í”„ë¡œì íŠ¸ëŠ” CIë¥¼ ë‹´ë‹¹í•˜ëŠ” íŒ€ì›ì€ ë”°ë¡œ ìˆìŠµë‹ˆë‹¤. ì™„ì „í•œ ì—­í•  ë¶„ë¦¬ë¥¼ ìœ„í•´ ì¸ìŠ¤í„´ìŠ¤ì— ë”°ë¡œ ì  í‚¨ìŠ¤ë¥¼ ì„¤ì¹˜í•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;h3 id="jenkins-ë°°í¬">Jenkins ë°°í¬
&lt;/h3>&lt;p>ì•„ë˜ëŠ” ëŒ€ëµì ì¸ ì•„í‚¤í…ì³ì…ë‹ˆë‹¤. ì—¬ê¸°ì„œ ì¤‘ìš”í•œ ì ì€ Jenkins ì¸ìŠ¤í„´ìŠ¤ì™€ ì¿ ë²„ë„¤í‹°ìŠ¤ ë…¸ë“œì™€ ì—°ê²°ë˜ì–´ì•¼ í•©ë‹ˆë‹¤. ê°ê°ì˜ ì„œë¸Œë„·ì´ ë¼ìš°í„°ë¡œ ì—°ê²°í•˜ì—¬ ì„œë¡œ í†µì‹ í•  ìˆ˜ ìˆë„ë¡ ì„¤ì •í•´ì•¼ í•©ë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/hexactf-3/image.png"
width="1100"
height="287"
srcset="https://s0okju.github.io/p/hexactf-3/image_hu_f06e3dff2c2ab5c8.png 480w, https://s0okju.github.io/p/hexactf-3/image_hu_9381f73eecfd8e3c.png 1024w"
loading="lazy"
alt="ê°„ë‹¨í•œ êµ¬ì„±ë„"
class="gallery-image"
data-flex-grow="383"
data-flex-basis="919px"
>&lt;/p>
&lt;p>Jenkinsë¥¼ ì¸ìŠ¤í„´ìŠ¤ë¡œ ë°°í¬í•˜ê³  ì™¸ë¶€ IP(Floating IP)ë¡œ ì—°ê²°í•˜ëŠ” ë¶€ë¶„ì€ ìƒëµí•˜ê² ìŠµë‹ˆë‹¤.
ì´ì „ ê¸€ì—ì„œ ì–¸ê¸‰í•œ ê²ƒì²˜ëŸ¼ í•˜ë‚˜ì˜ ë¼ìš°í„°ì— ì—¬ëŸ¬ ê°œì˜ í¬íŠ¸ë¥¼ ì—°ê²°í•˜ê³  ì‹¶ë‹¤ë©´ openstack_networking_port_v2 í•¨ìˆ˜ë¥¼ í™œìš©í•´ì•¼ í•œë‹¤ê³  ë§í–ˆìŠµë‹ˆë‹¤. ì´ë„ ë™ì¼í•˜ê²Œ Jenkinsê°€ í¬í•¨ë˜ì–´ ìˆëŠ” ì„œë¸Œë„·ì— í¬íŠ¸ë¥¼ ìƒì„±í•˜ì—¬ ì¿ ë²„ë„¤í‹°ìŠ¤ ë¼ìš°í„°ì— ì—°ê²°í•©ë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-hcl" data-lang="hcl">&lt;span class="line">&lt;span class="cl">&lt;span class="k">resource&lt;/span> &lt;span class="s2">&amp;#34;openstack_networking_port_v2&amp;#34; &amp;#34;devops_kubernetes_router_port&amp;#34;&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;kubernetes-devops-port&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> network_id&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">openstack_networking_network_v2&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">devops_network&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">id&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> admin_state_up&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;true&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">fixed_ip&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> subnet_id&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">openstack_networking_subnet_v2&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">devops_subnet&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">id&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> ip_address&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">var&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">devops_port_address&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">resource&lt;/span> &lt;span class="s2">&amp;#34;openstack_networking_router_interface_v2&amp;#34; &amp;#34;devops_kubernetes_interface&amp;#34;&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> router_id&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">openstack_networking_router_v2&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">kubernetes_router&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">id&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> port_id&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">openstack_networking_port_v2&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">devops_kubernetes_router_port&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">id&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ë°°í¬ë¥¼ ëª¨ë‘ ëë‚´ë©´ ì•„ë˜ì™€ ê°™ì€ í† í´ë¡œì§€ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/hexactf-3/image-1.png"
width="1098"
height="764"
srcset="https://s0okju.github.io/p/hexactf-3/image-1_hu_72cf2be9378ebb5.png 480w, https://s0okju.github.io/p/hexactf-3/image-1_hu_5f6e1d81653f6735.png 1024w"
loading="lazy"
alt="Openstack ë„¤íŠ¸ì›Œí¬ í† í´ë¡œì§€"
class="gallery-image"
data-flex-grow="143"
data-flex-basis="344px"
>&lt;/p>
&lt;h2 id="harbor">Harbor
&lt;/h2>&lt;h3 id="ì¿ ë²„ë„¤í‹°ìŠ¤-í™˜ê²½ì—ì„œ-ci">ì¿ ë²„ë„¤í‹°ìŠ¤ í™˜ê²½ì—ì„œ CI
&lt;/h3>&lt;p>ì¿ ë²„ë„¤í‹°ìŠ¤ í™˜ê²½ì—ì„œ CI ê³¼ì •ì€ ì»¨í…Œì´ë„ˆë¥¼ ë¹Œë“œí•˜ê³  ì´ë¯¸ì§€ë¥¼ ì €ì¥í•˜ëŠ” í”„ë¡œì„¸ìŠ¤ê°€ í¬í•¨ë©ë‹ˆë‹¤. ê·¸ ì¤‘ ì´ë¯¸ì§€ë¥¼ ì €ì¥í•˜ê¸° ìœ„í•´ì„œëŠ” ë„ì»¤ ë ˆì§€ìŠ¤íŠ¸ë¦¬ê°€ í•„ìš”í•©ë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/hexactf-3/image-2.png"
width="720"
height="443"
srcset="https://s0okju.github.io/p/hexactf-3/image-2_hu_307d455d43ccf37d.png 480w, https://s0okju.github.io/p/hexactf-3/image-2_hu_20a9e7be839d274b.png 1024w"
loading="lazy"
alt="ì¶œì²˜ - https://thenewstack.io/ci-cd-with-kubernetes-tools-and-practices/"
class="gallery-image"
data-flex-grow="162"
data-flex-basis="390px"
>&lt;/p>
&lt;h3 id="ë„ì»¤-ë ˆì§€ìŠ¤íŠ¸ë¦¬">ë„ì»¤ ë ˆì§€ìŠ¤íŠ¸ë¦¬
&lt;/h3>&lt;p>ë„ì»¤ ë ˆì§€ìŠ¤íŠ¸ë¦¬ëŠ” ë„ì»¤ ì´ë¯¸ì§€ë¥¼ ê´€ë¦¬í•˜ëŠ” ì €ì¥ì†Œ ì…ë‹ˆë‹¤. ì €ì¥ì†ŒëŠ” í¬ê²Œ publicê³¼ privateì´ ìˆìŠµë‹ˆë‹¤. ë‚´ë¶€ì ìœ¼ë¡œ ì‚¬ìš©í•  ì˜ˆì •ì´ë¯€ë¡œ private ë ˆì§€ìŠ¤íŠ¸ë¦¬ë¥¼ ì„ íƒí•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>í›„ë³´ëŠ” í¬ê²Œ ë‘ ê°€ì§€ì…ë‹ˆë‹¤.&lt;/p>
&lt;ul>
&lt;li>Docker Registry&lt;/li>
&lt;li>Harbor&lt;/li>
&lt;/ul>
&lt;p>ë„ì»¤ ë ˆì§€ìŠ¤íŠ¸ë¦¬ ì„ ì • ê¸°ì¤€ì€ â€œê¹”ë”í•œ UIë¥¼ ê°€ì§€ê³  ìˆëŠ”ê°€?â€ ì…ë‹ˆë‹¤. í›„ë³´ ì¤‘ì—ëŠ” ê¸°ì¤€ì— ë¶€í•©í•œ í”Œë«í¼ì€ Harborì˜€ìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/hexactf-3/image-3.png"
width="1100"
height="313"
srcset="https://s0okju.github.io/p/hexactf-3/image-3_hu_95b24d92b56a31b6.png 480w, https://s0okju.github.io/p/hexactf-3/image-3_hu_805930a03405b52f.png 1024w"
loading="lazy"
alt="ì¶œì²˜ - ê³µì‹ ë¬¸ì„œ"
class="gallery-image"
data-flex-grow="351"
data-flex-basis="843px"
>&lt;/p>
&lt;h3 id="ì„¤ì¹˜">ì„¤ì¹˜
&lt;/h3>&lt;p>ê³µì‹ ë¬¸ì„œë¥¼ ì°¸ê³ í•´ì„œ helm íŒŒì¼ì„ ë‹¤ìš´ë¡œë“œ ë°›ìŠµë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">helm repo add harbor https://helm.goharbor.io
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">helm fetch harbor/harbor --untar
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ê°€ì¥ ë¨¼ì € í•´ì•¼í•˜ëŠ” ê²ƒì€ Volumeì— ëŒ€í•œ ì„¤ì •ì…ë‹ˆë‹¤. HarborëŠ” ë‹¤ì–‘í•œ PVCë¥¼ ìš”ì²­í•©ë‹ˆë‹¤. í”„ë¡œì íŠ¸ëŠ” Dynamic Provisioningì„ ìœ„í•œ NFS í™˜ê²½ì„ êµ¬ì¶•í–ˆìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë¯€ë¡œ values.yaml ì— strageClassë§Œ ê°’ì„ ì…ë ¥í•˜ë©´ ë©ë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">persistentVolumeClaim&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">registry&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># Use the existing PVC which must be created manually before bound,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># and specify the &amp;#34;subPath&amp;#34; if the PVC is shared with other components&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">existingClaim&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># Specify the &amp;#34;storageClass&amp;#34; used to provision the volume. Or the default&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># StorageClass will be used (the default).&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># Set it to &amp;#34;-&amp;#34; to disable dynamic provisioning&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">storageClass&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;nfs-client&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">subPath&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">accessMode&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">ReadWriteOnce&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">size&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">5Gi&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">annotations&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>{}&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">jobservice&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">jobLog&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">existingClaim&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">storageClass&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;nfs-client&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">subPath&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">accessMode&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">ReadWriteOnce&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">size&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">1Gi&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">annotations&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>{}&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>í™˜ê²½ ì„¤ì •ì„ ë‹¤ í•˜ê³  ë°°í¬í•˜ë©´ ì •ìƒì ìœ¼ë¡œ ì‘ë™ë©ë‹ˆë‹¤.&lt;/p>
&lt;h2 id="jenkins--harbor-ì—°ê²°í•˜ê¸°">Jenkins â€” Harbor ì—°ê²°í•˜ê¸°
&lt;/h2>&lt;h3 id="httpë¡œ-ì—°ê²°í•˜ê¸°">HTTPë¡œ ì—°ê²°í•˜ê¸°
&lt;/h3>&lt;p>ì  í‚¨ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ê°€ ì¿ ë²„ë„¤í‹°ìŠ¤ ë‚´ë¶€ì— ìˆëŠ” Harborì— ì´ë¯¸ì§€ë¥¼ ì €ì¥í•´ì•¼ í•©ë‹ˆë‹¤. ì €í¬ í™˜ê²½ì—ì„œëŠ” Harborë¥¼ nodePortë¡œ ì—°ê²°í•˜ì—¬ ë„ì»¤ ë ˆì§€ìŠ¤íŠ¸ë¦¬ì— ì—°ê²°í•  ìˆ˜ ìˆë„ë¡ ì„¤ì •í•˜ê² ìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/hexactf-3/image-4.png"
width="582"
height="282"
srcset="https://s0okju.github.io/p/hexactf-3/image-4_hu_6b69d058954a6de0.png 480w, https://s0okju.github.io/p/hexactf-3/image-4_hu_7198799d8e08f5f2.png 1024w"
loading="lazy"
alt="ì  í‚¨ìŠ¤ - ì¿ ë²„ë„¤í‹°ìŠ¤ ì—°ê²° íë¦„"
class="gallery-image"
data-flex-grow="206"
data-flex-basis="495px"
>&lt;/p>
&lt;p>Harborì™€ ê°™ì€ ë„ì»¤ ë ˆì§€ìŠ¤í‹°ì˜ ê²½ìš° HTTPSë¡œ ì—°ê²°í•˜ëŠ” ê²ƒì„ ê¶Œì¥í•©ë‹ˆë‹¤. í•˜ì§€ë§Œ ì €í¬ëŠ” HTTPë¡œ ì„¤ì •í•˜ê² ìŠµë‹ˆë‹¤.
Harborì˜ ìš°ì„  nodePortë¥¼ 30002ë¡œ ì„¤ì •í•œ í›„ externalURL ì— httpê°€ í¬í•¨ëœ URLë¥¼ ì„¤ì •í•´ì•¼ í•©ë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">externalURL&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">http://10.0.10.156:30002&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ì  í‚¨ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ì—ì„œ &lt;code>/etc/docker/daemon.json&lt;/code> íŒŒì¼ì— HTTPë¥¼ ì ìš©í•  harborì˜ hostë¥¼ ëª…ì‹œí•´ì¤ë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">{&lt;span class="w"> &lt;/span>&lt;span class="nt">&amp;#34;insecure-registries&amp;#34;: &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;http://10.0.10.156:30002&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="w"> &lt;/span>}&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ë„ì»¤ë¥¼ ì¬ì‹œì‘í•˜ë©´ ìœ„ì˜ ì„¤ì •ì´ ì ìš©ë©ë‹ˆë‹¤.&lt;/p>
&lt;h3 id="jenkins-pipeline-ì„¤ì •">Jenkins Pipeline ì„¤ì •
&lt;/h3>&lt;p>Credential ì„¤ì •ë“±ì€ ìƒëµí•˜ê² ìŠµë‹ˆë‹¤.
ë„ì»¤ë¥¼ ë¹Œë“œí•˜ê¸° ìœ„í•´ì„œëŠ” í¬ê²Œ 3ê°€ì§€ ê³¼ì •ì´ í•„ìš”í•©ë‹ˆë‹¤.&lt;/p>
&lt;ol>
&lt;li>ë„ì»¤ ë¹Œë“œ&lt;/li>
&lt;li>ë„ì»¤ ì´ë¯¸ì§€ Tagging&lt;/li>
&lt;li>ë„ì»¤ ì´ë¯¸ì§€ Push&lt;/li>
&lt;/ol>
&lt;p>ì  í‚¨ìŠ¤ëŠ” í”„ë¡œì íŠ¸ ë‹¨ìœ„ë¡œ ì´ë¯¸ì§€ë¥¼ ê´€ë¦¬í•©ë‹ˆë‹¤. ì•„ë˜ì˜ ì½”ë“œëŠ” ubuntu ì´ë¯¸ì§€ë¥¼ ë¹Œë“œí•˜ì—¬ test í”„ë¡œì íŠ¸ì— ì´ë¯¸ì§€ë¥¼ pushí•˜ëŠ” ê²ƒì„ ë³´ì—¬ì¤ë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">pipeline {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> agent any
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> environment {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> DOCKER_REGISTRY = &amp;#34;10.0.10.156:30002&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> IMAGE_NAME = &amp;#34;ubuntu&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> TARGET_REPO = &amp;#34;test/ubuntu&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> stages {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> stage(&amp;#39;Pull Ubuntu Image&amp;#39;) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> steps {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> echo &amp;#34;Pulling the Ubuntu image from Docker Hub...&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> sh &amp;#34;docker pull ${IMAGE_NAME}:latest&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> stage(&amp;#39;Tag Image&amp;#39;) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> steps {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> echo &amp;#34;Tagging the image for Harbor...&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> sh &amp;#34;docker tag ${IMAGE_NAME}:latest ${DOCKER_REGISTRY}/${TARGET_REPO}:latest&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> stage(&amp;#39;Push Image to Harbor&amp;#39;) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> steps {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> echo &amp;#34;Pushing the image to Harbor...&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> withDockerRegistry([credentialsId: &amp;#39;harbor-credentials&amp;#39;, url: &amp;#34;http://${DOCKER_REGISTRY}&amp;#34;]) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> sh &amp;#34;docker push ${DOCKER_REGISTRY}/${TARGET_REPO}:latest&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> post {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> always {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> echo &amp;#34;Cleaning up Docker images...&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> sh &amp;#34;docker rmi ${IMAGE_NAME}:latest || true&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> sh &amp;#34;docker rmi ${DOCKER_REGISTRY}/${TARGET_REPO}:latest || true&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ì´ë¯¸ì§€ë¥¼ pushí•˜ë©´ ì •ìƒì ìœ¼ë¡œ ì‘ë™ë¨ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/hexactf-3/image-5.png"
width="1100"
height="222"
srcset="https://s0okju.github.io/p/hexactf-3/image-5_hu_f0c8cfc782bec904.png 480w, https://s0okju.github.io/p/hexactf-3/image-5_hu_bca97cd70a32e092.png 1024w"
loading="lazy"
alt="ìë™í™” ë¹Œë“œ ê²°ê³¼"
class="gallery-image"
data-flex-grow="495"
data-flex-basis="1189px"
>&lt;/p>
&lt;div class="footnotes" role="doc-endnotes">
&lt;hr>
&lt;ol>
&lt;li id="fn:1">
&lt;p>&lt;a class="link" href="https://sungchul-p.github.io/db-on-k8s-case-study" target="_blank" rel="noopener"
>https://sungchul-p.github.io/db-on-k8s-case-study&lt;/a>&amp;#160;&lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;li id="fn:2">
&lt;p>&lt;a class="link" href="https://engineering.linecorp.com/ko/blog/declarative-cloud-db-service-using-kubernetes" target="_blank" rel="noopener"
>https://engineering.linecorp.com/ko/blog/declarative-cloud-db-service-using-kubernetes&lt;/a>&amp;#160;&lt;a href="#fnref:2" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;li id="fn:3">
&lt;p>&lt;a class="link" href="https://www.reddit.com/r/devops/comments/m3lc3r/jenkins_inside_kubernetes_or_not/" target="_blank" rel="noopener"
>https://www.reddit.com/r/devops/comments/m3lc3r/jenkins_inside_kubernetes_or_not/&lt;/a>&amp;#160;&lt;a href="#fnref:3" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/div></description></item><item><title>HexaCTF - 2. Openstack Terraformì„ í™œìš©í•œ NFS ì„œë²„ ì„¤ì¹˜ ë° í™œìš©</title><link>https://s0okju.github.io/p/hexactf-2/</link><pubDate>Fri, 29 Nov 2024 00:00:00 +0900</pubDate><guid>https://s0okju.github.io/p/hexactf-2/</guid><description>&lt;h2 id="ì „ì²´-ì•„í‚¤í…ì³-êµ¬ì„±ë„">ì „ì²´ ì•„í‚¤í…ì³ êµ¬ì„±ë„
&lt;/h2>&lt;p>ì €í¬ í”„ë¡œì íŠ¸ëŠ” í¬ê²Œ 3ê°œì˜ ì„œë¸Œë„·ì„ ê°€ì§€ê²Œ ë©ë‹ˆë‹¤.&lt;/p>
&lt;ul>
&lt;li>Kubernetes Subnet
&lt;ul>
&lt;li>Kubernetes Master, Worker nodes&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Storage Subnet
&lt;ul>
&lt;li>NFS Server&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>DevOps Subnet
&lt;ul>
&lt;li>Jenkins Server&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://s0okju.github.io/p/hexactf-2/image.png"
width="1064"
height="763"
srcset="https://s0okju.github.io/p/hexactf-2/image_hu_ea2064f9e1730b7c.png 480w, https://s0okju.github.io/p/hexactf-2/image_hu_34ea0a13599035a7.png 1024w"
loading="lazy"
alt="ì „ì²´ ë„¤íŠ¸ì›Œí¬ í† í´ë¡œì§€"
class="gallery-image"
data-flex-grow="139"
data-flex-basis="334px"
>&lt;/p>
&lt;h2 id="nfs-ì•„í‚¤í…ì³-êµ¬ì„±">NFS ì•„í‚¤í…ì³ êµ¬ì„±
&lt;/h2>&lt;h3 id="ì™œ-í•„ìš”í• ê¹Œ">ì™œ í•„ìš”í• ê¹Œ?
&lt;/h3>&lt;h4 id="ìƒíƒœê°’-ì €ì¥">ìƒíƒœê°’ ì €ì¥
&lt;/h4>&lt;p>ì €í¬ í”„ë¡œì íŠ¸ëŠ” ì¿ ë²„ë„¤í‹°ìŠ¤ í™˜ê²½ì—ì„œ ìˆ˜í–‰í•˜ê²Œ ë©ë‹ˆë‹¤. ê·¸ ê³¼ì •ì—ì„œ ë°ì´í„°ë² ì´ìŠ¤ì™€ ê°™ì´ ìƒíƒœë¥¼ ì €ì¥í•´ì•¼ í•˜ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì´ í•„ìš”í•˜ê²Œ ë©ë‹ˆë‹¤. ê´€ë¦¬ìëŠ” PVë¡œ ìŠ¤í† ë¦¬ì§€ë¥¼ ì •ì˜í•˜ê³  ìƒíƒœ ì €ì¥ì´ í•„ìš”í•œ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ PVCë¥¼ í™œìš©í•˜ì—¬ ë°ì´í„°ë¥¼ ì˜êµ¬ì ìœ¼ë¡œ ì €ì¥í•˜ê²Œ ë©ë‹ˆë‹¤.
PVëŠ” ë¡œì»¬ ë””ìŠ¤í¬ì— ì €ì¥í•˜ê±°ë‚˜ NFSì™€ ê°™ì€ í†µì‹ ì´ í•„ìš”í•œ ìŠ¤í† ë¦¬ì§€ ì‹œìŠ¤í…œìœ¼ë¡œ ì •ì˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë¡œì»¬ ë””ìŠ¤í¬ì— ì €ì¥í•œë‹¤ëŠ” ê²ƒì€ Worker nodeì˜ ë””ìŠ¤í¬ì— ì €ì¥í•œë‹¤ëŠ” ë§ê³¼ ê°™ìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë¯€ë¡œ ë°ì´í„° ì €ì¥ì†Œë¥¼ ì™¸ë¶€ì™€ ë¶„ë¦¬í•˜ê³ ì NFSë¥¼ ì‚¬ìš©í•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;h4 id="dynamic-provisioning">Dynamic Provisioning
&lt;/h4>&lt;p>NFSë¥¼ ì„ íƒí•œ í•µì‹¬ì ì¸ ì´ìœ ì…ë‹ˆë‹¤. ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ìŠ¤í† ë¦¬ì§€ ì‚¬ìš©ì„ ìœ„í•´ PVCë¥¼ ìš”ì²­í•˜ê²Œ ë˜ë©´ ìš”êµ¬ì‚¬í•­ì— ë§ëŠ” PVì— ë°”ì¸ë”©í•˜ê²Œ ë©ë‹ˆë‹¤. ëª¨ë“  ì‘ì—…ë§ˆë‹¤ ê·¸ì— ìƒì‘í•˜ëŠ” PV-PVC ìŒì„ ë§Œë“¤ì–´ì•¼ í•œë‹¤ëŠ” ê²ƒê³¼ ê°™ìŠµë‹ˆë‹¤. ë¶ˆí¸í•¨ì„ í•´ì†Œí•˜ê¸° ìœ„í•´ì„œ PVC ìš”ì²­ì— ëŒ€í•œ PVë¥¼ ìƒì„±í•˜ëŠ” ê³¼ì •ì„ ìë™í™”ëŠ” Dynamic Provisioningì„ í™œìš©í•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/hexactf-2/image-1.png"
width="834"
height="509"
srcset="https://s0okju.github.io/p/hexactf-2/image-1_hu_c10d44b34ed51e15.png 480w, https://s0okju.github.io/p/hexactf-2/image-1_hu_59108b20283660b5.png 1024w"
loading="lazy"
alt="ì¶œì²˜ - https://www.unixarena.com/2022/04/kubernetes-storage-dynamic-nfs-client-provisioner.html/"
class="gallery-image"
data-flex-grow="163"
data-flex-basis="393px"
>&lt;/p>
&lt;h3 id="nfs-in-nova-vs-manila">NFS in Nova vs Manila
&lt;/h3>&lt;p>ë°ì´í„°ë² ì´ìŠ¤ë¥¼ êµ¬ì¶•í•˜ëŠ” ë°©ë²•ìœ¼ë¡œ EC2 Instanceì—ì„œ DB ì—”ì§„ì„ ì§ì ‘ ì„¤ì¹˜í•˜ë“¯ì´ NFSë¡œ ì§ì ‘ ì¸ìŠ¤í„´ìŠ¤ì— ì§ì ‘ ì„¤ì¹˜í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì´ ìˆìŠµë‹ˆë‹¤.
Openstackì—ëŠ” NFSë¥¼ ì§ì ‘ ì„¤ì¹˜í•  ìˆ˜ ìˆë„ë¡ &lt;a class="link" href="https://docs.openstack.org/manila/latest/" target="_blank" rel="noopener"
>Manila&lt;/a>ë¼ëŠ” íŒŒì¼ ê³µìœ  ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•´ì¤ë‹ˆë‹¤.&lt;/p>
&lt;p>ê³µì‹ë¬¸ì„œì— ì˜í•˜ë©´ NFSëŠ” ì•„ë˜ì™€ ê°™ì€ ê¸°ëŠ¥ì„ ëª©í‘œë¡œ ì‚¼ìŠµë‹ˆë‹¤.&lt;sup id="fnref:1">&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref">1&lt;/a>&lt;/sup>&lt;/p>
&lt;ul>
&lt;li>Component based architecture: Quickly add new behaviors&lt;/li>
&lt;li>Highly available: Scale to very serious workloads&lt;/li>
&lt;li>Fault-Tolerant: Isolated processes avoid cascading failures&lt;/li>
&lt;li>Recoverable: Failures should be easy to diagnose, debug, and rectify&lt;/li>
&lt;li>Open Standards: Be a reference implementation for a community-driven api&lt;/li>
&lt;/ul>
&lt;p>ê·¸ ì´ì™¸ì—ë„ í†µí•©ì ì¸ ëŒ€ì‹œë³´ë“œ, ëª¨ë‹ˆí„°ë§, ë¡œê¹… ë„êµ¬ë¥¼ í™œìš©í•  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì´ í° ì¥ì ì…ë‹ˆë‹¤.
ê·¸ëŸ¼ì—ë„ Manilaê°€ ì•„ë‹Œ &lt;strong>Novaì— NFSë¥¼ ì„¤ì¹˜í•˜ëŠ” ë°©ì•ˆ&lt;/strong>ì„ ì„ íƒí–ˆìŠµë‹ˆë‹¤.
ì„ íƒí•œ ê°€ì¥ í° ì´ìœ ëŠ” &lt;strong>ì–´ë µë‹¤&lt;/strong>ëŠ” ê²ƒì…ë‹ˆë‹¤. í”„ë¡œì íŠ¸ ì´ì „ì— &lt;a class="link" href="https://medium.com/s0okju-tech/opsathlan-scenario-3-1-hello-mysql-28965a7bc466" target="_blank" rel="noopener"
>ë°ì´í„°ë² ì´ìŠ¤ ì‹œìŠ¤í…œì¸ troveë¥¼ ì„¤ì¹˜í•œ ê²½í—˜ì´ ìˆì—ˆìŠµë‹ˆë‹¤. &lt;/a> ì›ì¸ì„ ì°¾ì•˜ì§€ë§Œ í•´ê²°í•˜ì§€ ëª»í•œ ê²½í—˜ì´ ìˆì—ˆìŠµë‹ˆë‹¤. í´ë¼ìš°ë“œì— ì í•©í•œ ì‹œìŠ¤í…œì´ë¼ ë„¤íŠ¸ì›Œí¬, ì¸ì¦ ë“± ê³ ë ¤ì‚¬í•­ì´ ë§ë‹¤ê³  ëŠê¼ˆìŠµë‹ˆë‹¤. ì†Œê·œëª¨ì— ì‰¬ìš´ ë°©ë²•ìœ¼ë¡œ í•˜ë‚˜ì˜ ì¸ìŠ¤í„´ìŠ¤ì—ì„œ nfs-serverì— ì„¤ì¹˜í•˜ëŠ” ë°©ì‹ì„ ì„ íƒí–ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;h3 id="nfs-ì„¤ì¹˜í•˜ê¸°">NFS ì„¤ì¹˜í•˜ê¸°
&lt;/h3>&lt;p>ì„¤ì¹˜í•˜ê¸° ì´ì „ì— NFS ìš”êµ¬ì‚¬í•­ì— ëŒ€í•´ ìƒê°í•´ë³´ê² ìŠµë‹ˆë‹¤.&lt;/p>
&lt;h4 id="nfs-ë„¤íŠ¸ì›Œí¬-ìš”êµ¬ì‚¬í•­">NFS ë„¤íŠ¸ì›Œí¬ ìš”êµ¬ì‚¬í•­
&lt;/h4>&lt;ul>
&lt;li>ì¿ ë²„ë„¤í‹°ìŠ¤ ì„œë¸Œë„·ê³¼ í†µì‹ í•´ì•¼ í•œë‹¤.&lt;/li>
&lt;li>nfs serverë¥¼ ì„¤ì¹˜í•˜ê¸° ìœ„í•´ ì™¸ë¶€ì™€ í†µì‹ í•´ì•¼ í•œë‹¤.&lt;/li>
&lt;/ul>
&lt;p>ìœ„ì˜ ìš”êµ¬ì‚¬í•­ì— ë§ê²Œ storage subnetì€ public, kubernetes subnetì˜ routerë¡œ ì—°ê²°í–ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/hexactf-2/image-2.png"
width="789"
height="750"
srcset="https://s0okju.github.io/p/hexactf-2/image-2_hu_844b9b0fc6631666.png 480w, https://s0okju.github.io/p/hexactf-2/image-2_hu_98afd115106ed716.png 1024w"
loading="lazy"
alt="ë„¤íŠ¸ì›Œí¬ í† í´ë¡œì§€"
class="gallery-image"
data-flex-grow="105"
data-flex-basis="252px"
>&lt;/p>
&lt;h3 id="terraform-ìœ¼ë¡œ-êµ¬ì„±í•˜ê¸°">Terraform ìœ¼ë¡œ êµ¬ì„±í•˜ê¸°
&lt;/h3>&lt;h4 id="ë„¤íŠ¸ì›Œí¬">ë„¤íŠ¸ì›Œí¬
&lt;/h4>&lt;p>storageë¼ëŠ” prefixë¥¼ ê°€ì§„ networkì™€ subnetë¥¼ ë§Œë“¤ì–´ì¤ë‹ˆë‹¤. ê·¸ë¦¬ê³  ë¼ìš°í„°ë¥¼ ì •ì˜í•˜ì—¬ ì„œë¡œ ë‹¤ë¥¸ ë„¤íŠ¸ì›Œí¬ë¥¼ ì—°ê²°í•©ë‹ˆë‹¤.
Openstackì˜ Neutronì˜ ê²½ìš°ì—ëŠ” í¬ê²Œ ê°€ìƒ ë¼ìš°í„°ì™€ ì„œë¸Œë„·ì˜ ì—°ê²° ê´€ê³„ë¡œ êµ¬ì„±ë©ë‹ˆë‹¤. ì´ëŠ” ì‹¤ì œ ë¬¼ë¦¬ì ì¸ ë„¤íŠ¸ì›Œí¬ í™˜ê²½ì²˜ëŸ¼ ë¼ìš°í„° ì¸í„°í˜ì´ìŠ¤ì— ë„¤íŠ¸ì›Œí¬ ì¼€ì´ë¸”ì„ ê½‚ëŠ” í˜•ì‹ê³¼ ìœ ì‚¬í•©ë‹ˆë‹¤. ê·¸ë˜ì„œ Neutron ë‚´ë¶€ì—ì„œëŠ” ì„œë¸Œë„·ì´ í• ë‹¹ëœ ë„¤íŠ¸ì›Œí¬ì— ë…¼ë¦¬ í¬íŠ¸ë¥¼ ë§Œë“¤ê³  ì´ë¥¼ ë¼ìš°í„°ì— ì—°ê²°í•˜ê²Œ ë©ë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-hcl" data-lang="hcl">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Get the existing public network
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">data&lt;/span> &lt;span class="s2">&amp;#34;openstack_networking_network_v2&amp;#34; &amp;#34;public_network&amp;#34;&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">var&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">public_network_name&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}&lt;span class="c1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Get the existing public router
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">data&lt;/span> &lt;span class="s2">&amp;#34;openstack_networking_router_v2&amp;#34; &amp;#34;public_router&amp;#34;&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">var&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">public_router_name&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}&lt;span class="c1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Create the storage network
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">resource&lt;/span> &lt;span class="s2">&amp;#34;openstack_networking_network_v2&amp;#34; &amp;#34;storage_network&amp;#34;&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">var&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">storage_network_name&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}&lt;span class="c1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Create the storage subnet
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">resource&lt;/span> &lt;span class="s2">&amp;#34;openstack_networking_subnet_v2&amp;#34; &amp;#34;storage_subnet&amp;#34;&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">var&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">storage_subnet_name&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> network_id&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">openstack_networking_network_v2&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">storage_network&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">id&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> cidr&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">var&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">storage_subnet_cidr&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> ip_version&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">4&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> dns_nameservers&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">var&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">dns_nameservers&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}&lt;span class="c1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Connect the storage subnet to the public router
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">resource&lt;/span> &lt;span class="s2">&amp;#34;openstack_networking_router_interface_v2&amp;#34; &amp;#34;storage_router_interface&amp;#34;&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> router_id&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">data&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">openstack_networking_router_v2&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">public_router&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">id&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> subnet_id&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">openstack_networking_subnet_v2&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">storage_subnet&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">id&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ì„œë¸Œë„·ì„ ë¼ìš°í„°ì— ì—°ê²°í•˜ê¸° ìœ„í•´ì„œëŠ” &lt;a class="link" href="https://registry.terraform.io/providers/terraform-provider-openstack/openstack/latest/docs" target="_blank" rel="noopener"
>openstack_networking_router_interface_v2&lt;/a>í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ê²Œ ë©ë‹ˆë‹¤. ì„œë¸Œë„·ì„ ì—°ê²°í•  ë•Œ &lt;code>subnet_id&lt;/code>ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆê³  &lt;code>port_id&lt;/code>ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>subnet_idë¥¼ ì‚¬ìš©í•˜ê²Œ ë˜ë©´ ìë™ìœ¼ë¡œ í•´ë‹¹ CIDRì˜ x.x.x.1 ì˜ ì£¼ì†Œì˜ í¬íŠ¸ë¡œ ì—°ê²°ë©ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ í•˜ë‚˜ì˜ ì„œë¸Œë„·ì´ 2ê°œ ì´ìƒì¼ ê²½ìš° subnet_idë¥¼ ë‘ ë²ˆì´ìƒ ì‚¬ìš©í•˜ê²Œ ëœë‹¤ë©´ ì‚¬ìš©ì¤‘ì¸ port IPë¼ëŠ” ì—ëŸ¬ ë©”ì„¸ì§€ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-hcl" data-lang="hcl">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Subnet_idë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ë²•
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">resource&lt;/span> &lt;span class="s2">&amp;#34;openstack_networking_router_interface_v2&amp;#34; &amp;#34;storage_router_interface&amp;#34;&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> router_id&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">data&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">openstack_networking_router_v2&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">public_router&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">id&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> subnet_id&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">openstack_networking_subnet_v2&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">storage_subnet&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">id&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ê·¸ëŸ´ ê²½ìš° &lt;a class="link" href="https://registry.terraform.io/providers/terraform-provider-openstack/openstack/latest/docs/resources/networking_port_v2" target="_blank" rel="noopener"
>openstack_networking_port_v2&lt;/a> ì—ì„œ ì‚¬ìš©í•  port_ipë¥¼ ì§€ì •í•´ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-hcl" data-lang="hcl">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Portë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ë²•
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">resource&lt;/span> &lt;span class="s2">&amp;#34;openstack_networking_port_v2&amp;#34; &amp;#34;storage_kubernetes_router_port&amp;#34;&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;kubernetes-storage-port&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> network_id&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">openstack_networking_network_v2&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">storage_network&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">id&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> admin_state_up&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;true&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">fixed_ip&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> subnet_id&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">openstack_networking_subnet_v2&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">storage_subnet&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">id&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> ip_address&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;10.0.50.20&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">resource&lt;/span> &lt;span class="s2">&amp;#34;openstack_networking_router_interface_v2&amp;#34; &amp;#34;storage_kubernetes_interface&amp;#34;&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> router_id&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">openstack_networking_router_v2&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">kubernetes_router&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">id&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> port_id&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">openstack_networking_port_v2&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">storage_kubernetes_router_port&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">id&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="ì»´í“¨íŒ…-ìì›">ì»´í“¨íŒ… ìì›
&lt;/h4>&lt;p>NFS ì„œë²„ì™€ ê´€ë ¨ëœ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì œì‘í•´ë³´ê² ìŠµë‹ˆë‹¤.
NFS ì„œë²„ëŠ” 2049, 111 í¬íŠ¸ë¥¼ í™œìš©í•©ë‹ˆë‹¤. NFS ì„œë²„ëŠ” ì¿ ë²„ë„¤í‹°ìŠ¤ ì„œë¸Œë„·ê³¼ ì£¼ë¡œ í†µì‹ í•˜ë¯€ë¡œ Kubernetes subnetì¸ 10.0.10.0/24ì—ì„œ ìš”ì²­í•˜ëŠ” 2049, 111 TCP, UDP ë„¤íŠ¸ì›Œí¬ë¥¼ ëª¨ë‘ í—ˆë½í•´ì¤ë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-hcl" data-lang="hcl">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Create the NFS security group
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">resource&lt;/span> &lt;span class="s2">&amp;#34;openstack_networking_secgroup_v2&amp;#34; &amp;#34;nfs_secgroup&amp;#34;&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;${var.storage_instance_name}-nfs-secgroup&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> description&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;Security group for NFS access&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">resource&lt;/span> &lt;span class="s2">&amp;#34;openstack_networking_secgroup_rule_v2&amp;#34; &amp;#34;nfs_ingress&amp;#34;&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> direction&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;ingress&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> ethertype&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;IPv4&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> protocol&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;tcp&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> port_range_min&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">2049&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> port_range_max&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">2049&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> remote_ip_prefix&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;10.0.10.0/24&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> security_group_id&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">openstack_networking_secgroup_v2&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">nfs_secgroup&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">id&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}&lt;span class="c1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ... secgroup ì¼ë¶€ ìƒëµ
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Create a port in the storage network for the instance
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">resource&lt;/span> &lt;span class="s2">&amp;#34;openstack_networking_port_v2&amp;#34; &amp;#34;storage_port&amp;#34;&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;${var.storage_instance_name}-port&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> network_id&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">openstack_networking_network_v2&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">storage_network&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">id&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> security_group_ids&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="k">openstack_networking_secgroup_v2&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">nfs_secgroup&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">id&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">fixed_ip&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> subnet_id&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">openstack_networking_subnet_v2&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">storage_subnet&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">id&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}&lt;span class="c1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Create a floating IP for the storage instance
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">resource&lt;/span> &lt;span class="s2">&amp;#34;openstack_networking_floatingip_v2&amp;#34; &amp;#34;storage_fip&amp;#34;&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> pool&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">var&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">public_network_name&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}&lt;span class="c1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Associate the floating IP with the storage instance&amp;#39;s port
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">resource&lt;/span> &lt;span class="s2">&amp;#34;openstack_networking_floatingip_associate_v2&amp;#34; &amp;#34;storage_fip_assoc&amp;#34;&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> floating_ip&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">openstack_networking_floatingip_v2&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">storage_fip&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">address&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> port_id&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">openstack_networking_port_v2&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">storage_port&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">id&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ê·¸ë¦¬ê³  50GB ë¸”ë¡ ìŠ¤í† ë¦¬ì§€(Cinder)ë¥¼ NFS ì¸ìŠ¤í„´ìŠ¤ì— ë¶™ì—¬ì„œ ìƒì„±í•©ë‹ˆë‹¤. ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë§Œë“¤ë•Œ ì´ì „ì— ì •ì˜í•œ ë³´ì•ˆ ê·¸ë£¹ë„ ì§€ì •í•´ì¤ë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-hcl" data-lang="hcl">&lt;span class="line">&lt;span class="cl">&lt;span class="k">resource&lt;/span> &lt;span class="s2">&amp;#34;openstack_blockstorage_volume_v3&amp;#34; &amp;#34;nfs-volume&amp;#34;&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;bfs-volume&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> size&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">50&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}&lt;span class="c1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Create the storage instance
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">resource&lt;/span> &lt;span class="s2">&amp;#34;openstack_compute_instance_v2&amp;#34; &amp;#34;storage_instance&amp;#34;&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">var&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">storage_instance_name&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> flavor_name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">var&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">storage_flavor_name&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> image_name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">var&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">storage_image_name&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> key_pair&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">openstack_compute_keypair_v2&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">nfs_keypair&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">name&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> security_groups&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="k">openstack_networking_secgroup_v2&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">nfs_secgroup&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">name&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">network&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> port&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">openstack_networking_port_v2&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">storage_port&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">id&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> metadata&lt;/span> &lt;span class="o">=&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> ssh_user&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;ubuntu&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">resource&lt;/span> &lt;span class="s2">&amp;#34;openstack_compute_volume_attach_v2&amp;#34; &amp;#34;nfs-volume-attached&amp;#34;&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> instance_id&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">openstack_compute_instance_v2&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">storage_instance&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">id&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> volume_id&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">openstack_blockstorage_volume_v3&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">nfs&lt;/span>&lt;span class="err">-&lt;/span>&lt;span class="k">volume&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">id&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>NFSëŠ” Private Network í™˜ê²½ì—ë§Œ ì‚¬ìš©í•©ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ nfs ì„¤ì • ì‹œ ì™¸ë¶€ì™€ì˜ ì ‘ê·¼ì´ í•„ìš”í•˜ë¯€ë¡œ floating ipë¥¼ í• ë‹¹í–ˆìŠµë‹ˆë‹¤.&lt;/p>&lt;/blockquote>
&lt;h2 id="nfs-ì„œë²„-ì„¤ì •">NFS ì„œë²„ ì„¤ì •
&lt;/h2>&lt;h3 id="í™˜ê²½-ì„¤ì •">í™˜ê²½ ì„¤ì •
&lt;/h3>&lt;p>NFS ì„œë²„ëŠ” 50GB ë¸”ë¡ ìŠ¤í† ë¦¬ì§€ì™€ ì—°ê²°ëœ ì¸ìŠ¤í„´ìŠ¤ë¡œ ì´ë¤„ì ¸ ìˆìŠµë‹ˆë‹¤. Horizonì—ì„œ ì¸ìŠ¤í„´ìŠ¤ì˜ ì •ë³´ë¥¼ ë³´ë©´ ë¶€ì°©ëœ ë³¼ë¥¨ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/hexactf-2/image-3.png"
width="483"
height="97"
srcset="https://s0okju.github.io/p/hexactf-2/image-3_hu_f441246ff546ab2e.png 480w, https://s0okju.github.io/p/hexactf-2/image-3_hu_d1495e51d241a717.png 1024w"
loading="lazy"
alt="Horizonì—ì„œ í™•ì¸í•œ Volume"
class="gallery-image"
data-flex-grow="497"
data-flex-basis="1195px"
>&lt;/p>
&lt;p>sshì— ì ‘ì†í•´ë³´ë©´ ë§ˆìš´íŒ…ëœ ë³¼ë¥¨ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/hexactf-2/image-4.png"
width="402"
height="173"
srcset="https://s0okju.github.io/p/hexactf-2/image-4_hu_b3ee19f95f714682.png 480w, https://s0okju.github.io/p/hexactf-2/image-4_hu_1acd0a07b7a1b29d.png 1024w"
loading="lazy"
alt="ë””ìŠ¤í¬ ì •ë³´"
class="gallery-image"
data-flex-grow="232"
data-flex-basis="557px"
>&lt;/p>
&lt;p>ì¶”í›„ ì¿ ë²„ë„¤í‹°ìŠ¤ì—ì„œ ì‚¬ìš©ë  ëª¨ë“  ë°ì´í„°ëŠ” ë³¼ë¥¨ ìŠ¤í† ë¦¬ì§€ì— ì €ì¥í•  ê²ƒì…ë‹ˆë‹¤. ê·¸ëŸ¬ë¯€ë¡œ ë³¼ë¥¨ì„ ext4 í˜•íƒœë¡œ í¬ë§·í•˜ì—¬ &lt;code>/mnt/data&lt;/code> ê²½ë¡œì— ë§ˆìš´íŒ…í•©ë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/hexactf-2/image-5.png"
width="401"
height="239"
srcset="https://s0okju.github.io/p/hexactf-2/image-5_hu_7c6d75a808f784a2.png 480w, https://s0okju.github.io/p/hexactf-2/image-5_hu_7fa07b74adc3aba.png 1024w"
loading="lazy"
alt="Mounting ì´í›„"
class="gallery-image"
data-flex-grow="167"
data-flex-basis="402px"
>&lt;/p>
&lt;p>&lt;code>nfs-server&lt;/code> ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì„¤ì¹˜í•œ í›„ &lt;code>/etc/exports&lt;/code> íŒŒì¼ì„ ìˆ˜ì •í•©ë‹ˆë‹¤. ì¿ ë²„ë„¤í‹°ìŠ¤ ì„œë¸Œë„·ì´ ë¸”ë¡ ìŠ¤í† ë¦¬ì§€ì— ìˆëŠ” &lt;code>/mnt/data&lt;/code> ì— ì½ê³  ì“¸ ìˆ˜ ìˆë„ë¡ ê¶Œí•œì„ ì„¤ì •í•©ë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">/mnt/data 10.0.10.0/24(rw,sync,no_subtree_check)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>ìì„¸í•œ ì‚¬í•­ì€ &lt;a class="link" href="https://dongle94.github.io/ubuntu/ubuntu-nfs-setting/" target="_blank" rel="noopener"
>[Ubuntu] NFS ì„œë²„ ë° í´ë¼ì´ì–¸íŠ¸ êµ¬ì„± - Dongleâ€™s ê°œë°œë…¸íŠ¸&lt;/a> ë¥¼ ì°¸ê³ í•˜ì‹œê¸¸ ë°”ëë‹ˆë‹¤.&lt;/p>&lt;/blockquote>
&lt;h3 id="í…ŒìŠ¤íŠ¸í•˜ê¸°">í…ŒìŠ¤íŠ¸í•˜ê¸°
&lt;/h3>&lt;p>ìš°ì„  ì¿ ë²„ë„¤í‹°ìŠ¤ì—ì„œ NFS ì„œë²„ IPì¸ &lt;code>10.0.50.170&lt;/code>ê°€ ì •ìƒì ìœ¼ë¡œ í†µì‹ í•œì§€ í™•ì¸í•©ë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/hexactf-2/image-6.png"
width="486"
height="205"
srcset="https://s0okju.github.io/p/hexactf-2/image-6_hu_d155203b5275d652.png 480w, https://s0okju.github.io/p/hexactf-2/image-6_hu_d2b0cae3c8e5c27b.png 1024w"
loading="lazy"
alt="Ping Test"
class="gallery-image"
data-flex-grow="237"
data-flex-basis="568px"
>&lt;/p>
&lt;p>NFS ì„œë²„ì— Hello World ë¬¸ìì—´ì´ ìˆëŠ” &lt;code>test.txt&lt;/code> íŒŒì¼ì„ ì •ì˜í•©ë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/hexactf-2/image-7.png"
width="471"
height="160"
srcset="https://s0okju.github.io/p/hexactf-2/image-7_hu_86508c0a3216c6dd.png 480w, https://s0okju.github.io/p/hexactf-2/image-7_hu_201d04b770c861d6.png 1024w"
loading="lazy"
alt="nfs serverì—ì„œ ì„ì‹œ íŒŒì¼ ìƒì„±"
class="gallery-image"
data-flex-grow="294"
data-flex-basis="706px"
>&lt;/p>
&lt;p>ë§ˆìš´íŒ…ì—ì„œ í™•ì¸í•´ë³´ë©´ ë°ì´í„°ê°€ ì •ìƒì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">sudo mount 10.0.50.170:/mnt/server /mnt
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://s0okju.github.io/p/hexactf-2/image-8.png"
width="430"
height="141"
srcset="https://s0okju.github.io/p/hexactf-2/image-8_hu_e745c2b685e4b796.png 480w, https://s0okju.github.io/p/hexactf-2/image-8_hu_390a7c36ead38d0.png 1024w"
loading="lazy"
alt="ì¿ ë²„ë„¤í‹°ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ì—ì„œ NFS ë§ˆìš´íŒ…"
class="gallery-image"
data-flex-grow="304"
data-flex-basis="731px"
>&lt;/p>
&lt;h2 id="í™œìš©í•˜ê¸°---harbor-in-kubernetes">í™œìš©í•˜ê¸° - Harbor in Kubernetes
&lt;/h2>&lt;p>Harborë¥¼ ì„¤ì •í•˜ê¸° ì´ì „ì— Dynamic provisionerë¥¼ ì„¤ì¹˜í•©ë‹ˆë‹¤. &lt;a class="link" href="https://github.com/kubernetes-sigs/nfs-subdir-external-provisioner#with-helm" target="_blank" rel="noopener"
>nfs-subdir-external-provisioner&lt;/a> ë¥¼ ì‚¬ìš©í–ˆìœ¼ë©° helmì„ í†µí•´ ì‰½ê²Œ ì„¤ì¹˜í–ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">helm install nfs-subdir-external-provisioner nfs-subdir-external-provisioner/nfs-subdir-external-provisioner &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --set nfs.server&lt;span class="o">=&lt;/span>10.0.50.170 &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --set nfs.path&lt;span class="o">=&lt;/span>/mnt/data
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>&lt;a class="link" href="https://jeongchul.tistory.com/728" target="_blank" rel="noopener"
>Harbor Kubernetes Helm ì„¤ì¹˜ â€” Jeongchul Kim&lt;/a> ë¸”ë¡œê·¸ë¥¼ ì°¸ê³ í•˜ì—¬ harborë¥¼ ì„¤ì¹˜í–ˆìŠµë‹ˆë‹¤.&lt;/p>&lt;/blockquote>
&lt;p>values.ymì˜ &lt;code>persistence&lt;/code> ì—ì„œ nfs-subdir-external-provisionerì—ì„œ ìƒì„±í•œ storageClassë¥¼ ì •ì˜í•©ë‹ˆë‹¤. ê·¸ë¦¬ê³  ì‹¤í–‰ë˜ë©´ ì •ìƒì ìœ¼ë¡œ ì‘ë™ë©ë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/hexactf-2/image-9.png"
width="891"
height="124"
srcset="https://s0okju.github.io/p/hexactf-2/image-9_hu_237f146736854c37.png 480w, https://s0okju.github.io/p/hexactf-2/image-9_hu_f48fab1511c52eed.png 1024w"
loading="lazy"
alt="Harbor PVC ëª©ë¡"
class="gallery-image"
data-flex-grow="718"
data-flex-basis="1724px"
>&lt;/p>
&lt;p>ë§Œì•½ì— ì„¤ì¹˜í•˜ë‹¤ê°€ ì•„ë˜ì™€ ê°™ì´ helper programì´ í•„ìš”í•˜ë‹¤ëŠ” ì—ëŸ¬ ë©”ì„¸ì§€ë¥¼ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">Output&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">mount&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">lib&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">kubelet&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">pods&lt;/span>&lt;span class="o">/.../&lt;/span>&lt;span class="n">volumes&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">kubernetes&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span>&lt;span class="o">~&lt;/span>&lt;span class="n">nfs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nfs&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">pv&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">test&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">bad&lt;/span> &lt;span class="n">option&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">several&lt;/span> &lt;span class="n">filesystems&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">g&lt;/span>&lt;span class="o">.&lt;/span> &lt;span class="n">nfs&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">cifs&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">you&lt;/span> &lt;span class="n">might&lt;/span> &lt;span class="n">need&lt;/span> &lt;span class="n">a&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">sbin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">mount&lt;/span>&lt;span class="o">.&amp;lt;&lt;/span>&lt;span class="n">type&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">helper&lt;/span> &lt;span class="n">program&lt;/span>&lt;span class="o">.&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ì‹¤ì œë¡œ ì¿ ë²„ë„¤í‹°ìŠ¤ì—ì„œ Mountingì„ í• ë•Œ &lt;code>mount&lt;/code> ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. ì´ëŠ” &lt;code>nfs-common&lt;/code> íŒ¨í‚¤ì§€ì— ìˆëŠ” ëª…ë ¹ì–´ë¡œ ë…¸ë“œì— &lt;code>nfs-common&lt;/code> ë¥¼ ì§ì ‘ ì„¤ì¹˜í•´ì•¼ í•©ë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/hexactf-2/image-10.png"
width="1774"
height="218"
srcset="https://s0okju.github.io/p/hexactf-2/image-10_hu_147b9e208e0766d3.png 480w, https://s0okju.github.io/p/hexactf-2/image-10_hu_2b2ba354d49931ce.png 1024w"
loading="lazy"
alt="Mounting Error"
class="gallery-image"
data-flex-grow="813"
data-flex-basis="1953px"
>&lt;/p>
&lt;h2 id="ë§ˆì¹˜ë©°">ë§ˆì¹˜ë©°
&lt;/h2>&lt;p>ì§€ê¸ˆê¹Œì§€ NFSë¥¼ êµ¬ì¶•í•˜ê¸° ìœ„í•´ Terraformìœ¼ë¡œ ì¸í”„ë¼ í™˜ê²½ì„ ì„¤ì •í•˜ê³  ì¸ìŠ¤í„´ìŠ¤ì— nfs ì„œë²„ë¥¼ ì„¤ì •í–ˆìŠµë‹ˆë‹¤. ë‹¤ìŒì—ëŠ” Jenkins ì¸í”„ë¼ í™˜ê²½ì„ êµ¬ì„±í•˜ê³  ì–´ë–»ê²Œ Harbor Registryì— ë¹Œë“œí•œ ë„ì»¤ ì´ë¯¸ì§€ë¥¼ Pushí•˜ëŠ”ì§€ ì‘ì„±í•˜ê² ìŠµë‹ˆë‹¤.&lt;/p>
&lt;div class="footnotes" role="doc-endnotes">
&lt;hr>
&lt;ol>
&lt;li id="fn:1">
&lt;p>&lt;a class="link" href="https://docs.openstack.org/manila/latest/" target="_blank" rel="noopener"
>OpenStack Shared Filesystems (manila) documentation â€” manila 19.1.0.dev52 documentation&lt;/a>&amp;#160;&lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/div></description></item><item><title>HexaCTF - 1. ì¸í”„ë¼ í”Œë«í¼ ì„ ì •ê³¼ ì„œë²„ ì´ì „ ì‹œ ë§ˆì£¼í•œ ë¬¸ì œ</title><link>https://s0okju.github.io/p/hexactf-1/</link><pubDate>Mon, 25 Nov 2024 00:00:00 +0900</pubDate><guid>https://s0okju.github.io/p/hexactf-1/</guid><description>&lt;h2 id="ctf-í”„ë¡œì íŠ¸">CTF í”„ë¡œì íŠ¸
&lt;/h2>&lt;p>CTFë€ í•´í‚¹ ëŒ€íšŒë¡œ ì°¸ê°€ìê°€ ì˜ë„ì ìœ¼ë¡œ ì·¨ì•½í•œ í”„ë¡œê·¸ë¨ì´ë‚˜ ì›¹ì‚¬ì´íŠ¸ì— ìˆ¨ê²¨ì§„ í”Œë˜ê·¸ë¥¼ ì°¾ëŠ” ê²Œì„&lt;sup id="fnref:1">&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref">1&lt;/a>&lt;/sup>ì…ë‹ˆë‹¤. ëŒ€í‘œì ì¸ CTF ì‚¬ì´íŠ¸ë¡œëŠ” &lt;a class="link" href="https://dreamhack.io/" target="_blank" rel="noopener"
>ë“œë¦¼í•µ&lt;/a>ì´ ìˆìŠµë‹ˆë‹¤.
í˜„ì¬ í•´í‚¹ ë™ì•„ë¦¬ ì†Œì†ìœ¼ë¡œ ì£¼ë³€ì— CTFì— í™œë°œí•˜ê²Œ ì°¸ê°€í•˜ëŠ” ì¹œêµ¬ë“¤ì´ ë§ì´ ìˆìŠµë‹ˆë‹¤. ì € ë˜í•œ CTFëŠ” ì•„ë‹ˆì§€ë§Œ ë¬¸ì œ ì œì‘ì— ê´€ì‹¬ì´ ë§ìŠµë‹ˆë‹¤. í•´í‚¹ì´ë¼ëŠ” ê´€ì‹¬ì‚¬ë¥¼ ê°€ì§„ ì¸ì›ì´ ëª¨ì—¬ CTFì— ëŒ€í•œ ì•„ì´ë””ì–´ë¥¼ ë‚˜ëˆ„ê²Œ ë˜ì—ˆê³ , ì´í›„ ì§ì ‘ ì‚¬ì´íŠ¸ë¥¼ êµ¬ì¶•í•˜ê³  ëŒ€íšŒë¥¼ ê°œìµœí•˜ê¸°ë¡œ ê²°ì •í–ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;h2 id="ctf-ì œì‘-í•„ìˆ˜-ìš”ì†Œ---ì»¨í…Œì´ë„ˆ">CTF ì œì‘ í•„ìˆ˜ ìš”ì†Œ - ì»¨í…Œì´ë„ˆ
&lt;/h2>&lt;p>CTF ë¬¸ì œ ì¤‘ì—ëŠ” í˜¸ìŠ¤íŒ…ëœ ì·¨ì•½í•œ ì›¹ì‚¬ì´íŠ¸ê°€ í•„ìš”í•  ìˆ˜ ìˆê³ , ì·¨ì•½í•œ ìš´ì˜ì²´ì œ í™˜ê²½ì´ í•„ìš”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê°ê° í•˜ë‚˜ì˜ í™˜ê²½ì„ êµ¬ì„±í•´ì„œ ì‚¬ìš©ìì—ê²Œ ë°°í¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŸ´ê²½ìš° ë‹¤ë¥¸ ì‚¬ìš©ìì˜ ë¬¸ì œ í’€ì´ë¥¼ ì•Œ ìˆ˜ ìˆê³  ë‹¤ë¥¸ ì‚¬ìš©ìê°€ ë°œë¹ ë¥´ê²Œ ë¬¸ì œë¥¼ í•´ê²°í•˜ë©´ ë‹¤ë¥¸ ì‚¬ìš©ìëŠ” ë¬¸ì œë¥¼ í’€ ìˆ˜ ì—†ê²Œ ë©ë‹ˆë‹¤. ê·¸ë ‡ë‹¤ë©´ í•´í‚¹ ëŒ€íšŒì˜ ì˜ë¯¸ê°€ ì—†ì–´ì§ˆ ê²ƒì…ë‹ˆë‹¤. ë¬¸ì œ í™˜ê²½ì˜ ë¶„ë¦¬ê°€ í•„ìš”í•˜ë‹¤ê³  íŒë‹¨í–ˆê³  ê²½ëŸ‰í™”ëœ ì‹¤í–‰ í™˜ê²½ì¸ ì»¨í…Œì´ë„ˆë¥¼ ì‚¬ìš©í•˜ê¸°ë¡œ ê²°ì •í–ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;h2 id="ì¿ ë²„ë„¤í‹°ìŠ¤">ì¿ ë²„ë„¤í‹°ìŠ¤
&lt;/h2>&lt;p>ì¿ ë²„ë„¤í‹°ìŠ¤ëŠ” ëŸ¬ë‹ ì»¤ë¸Œê°€ ìˆëŠ” í”Œë«í¼ì…ë‹ˆë‹¤. ì € ë˜í•œ ì¿ ë²„ë„¤í‹°ìŠ¤ì˜ ê¸°ë³¸ ê°œë…ë§Œ ì•Œì§€ ì˜¨ì „íˆ ì‚¬ìš©í•´ë³¸ ê²½í—˜ì€ ì—†ì—ˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ &lt;strong>ì»¨í…Œì´ë„ˆë¥¼ ê´€ë¦¬í•œë‹¤ëŠ” ì¸¡ë©´ì—ì„œ ì¿ ë²„ë„¤í‹°ìŠ¤ë§Œí¼ ì¢‹ì€ í”Œë«í¼ì´ ì—†ì–´ì„œ ì„ íƒí•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.&lt;/strong>&lt;/p>
&lt;p>Python Docker SDKì—ì„œ ì„œë¹„ìŠ¤ë¥¼ ê°œë°œí•˜ê³  ìˆì„ë•Œ ì œê°€ ê³ ë¯¼í–ˆë˜ ê²ƒì´ ìˆì—ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;ol>
&lt;li>30ë¶„ í›„ì—ëŠ” ì»¨í…Œì´ë„ˆë¥¼ ì¤‘ë‹¨ì‹œì¼œì•¼ í•˜ëŠ”ë° ì–´ë–»ê²Œ í•´ì•¼í•˜ì§€?&lt;/li>
&lt;li>2ê°œ ì´ìƒì˜ ì»¨í…Œì´ë„ˆê°€ í•„ìš”í•œ ê²½ìš°ì—ëŠ” ì–´ë–»ê²Œ ë…¼ë¦¬ì ìœ¼ë¡œ ë¶„ë¦¬í•´ì„œ ê´€ë¦¬í•˜ê³  ëª¨ë‹ˆí„°ë§í•˜ì§€?&lt;/li>
&lt;li>Health Check ì–´ë–»ê²Œ í•˜ì§€?&lt;/li>
&lt;/ol>
&lt;p>ëª¨ë“  ê³ ë¯¼ì˜ í•´ê²°ë°©ì•ˆì€ &lt;strong>ì§ì ‘ êµ¬í˜„&lt;/strong>í•´ì•¼ í•œë‹¤ëŠ” ê²ƒì´ì—ˆìŠµë‹ˆë‹¤. ì§ì ‘ êµ¬í˜„í•˜ëŠ” ê²ƒë³´ë‹¤ëŠ” ì¦ëª…ëœ í”Œë«í¼ì„ í™œìš©í•˜ëŠ” ê²ƒì´ ì ì ˆí•˜ë‹¤ê³  íŒë‹¨í–ˆê³  ì¿ ë²„ë„¤í‹°ìŠ¤ë¥¼ ì„ íƒí•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;h2 id="ìš´ì˜-í”Œë«í¼-ì„ ì •---openstack">ìš´ì˜ í”Œë«í¼ ì„ ì • - Openstack
&lt;/h2>&lt;p>&lt;a class="link" href="https://www.redhat.com/ko/resources/openstack-platform-datasheet" target="_blank" rel="noopener"
>OpenStackì´ë€&lt;/a>ì´ë€ í’€ë§ëœ ê°€ìƒ ë¦¬ì†ŒìŠ¤ë¥¼ ì‚¬ìš©í•˜ì—¬Â &lt;a class="link" href="https://www.redhat.com/ko/topics/cloud-computing/what-is-private-cloud" target="_blank" rel="noopener"
>í”„ë¼ì´ë¹—&lt;/a>Â ë°Â &lt;a class="link" href="https://www.redhat.com/ko/topics/cloud-computing/what-is-public-cloud" target="_blank" rel="noopener"
>í¼ë¸”ë¦­&lt;/a>Â í´ë¼ìš°ë“œë¥¼ êµ¬ì¶•í•˜ê³  ê´€ë¦¬í•˜ëŠ” ì˜¤í”ˆì†ŒìŠ¤ í”Œë«í¼ë¥¼ ëœ»í•©ë‹ˆë‹¤.&lt;sup id="fnref:2">&lt;a href="#fn:2" class="footnote-ref" role="doc-noteref">2&lt;/a>&lt;/sup>
ì´ë²ˆ í”„ë¡œì íŠ¸ì—ì„œ ì¸í”„ë¼ ë‹´ë‹¹ì„ ë§¡ê²Œ ë˜ë©´ì„œ í™ˆì„œë²„ë¥¼ ê°€ì§€ê³  CTFë¥¼ ìš´ì˜í•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.
ì €ëŠ” í™ˆì„œë²„ì— Openstackë¥¼ êµ¬ì¶•í•˜ê³  í™œìš©í•œ ê²½í—˜ì´ ìˆìŠµë‹ˆë‹¤. Openstackë¥¼ ì‚¬ìš©í•˜ë©´ì„œ ê°€ì¥ í¸ë¦¬í–ˆë˜ ë¶€ë¶„ì€ &lt;strong>IaCë¥¼ í†µí•´ ì¸í”„ë¼ë¥¼ ì‰½ê²Œ ê´€ë¦¬í•  ìˆ˜ ìˆë‹¤ëŠ” ì &lt;/strong>ì´ì—ˆìŠµë‹ˆë‹¤. ë˜í•œ ë‹¤ì–‘í•œ ìŠ¤í† ë¦¬ì§€ ì¢…ë¥˜ê°€ ìˆìœ¼ë©° ì—­í• ì— ë”°ë¼ í™œìš©í•  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒë„ í° ë§¤ë ¥ì´ì—ˆìŠµë‹ˆë‹¤.
ìš´ì˜ ë‚œì´ë„ëŠ” ë†’ì§€ë§Œ í´ë¼ìš°ë“œë§Œì´ ê°€ì§ˆ ìˆ˜ ìˆëŠ” ì¥ì ì„ í™œìš©í•˜ê³  ì‹¶ì–´ Openstackì„ ì„ íƒí•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;h2 id="ì„œë²„-êµ¬ì¶•---ì œí•œëœ-í™˜ê²½ì—ì„œ-ëŠë‚€-ê²ƒ">ì„œë²„ êµ¬ì¶• - ì œí•œëœ í™˜ê²½ì—ì„œ ëŠë‚€ ê²ƒ
&lt;/h2>&lt;p>ì§‘ì— ìˆëŠ” í™ˆì„œë²„ë¥¼ ë‹¤ë¥¸ ì¥ì†Œë¡œ ì´ì „í•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. ì´í›„ Openstack ì„œë²„ë¥¼ í˜„ì¬ í™˜ê²½ì— ë§ê²Œ ì„¤ì •í•´ì•¼ í–ˆìŠµë‹ˆë‹¤. ì‘ì—…ì—ëŠ” ë„¤íŠ¸ì›Œí¬ ì„¤ì •ì´ í° ë¹„ì¤‘ì„ ì°¨ì§€í–ˆìŠµë‹ˆë‹¤. ì„¤ì • ê³¼ì •ì—ì„œ ëŠë‚€ì ì„ ì ì–´ë³´ê³ ì í•©ë‹ˆë‹¤.&lt;/p>
&lt;h3 id="nat-gateway-ì˜-í•„ìš”ì„±">NAT Gateway ì˜ í•„ìš”ì„±
&lt;/h3>&lt;p>Public Cloudì—ì„œ Private Subnet ë‚´ì— ìˆëŠ” ì¸ìŠ¤í„´ìŠ¤ê°€ ì¸í„°ë„·ê³¼ ì ‘ì†í•˜ê¸° ìœ„í•´ì„œëŠ” NAT Gatewayê°€ í•„ìš”í•©ë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/hexactf-1/image.png"
width="581"
height="510"
srcset="https://s0okju.github.io/p/hexactf-1/image_hu_5f5e5bd567aa439.png 480w, https://s0okju.github.io/p/hexactf-1/image_hu_b68bf485a9687392.png 1024w"
loading="lazy"
alt="ì¶œì²˜ - https://docs.aws.amazon.com/ko_kr/vpc/latest/userguide/nat-gateway-scenarios.html"
class="gallery-image"
data-flex-grow="113"
data-flex-basis="273px"
>&lt;/p>
&lt;p>ìœ„ì˜ ìƒí™©ê³¼ ìœ ì‚¬í•˜ê²Œ ì„œë²„ì˜ ì‚¬ì„¤ ë„¤íŠ¸ì›Œí¬ ëŒ€ì—­ì— ì ‘ê·¼í•´ì•¼ í•  ì¼ì´ ìˆì—ˆìŠµë‹ˆë‹¤. ì˜ˆë¡œ 172.19.0.2ì— ì ‘ê·¼í•˜ê³  ì‹¶ì€ë° ê°™ì€ ë„¤íŠ¸ì›Œí¬ ëŒ€ì—­ì— ìˆì§€ ì•Šìœ¼ë¯€ë¡œ ì ‘ê·¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ &lt;code>enp2s0&lt;/code> ë„¤íŠ¸ì›Œí¬ ì¸í„°í˜ì´ìŠ¤ë¥¼ NATë¡œ ì‚¬ìš©í•˜ë©´ 172.19.0.2ì— ì ‘ê·¼í•  ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/hexactf-1/image-1.png"
width="969"
height="755"
srcset="https://s0okju.github.io/p/hexactf-1/image-1_hu_fed93365860df3c7.png 480w, https://s0okju.github.io/p/hexactf-1/image-1_hu_205f793a9ba41934.png 1024w"
loading="lazy"
alt="êµ¬ì„±ë„"
class="gallery-image"
data-flex-grow="128"
data-flex-basis="308px"
>&lt;/p>
&lt;p>ì„œë²„ì— enp2s0ê°€ NATì´ë©° ì‚¬ì„¤ ë„¤íŠ¸ì›Œí¬ì¸ enp2s0.191ì— íŠ¸ë˜í”½ì„ í—ˆìš©í•´ì£¼ëŠ” ë°©í™”ë²½ ê·œì¹™ì„ ì¶”ê°€í•©ë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># enp2s0 ì¸í„°í˜ì´ìŠ¤ë¥¼ í†µí•´ ë‚˜ê°€ëŠ” ëª¨ë“  íŠ¸ë˜í”½ì˜ ì†ŒìŠ¤ì— NAT ìˆ˜í–‰ &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo iptables -t nat -A POSTROUTING -o enp2s0 -j MASQUERADE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># enp2s0ì— ë“¤ì–´ì™€ br-exë¡œ ë‚˜ê°€ëŠ” ICMP íŠ¸ë˜í”½ì„ í—ˆìš©í•œë‹¤.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo iptables -A FORWARD -i enp2s0 -o enp2s0.191 -p icmp -j ACCEPT
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># br-exë¡œ ë“¤ì–´ì™€ì„œ enp2s0ë¡œ ë‚˜ê°€ëŠ” ICMP íŠ¸ë˜í”½ì„ í—ˆìš©í•œë‹¤.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo iptables -A FORWARD -i enp2s0.191 -o enp2s0 -p icmp -j ACCEPT
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Private Subnet ë‚´ì— ìˆëŠ” ë¦¬ì†ŒìŠ¤ê°€ ì™¸ë¶€ ì¸í„°ë„·ê³¼ í†µì‹ í•  ìˆ˜ ìˆë„ë¡ NAT Gatewayê°€ í•„ìš”í•©ë‹ˆë‹¤.
ì´ëŠ” ì˜¨í”„ë¡œë¯¸ìŠ¤ í™˜ê²½ì—ì„œë„ í•´ë‹¹ë©ë‹ˆë‹¤. ì˜¨í”„ë¡œë¯¸ìŠ¤ í™˜ê²½ì—ì„œ ì‚¬ì„¤ ë„¤íŠ¸ì›Œí¬ì— ì ‘ê·¼í•˜ê¸° ìœ„í•´ì„œëŠ” NAT ê¸°ëŠ¥ì´ í•„ìš”í•˜ë©° ì´ëŠ” &lt;strong>ê³µìš©(Public) ë„¤íŠ¸ì›Œí¬ ì¸í„°í˜ì´ìŠ¤ë¡œ êµ¬ì„±&lt;/strong>ë˜ì–´ ìˆì–´ì•¼ í•©ë‹ˆë‹¤. ê·¸ë˜ì•¼ ì™¸ë¶€ì™€ ì—°ê²°í•˜ì—¬ í†µì‹ í•  ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤.
Public Cloudì—ì„œ NAT Gatewayë¥¼ Public Subnetì— ë°°ì¹˜í•˜ëŠ” ì´ìœ ë„ ì˜¨í”„ë¡œë¯¸ìŠ¤ì™€ ë™ì¼í•  ê²ƒì…ë‹ˆë‹¤.&lt;/p>
&lt;p>í˜„ì¬ í”„ë¡œì íŠ¸ì—ì„œëŠ” NATë¥¼ í™œìš©í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. vlanì„ ì™¸ë¶€ ë„¤íŠ¸ì›Œí¬ ì¸í„°í˜ì´ìŠ¤ë¡œ í™œìš©í•˜ê³  ì‹¶ì—ˆìœ¼ë‚˜ ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ê²°êµ­ enp2s0ë¥¼ Public IP í• ë‹¹ì— ì‚¬ìš©ë˜ëŠ” ì™¸ë¶€ ë„¤íŠ¸ì›Œí¬ ì¸í„°í˜ì´ìŠ¤(&lt;strong>br-ex&lt;/strong>)ë¡œ ì‚¬ìš©í•  ê²ƒì…ë‹ˆë‹¤.&lt;/p>
&lt;h3 id="ip-ë¶€ì¡±">IP ë¶€ì¡±
&lt;/h3>&lt;p>&lt;strong>ìƒˆë¡œìš´ ì¥ì†Œì—ì„œ ê°€ì¥ í° ê³ ë¯¼ê±°ë¦¬ëŠ” IP Pool ì„¤ì •&lt;/strong>ì´ì—ˆìŠµë‹ˆë‹¤. Openstackì€ Floating IP Pool ë‚´ì—ì„œ ì™¸ë¶€ì— ë…¸ì¶œí•  IPë¥¼ í• ë‹¹ë°›ê²Œ ë©ë‹ˆë‹¤. ì‹¤ì œ ìš´ì˜ì„ ìœ„í•œ IP, ê°œë°œì„ ìœ„í•œ IP ë“± ìƒê°ë³´ë‹¤ IPë¥¼ í• ë‹¹ë°›ì•„ì•¼ í•˜ëŠ” ê²½ìš°ê°€ ë§ìŠµë‹ˆë‹¤.
í˜„ì¬ í™˜ê²½ì—ì„œëŠ” ë‹¤ì–‘í•œ ì„œë²„ì˜ IPê°€ ë¶ˆê·œì¹™ì ìœ¼ë¡œ í• ë‹¹ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ë˜í•œ ë§ì€ ì‚¬ëŒì´ ì¸í„°ë„·ì„ í™œìš©í•˜ëŠ” ê³µê°„ì´ê¸°ì— ë¬´ë¶„ë³„í•˜ê²Œ IPë¥¼ í• ë‹¹í•  ìˆ˜ ì—†ì—ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>ê¼­ í•„ìš”í•œ IP ê°œìˆ˜ì—ì„œ ì¼ì‹œì ìœ¼ë¡œ í• ë‹¹ë°›ì„ ê²ƒì„ ê³ ë ¤í•´ 10ê°œë¥¼ í• ë‹¹í–ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;ul>
&lt;li>ì¿ ë²„ë„¤í‹°ìŠ¤ : Master, node 2ê°œ&lt;/li>
&lt;li>ê°œë°œ ê´€ë ¨ : Jenkins&lt;/li>
&lt;li>ê¸°íƒ€(ì¼ì‹œì ) : MySQL ê´€ë¦¬ìš© ë“±ë“±..&lt;/li>
&lt;/ul>
&lt;h2 id="ë§ˆì¹˜ë©°">ë§ˆì¹˜ë©°
&lt;/h2>&lt;p>ì§€ê¸ˆê¹Œì§€ í”„ë¡œì íŠ¸ê°€ ì™œ ì´ëŸ¬í•œ í”Œë«í¼ì„ ì„ íƒí–ˆëŠ”ì§€ ì„¤ëª…í–ˆìŠµë‹ˆë‹¤. ë˜í•œ ì„œë²„ë¥¼ ë‹¤ë¥¸ ê³³ì— ì´ì „í•˜ê²Œ ë˜ë©´ì„œ ìƒê¸´ ê²½í—˜ì„ ë³´ì—¬ë“œë ¸ìŠµë‹ˆë‹¤.
ë‹¤ìŒí¸ì—ëŠ” ì „ì²´ì ì¸ êµ¬ì„±ë„ì™€ í•¨ê»˜ ì°¾ì•„ì˜¤ê² ìŠµë‹ˆë‹¤.&lt;/p>
&lt;div class="footnotes" role="doc-endnotes">
&lt;hr>
&lt;ol>
&lt;li id="fn:1">
&lt;p>&lt;a class="link" href="https://en.wikipedia.org/wiki/Capture_the_flag_%28cybersecurity%29" target="_blank" rel="noopener"
>https://en.wikipedia.org/wiki/Capture_the_flag_(cybersecurity)&lt;/a>&amp;#160;&lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;li id="fn:2">
&lt;p>&lt;a class="link" href="https://www.redhat.com/ko/topics/openstack" target="_blank" rel="noopener"
>https://www.redhat.com/ko/topics/openstack&lt;/a>&amp;#160;&lt;a href="#fnref:2" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/div></description></item><item><title>OpsAthlan 3-1. Hello MySQL</title><link>https://s0okju.github.io/p/opsathlan-3-1/</link><pubDate>Mon, 04 Nov 2024 00:00:00 +0900</pubDate><guid>https://s0okju.github.io/p/opsathlan-3-1/</guid><description>&lt;h2 id="ì‹œë‚˜ë¦¬ì˜¤">ì‹œë‚˜ë¦¬ì˜¤
&lt;/h2>&lt;p>ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì„¤ì¹˜í•˜ê³  ì½ê¸°ì™€ ì“°ê¸°ë¥¼ íƒìƒ‰í•´ë³´ì&lt;/p>
&lt;h3 id="êµ¬ì„±ë„">êµ¬ì„±ë„
&lt;/h3>&lt;ol>
&lt;li>Jenkinsë¥¼ í™œìš©í•œ ì»¨í…Œì´ë„ˆ ìë™ ë¹Œë“œ ë° docker-compose ë°°í¬&lt;/li>
&lt;li>Novaì— Mysql ì„œë²„ ì„¤ì¹˜ ë° volumeì— ë°ì´í„° ì €ì¥&lt;/li>
&lt;/ol>
&lt;p>&lt;img src="https://s0okju.github.io/p/opsathlan-3-1/image.png"
width="1140"
height="460"
srcset="https://s0okju.github.io/p/opsathlan-3-1/image_hu_f31c09a612fdea3a.png 480w, https://s0okju.github.io/p/opsathlan-3-1/image_hu_89a4fa1a418eb7ba.png 1024w"
loading="lazy"
alt="ì „ì²´ êµ¬ì„±ë„"
class="gallery-image"
data-flex-grow="247"
data-flex-basis="594px"
>&lt;/p>
&lt;h2 id="trove-ì„¤ì¹˜-ì‹¤íŒ¨">Trove ì„¤ì¹˜ ì‹¤íŒ¨
&lt;/h2>&lt;p>ì´ˆê¸° ì„¤ê³„ì—ì„œëŠ” RDSì™€ ìœ ì‚¬í•˜ë‹¤ê³  ìƒê°í•œ&lt;sup id="fnref:1">&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref">1&lt;/a>&lt;/sup> ì„œë¹„ìŠ¤ì¸ Troveë¥¼ í™œìš©í•´ì„œ êµ¬ì„±í•  ì˜ˆì •ì´ì—ˆìŠµë‹ˆë‹¤. ê·¸ëŸ°ë° ë”°ë¡œ ë„¤íŠ¸ì›Œí¬ë¥¼ êµ¬ì¶•í•˜ê³  ì„¤ì¹˜í•´ë³´ë©´ì„œ ë‹¤ì–‘í•œ ì˜¤ë¥˜ì‚¬í•­ì„ ë§ˆì£¼í–ˆìŠµë‹ˆë‹¤. ì›ì¸ì€ ëŒ€ëµì ìœ¼ë¡œ ì°¾ì•˜ìœ¼ë‚˜ êµ¬ì²´ì ì¸ í•´ê²° ë°©ì•ˆì„ ì°¾ì§€ ëª»í•´ì„œ &lt;strong>Nova ì¸ìŠ¤í„´ìŠ¤ì— mysql ì„œë²„ë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ì „í™˜&lt;/strong>í–ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;h3 id="ì˜¤ë¥˜ì‚¬í•­">ì˜¤ë¥˜ì‚¬í•­
&lt;/h3>&lt;p>ìš°ì„  Troveê°€ ë¬´ì—‡ì¸ì§€ ì•Œì•„ë´…ì‹œë‹¤. &lt;a class="link" href="https://wiki.openstack.org/wiki/Trove" target="_blank" rel="noopener"
>ê³µì‹ë¬¸ì„œ&lt;/a>ì— ì˜í•˜ë©´ troveëŠ” ë‹¤ë¥¸ í¼ë¸”ë¦­ í´ë¼ìš°ë“œì˜ ë°ì´í„°ë² ì´ìŠ¤ ì„œë¹„ìŠ¤ê³¼ ìœ ì‚¬í•œ ê¸°ëŠ¥ì„ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤. ì•ˆì •ì„±ì„ ìœ„í•œ ëŒ€ë¶€ë¶„ì˜ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤.&lt;/p>
&lt;blockquote>
&lt;p>Trove is &lt;strong>Database as a Service&lt;/strong> for OpenStack. It&amp;rsquo;s designed to run entirely onÂ &lt;a class="link" href="https://wiki.openstack.org/wiki/OpenStack" title="OpenStack"
target="_blank" rel="noopener"
>OpenStack&lt;/a>, with the goal of allowing users to quickly and easily utilize the features of a relational or non-relational database without the burden of handling complex administrative tasks.
&amp;hellip; Initially, the service will focus on providing resource isolation at high performance while &lt;strong>automating complex administrative tasks including deployment, configuration, patching, backups, restores, and monitoring.&lt;/strong>&lt;/p>&lt;/blockquote>
&lt;p>ì €ëŠ” Kolla-Ansibleë¥¼ ì‚¬ìš©í•˜ê³  ìˆì–´ ì‰½ê²Œ ë¦¬ì†ŒìŠ¤ë¥¼ ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. &lt;code>globals.yml&lt;/code> ì—ì„œ trove ë¦¬ì†ŒìŠ¤ ë¶€ë¶„ì„ yesë¡œ ë°”ê¾¸ê¸°ë§Œ í•˜ë©´ ë©ë‹ˆë‹¤. ì„¤ì •ì„ ì¶”ê°€í•˜ê³  ì¬ë°°í¬í•˜ë©´ ì´ 3ê°œì˜ trove ì»¨í…Œì´ë„ˆê°€ ìƒì„±ë©ë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/opsathlan-3-1/image-1.png"
width="569"
height="126"
srcset="https://s0okju.github.io/p/opsathlan-3-1/image-1_hu_fcc5fc92feacc3f9.png 480w, https://s0okju.github.io/p/opsathlan-3-1/image-1_hu_ecfb01e6231c6060.png 1024w"
loading="lazy"
alt="trove ì„œë¹„ìŠ¤ ê´€ë ¨ ì»¨í…Œì´ë„ˆ"
class="gallery-image"
data-flex-grow="451"
data-flex-basis="1083px"
>&lt;/p>
&lt;p>TroveëŠ” Nova ì¸ìŠ¤í„´ìŠ¤ ë‚´ì—ì„œ ì‘ë™ë©ë‹ˆë‹¤. ê´€ë ¨ ì´ë¯¸ì§€ë¥¼ ë‹¤ìš´ë¡œë“œ ë°›ì•„ì„œ glaceì— ì—…ë¡œë“œí•œ í›„ datastore versionì„ ì •ì˜í• ë•Œ ì‚¬ìš©í•©ë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Image ë‹¤ìš´ë¡œë“œ&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">wget https://tarballs.opendev.org/openstack/trove/images/trove-master-guest-ubuntu-jammy.qcow2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ì´ë¯¸ì§€ Glanceë¡œ ì—…ë¡œë“œ&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">openstack image create Trove-Ubuntu --disk-format qcow2 --container-format bare --public --tag trove --tag mysql --file trove-master-guest-ubuntu-jammy.qcow2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># datastore version ì •ì˜&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">openstack datastore version create 5.7.29 mysql mysql &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span> --image-tags trove,mysql --active --default --version-number 5.7.29
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ìœ„ì˜ ëª…ë ¹ì–´ë¥¼ ëª¨ë‘ ìˆ˜í–‰í•œ í›„ ì•„ë˜ì˜ ëª…ë ¹ì–´ë¥¼ í™•ì¸í•´ë³´ë©´ mysqlì— í•´ë‹¹ë˜ëŠ” datastoreë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/opsathlan-3-1/image-2.png"
width="538"
height="103"
srcset="https://s0okju.github.io/p/opsathlan-3-1/image-2_hu_6883ceb9aca8d146.png 480w, https://s0okju.github.io/p/opsathlan-3-1/image-2_hu_856bc01d71a3a345.png 1024w"
loading="lazy"
alt="datastore í™•ì¸"
class="gallery-image"
data-flex-grow="522"
data-flex-basis="1253px"
>&lt;/p>
&lt;p>ê·¸ë¦¬ê³  trove ê´€ë¦¬ ë„¤íŠ¸ì›Œí¬ë¥¼ ë”°ë¡œ ë§Œë“  í›„ì— ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ìƒì„±í–ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">openstack database instance create test_db &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --flavor m1.medium &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --size &lt;span class="m">10&lt;/span> &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --nic net-id&lt;span class="o">={&lt;/span>custom trove manangement network id&lt;span class="o">}&lt;/span> &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --database testdb &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --users tester:mypassword &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --datastore mysql &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --datastore-version 5.7.29 &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --allowed-cidr 0.0.0.0/0
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ëª…ë ¹ì–´ ìˆ˜í–‰ ì´í›„ ë¹Œë“œ ì‹œê°„ì´ ê¸¸ì—ˆìŠµë‹ˆë‹¤. Timeout ì—ëŸ¬ê°€ ë°œìƒí•  ê²ƒì´ë¼ê³  ì˜ˆìƒí–ˆê³ , ìƒê°í•œëŒ€ë¡œ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/opsathlan-3-1/image-3.png"
width="1529"
height="171"
srcset="https://s0okju.github.io/p/opsathlan-3-1/image-3_hu_441c481c934e614b.png 480w, https://s0okju.github.io/p/opsathlan-3-1/image-3_hu_6d5d606e9be556a2.png 1024w"
loading="lazy"
alt="trove ìƒì„± ì—ëŸ¬"
class="gallery-image"
data-flex-grow="894"
data-flex-basis="2145px"
>&lt;/p>
&lt;p>trove - api ì—ì„œ taskmanagerë¡œ ì‘ì—…ì„ ìˆ˜í–‰í• ë•Œ message bus ë¶€ë¶„ì—ì„œ ë¬¸ì œê°€ ìƒê¸´ ê²ƒ ê°™ìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/opsathlan-3-1/image-4.png"
width="300"
height="184"
srcset="https://s0okju.github.io/p/opsathlan-3-1/image-4_hu_e9833adf3828b2b2.png 480w, https://s0okju.github.io/p/opsathlan-3-1/image-4_hu_20fe353ca2d78f1b.png 1024w"
loading="lazy"
alt="ì¶œì²˜ - https://www.odbms.org/2016/02/10-things-you-should-know-about-openstack-trove-the-open-source-database-as-a-service/"
class="gallery-image"
data-flex-grow="163"
data-flex-basis="391px"
>&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/opsathlan-3-1/image-5.png"
width="1060"
height="448"
srcset="https://s0okju.github.io/p/opsathlan-3-1/image-5_hu_dbec9d141b136f5c.png 480w, https://s0okju.github.io/p/opsathlan-3-1/image-5_hu_6f1fcae678aef8c5.png 1024w"
loading="lazy"
alt="trove timeout error"
class="gallery-image"
data-flex-grow="236"
data-flex-basis="567px"
>&lt;/p>
&lt;p>ìš°ë¦¬ì˜ ëª©ì ì€ ê°„ë‹¨í•˜ê²Œ APIë¥¼ í…ŒìŠ¤íŠ¸í•˜ëŠ” ê²ƒì´ê¸° ë•Œë¬¸ì— ëŒ€ê·œëª¨ì— ì í•©í•œ ë°ì´í„°ë² ì´ìŠ¤ ì‹œìŠ¤í…œì´ ì•„ë‹ˆì—¬ë„ ê´œì°®ìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë¯€ë¡œ &lt;strong>ê°„ë‹¨í•˜ê²Œ Nova ì¸ìŠ¤í„´ìŠ¤ ë‚´ì— Mysql ì„œë²„ë¥¼ ì„¤ì¹˜í•˜ëŠ” ë°©ë²•&lt;/strong>ì„ ì„ íƒí–ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;h2 id="í”„ë¡œë¹„ì €ë‹provisioning">í”„ë¡œë¹„ì €ë‹(Provisioning)
&lt;/h2>&lt;blockquote>
&lt;p>í”„ë¡œë¹„ì €ë‹(Provisioning) ì´ë€ ì˜ë¯¸ëŠ” ì˜ì–´ ì§ì—­í•œ ê·¸ëŒ€ë¡œ &amp;ldquo;ì œê³µí•˜ëŠ”ê²ƒ&amp;rdquo; ì´ë‹¤.Â 
ì–´ë–¤ ì¢…ë¥˜ì˜ ì„œë¹„ìŠ¤ë“ Â &lt;strong>ì‚¬ìš©ìì˜ ìš”êµ¬ì— ë§ê²Œ ì‹œìŠ¤í…œ ìì²´ë¥¼ ì œê³µ í•˜ëŠ” ê²ƒ&lt;/strong>ì„Â í”„ë¡œë¹„ì €ë‹ì´ë¼ê³  í•˜ë©° ì œê³µí•´ì¤„ ìˆ˜ ìˆëŠ” ê²ƒì€ ì¸í”„ë¼ ìì›ì´ë‚˜ ì„œë¹„ìŠ¤, ë˜ëŠ” ì¥ë¹„ê°€ ë  ìˆ˜ë„ ìˆë‹¤.&lt;/p>
&lt;p>ì¶œì²˜ - &lt;a class="link" href="https://jins-dev.tistory.com/entry/%ED%94%84%EB%A1%9C%EB%B9%84%EC%A0%80%EB%8B%9DProvisioning-%EC%9D%B4%EB%9E%80" target="_blank" rel="noopener"
>Jins&amp;rsquo; Dev Inside - í”„ë¡œë¹„ì €ë‹ì´ë€?&lt;/a>&lt;/p>&lt;/blockquote>
&lt;p>ì•ìœ¼ë¡œëŠ” ì¸í”„ë¼ë¥¼ ìƒì„±, í™˜ê²½ì„ ì„¤ì • ê³¼ì •ì„ í”„ë¡œë¹„ì €ë‹ì´ë¼ëŠ” ìš©ì–´ë¡œ ì¹­í•˜ê² ìŠµë‹ˆë‹¤.&lt;/p>
&lt;h3 id="ë¦¬ì†ŒìŠ¤-ìƒì„±">ë¦¬ì†ŒìŠ¤ ìƒì„±
&lt;/h3>&lt;p>ì €í¬ëŠ” í¬ê²Œ 2ê°€ì§€ì˜ Nova ì¸ìŠ¤í„´ìŠ¤ê°€ í•„ìš”í•©ë‹ˆë‹¤.&lt;/p>
&lt;ol>
&lt;li>Docker, Jenkins ì„œë²„ê°€ ì„¤ì¹˜ë˜ì–´ ìˆëŠ” ì¸ìŠ¤í„´ìŠ¤ -&amp;gt; &lt;strong>Nova ì¸ìŠ¤í„´ìŠ¤&lt;/strong>&lt;/li>
&lt;li>Block Storage(Cinder)ì™€ ì—°ê²°ë˜ì–´ ìˆìœ¼ë©° MySQL Serverê°€ ì„¤ì¹˜ëœ ì¸ìŠ¤í„´ìŠ¤ -&amp;gt; Block &lt;strong>Storage(Cinder)ê°€ ì—°ê²°ëœ Nova ì¸ìŠ¤í„´ìŠ¤&lt;/strong>&lt;/li>
&lt;/ol>
&lt;p>&lt;img src="https://s0okju.github.io/p/opsathlan-3-1/image.png"
width="1140"
height="460"
srcset="https://s0okju.github.io/p/opsathlan-3-1/image_hu_f31c09a612fdea3a.png 480w, https://s0okju.github.io/p/opsathlan-3-1/image_hu_89a4fa1a418eb7ba.png 1024w"
loading="lazy"
alt="ì „ì²´ êµ¬ì„±ë„"
class="gallery-image"
data-flex-grow="247"
data-flex-basis="594px"
>&lt;/p>
&lt;p>Openstackì—ì„œëŠ” Nova ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•  ë•Œ Volume(Block Storage)ì„ ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì‰½ê²Œ AWSì˜ EBSë¼ê³  ìƒê°í•˜ì‹œë©´ ë©ë‹ˆë‹¤.&lt;br>
ì•ì„œ ë§í–ˆë“¯ì´ Trove ì„œë¹„ìŠ¤ ì„¤ì¹˜ë¥¼ ì‹¤íŒ¨í•˜ê²Œ ë˜ë©´ì„œ ëŒ€ì•ˆì±…ìœ¼ë¡œ Novaì— MySQL ì„œë²„ë¥¼ ì„¤ì¹˜í•˜ëŠ” ë°©ì•ˆì„ ì„ íƒí•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. Volumeì´ ì—°ê²°ëœ Nova Instanceë¥¼ í™œìš©í•˜ì—¬ &lt;strong>ë°ì´í„°ë² ì´ìŠ¤ì˜ ë°ì´í„°ê°€ Block Storageì— ì˜êµ¬ì ìœ¼ë¡œ ì €ì¥í•  ìˆ˜ ìˆê²Œ êµ¬ì„±&lt;/strong>í–ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-hcl" data-lang="hcl">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Block Storage Volume for MySQL Instance
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">resource&lt;/span> &lt;span class="s2">&amp;#34;openstack_blockstorage_volume_v3&amp;#34; &amp;#34;db_volume&amp;#34;&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;${var.project_name}-db-volume&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> size&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">var&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">volume_size&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}&lt;span class="c1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Nova Instance with Volume (MySQL Server)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">resource&lt;/span> &lt;span class="s2">&amp;#34;openstack_compute_instance_v2&amp;#34; &amp;#34;db_instance&amp;#34;&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;${var.project_name}-db-instance&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> image_name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">var&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">image&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> flavor_name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">var&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">flavor&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> key_pair&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">openstack_compute_keypair_v2&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">keypair&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">name&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">network&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> port&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">openstack_networking_port_v2&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">db_port&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">id&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> metadata&lt;/span> &lt;span class="o">=&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> ssh_user&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;ubuntu&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}&lt;span class="c1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Attach Volume to MySQL Instance
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">resource&lt;/span> &lt;span class="s2">&amp;#34;openstack_compute_volume_attach_v2&amp;#34; &amp;#34;db_volume_attach&amp;#34;&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> instance_id&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">openstack_compute_instance_v2&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">db_instance&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">id&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> volume_id&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">openstack_blockstorage_volume_v3&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">db_volume&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">id&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ìœ„ì˜ ì½”ë“œë¥¼ í¬í•¨í•œ 2ê°œì˜ Nova Instanceë¥¼ ìƒì„±í•˜ë©´ ì•„ë˜ì™€ ê°™ì€ ë„¤íŠ¸ì›Œí¬ í† í´ë¡œì§€ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/opsathlan-3-1/image-6.png"
width="534"
height="534"
srcset="https://s0okju.github.io/p/opsathlan-3-1/image-6_hu_94e427a8f5d9f424.png 480w, https://s0okju.github.io/p/opsathlan-3-1/image-6_hu_305549788cf8ba30.png 1024w"
loading="lazy"
alt="ë„¤íŠ¸ì›Œí¬ í† í´ë¡œì§€"
class="gallery-image"
data-flex-grow="100"
data-flex-basis="240px"
>&lt;/p>
&lt;p>ë³¸ë˜ë¼ë©´ ê´€ë¦¬ ë„¤íŠ¸ì›Œí¬ì™€ ì™¸ë¶€ ë„¤íŠ¸ì›Œí¬ê°€ ë¶„ë¦¬ë˜ì–´ì•¼ í•˜ì§€ë§Œ í†µí•©ë˜ì–´ ìˆëŠ” ê´€ê³„ë¡œ ëª¨ë‘ floating ipë¥¼ í• ë‹¹í•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.&lt;br>
ë§Œì•½ì— ë„¤íŠ¸ì›Œí¬ê°€ ì—­í• ì— ë”°ë¼ ë¶„ëª…í•˜ê²Œ ë¶„ë¦¬ë˜ì–´ ìˆë‹¤ë©´ web-instanceëŠ” ì™¸ë¶€ ë„¤íŠ¸ì›Œí¬ë¡œ êµ¬ì„±í•˜ê³  db-instanceëŠ” ê´€ë¦¬ ë„¤íŠ¸ì›Œí¬ ipë¥¼ í• ë‹¹ë°›ì•„ì•¼ í•  ê²ƒì…ë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/opsathlan-3-1/image-7.png"
width="720"
height="243"
srcset="https://s0okju.github.io/p/opsathlan-3-1/image-7_hu_bb6e2db3eb986ddf.png 480w, https://s0okju.github.io/p/opsathlan-3-1/image-7_hu_ef8807c6f11ded7f.png 1024w"
loading="lazy"
alt="Nova Instance ëª©ë¡"
class="gallery-image"
data-flex-grow="296"
data-flex-basis="711px"
>&lt;/p>
&lt;p>ë°ì´í„° ë² ì´ìŠ¤ ì„œë²„ë¥¼ ì„¤ì¹˜í•  &lt;code>OpsAthlan-03-db-instance&lt;/code> ì¸ìŠ¤í„´ìŠ¤ë¥¼ í™•ì¸í•´ ë³´ê² ìŠµë‹ˆë‹¤. í•´ë‹¹ ì •ë³´ì— ë“¤ì–´ê°€ë³´ë©´ &lt;code>OpsAthlan-03-db-volume&lt;/code> &lt;strong>volumeì´ ì¸ìŠ¤í„´ìŠ¤ì˜ /dev/vdb ê²½ë¡œë¡œ ë§ˆìš´íŒ…&lt;/strong>ë˜ì—ˆìŒì„ í™•ì¸í–ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/opsathlan-3-1/image-8.png"
width="465"
height="559"
srcset="https://s0okju.github.io/p/opsathlan-3-1/image-8_hu_7dfdc3a64402eccd.png 480w, https://s0okju.github.io/p/opsathlan-3-1/image-8_hu_6fc84c3f2e651575.png 1024w"
loading="lazy"
alt="Novaì— Attachëœ Volume ì •ë³´"
class="gallery-image"
data-flex-grow="83"
data-flex-basis="199px"
>&lt;/p>
&lt;h3 id="mysql-ì„œë²„-ì„¤ì¹˜">MySQL ì„œë²„ ì„¤ì¹˜
&lt;/h3>&lt;p>ì²˜ìŒì—ëŠ” Ansibleë¥¼ í™œìš©í•˜ì—¬ í•œë²ˆì— MySQL ì„œë²„ë¥¼ ì„¤ì¹˜í•  ì˜ˆì •ì´ì—ˆìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ì €ì¥ ê²½ë¡œ ìˆ˜ì • ì‘ì—…ì´ ìš”êµ¬ë˜ë©´ì„œ ìë™í™”ëŠ” í˜ë“¤ë‹¤ê³  íŒë‹¨í–ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;blockquote>
&lt;p>ìƒë‹¹íˆ ì‘ì—…ì´ ë²ˆê±°ë¡œìš´ ê´€ê³„ë¡œ &lt;a class="link" href="https://jongsky.tistory.com/81" target="_blank" rel="noopener"
>JONGSKYë‹˜ì˜ ë¸”ë¡œê·¸(ì‹œê°„ì˜ ë†ë„) - MySQL ì €ì¥ê²½ë¡œ ë³€ê²½í•˜ê¸°(feat. ubuntu)&lt;/a> ë¡œ ëŒ€ì²´í•˜ê² ìŠµë‹ˆë‹¤.&lt;/p>&lt;/blockquote>
&lt;p>ìœ„ì˜ ë°©ë²•ì„ ëª¨ë‘ ë”°ë¼í•˜ë©´ mysql ì„œë²„ ì„¤ì¹˜ê°€ ì™„ë£Œë©ë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/opsathlan-3-1/image-9.png"
width="739"
height="202"
srcset="https://s0okju.github.io/p/opsathlan-3-1/image-9_hu_a57512bfc759a4cc.png 480w, https://s0okju.github.io/p/opsathlan-3-1/image-9_hu_1db43807fdf4bdcd.png 1024w"
loading="lazy"
alt="mysql server ì •ìƒ ì‹¤í–‰ ìƒíƒœ"
class="gallery-image"
data-flex-grow="365"
data-flex-basis="878px"
>&lt;/p>
&lt;p>&lt;code>web-instance&lt;/code> ì— mysql clientë¥¼ ì„¤ì¹˜í•˜ì—¬ í…ŒìŠ¤íŠ¸ë¥¼ ìˆ˜í–‰í•´ ë³´ê² ìŠµë‹ˆë‹¤. mysql ì„œë²„ì— ê³„ì •ì„ ë§Œë“  í›„ í…ŒìŠ¤íŠ¸ë¥¼ í•´ë³´ë©´ ì—°ê²°í•  ìˆ˜ ì—†ë‹¤ëŠ” ì˜¤ë¥˜ë¥¼ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. &lt;strong>&lt;code>db-instance&lt;/code> security groupì— mysql ì„œë²„ í¬íŠ¸ì¸ 3306 ê·œì¹™ì„ ì¶”ê°€í•´ë„ ë˜‘ê°™ì€ ì˜¤ë¥˜ê°€ ë°œìƒ&lt;/strong>ë©ë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/opsathlan-3-1/image-10.png"
width="803"
height="67"
srcset="https://s0okju.github.io/p/opsathlan-3-1/image-10_hu_b0e69f8a16a00faf.png 480w, https://s0okju.github.io/p/opsathlan-3-1/image-10_hu_ae5c25dad2f3a6f4.png 1024w"
loading="lazy"
alt="Mysql ì—°ê²° ì˜¤ë¥˜"
class="gallery-image"
data-flex-grow="1198"
data-flex-basis="2876px"
>&lt;/p>
&lt;p>&lt;code>/etc/mysql/mysql.conf.d/mysqld.cnf&lt;/code> mysql ì„¤ì • íŒŒì¼ì— ì™¸ë¶€ í†µì‹ ì„ í—ˆìš©í•´ì£¼ë©´ ì •ìƒì ìœ¼ë¡œ ì—°ê²°í•  ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">bind-address = 0.0.0.0
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="ë‹¤ìŒ-ì´ì•¼ê¸°">ë‹¤ìŒ ì´ì•¼ê¸°
&lt;/h2>&lt;p>ë°ì´í„°ë² ì´ìŠ¤ ì„œë²„ë¥¼ êµ¬ì„±í–ˆìœ¼ë‹ˆ jenkinsë¥¼ í†µí•œ CI/CDë¥¼ êµ¬ì¶•í•´ë³´ê² ìŠµë‹ˆë‹¤.&lt;/p>
&lt;div class="footnotes" role="doc-endnotes">
&lt;hr>
&lt;ol>
&lt;li id="fn:1">
&lt;p>ì™„ì „ ê´€ë¦¬í˜• ì„œë¹„ìŠ¤ëŠ” ì•„ë‹™ë‹ˆë‹¤!&amp;#160;&lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/div></description></item><item><title>ì„œë²„ êµ¬ì¶•ê¸° - 4. Kolla-ansible ì„¤ì¹˜ ì‹œ ë§ˆì£¼í•œ ë„¤íŠ¸ì›Œí¬ ë¬¸ì œ</title><link>https://s0okju.github.io/p/server-setup-4/</link><pubDate>Tue, 01 Oct 2024 00:00:00 +0900</pubDate><guid>https://s0okju.github.io/p/server-setup-4/</guid><description>&lt;h2 id="devstackì˜-í•œê³„">DevStackì˜ í•œê³„
&lt;/h2>&lt;p>DevStackìœ¼ë¡œ Openstackì„ ë°°í¬í•˜ë©´ì„œ í° ë¬¸ì œì ì„ ëŠë¼ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;ul>
&lt;li>Nova Instanceì— ì§ì ‘ ì ‘ê·¼í•˜ëŠ” ê²ƒì´ ì–´ë µë‹¤.&lt;/li>
&lt;li>ë¦¬ì†ŒìŠ¤ë¥¼ ì¶”ê°€ ë° ì‚­ì œí•˜ëŠ” ê²ƒì´ ì–´ë µë‹¤.&lt;/li>
&lt;/ul>
&lt;p>ìœ„ì˜ ë¬¸ì œì ì€ &lt;strong>ë„¤íŠ¸ì›Œí¬ë¡œ ì¸í•´ ë°œìƒ&lt;/strong>í•œ ê²ƒì…ë‹ˆë‹¤.
ì˜ˆë¡œ ì œê°€ Nova Instanceë¥¼ ìƒì„±í•´ Floating ipë¥¼ í• ë‹¹í•œë‹¤ê³  ê°€ì •í•´ ë´…ì‹œë‹¤. External Networkì˜ IP ë²”ìœ„ê°€ ì™¸ë¶€ì™€ ì—°ê²°ì´ ë¶ˆê°€ëŠ¥í•´ ì§ì ‘ì ìœ¼ë¡œ ì ‘ê·¼í•  ìˆ˜ ì—†ê²Œ ë©ë‹ˆë‹¤. ê·¸ëŸ¼ sshë¡œ ì„œë²„ì— ì§ì ‘ ì ‘ì†í•´ì„œ ê´€ë¦¬í•˜ëŠ” ë°©ì•ˆë„ ìˆìŠµë‹ˆë‹¤. ê·¸ëŸ¼ Openstackì„ ì™œ ì“´ê±°ì§€? í‚¤ëŠ” ì–´ë–»ê²Œ ê´€ë¦¬í•˜ì§€? ë“± ë‹¤ì–‘í•œ ê¼¬ë¦¬ ì§ˆë¬¸ì´ ë”°ë¼ì˜¤ê²Œ ë©ë‹ˆë‹¤.&lt;/p>
&lt;h2 id="kolla-ansible">Kolla Ansible
&lt;/h2>&lt;p>ë°©ì•ˆì„ ëª¨ìƒ‰í•˜ëŠ” ì¤‘ Openstackì€ DevStack ì´ì™¸ì—ë„ ë‹¤ì–‘í•œ ë°°í¬ ë°©ì•ˆì´ ìˆë‹¤ëŠ” ê²ƒì„ ì•Œê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/server-setup-4/image.png"
width="1083"
height="609"
srcset="https://s0okju.github.io/p/server-setup-4/image_hu_d0a000f910760807.png 480w, https://s0okju.github.io/p/server-setup-4/image_hu_1c212db233c3f527.png 1024w"
loading="lazy"
alt="ì¶œì²˜ - https://docs.openstack.org/contributors/ko_KR/common/introduction.html"
class="gallery-image"
data-flex-grow="177"
data-flex-basis="426px"
>&lt;/p>
&lt;blockquote>
&lt;p>Kolla Ansibleì´ë€ Ansible í”Œë ˆì´ë¶ì„ í†µí•´ OpenStackì˜ ëª¨ë“  ì„œë¹„ìŠ¤ë¥¼ &lt;strong>ì»¨í…Œì´ë„ˆë¡œ ë°°í¬&lt;/strong>í•˜ê³  ìœ ì§€ ë³´ìˆ˜í•˜ë©° ìš´ì˜í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì£¼ëŠ” í”„ë¡œì íŠ¸ì´ë‹¤. ì´ë¥¼ í†µí•´ ë³µì¡í•œ ì„¤ì¹˜ ê³¼ì •ê³¼ ìˆ˜ë™ ì„¤ì •ì„ ìµœì†Œí™”í•˜ê³ , ì¬í˜„ ê°€ëŠ¥í•œ í™˜ê²½ì„ ì œê³µí•˜ì—¬ íš¨ìœ¨ì ì´ë©° ì•ˆì •ì ì¸ í´ë¼ìš°ë“œ ì¸í”„ë¼ ìš´ì˜ì„ ê°€ëŠ¥í•˜ê²Œ í•œë‹¤.&lt;sup id="fnref:1">&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref">1&lt;/a>&lt;/sup>&lt;/p>&lt;/blockquote>
&lt;p>ì¦‰ ìš°ë¦¬ê°€ ì„¤ì •í•œ ì‹œìŠ¤í…œ ì„œë¹„ìŠ¤ë¥¼ ì»¨í…Œì´ë„ˆ í˜•íƒœë¡œ êµ¬ì¶•ë˜ëŠ” ê²ƒì…ë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/server-setup-4/image-1.png"
width="983"
height="925"
srcset="https://s0okju.github.io/p/server-setup-4/image-1_hu_8352fe0984792688.png 480w, https://s0okju.github.io/p/server-setup-4/image-1_hu_50ffe7b3191fc881.png 1024w"
loading="lazy"
alt="ì¶œì²˜ - https://velog.io/@larshavin/Kolla-Ansible%EC%9D%84-%ED%99%9C%EC%9A%A9%ED%95%9C-OpenStack-%EC%84%A4%EC%B9%98-1"
class="gallery-image"
data-flex-grow="106"
data-flex-basis="255px"
>&lt;/p>
&lt;h2 id="ì„¤ì¹˜">ì„¤ì¹˜
&lt;/h2>&lt;blockquote>
&lt;p>ì„¤ì¹˜ëŠ” &lt;a class="link" href="https://parandol.tistory.com/72" target="_blank" rel="noopener"
>íŒŒë€ëŒë‹˜ì˜ ë¸”ë¡œê·¸ - Kolla-ansibleë¡œ Openstack All-in-one ì„¤ì¹˜í•˜ê¸°(Installing Openstack All-in-one with Kolla-ansible)&lt;/a>ë¥¼ ì ê·¹ ì°¸ê³ í–ˆìŠµë‹ˆë‹¤.&lt;/p>&lt;/blockquote>
&lt;h3 id="ì„¤ì¹˜-ëª©ë¡">ì„¤ì¹˜ ëª©ë¡
&lt;/h3>&lt;p>Kolla-ansibleì˜ ì¥ì ì€ ì›í•˜ëŠ” ë¦¬ì†ŒìŠ¤ ì„ íƒê³¼ ì„¤ì •ì´ ì‰½ë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤. ê·¸ë˜ì„œ ì €ëŠ” ê¸°ë³¸ì ì¸ ë¦¬ì†ŒìŠ¤ë¥¼ ì„ íƒí•˜ì—¬ ì„¤ì¹˜í–ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;strong>ì„¤ì¹˜í•  ë¦¬ì†ŒìŠ¤&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>Keystone&lt;/li>
&lt;li>Glance&lt;/li>
&lt;li>Nova&lt;/li>
&lt;li>Neutron&lt;/li>
&lt;li>Cinder&lt;/li>
&lt;li>Swift&lt;/li>
&lt;li>Horizon&lt;/li>
&lt;/ul>
&lt;h3 id="all-in-one-or-node">all-in-one or node?
&lt;/h3>&lt;p>ì˜¤í”ˆìŠ¤íƒì€ í¬ê²Œ 3ê°€ì§€ ë…¸ë“œê°€ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;ul>
&lt;li>Controller node : ì „ì²´ ì˜¤í”ˆìŠ¤íƒ ì„œë¹„ìŠ¤ë¥¼ ê´€ë¦¬í•˜ê¸° ìœ„í•´ ì‚¬ìš©ë©ë‹ˆë‹¤. ì»¨íŠ¸ë¡¤ëŸ¬ ê´€ë¦¬ ë° ë…¸ë“œ ê°„ ì—°ê²°ì„ ì˜í•´ì„œëŠ” ìµœì†Œí•œ 2ê°œ ì´ìƒì˜ ì¸í„°ë„· ì¸í„°í˜ì´ìŠ¤ê°€ í•„ìš”í•©ë‹ˆë‹¤.&lt;/li>
&lt;li>Compute node : Nova ê¸°ë°˜ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì‘ë™í•˜ê¸° ìœ„í•´ ì‚¬ìš©ë˜ëŠ” í•˜ì´í¼ë°”ì´ì €ë¥¼ ì‹¤í–‰í•˜ëŠ” ë…¸ë“œì…ë‹ˆë‹¤.&lt;/li>
&lt;li>Network node : ë‹¤ì–‘í•œ ë„¤íŠ¸ì›Œí¬ ì„œë¹„ìŠ¤ ì—ì´ì „íŠ¸ë¥¼ ì‹¤í–‰í•˜ë©°, ì´ë¥¼ ê°€ìƒ ë„¤íŠ¸ì›Œí¬ì— ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì—°ê²°í•©ë‹ˆë‹¤.&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://s0okju.github.io/p/server-setup-4/image-2.png"
width="626"
height="686"
srcset="https://s0okju.github.io/p/server-setup-4/image-2_hu_3563153eabd2edd.png 480w, https://s0okju.github.io/p/server-setup-4/image-2_hu_e1b4bbd897ee5577.png 1024w"
loading="lazy"
alt="ì¶œì²˜ - https://docs.oracle.com/cd/E36784_01/html/E54155/archover.html"
class="gallery-image"
data-flex-grow="91"
data-flex-basis="219px"
>&lt;/p>
&lt;p>ì—¬ëŸ¬ ê°€ì´ë“œë¥¼ ë³´ë©´ ë…¸ë“œë“¤ì€ ë¬¼ë¦¬ì ìœ¼ë¡œ ë¶„ë¦¬ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ì„œë²„ ë‚´ ê°€ìƒë¨¸ì‹ ì„ êµ¬ì¶•í•˜ì—¬ êµ¬í˜„í•˜ëŠ” ë°©ë²•ì´ ìˆìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ë³µì¡í•œ ê´€ê³„ë¡œ &lt;strong>ì„œë¹„ìŠ¤ ê¸°ëŠ¥ì„ í•˜ë‚˜ì˜ í˜¸ìŠ¤íŠ¸ì— ì„¤ì¹˜í•  ìˆ˜ ìˆëŠ” all-in-one&lt;/strong>&lt;sup id="fnref:2">&lt;a href="#fn:2" class="footnote-ref" role="doc-noteref">2&lt;/a>&lt;/sup>ì„ ì„ íƒí•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;h2 id="openstack-ë„¤íŠ¸ì›Œí¬">Openstack ë„¤íŠ¸ì›Œí¬
&lt;/h2>&lt;p>&lt;strong>ê°€ì¥ ì–´ë µê³  ì•ìœ¼ë¡œ ê³„ì† ê³µë¶€í•´ì•¼ í•˜ëŠ” ë¶„ì•¼&lt;/strong>ì¸ ê²ƒ ê°™ìŠµë‹ˆë‹¤. ì™„ì „íˆ ì´í•´í•œ ê²ƒì€ ì•„ë‹ˆì§€ë§Œ ì•Œê³  ìˆëŠ” ê·¸ëŒ€ë¡œ ì‘ì„±í•˜ê² ìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>ì˜¤í”ˆ ìŠ¤íƒì—ì„œ ë„¤íŠ¸ì›Œí¬ëŠ” Management, Tunnel, External ë„¤íŠ¸ì›Œí¬ê°€ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;ul>
&lt;li>Management Network : ê´€ë¦¬ìš© ë„¤íŠ¸ì›Œí¬ë¡œ ê° ì»´í¬ë„ŒíŠ¸ì™€ ê´€ë ¨ëœ APIë¥¼ í˜¸ì¶œí•˜ëŠ”ë° ì‚¬ìš©ë©ë‹ˆë‹¤.&lt;/li>
&lt;li>Tunnel Network : vm instance ê°„ ë„¤íŠ¸ì›Œí¬ë¥¼ êµ¬ì¶•í•˜ëŠ”ë° ì‚¬ìš©ë©ë‹ˆë‹¤.&lt;/li>
&lt;li>External Network : vm instanceê°€ ì¸í„°ë„·ê³¼ í†µì‹ í•˜ê¸° ìœ„í•œ ë„¤íŠ¸ì›Œí¬ì…ë‹ˆë‹¤.&lt;/li>
&lt;/ul>
&lt;p>ë„¤íŠ¸ì›Œí¬ ì„œë¹„ìŠ¤ëŠ” í¬ê²Œ ë‘ ê°€ì§€ ì˜µì…˜ì´ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;ul>
&lt;li>Provider Network : ê°€ìƒ ë„¤íŠ¸ì›Œí¬ë¥¼ ë¬¼ë¦¬ì  ë„¤íŠ¸ì›Œí¬ë¡œ ì—°ê²°í•©ë‹ˆë‹¤. ì¦‰ ë¬¼ë¦¬ì ì¸ ë„¤íŠ¸ì›Œí¬ê°€ vm ì¸ìŠ¤í„´ìŠ¤ê°€ í™œìš©í•˜ëŠ” ë„¤íŠ¸ì›Œí¬ê°€ ë©ë‹ˆë‹¤.&lt;/li>
&lt;li>Self-Service Network : ì˜¤í”ˆìŠ¤íƒì„ ì‚¬ìš©í•˜ëŠ” ì‚¬ìš©ìê°€ ì§ì ‘ ìì‹ ë§Œì˜ ë„¤íŠ¸ì›Œí¬ë¥¼ êµ¬ì¶•í•  ìˆ˜ ìˆëŠ” ë„¤íŠ¸ì›Œí¬ ì…ë‹ˆë‹¤.&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;p>Provider ë„¤íŠ¸ì›Œí¬ëŠ” ë¶€í•˜ë¶„ì‚° ì„œë¹„ìŠ¤ í˜¹ì€ ë°©í™”ë²½ ì„œë¹„ìŠ¤ ë“± ê³ ê¸‰ ê¸°ëŠ¥ì„ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.&lt;/p>&lt;/blockquote>
&lt;p>ì œê°€ ì‚¬ìš©í•˜ëŠ” ì˜µì…˜ì€ ë¹„êµì  ê°„ë‹¨í•œ Provider Network ì…ë‹ˆë‹¤.&lt;/p>
&lt;h2 id="í…ŒìŠ¤íŠ¸ìš©-openstack-ì„œë²„ì˜-ë„¤íŠ¸ì›Œí¬-ì ‘ê·¼-ë¬¸ì œ">í…ŒìŠ¤íŠ¸ìš© Openstack ì„œë²„ì˜ ë„¤íŠ¸ì›Œí¬ ì ‘ê·¼ ë¬¸ì œ
&lt;/h2>&lt;p>kolla-ansibleì—ì„œ ì œê³µí•´ì£¼ëŠ” &lt;code>globals.yml&lt;/code> ë¥¼ í™•ì¸í•´ë³´ê² ìŠµë‹ˆë‹¤. í™˜ê²½ íŒŒì¼ì„ ë³´ë©´ Internal, External Networkë¡œ êµ¬ë¶„ë˜ì–´ ìˆìŠµë‹ˆë‹¤.&lt;br>
network_interfaceëŠ” Internal networkì— í•´ë‹¹ë˜ëŠ” ì¸í„°í˜ì´ìŠ¤ë¥¼ ì§€ì •í•˜ëŠ” ê²ƒìœ¼ë¡œ ì €ëŠ” ì™¸ë¶€ ì¸í„°ë„·ê³¼ ì—°ê²°ë˜ì§€ ì•ŠëŠ” &lt;code>enp2s0&lt;/code> ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤. ë°˜ë©´ neutron_external_interfaceëŠ” providerë¡œ ì œê³µí•  ì¸í„°í˜ì´ìŠ¤ë¡œ ì¸í„°ë„·ê³¼ ì—°ê²°í•  ìˆ˜ ìˆëŠ” &lt;code>enp3s0&lt;/code> ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yml" data-lang="yml">&lt;span class="line">&lt;span class="cl">&lt;span class="c">##############################&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c"># Neutron - Networking Options&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c">##############################&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c"># ...&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c"># followed for other types of interfaces.&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">network_interface&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;enp2s0&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nn">---&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c"># ...&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">neutron_external_interface&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;enp3s0&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ê·¸ë¦¼ì„ ê·¸ë ¤ë³´ë©´ ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤.&lt;br>
(ì•„ë˜ì˜ ê·¸ë¦¼ì€ &lt;code>172.17.0.250/24&lt;/code>ì´ ì•„ë‹ˆë¼ &lt;code>172.16.0.250/24&lt;/code> ì…ë‹ˆë‹¤. )&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/server-setup-4/image-3.png"
width="504"
height="423"
srcset="https://s0okju.github.io/p/server-setup-4/image-3_hu_a9481fa49341ced5.png 480w, https://s0okju.github.io/p/server-setup-4/image-3_hu_add6a79d669ec86c.png 1024w"
loading="lazy"
alt="ë„¤íŠ¸ì›Œí¬ í† í´ë¡œì§€"
class="gallery-image"
data-flex-grow="119"
data-flex-basis="285px"
>&lt;/p>
&lt;p>í•˜ì§€ë§Œ ì´ë²ˆ ì˜¤í”ˆìŠ¤íƒ ì„œë²„ëŠ” ì–´ë””ê¹Œì§€ë‚˜ ê°œì¸ìœ¼ë¡œë§Œ ì‚¬ìš©ë˜ëŠ” ê³µê°„ì…ë‹ˆë‹¤. ì¦‰ &lt;strong>í´ë¼ìš°ë“œ ì„œë¹„ìŠ¤ë¥¼ ì“°ëŠ” ê²ƒë„ ì € í˜¼ìì´ê³ , ê´€ë¦¬í•˜ëŠ” ê²ƒë„ ì € í˜¼ìì¸ ê²ƒì…ë‹ˆë‹¤&lt;/strong>. ê´€ë¦¬ë¥¼ ìœ„í•œ ë„¤íŠ¸ì›Œí¬ ì ‘ì†(Internal Network)ë„, ì˜¤í”ˆìŠ¤íƒ ë¦¬ì†ŒìŠ¤ ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ë„¤íŠ¸ì›Œí¬ ì ‘ì†(External Network)ë„ ê°€ëŠ¥í•´ì•¼ í•©ë‹ˆë‹¤.&lt;/p>
&lt;p>ê·¸ëŸ¬ë‚˜ ì €ëŠ” í´ë¼ìš°ë“œ ë¦¬ì†ŒìŠ¤ì˜ APIë¥¼ ì ‘ê·¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ì™œëƒí•˜ë©´ ì„œë¡œ ë‹¤ë¥¸ ë„¤íŠ¸ì›Œí¬ ëŒ€ì—­ì„ ê°€ì§€ê³  ìˆê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/server-setup-4/image-4.png"
width="615"
height="510"
srcset="https://s0okju.github.io/p/server-setup-4/image-4_hu_d197fff7b22f75e5.png 480w, https://s0okju.github.io/p/server-setup-4/image-4_hu_a4b6f4b5facc9ec2.png 1024w"
loading="lazy"
alt="ë„¤íŠ¸ì›Œí¬ êµ¬ì„±ë„"
class="gallery-image"
data-flex-grow="120"
data-flex-basis="289px"
>&lt;/p>
&lt;p>ì´ëŸ¬í•œ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„œëŠ” ë¼ìš°íŒ… í…Œì´ë¸”ì„ ì„¤ì •í•´ì•¼ í•  ê²ƒì…ë‹ˆë‹¤. ë¼ìš°í„°ì— ì§ì ‘ ì„¤ì •í•˜ëŠ” ë°©ë²•ê³¼ ìš´ì˜ì²´ì œì—ì„œ ì²˜ë¦¬í•˜ëŠ” ë°©ë²•ì´ ìˆëŠ”ë°, ë¬¼ë¦¬ì ìœ¼ë¡œ ë¼ìš°í„°ê°€ í•˜ë‚˜ë§Œ ì¡´ì¬í•˜ê¸° ë•Œë¬¸ì— ìš´ì˜ì²´ì œì—ì„œ ì²˜ë¦¬í•´ì•¼ í•©ë‹ˆë‹¤.&lt;/p>
&lt;p>ì €ëŠ” ip forwardë¥¼ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;blockquote>
&lt;p>IP-Forwardë€ ì»¤ë„ ê¸°ë°˜ ë¼ìš°íŒ… í¬ì›Œë”©ìœ¼ë¡œ í•˜ë‚˜ì˜ ì¸í„°í˜ì´ìŠ¤ë¡œ ë“¤ì–´ì˜¨ íŒ¨í‚·ì„ ë‹¤ë¥¸ ì„œë¸Œë„·ì„ ê°€ì§„ ë„¤íŠ¸ì›Œí¬ ì¸í„°í˜ì´ìŠ¤ë¡œ íŒ¨í‚·ì„ í¬ì›Œë”©ì‹œí‚¤ëŠ” ê²ƒì´ë‹¤.&lt;/p>&lt;/blockquote>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Kernel parameter update&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ sudo sysctl -w net.ipv4.conf.all.forwarding&lt;span class="o">=&lt;/span>&lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ sudo sysctl net.ipv4.conf.all.forwarding net.ipv4.conf.all.forwarding &lt;span class="o">=&lt;/span> &lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>br-ex ì†¡ì‹ ë˜ì–´ enp2s0 ì¸í„°í˜ì´ìŠ¤ì— ìˆ˜ì‹ ë˜ëŠ” ê²ƒì„ í—ˆë½í•œë‹¤ëŠ” ì˜ë¯¸ì…ë‹ˆë‹¤.&lt;/p>
&lt;blockquote>
&lt;p>br-exì€ OpenVSwitch(OVS) ì ìš©ì‹œ ë¬¼ë¦¬ ë„¤íŠ¸ì›Œí¬ ì¸í„°í˜ì´ìŠ¤ì™€ ì§ì ‘ ì—°ê²°ë˜ëŠ” ê°€ìƒ ìŠ¤ìœ„ì¹˜ì…ë‹ˆë‹¤. ì™¸ë¶€ ë„¤íŠ¸ì›Œí¬ì—ì„œ ê°€ìƒ ë¨¸ì‹ ì„ ì ‘ê·¼í• ë•Œ ì‚¬ìš©ë©ë‹ˆë‹¤.&lt;/p>&lt;/blockquote>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">sudo iptables -I FORWARD -i br-ex -o enp2s0 -j ACCEPT
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo iptables -nL FORWARD
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>í´ë¼ì´ì–¸íŠ¸ë„ ì„¤ì •ì´ í•„ìš”í•©ë‹ˆë‹¤.&lt;br>
192.168.50.27ë¥¼ í†µí•´ 172.16.0.0/24(enp2s0)ì— ì ‘ê·¼í•œë‹¤ëŠ” routing ruleë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">sudo route -n add 172.16.0.0/24 192.168.50.27
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ì—¬ê¸°ì„œ ì™œ 192.168.50.27ë¥¼ í†µí•´ 172.16.0.0/24 ë„¤íŠ¸ì›Œí¬ì— ì ‘ê·¼í•œë‹¤ê³  ì„¤ì •í•œ ê²ƒì¼ê¹Œìš”?&lt;br>
ì˜¤í”ˆ ìŠ¤íƒ ì„œë²„ì—ì„œ ip_forwardë¥¼ ì‹œì¼°ìŠµë‹ˆë‹¤. ì¦‰ ì„œë²„ê°€ ë¼ìš°í„°ì˜ ì—­í• ì„ í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ê·¸ë˜ì„œ í´ë¼ì´ì–¸íŠ¸ì—ì„œ ë¼ìš°íŒ… ë£°ì„ ì„¤ì •í•  ë•Œì—ëŠ” 172.16.0.250/24ì— í¬ì›Œë”©ì„ ì‹œí‚¨ ì„œë²„ì˜ ip ì£¼ì†Œë¡œ ì„¤ì •í•´ì•¼ í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.&lt;/p>
&lt;h2 id="ì •ë¦¬">ì •ë¦¬
&lt;/h2>&lt;p>í…ŒìŠ¤íŠ¸ë¥¼ ìˆ˜í–‰í•˜ê¸° ìœ„í•´ Openstack ì„œë²„ë¥¼ êµ¬ì¶•í•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. êµ¬ì¶• ì‹œ ìš”êµ¬ì‚¬í•­ì€ ì¸ìŠ¤í„´ìŠ¤ì— ì ‘ê·¼í•  ìˆ˜ ìˆìœ¼ë©´ì„œ ë¦¬ì†ŒìŠ¤ APIì— ì ‘ê·¼ ê°€ëŠ¥í•´ì•¼ í•œë‹¤ëŠ” ê²ƒì´ì—ˆìŠµë‹ˆë‹¤.
ì„œë¡œ ë‹¤ë¥¸ ë„¤íŠ¸ì›Œí¬ ëŒ€ì—­ì„ ê°€ì ¸ ë¦¬ì†ŒìŠ¤ APIì— ì ‘ê·¼í•˜ì§€ ëª»í–ˆìœ¼ë‚˜ ì„œë²„ì— ip forwardë¥¼ ìˆ˜í–‰í•˜ì—¬ ë¬¸ì œë¥¼ í•´ê²°í–ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>ë¬¸ì œë¥¼ í•´ê²°í•´ ë³´ë‹ˆ Neutronì— ëŒ€í•´ ëª¨ë¥´ê³  ìˆë‹¤ëŠ” ì‚¬ì‹¤ì„ ì•Œê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. ë‹¤ìŒ í¬ìŠ¤íŒ…ì€ Neutron í†±ì•„ë³´ê¸°ë¡œ ëŒì•„ì˜¤ê² ìŠµë‹ˆë‹¤.&lt;/p>
&lt;h2 id="reference">Reference
&lt;/h2>&lt;ul>
&lt;li>&lt;a class="link" href="https://velog.io/@lijahong/0%EB%B6%80%ED%84%B0-%EC%8B%9C%EC%9E%91%ED%95%98%EB%8A%94-Linux-%EA%B3%B5%EB%B6%80-%EB%B0%A9%ED%99%94%EB%B2%BD-%EC%BB%B4%ED%93%A8%ED%84%B0" target="_blank" rel="noopener"
>https://velog.io/@lijahong/0%EB%B6%80%ED%84%B0-%EC%8B%9C%EC%9E%91%ED%95%98%EB%8A%94-Linux-%EA%B3%B5%EB%B6%80-%EB%B0%A9%ED%99%94%EB%B2%BD-%EC%BB%B4%ED%93%A8%ED%84%B0&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://velog.io/@larshavin/Kolla-Ansible%EC%9D%84-%ED%99%9C%EC%9A%A9%ED%95%9C-OpenStack-%EC%84%A4%EC%B9%98-1" target="_blank" rel="noopener"
>https://velog.io/@larshavin/Kolla-Ansible%EC%9D%84-%ED%99%9C%EC%9A%A9%ED%95%9C-OpenStack-%EC%84%A4%EC%B9%98-1&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://blog.naver.com/love_tolty/220237750951" target="_blank" rel="noopener"
>https://blog.naver.com/love_tolty/220237750951&lt;/a>&lt;/li>
&lt;/ul>
&lt;div class="footnotes" role="doc-endnotes">
&lt;hr>
&lt;ol>
&lt;li id="fn:1">
&lt;p>&lt;a class="link" href="https://tech.osci.kr/openstack_cinder/" target="_blank" rel="noopener"
>https://tech.osci.kr/openstack_cinder/&lt;/a>&amp;#160;&lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;li id="fn:2">
&lt;p>&lt;a class="link" href="https://blog.naver.com/love_tolty/220237750951" target="_blank" rel="noopener"
>https://blog.naver.com/love_tolty/220237750951&lt;/a>&amp;#160;&lt;a href="#fnref:2" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/div></description></item><item><title>OpsAthlan 2 - 2. Advanced echo server ë©”íŠ¸ë¦­ ë¶„ì„</title><link>https://s0okju.github.io/p/opsathlan-2-2/</link><pubDate>Sun, 29 Sep 2024 00:00:00 +0900</pubDate><guid>https://s0okju.github.io/p/opsathlan-2-2/</guid><description>&lt;h2 id="jvmì˜-ë©”ëª¨ë¦¬-ì‚¬ìš©-í˜•íƒœ">JVMì˜ ë©”ëª¨ë¦¬ ì‚¬ìš© í˜•íƒœ
&lt;/h2>&lt;p>JVMì—ëŠ” 3ê°€ì§€ ë©”ëª¨ë¦¬ ì‚¬ìš© í˜•íƒœê°€ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;ul>
&lt;li>used: JVMì´ ì‚¬ìš© ì¤‘ì¸ ë©”ëª¨ë¦¬ ì–‘&lt;/li>
&lt;li>committed: JVMì´ ì‹œìŠ¤í…œì—ê²Œ ìš”ì²­í•œ ë©”ëª¨ë¦¬ ì–‘&lt;/li>
&lt;li>max : ì‹¤í–‰ ì¤‘ì¸ í™˜ê²½ì—ì„œ ìµœëŒ€ë¡œ í• ë‹¹í•  ìˆ˜ ìˆëŠ” ë©”ëª¨ë¦¬ ì–‘&lt;/li>
&lt;/ul>
&lt;p>ë©”ëª¨ë¦¬ ìš©ëŸ‰ì€ used &amp;lt;= committed &amp;lt;= maxë¥¼ ë”°ë¥´ëŠ”ë°, used ë©”ëª¨ë¦¬ ì–‘ì´ committed, max ë©”ëª¨ë¦¬ë³´ë‹¤ í¬ê²Œ ëœë‹¤ë©´ OOM(Out Of Memory)ì´ ë°œìƒ&lt;sup id="fnref:1">&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref">1&lt;/a>&lt;/sup>í•˜ê²Œ ë©ë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/opsathlan-2-2/image.png"
width="1280"
height="658"
srcset="https://s0okju.github.io/p/opsathlan-2-2/image_hu_7eff0a0e3e83f7ce.png 480w, https://s0okju.github.io/p/opsathlan-2-2/image_hu_122e62af3cace43b.png 1024w"
loading="lazy"
alt="ì¶œì²˜ - https://swmobenz.tistory.com/37"
class="gallery-image"
data-flex-grow="194"
data-flex-basis="466px"
>&lt;/p>
&lt;p>ê·¸ë¼íŒŒë‚˜ë¥¼ í™•ì¸í•´ë³´ë©´ 3ê°€ì§€ì˜ ë©”ëª¨ë¦¬ í˜•íƒœë¥¼ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/opsathlan-2-2/image-1.png"
width="1132"
height="298"
srcset="https://s0okju.github.io/p/opsathlan-2-2/image-1_hu_fbf00331a397b61c.png 480w, https://s0okju.github.io/p/opsathlan-2-2/image-1_hu_339a5807185ccf79.png 1024w"
loading="lazy"
alt="ê·¸ë¼íŒŒë‚˜ì—ì„œ í™•ì¸í•œ JVM Memory"
class="gallery-image"
data-flex-grow="379"
data-flex-basis="911px"
>&lt;/p>
&lt;h3 id="committed-memoryì˜-ì—­í• ">Committed Memoryì˜ ì—­í• 
&lt;/h3>&lt;blockquote>
&lt;p>&lt;a class="link" href="https://swmobenz.tistory.com/37" target="_blank" rel="noopener"
>YGwanë‹˜ì˜ ë¸”ë¡œê·¸: JVM Memoryì˜ 3ê°€ì§€ ë©”íŠ¸ë¦­ ì§€í‘œ - Committed Memoryë€?&lt;/a>ë¥¼ ì½ì–´ë³´ëŠ” ê²ƒì„ ì¶”ì²œë“œë¦½ë‹ˆë‹¤.&lt;/p>&lt;/blockquote>
&lt;p>&lt;strong>ë©”ëª¨ë¦¬ë¥¼ í• ë‹¹í•˜ê³  í•´ì œí•˜ëŠ”ë° í•„ìš”í•œ ì˜¤ë²„í—¤ë“œë¥¼ ì¤„ì¼ ìˆ˜ ìˆë‹¤ëŠ” íŠ¹ì§•&lt;/strong>ì„ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤.&lt;br>
JVMì´ ì‹œìŠ¤í…œì„ í†µí•´ ë¯¸ë¦¬ ë©”ëª¨ë¦¬ë¥¼ í• ë‹¹í•˜ì—¬ ì‚¬ìš© ì‹œ ê°€ì§€ê³  ìˆëŠ” ì—¬ìœ  ë©”ëª¨ë¦¬ ê³µê°„ì„ í™œìš©í•©ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ë©”ëª¨ë¦¬ë¥¼ ì¦‰ì‹œ ì‚¬ìš©í•  ìˆ˜ ìˆìœ¼ë©° ë©”ëª¨ë¦¬ë¥¼ í• ë‹¹í•˜ëŠ”ë° ë°œìƒí•˜ëŠ” ì˜¤ë²„í—¤ë“œë¥¼ ì¤„ì¼ ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤.&lt;/p>
&lt;h2 id="advanced-echo-server-jvm-ë©”íŠ¸ë¦­-íŠ¹ì§•">Advanced echo server jvm ë©”íŠ¸ë¦­ íŠ¹ì§•
&lt;/h2>&lt;p>ì´ì „ ê¸€ì—ì„œ ìŠ¤í”„ë§ë¶€íŠ¸ ì»¨í…Œì´ë„ˆì˜ ë©”ëª¨ë¦¬ê°€ ì§€ì†ì ìœ¼ë¡œ ì¦ê°€í•œë‹¤ê³  ì–¸ê¸‰í–ˆìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ ì €ëŠ” jvmì— ë¬¸ì œê°€ ìˆì„ ìˆ˜ ìˆê² ë‹¤ëŠ” ìƒê°ì´ ë“¤ì–´ ê´€ë ¨ ì§€í‘œë¥¼ í™•ì¸í•´ë³´ê² ìŠµë‹ˆë‹¤.&lt;br>
ì²˜ìŒì— ëˆˆì—¬ê²¨ ë´¤ë˜ ê²ƒì€ JVMì˜ committed ë©”ëª¨ë¦¬ ì–‘ì´ ì ì§„ì ìœ¼ë¡œ ì¦ê°€í•˜ê³  ìˆë‹¤ëŠ” ì ì´ì—ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>ğŸ˜‚ ì‚¬ì§„ì—ì„œëŠ” ì˜ ë³´ì´ì§€ ì•Šì§€ë§Œ ìì„¸íˆ ë³´ë©´ 1MBì”© ìƒìŠ¹í•˜ê³  ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/opsathlan-2-2/image-2.png"
width="393"
height="278"
srcset="https://s0okju.github.io/p/opsathlan-2-2/image-2_hu_18af394033c56b55.png 480w, https://s0okju.github.io/p/opsathlan-2-2/image-2_hu_7d2028e9a7d4acdf.png 1024w"
loading="lazy"
alt="JVM ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰"
class="gallery-image"
data-flex-grow="141"
data-flex-basis="339px"
>&lt;/p>
&lt;p>ìì„¸íˆ ì•Œì•„ë³´ê¸° ì „ì— heapê³¼ non-heap ë©”ëª¨ë¦¬ì— ëŒ€í•´ ì•Œì•„ë´…ì‹œë‹¤.&lt;/p>
&lt;ul>
&lt;li>Java Heap : Instanceì™€ ê°ì²´ê°€ ì €ì¥ë˜ëŠ” ê³µê°„ìœ¼ë¡œ ëª¨ë“  Threadì— ì˜í•´ ê³µìœ ë˜ëŠ” ì˜ì—­&lt;sup id="fnref:2">&lt;a href="#fn:2" class="footnote-ref" role="doc-noteref">2&lt;/a>&lt;/sup>&lt;/li>
&lt;li>Native Area(non-heap) : OSë ˆë²¨ì—ì„œ ê´€ë¦¬í•˜ëŠ” ì˜ì—­ìœ¼ë¡œ JVM í¬ê¸°ì— ê°•ì œë˜ì§€ ì•Šê¸° ë•Œë¬¸ì— &lt;strong>í”„ë¡œì„¸ìŠ¤ê°€ ì´ìš©í•  ìˆ˜ ìˆëŠ” ë©”ëª¨ë¦¬ ìì›ì„ ìµœëŒ€í•œ í™œìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/strong>&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://s0okju.github.io/p/opsathlan-2-2/image-3.png"
width="844"
height="250"
srcset="https://s0okju.github.io/p/opsathlan-2-2/image-3_hu_3aa78af60af0e37e.png 480w, https://s0okju.github.io/p/opsathlan-2-2/image-3_hu_263681960e80b037.png 1024w"
loading="lazy"
alt="ì¶œì²˜ :Â https://www.samsungsds.com/kr/insights/1232761_4627.html"
class="gallery-image"
data-flex-grow="337"
data-flex-basis="810px"
>&lt;/p>
&lt;p>ë‹¤ì‹œ ëŒì•„ì™€ ì œê°€ ìš´ì˜í•˜ê³  ìˆëŠ” ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ í™•ì¸í•´ ë³¼ê¹Œìš”.&lt;br>
ì •ë§ ê°„ë‹¨í•œ EchoControllerì™€ í”„ë¡œë©”í…Œìš°ìŠ¤ metric ìˆ˜ì§‘ì„ ìœ„í•œ MetricControllerê°€ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="line">&lt;span class="cl">&lt;span class="nd">@RestController&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="kd">public&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kd">class&lt;/span> &lt;span class="nc">EchoController&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nd">@GetMapping&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;/echo&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">public&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">String&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nf">echo&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">return&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;Hello, World!&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ë¹„êµì  ë‹¨ìˆœí•˜ê¸° ë•Œë¬¸ì— Heap ì˜ì—­ì˜ ë¬¸ì œëŠ” ì•„ë‹ˆë¼ê³  ìƒê°í–ˆìŠµë‹ˆë‹¤.&lt;br>
ê·¸ë˜ë„ JVM Heapë¥¼ í™•ì¸í•´ ë³´ê² ìŠµë‹ˆë‹¤. í™ ë©”ëª¨ë¦¬ì˜ ì‚¬ìš©ëŸ‰ì€ ë§¤ìš° ì ê²Œ ì‚¬ìš©ë˜ì—ˆê³ , ì•ˆì •ì ìœ¼ë¡œ ìœ ì§€ë˜ì—ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/opsathlan-2-2/image-4.png"
width="793"
height="464"
srcset="https://s0okju.github.io/p/opsathlan-2-2/image-4_hu_da43a9130de5bae4.png 480w, https://s0okju.github.io/p/opsathlan-2-2/image-4_hu_588eb2d140d0d865.png 1024w"
loading="lazy"
alt="JVM Heap Memory ì‚¬ìš©ëŸ‰"
class="gallery-image"
data-flex-grow="170"
data-flex-basis="410px"
>&lt;/p>
&lt;p>non-heap ì˜ì—­ì„ ë´ë´…ì‹œë‹¤.&lt;br>
ë³€í™”í­ì´ ì ì–´ì„œ ì°¨ì´ë¥¼ ëª¨ë¥´ê² ì§€ë§Œ ë©”ëª¨ë¦¬ê°€ ì‚¬ìš©ëŸ‰ì´ ì¡°ê¸ˆì”© ì¦ê°€í•˜ê³  ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/opsathlan-2-2/image-5.png"
width="475"
height="278"
srcset="https://s0okju.github.io/p/opsathlan-2-2/image-5_hu_80ffab263e3341fa.png 480w, https://s0okju.github.io/p/opsathlan-2-2/image-5_hu_3d49181a476e3d68.png 1024w"
loading="lazy"
alt="JVM Non-Heap Memory ì‚¬ìš©ëŸ‰"
class="gallery-image"
data-flex-grow="170"
data-flex-basis="410px"
>&lt;/p>
&lt;p>ìš°ì„  &lt;a class="link" href="https://ko.wikipedia.org/wiki/%ED%94%84%EB%A1%9C%ED%8C%8C%EC%9D%BC%EB%A7%81_%28%EC%BB%B4%ED%93%A8%ED%84%B0_%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D%29" target="_blank" rel="noopener"
>í”„ë¡œíŒŒì¼ë§&lt;/a>ì€ ë¬´ì—‡ì„ ì˜ë¯¸í• ê¹Œìš”. &lt;a class="link" href="https://hudi.blog/jvm-warm-up/" target="_blank" rel="noopener"
>hudi.blog: ìŠ¤í”„ë§ ì• í”Œë¦¬ì¼€ì´ì…˜ ë°°í¬ ì§í›„ ë°œìƒí•˜ëŠ” Latencyì˜ ì›ì¸ê³¼ ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•œ JVM Warm-up&lt;/a>ë¥¼ ì°¸ê³ í•˜ê² ìŠµë‹ˆë‹¤.&lt;/p>
&lt;blockquote>
&lt;p>&lt;strong>JIT ì»´íŒŒì¼ëŸ¬&lt;/strong>ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œÂ &lt;strong>ìì£¼ ì‹¤í–‰ëœë‹¤ê³  íŒë‹¨ë˜ëŠ” íŠ¹ì • ë¶€ë¶„ë§Œì„ ê¸°ê³„ì–´ë¡œ ì»´íŒŒì¼&lt;/strong>í•œë‹¤. ì´ ë¶€ë¶„ì„Â &lt;strong>í•«ìŠ¤íŒŸ(Hotspot)&lt;/strong> ì´ë¼ê³  ë¶€ë¥¸ë‹¤. JIT ì»´íŒŒì¼ëŸ¬ëŠ” ì‹¤í–‰ì¤‘ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë™ì‘ì„ ë¶„ì„í•˜ê³  ì½”ë“œ ì‹¤í–‰ íšŸìˆ˜, ë£¨í”„ ë°˜ë³µ íšŸìˆ˜, ë©”ì†Œë“œ í˜¸ì¶œ ë“±ì˜ ì •ë³´ë¥¼ ì¸¡ì •í•˜ê³  ê¸°ë¡í•œë‹¤. ì´ë¥¼Â &lt;strong>í”„ë¡œíŒŒì¼ë§&lt;/strong>ì´ë¼ê³  í•œë‹¤.&lt;br>
JIT ì»´íŒŒì¼ëŸ¬ëŠ” í”„ë¡œíŒŒì¼ë§ ê²°ê³¼ë¥¼ í† ëŒ€ë¡œ í•«ìŠ¤íŒŸì„ ì‹ë³„í•œë‹¤. í•«ìŠ¤íŒŸì´ ì‹ë³„ë˜ì—ˆë‹¤ë©´, JIT ì»´íŒŒì¼ëŸ¬ëŠ”Â &lt;strong>ë©”ì†Œë“œ ë‹¨ìœ„ë¡œ ë°”ì´íŠ¸ ì½”ë“œë¥¼ ê¸°ê³„ì–´ë¡œ ë²ˆì—­&lt;/strong>í•œë‹¤.
JIT ì»´íŒŒì¼ëŸ¬ëŠ” ì´ë ‡ê²Œ ë²ˆì—­ëœ ê¸°ê³„ì–´ë¥¼Â &lt;strong>ì½”ë“œ ìºì‹œ(Code Cache)&lt;/strong> ë¼ëŠ” ìºì‹œê³µê°„ì— ì €ì¥í•œë‹¤.&lt;/p>
&lt;p>ì¶œì²˜ - &lt;a class="link" href="https://hudi.blog/jvm-warm-up/" target="_blank" rel="noopener"
>https://hudi.blog/jvm-warm-up/&lt;/a>&lt;/p>&lt;/blockquote>
&lt;p>JITëŠ” ì „ì²´ ì½”ë“œë¥¼ ì»´íŒŒì¼ í•˜ëŠ” ê²ƒì´ ì•„ë‹Œ ìì£¼ ì‹¤í–‰ë˜ëŠ” ë¶€ë¶„ì—ë§Œ ì»´íŒŒì¼í•˜ë©° ì´ì— ëŒ€í•œ ë°ì´í„°ë¥¼ Code Cacheì— ì €ì¥í•˜ê²Œ ë©ë‹ˆë‹¤.&lt;/p>
&lt;p>Non Heapê³¼ ê´€ë ¨ëœ ì§€í‘œë¥¼ í™•ì¸í•´ë´…ì‹œë‹¤.&lt;br>
ì•„ë˜ì˜ ì„¸ ê°€ì§€ ì§€í‘œê°€ ë¯¸ì„¸í•˜ê²Œ ì¦ê°€í•˜ê³  ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;ul>
&lt;li>Metaspace : JVMì´ ë¡œë“œí•œ ë©”íƒ€ë°ì´í„°ë¥¼ ì €ì¥&lt;/li>
&lt;li>CodeHeap : JIT ì»´íŒŒì¼ëŸ¬ ê´€ë ¨ ì§€í‘œ
&lt;ul>
&lt;li>profiled nmethods&lt;/li>
&lt;li>non-profiled nmethods&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://s0okju.github.io/p/opsathlan-2-2/image-6.png"
width="1888"
height="303"
srcset="https://s0okju.github.io/p/opsathlan-2-2/image-6_hu_8ea4aaec242958a.png 480w, https://s0okju.github.io/p/opsathlan-2-2/image-6_hu_b5ce4ee5c73aea89.png 1024w"
loading="lazy"
alt="JVM Memory Pool(non-heap) ì§€í‘œ"
class="gallery-image"
data-flex-grow="623"
data-flex-basis="1495px"
>&lt;/p>
&lt;p>í•˜ì§€ë§Œ &lt;strong>ì¥ê¸°ì ì¸ ê´€ì ì—ì„œ ë°”ë¼ë´¤ì„ë•Œ ë©”ëª¨ë¦¬ ë‚­ë¹„ì¼ ìˆ˜ ìˆê² ë‹¤ëŠ” ìƒê°&lt;/strong>ì´ ë“¤ì—ˆìŠµë‹ˆë‹¤.&lt;br>
íŠ¹íˆ MetaspaceëŠ” JVM í¬ê¸°ì— ê°•ì œë˜ì§€ ì•Šê¸° ë•Œë¬¸ì— í”„ë¡œì„¸ìŠ¤ê°€ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ë©”ëª¨ë¦¬ ìì›ì„ ìµœëŒ€í•œ í™œìš©í•  ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤. ê·¸ëŸ¬ë¯€ë¡œ Metaspace ë©”ëª¨ë¦¬ë¥¼ ì œí•œí•˜ì—¬ ìš´ì˜í•  í•„ìš”ê°€ ìˆìŠµë‹ˆë‹¤.&lt;br>
ì´ëŸ¬í•œ ì„±ëŠ¥ ì œí•œì€ Metaspaceì—ë§Œ ì ìš©ë˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ë‹¤ë¥¸ ì˜ì—­ì—ì„œì˜ ë©”ëª¨ë¦¬ ì‚¬ì´ì¦ˆ ì œí•œì´ í•„ìš”í•©ë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/opsathlan-2-2/image-7.png"
width="1600"
height="922"
srcset="https://s0okju.github.io/p/opsathlan-2-2/image-7_hu_bde5af3f07961ba8.png 480w, https://s0okju.github.io/p/opsathlan-2-2/image-7_hu_62dab2ea9282642c.png 1024w"
loading="lazy"
alt="ì¶œì²˜ - https://cloud.theodo.com/en/blog/jvm-oom"
class="gallery-image"
data-flex-grow="173"
data-flex-basis="416px"
>&lt;/p>
&lt;p>ì•ˆì „í•˜ê²Œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ìš´ì˜í•˜ê¸° ìœ„í•´ì„œëŠ” ê° ë©”ëª¨ë¦¬ ì˜ì—­ì— ë§ëŠ” ìš”êµ¬ì‚¬í•­ì„ ê³ ë ¤í•˜ì—¬ ê²°ì •í•˜ëŠ” ê²ƒì´ ë°”ëŒì§í•©ë‹ˆë‹¤.&lt;/p>
&lt;blockquote>
&lt;p>Java ì–´í”Œë¦¬ì¼€ì´ì…˜ì€ í¬ê²Œ ìœ„ì˜ Heapê³¼ Off-Heap ë‘ ê³µê°„ì„ í™œìš©í•˜ì—¬ ë™ì‘í•˜ëŠ”ë°, ë”°ë¼ì„œ ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ë°°í¬í•  ë•Œ ë©”ëª¨ë¦¬ ëª‡ GBë¥¼ í• ë‹¹í•´ì•¼ í•˜ëŠ”ì§€ ê²°ì •í•˜ê¸° ìœ„í•´ì„œëŠ” ë‹¨ìˆœíˆ Xmx(Heap ë©”ëª¨ë¦¬ ìµœëŒ€ì¹˜ë¥¼ ê²°ì •í•˜ëŠ” Java ì˜µì…˜) ê°’ë§Œ ìƒê°í•˜ë©´ OOMEì— ë¹ ì§€ê¸° ì‰½ë‹¤. ì‹¤ì œë¡œëŠ” &lt;strong>Xmxì— MaxMetaspaceê°’ì„ ë”í•˜ê³ , ì¶”ê°€ë¡œ í”„ë¡œê·¸ë¨ì—ì„œ NIOë¥¼ ì‚¬ìš©í•´ Native Memoryë¥¼ ì§ì ‘ í• ë‹¹ë°›ëŠ” ë¡œì§ì„ ê³ ë ¤í•´ì„œ Heap + Native Memory ì‚¬ìš©ì´ëŸ‰ìœ¼ë¡œ í• ë‹¹ì„ í•´ì•¼ ë¹„êµì  ì •í™•&lt;/strong>í•˜ë‹¤. íŠ¹íˆ ì»¨í…Œì´ë„ˆì˜ ê²½ìš° ê³„ì‚°ì„ ì¢€ ë” ì •í™•í•˜ê²Œ í•´ì•¼ ì‹œìŠ¤í…œì—ì„œ OOM killedë˜ëŠ” ìƒí™©ì„ ë©´í•  ìˆ˜ ìˆë‹¤.&lt;/p>
&lt;p>ì¶œì²˜ - &lt;a class="link" href="https://www.samsungsds.com/kr/insights/1232761_4627.html" target="_blank" rel="noopener"
>https://www.samsungsds.com/kr/insights/1232761_4627.html&lt;/a>&lt;/p>&lt;/blockquote>
&lt;h2 id="ì •ë¦¬">ì •ë¦¬
&lt;/h2>&lt;p>ì‹¤ì œë¡œ ë°°í¬í•´ë³´ë©´ì„œ ì»¨í…Œì´ë„ˆì˜ ì§€ì†ì ì¸ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ì´ ì¦ê°€í•˜ëŠ” ê²ƒì— ì˜ë¬¸ì ì„ ê°€ì§€ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. ìë°” ì»¨í…Œì´ë„ˆì˜ ë©”ëª¨ë¦¬ ì‚¬ìš©ì€ JVMì´ ì»¨íŠ¸ë¡¤í•  ìˆ˜ ì—†ëŠ” ë¶€ë¶„ì´ ë§ì•„ ì¶”ì í•˜ê¸° ì–´ë µìŠµë‹ˆë‹¤&lt;sup id="fnref:3">&lt;a href="#fn:3" class="footnote-ref" role="doc-noteref">3&lt;/a>&lt;/sup>.&lt;br>
ê·¸ë˜ì„œ ìì„¸íˆ í™•ì¸í•  ìˆ˜ ìˆëŠ” JVM ìœ„ì£¼ë¡œ í™•ì¸í•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. non-heap ì˜ì—­ì´ ë¯¸ì„¸í•˜ê²Œ ìƒìŠ¹í•˜ê³  ìˆì—ˆê³ , ì´ëŠ” ì •ìƒì ì¸ ì§€í‘œë¼ê³  ìƒê°í–ˆìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ì¥ê¸°ì ìœ¼ë¡œëŠ” ë©”ëª¨ë¦¬ ë‚­ë¹„ê°€ ë  ìˆ˜ ìˆìœ¼ë¯€ë¡œ ë©”ëª¨ë¦¬ ì‚¬ì´ì¦ˆë¥¼ ì œí•œí•˜ì—¬ ìš´ì˜í•´ì•¼ í•©ë‹ˆë‹¤.&lt;/p>
&lt;h2 id="reference">Reference
&lt;/h2>&lt;ul>
&lt;li>&lt;a class="link" href="https://swmobenz.tistory.com/37" target="_blank" rel="noopener"
>https://swmobenz.tistory.com/37&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://hudi.blog/jvm-warm-up/" target="_blank" rel="noopener"
>https://hudi.blog/jvm-warm-up/&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://velog.io/@dongvelop/Spring-Boot-%EC%84%9C%EB%B2%84-%EB%AA%A8%EB%8B%88%ED%84%B0%EB%A7%81-%EB%8C%80%EC%8B%9C%EB%B3%B4%EB%93%9C%EB%B3%84-%EC%84%A4%EB%AA%85-%EB%B0%8F-%EC%9C%A0%EC%9D%98%EC%82%AC%ED%95%AD#codeheap-non-profiled-nmethods-non-heap" target="_blank" rel="noopener"
>https://velog.io/@dongvelop/Spring-Boot-%EC%84%9C%EB%B2%84-%EB%AA%A8%EB%8B%88%ED%84%B0%EB%A7%81-%EB%8C%80%EC%8B%9C%EB%B3%B4%EB%93%9C%EB%B3%84-%EC%84%A4%EB%AA%85-%EB%B0%8F-%EC%9C%A0%EC%9D%98%EC%82%AC%ED%95%AD#codeheap-non-profiled-nmethods-non-heap&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://www.samsungsds.com/kr/insights/1232761_4627.html" target="_blank" rel="noopener"
>https://www.samsungsds.com/kr/insights/1232761_4627.html&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://obv-cloud.com/41" target="_blank" rel="noopener"
>https://obv-cloud.com/41&lt;/a>&lt;/li>
&lt;/ul>
&lt;div class="footnotes" role="doc-endnotes">
&lt;hr>
&lt;ol>
&lt;li id="fn:1">
&lt;p>&lt;a class="link" href="https://swmobenz.tistory.com/37" target="_blank" rel="noopener"
>https://swmobenz.tistory.com/37&lt;/a>&amp;#160;&lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;li id="fn:2">
&lt;p>&lt;a class="link" href="https://12bme.tistory.com/382" target="_blank" rel="noopener"
>https://12bme.tistory.com/382&lt;/a>&amp;#160;&lt;a href="#fnref:2" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;li id="fn:3">
&lt;p>&lt;a class="link" href="https://stackoverflow.com/questions/53451103/java-using-much-more-memory-than-heap-size-or-size-correctly-docker-memory-limi" target="_blank" rel="noopener"
>https://stackoverflow.com/questions/53451103/java-using-much-more-memory-than-heap-size-or-size-correctly-docker-memory-limi&lt;/a>&amp;#160;&lt;a href="#fnref:3" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/div></description></item><item><title>OpsAthlan 2 - 1. Advanced echo server êµ¬ì¶•</title><link>https://s0okju.github.io/p/opsathlan-2-1/</link><pubDate>Thu, 26 Sep 2024 00:00:00 +0900</pubDate><guid>https://s0okju.github.io/p/opsathlan-2-1/</guid><description>&lt;h2 id="ì‹œë‚˜ë¦¬ì˜¤">ì‹œë‚˜ë¦¬ì˜¤
&lt;/h2>&lt;p>&lt;a class="link" href="https://s0okju.github.io/p/opsathlan-1/" target="_blank" rel="noopener"
>ì´ì „ê¸€&lt;/a> ì„ ë³´ë‹ˆ ìŠ¤í”„ë§ ì• í”Œë¦¬ì¼€ì´ì…˜ ì»¨í…Œì´ë„ˆì— ë¬¸ì œê°€ ìƒê¸´ ê²ƒ ê°™ë‹¤. spring boot ì• í”Œë¦¬ì¼€ì´ì…˜ì— ëŒ€í•œ ì§€í‘œë¥¼ ìˆ˜ì§‘í•  ìˆ˜ ìˆë„ë¡ í™˜ê²½ì„ êµ¬ì¶•í•´ë³´ì.&lt;/p>
&lt;h3 id="í™˜ê²½">í™˜ê²½
&lt;/h3>&lt;ul>
&lt;li>Ubuntu 22.04&lt;/li>
&lt;li>Openstack 2024.1&lt;/li>
&lt;/ul>
&lt;h3 id="ì „ì²´-êµ¬ìƒë„">ì „ì²´ êµ¬ìƒë„
&lt;/h3>&lt;p>ì•„ë˜ì™€ ê°™ì´ êµ¬ìƒë©ë‹ˆë‹¤. cAdvisorë¥¼ ì„¤ì •í•œ ì´ìœ ëŠ” ì»¨í…Œì´ë„ˆ ê´€ë ¨ ë©”íŠ¸ë¦­ì„ ìˆ˜ì§‘í•˜ê¸° ìœ„í•´ ì„¤ì •í–ˆìŠµë‹ˆë‹¤.
docker-composeë¥¼ í†µí•´ ì»¨í…Œì´ë„ˆë¥¼ ë°°í¬í–ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/opsathlan-2-1/image.png"
width="810"
height="750"
srcset="https://s0okju.github.io/p/opsathlan-2-1/image_hu_ad21e66785afcdf9.png 480w, https://s0okju.github.io/p/opsathlan-2-1/image_hu_984a11c238db3a47.png 1024w"
loading="lazy"
alt="ì‚¬ì§„ - OpsAthlan 2 êµ¬ì„±ë„"
class="gallery-image"
data-flex-grow="108"
data-flex-basis="259px"
>&lt;/p>
&lt;blockquote>
&lt;p>ì¿ ë²„ë„¤í‹°ìŠ¤ëŠ” ì»¨í…Œì´ë„ˆë“¤ì˜ ë¦¬ì†ŒìŠ¤ ì§€í‘œë¥¼ ì œê³µí•˜ê¸° ìœ„í•´ cAdvisorë¥¼ ê¸°ë³¸ì ìœ¼ë¡œ ì œê³µí•©ë‹ˆë‹¤.&lt;sup id="fnref:1">&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref">1&lt;/a>&lt;/sup>&lt;/p>&lt;/blockquote>
&lt;h3 id="ì ˆì°¨">ì ˆì°¨
&lt;/h3>&lt;ol>
&lt;li>Terraform, Ansibleë¥¼ í™œìš©í•œ í™˜ê²½ êµ¬ì„±&lt;/li>
&lt;li>í”„ë¡œë©”í…Œìš°ìŠ¤ë¥¼ í™œìš©í•œ ì§€í‘œ ìˆ˜ì§‘&lt;/li>
&lt;li>ê·¸ë¼íŒŒë‚˜ ì‹œê°í™”&lt;/li>
&lt;/ol>
&lt;h2 id="í™˜ê²½-êµ¬ì„±">í™˜ê²½ êµ¬ì„±
&lt;/h2>&lt;p>í´ë¼ìš°ë“œ ë¦¬ì†ŒìŠ¤ì˜ êµ¬ì„± ìì²´ëŠ” &lt;a class="link" href="https://s0okju.github.io/p/opsathlan-1/" target="_blank" rel="noopener"
>ì´ì „&lt;/a>ê³¼ ë³€í™”í•˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.&lt;/p>
&lt;h3 id="docker-compose">docker compose
&lt;/h3>&lt;p>ë‹¤ë§Œ í™˜ê²½ êµ¬ì„±ì€ ë³€í–ˆìŠµë‹ˆë‹¤. ê°œë³„ ì»¨í…Œì´ë„ˆë¡œ ë°°í¬í•˜ëŠ” ê²ƒì´ ì•„ë‹Œ docker-composeë¥¼ í†µí•´ ê´€ë ¨ ì»¨í…Œì´ë„ˆë¥¼ ë°°í¬í–ˆìŠµë‹ˆë‹¤. ê·¸ ì´ìœ ëŠ” ì»¨í…Œì´ë„ˆì˜ ê°œìˆ˜ê°€ ë§ì•„ì§ì— ë”°ë¼ ì»¨í…Œì´ë„ˆë¥¼ í° ë¬¶ìŒìœ¼ë¡œ ê´€ë¦¬í•˜ê¸° ìœ„í•´ì„œì…ë‹ˆë‹¤.&lt;/p>
&lt;p>ì´ 4ê°œì˜ ì»¨í…Œì´ë„ˆë¥¼ ë°°í¬í•˜ê²Œ ë©ë‹ˆë‹¤&lt;/p>
&lt;ul>
&lt;li>Prometheus&lt;/li>
&lt;li>Grafana&lt;/li>
&lt;li>Springboot application&lt;/li>
&lt;li>cAdvisor&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yml" data-lang="yml">&lt;span class="line">&lt;span class="cl">&lt;span class="c"># docker-compose.yml&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">version&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;3.7&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">services&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># Prometheus service&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">prometheus&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">prom/prometheus:latest&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">container_name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">prometheus&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">volumes&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">./prometheus/prometheus.yml:/etc/prometheus/prometheus.yml&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;9090:9090&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># Expose Prometheus web UI&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">networks&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">monitoring&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># Grafana service&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">grafana&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">grafana/grafana:latest&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">container_name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">grafana&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;3000:3000&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># Expose Grafana web UI&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">networks&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">monitoring&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">depends_on&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">prometheus&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># Spring Boot app service&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">advanced-echo&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">opsathlan-advanced-echo:latest&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">container_name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">opsathlan-advanced-echo&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;8080:8080&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">networks&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">monitoring&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># cadvsior config&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">cadvisor&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">container_name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">cadvisor&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">gcr.io/cadvisor/cadvisor:latest&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;8081:8080&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">volumes&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;/:/rootfs:ro&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;/var/run:/var/run:ro&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;/sys:/sys:ro&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;/var/lib/docker/:/var/lib/docker:ro&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># docker container log&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">networks&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">monitoring&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">networks&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">monitoring&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">driver&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">bridge&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="í”„ë¡œë©”í…Œìš°ìŠ¤">í”„ë¡œë©”í…Œìš°ìŠ¤
&lt;/h3>&lt;p>í”„ë¡œë©”í…Œìš°ìŠ¤ê°€ ìˆ˜ì§‘í•œ ë©”íŠ¸ë¦­ ì§€í‘œëŠ” springboot container ê´€ë ¨ ì§€í‘œì™€ ì»¨í…Œì´ë„ˆ ê´€ë ¨ ì§€í‘œì…ë‹ˆë‹¤. ê·¸ë˜ì„œ &lt;code>scrape_configs&lt;/code> targetì— ê´€ë ¨ ì»¨í…Œì´ë„ˆ URLë¥¼ ê¸°ì…í•˜ê²Œ ë©ë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yml" data-lang="yml">&lt;span class="line">&lt;span class="cl">&lt;span class="c"># prometheus.yml&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">global&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">scrape_interval&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">10s&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># How often to scrape targets&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">scrape_configs&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">job_name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;opsathlan-advanced-echo&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">static_configs&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">targets&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;opsathlan-advanced-echo:8080&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;cadvisor:8080&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">labels&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">group&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;test&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="docker-composeë¥¼-ì‹¤í–‰í•˜ëŠ”-ansible-playbook">docker composeë¥¼ ì‹¤í–‰í•˜ëŠ” Ansible playbook
&lt;/h3>&lt;p>novaì—ì„œ docker-composeë¥¼ ì‹¤í–‰ì‹œí‚¤ê¸° ìœ„í•´ì„œëŠ” &lt;strong>ê´€ë ¨ ë°”ì´ë„ˆë¦¬ë¥¼ ì„¤ì¹˜&lt;/strong>í•˜ê³ , &lt;strong>í•„ìš”í•œ í™˜ê²½ íŒŒì¼ì„ ì¸ìŠ¤í„´ìŠ¤ì— ë³µì‚¬&lt;/strong>í•˜ëŠ” ì‘ì—…ì´ í•„ìš”í•©ë‹ˆë‹¤. &lt;a class="link" href="https://github.com/S0okJu/OpsAthlan/tree/sc/2/scenario_02/ansible/docker-compose" target="_blank" rel="noopener"
>docker-compose ë¼ëŠ” ansible role&lt;/a>ë¥¼ ë§Œë“¤ì–´ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€ë¥¼ ë¹Œë“œí•˜ê³ , docker composeë¥¼ ì‹¤í–‰ì‹œí‚¤ëŠ” í…ŒìŠ¤í¬ë¥¼ ì¶”ê°€í–ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>ê°œì¸ì ìœ¼ë¡œ ì‘ì—…í•œ &lt;a class="link" href="https://github.com/S0okJu/OpsAthlan/tree/sc/2/scenario_02/ansible/docker-installation" target="_blank" rel="noopener"
>ë„ì»¤ ì„¤ì¹˜ ansible-role&lt;/a> ë¥¼ í™•ì¸í•´ë³´ë©´ docker ì„¤ì¹˜í• ë•Œ &lt;code>docker-compose plugin&lt;/code>ë¥¼ ì„¤ì¹˜í•˜ê²Œ ë©ë‹ˆë‹¤. ê·¸ë˜ì„œ ë³„ë„ì˜ ì„¤ì¹˜ ì—†ì´ &lt;code>docker compose&lt;/code> ëª…ë ¹ì–´ ë§Œìœ¼ë¡œë„ docker-compose íŒŒì¼ì„ ì‹¤í–‰ì‹œí‚¬ ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yml" data-lang="yml">&lt;span class="line">&lt;span class="cl">- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Update apt cache&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">apt&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">update_cache&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">yes&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Install Docker Engine, CLI, containerd, and plugins&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">apt&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">docker-ce&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">docker-ce-cli&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">containerd.io&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">docker-buildx-plugin&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">docker-compose-plugin&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">state&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">present&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>í”„ë¡œë©”í…Œìš°ìŠ¤ë¥¼ ì‹¤í–‰ì‹œí‚¤ê¸° ìœ„í•´ì„œëŠ” config íŒŒì¼ì„ nova ì¸ìŠ¤í„´ìŠ¤ì— ì§ì ‘ ì €ì¥í•´ì•¼ í•˜ëŠ” ì‘ì—…ì´ í•„ìš”í•©ë‹ˆë‹¤. &lt;code>docker-compose.yml&lt;/code> ë¥¼ ë‹¤ì‹œ í™•ì¸í•´ë³´ë©´ local volumeì´ &lt;code>./prometheus/prometheus.yml&lt;/code> ë¡œ ë˜ì–´ ìˆìŠµë‹ˆë‹¤. íŒŒì¼ ê²½ë¡œëŠ” nova ì¸ìŠ¤í„´ìŠ¤ì˜ íŒŒì¼ ê²½ë¡œë¡œ í•´ë‹¹ íŒŒì¼ ê²½ë¡œì— ë§ê²Œ ì„¤ì • íŒŒì¼(prometheus.yml)ë¥¼ ì €ì¥í•´ì•¼ í•©ë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yml" data-lang="yml">&lt;span class="line">&lt;span class="cl">&lt;span class="c"># docker-compose.yml&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">services&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># Prometheus service&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">prometheus&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">prom/prometheus:latest&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">container_name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">prometheus&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">volumes&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">./prometheus/prometheus.yml:/etc/prometheus/prometheus.yml&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;9090:9090&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># Expose Prometheus web UI&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">networks&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">monitoring&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>prometheusì˜ í´ë”ë¥¼ ë§Œë“  í›„ì— ë³µì‚¬í•˜ëŠ” ì‘ì—…ì„ í•˜ë©´ íŒŒì¼ì´ ì €ì¥ë©ë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yml" data-lang="yml">&lt;span class="line">&lt;span class="cl">- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Create Prometheus configuration directory&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">file&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">path&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;/home/ubuntu/prometheus&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">state&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">directory&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">owner&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;ubuntu&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">group&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;ubuntu&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">mode&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;0755&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Copy Prometheus config file&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">copy&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">src&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">./prometheus.yml&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">dest&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">/home/ubuntu/prometheus/prometheus.yml&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">owner&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;ubuntu&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">group&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;ubuntu&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">mode&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;0644&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>docker compose ëª…ë ¹ì–´ë¥¼ ìˆ˜í–‰í•˜ë©´ docker-compose íŒŒì¼ì— ì •ì˜ëœ ì»¨í…Œì´ë„ˆë“¤ì„ ì‹¤í–‰ì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yml" data-lang="yml">&lt;span class="line">&lt;span class="cl">- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Copy docker-compose.yml to the target machine&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">copy&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">src&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">./docker-compose.yml&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">dest&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">/home/ubuntu/docker-compose.yml&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># Destination on the target machine&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">owner&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;ubuntu&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">group&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;ubuntu&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">mode&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;0644&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Run docker-compose up to start containers&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">command&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">docker compose up -d&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">args&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">chdir&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">/home/ubuntu/&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">become&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="í”„ë¡œë©”í…Œìš°ìŠ¤ë¥¼-í™œìš©í•œ-ì§€í‘œ-ìˆ˜ì§‘">í”„ë¡œë©”í…Œìš°ìŠ¤ë¥¼ í™œìš©í•œ ì§€í‘œ ìˆ˜ì§‘
&lt;/h2>&lt;p>ë©”íŠ¸ë¦­ ìˆ˜ì§‘, ì‹œê°í™”, ì•Œë¦¼, ì„œë¹„ìŠ¤ ë””ìŠ¤ì»¤ë²„ë¦¬ ê¸°ëŠ¥ì„ ëª¨ë‘ ì œê³µí•˜ëŠ” ì˜¤í”ˆ ì†ŒìŠ¤ ëª¨ë‹ˆí„°ë§ ì‹œìŠ¤í…œì…ë‹ˆë‹¤. Pull ë°©ì‹ìœ¼ë¡œ ë©”íŠ¸ë¦­ì„ ìˆ˜ì§‘í•˜ê³  ì‹œê³„ì—´ ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥í•˜ëŠ” íŠ¹ì§•ì„ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/opsathlan-2-1/image-1.png"
width="1042"
height="745"
srcset="https://s0okju.github.io/p/opsathlan-2-1/image-1_hu_41053c1b5000d2e1.png 480w, https://s0okju.github.io/p/opsathlan-2-1/image-1_hu_316dad82b9ca44a2.png 1024w"
loading="lazy"
alt="ì¶œì²˜ - https://www.geeksforgeeks.org/prometheus-monitoring/"
class="gallery-image"
data-flex-grow="139"
data-flex-basis="335px"
>&lt;/p>
&lt;p>pull ë°©ì‹ì€ í”„ë¡œë©”í…Œìš°ìŠ¤ê°€ í•„ìš”í•œ ë©”íŠ¸ë¦­ ì§€í‘œë¥¼ ëŒ€ìƒ ì„œë²„ë¡œë¶€í„° ê°€ì ¸ì˜¨ë‹¤ëŠ” ê²ƒê³¼ ê°™ì€ ë§ì…ë‹ˆë‹¤. ê·¸ë˜ì„œ ëŒ€ìƒì´ ë˜ëŠ” ì„œë²„ëŠ” í”„ë¡œë©”í…Œìš°ìŠ¤ê°€ ë©”íŠ¸ë¦­ì„ ë°›ì•„ê°ˆ ìˆ˜ ìˆë„ë¡ endpointë¥¼ ì—´ì–´ë‘¬ì•¼ í•©ë‹ˆë‹¤.&lt;/p>
&lt;p>ë³´í†µì˜ ë°©ì‹ì´ë¼ë©´ spring boot actuatorë¥¼ í™œìš©í•˜ì—¬ &lt;code>/actuator/metrics&lt;/code> ì—”ë“œí¬ì¸íŠ¸ë¥¼ ì—¬ëŠ” ë°©ë²•ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-properties" data-lang="properties">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># application.properties&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">management.endpoints.web.exposure.include&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">prometheus,metrics&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">management.endpoint.prometheus.enabled&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">management.prometheus.metrics.export.enabled&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">true&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ìœ„ì™€ ê°™ì€ ë°©ì‹ì„ ì‚¬ìš©í•˜ê²Œ ë˜ë©´ EOF ì˜¤ë¥˜ê°€ ë°œìƒí•´ í”„ë¡œë©”í…Œìš°ìŠ¤ê°€ ì •ìƒì ìœ¼ë¡œ ì§€í‘œë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ì—ˆìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ headerë¥¼ &lt;code>TEXT_PLAIN&lt;/code>ìœ¼ë¡œ ì§€ì •í•´ì£¼ëŠ” controllerë¥¼ ìƒì„±í–ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nn">io.micrometer.prometheusmetrics.PrometheusMeterRegistry&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nd">@RestController&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nd">@RequiredArgsConstructor&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="kd">public&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kd">class&lt;/span> &lt;span class="nc">MetricsController&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">private&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kd">final&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">PrometheusMeterRegistry&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">prometheusMeterRegistry&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nd">@GetMapping&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;/metrics&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">public&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">ResponseEntity&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">String&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nf">metrics&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">String&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">scrape&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">prometheusMeterRegistry&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">scrape&lt;/span>&lt;span class="p">();&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">HttpHeaders&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">headers&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">new&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">HttpHeaders&lt;/span>&lt;span class="p">();&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">headers&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">setContentType&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">MediaType&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">TEXT_PLAIN&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">return&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">new&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">ResponseEntity&lt;/span>&lt;span class="o">&amp;lt;&amp;gt;&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">scrape&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">headers&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">HttpStatus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">OK&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>springboot actuator
ìŠ¤í”„ë§ë¶€íŠ¸ ì• í”Œë¦¬ì¼€ì´ì…˜ ëª¨ë‹ˆí„°ë§ê³¼ ê´€ë¦¬ì— í•„ìš”í•œ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤.&lt;/p>&lt;/blockquote>
&lt;p>9090 í¬íŠ¸ì— ì ‘ì†í•´ í”„ë¡œë©”í…Œìš°ìŠ¤ web uië¥¼ ë³´ë©´ ìŠ¤í”„ë§ë¶€íŠ¸ ì• í”Œë¦¬ì¼€ì´ì…˜ê³¼ cAdvisor ì§€í‘œê°€ ì •ìƒì ìœ¼ë¡œ í†µì‹ ë¨ì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/opsathlan-2-1/image-2.png"
width="1447"
height="245"
srcset="https://s0okju.github.io/p/opsathlan-2-1/image-2_hu_ec8ddf7d8eb4e121.png 480w, https://s0okju.github.io/p/opsathlan-2-1/image-2_hu_2bfc4c1f6f167ed5.png 1024w"
loading="lazy"
alt="ì‚¬ì§„ - í”„ë¡œë©”í…Œìš°ìŠ¤ UIì—ì„œ í™•ì¸í•œ Target"
class="gallery-image"
data-flex-grow="590"
data-flex-basis="1417px"
>&lt;/p>
&lt;h2 id="ê·¸ë¼íŒŒë‚˜ë¥¼-í†µí•œ-ì‹œê°í™”">ê·¸ë¼íŒŒë‚˜ë¥¼ í†µí•œ ì‹œê°í™”
&lt;/h2>&lt;h3 id="cadvisor-ì§€í‘œ-ì‹œê°í™”">cAdvisor ì§€í‘œ ì‹œê°í™”
&lt;/h3>&lt;p>ê·¸ë¼íŒŒë‚˜ì—ì„œ containerì˜ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ì„ í™•ì¸í•´ë´…ë‹ˆë‹¤. ë©”ëª¨ë¦¬ ë‹¨ìœ„ë¡œ í™•ì¸í•˜ê¸° ìœ„í•´ 1024ë¥¼ ë‘ë²ˆ ë‚˜ëˆ´ìŠµë‹ˆë‹¤.&lt;/p>
&lt;blockquote>
&lt;p>ê´€ë ¨ ì§€í‘œëŠ” &lt;a class="link" href="https://github.com/google/cadvisor/blob/master/docs/storage/prometheus.md" target="_blank" rel="noopener"
>cadvisor Github&lt;/a>ë¥¼ ì°¸ê³ í•˜ê¸¸ ë°”ëë‹ˆë‹¤.&lt;/p>&lt;/blockquote>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-promql" data-lang="promql">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">container_memory_usage_bytes&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="nl">name&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">&amp;#34;&lt;/span>&lt;span class="s">instance_name&lt;/span>&lt;span class="p">&amp;#34;}&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1024&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1024&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ì•„ë˜ì˜ ê·¸ë˜í”„ë¥¼ ë³´ë©´ ê³„ì† ìƒìŠ¹í•˜ê³  ìˆëŠ” ê·¸ë˜í”„ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/opsathlan-2-1/image-3.png"
width="1204"
height="670"
srcset="https://s0okju.github.io/p/opsathlan-2-1/image-3_hu_f5dd534c3d025bd8.png 480w, https://s0okju.github.io/p/opsathlan-2-1/image-3_hu_de1b884a5834c99d.png 1024w"
loading="lazy"
alt="ì‚¬ì§„ - ì»¨í…Œì´ë„ˆ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ì‹œê°í™”"
class="gallery-image"
data-flex-grow="179"
data-flex-basis="431px"
>&lt;/p>
&lt;h3 id="ìŠ¤í”„ë§-ì• í”Œë¦¬ì¼€ì´ì…˜-ê´€ë ¨-ì§€í‘œ-ì‹œê°í™”">ìŠ¤í”„ë§ ì• í”Œë¦¬ì¼€ì´ì…˜ ê´€ë ¨ ì§€í‘œ ì‹œê°í™”
&lt;/h3>&lt;p>ì €ëŠ” &lt;a class="link" href="https://grafana.com/grafana/dashboards/4701-jvm-micrometer/" target="_blank" rel="noopener"
>GrafanaLabsì—ì„œ ì œê³µí•´ì£¼ëŠ” JVM ëŒ€ì‹œë³´ë“œ&lt;/a>ë¥¼ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤. dashboard ipë¥¼ ì„¤ì •í•˜ë©´ ë‹¤ì–‘í•œ ê·¸ë˜í”„ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>ì•„ë˜ì˜ ì‚¬ì§„ì€ ì¼ë¶€ë§Œ ë‚˜íƒ€ë‚¸ ê²ƒì´ë©° ì´ê²ƒ ì´ì™¸ì—ë„ ë‹¤ì–‘í•œ ì§€í‘œê°€ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/opsathlan-2-1/image-4.png"
width="794"
height="270"
srcset="https://s0okju.github.io/p/opsathlan-2-1/image-4_hu_34f8309885b1faf7.png 480w, https://s0okju.github.io/p/opsathlan-2-1/image-4_hu_475e1ab500e73524.png 1024w"
loading="lazy"
alt="ì‚¬ì§„ - ê·¸ë¼íŒŒë‚˜ì—ì„œ í™•ì¸í•œ ê·¸ë˜í”„(ì¼ë¶€)"
class="gallery-image"
data-flex-grow="294"
data-flex-basis="705px"
>&lt;/p>
&lt;h2 id="ë‹¤ìŒê¸€">ë‹¤ìŒê¸€
&lt;/h2>&lt;p>ì§€ê¸ˆê¹Œì§€ ëª¨ë‹ˆí„°ë§í•  ìˆ˜ ìˆëŠ” í™˜ê²½ì„ êµ¬ì¶•í–ˆìŠµë‹ˆë‹¤. ë‹¤ìŒí¸ì—ëŠ” ì‹œê°í™”í•œ í‘œë¥¼ ë¶„ì„í•´ë³´ëŠ” ì‹œê°„ì„ ê°€ì§€ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.&lt;/p>
&lt;div class="footnotes" role="doc-endnotes">
&lt;hr>
&lt;ol>
&lt;li id="fn:1">
&lt;p>&lt;a class="link" href="https://themapisto.tistory.com/44" target="_blank" rel="noopener"
>https://themapisto.tistory.com/44&lt;/a>&amp;#160;&lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/div></description></item><item><title>OpsAthlan 1 - Simple echo server</title><link>https://s0okju.github.io/p/opsathlan-1/</link><pubDate>Thu, 19 Sep 2024 00:00:00 +0900</pubDate><guid>https://s0okju.github.io/p/opsathlan-1/</guid><description>&lt;h2 id="ì‹œë‚˜ë¦¬ì˜¤">ì‹œë‚˜ë¦¬ì˜¤
&lt;/h2>&lt;p>Hello Worldë¥¼ ë°˜í™˜í•´ì£¼ëŠ” springboot ë„ì»¤ ì„œë¹„ìŠ¤ê°€ ìˆë‹¤. ë°°í¬í•´ë³´ì!&lt;/p>
&lt;h2 id="í™˜ê²½">í™˜ê²½
&lt;/h2>&lt;ul>
&lt;li>ubuntu 22.04&lt;/li>
&lt;li>openstack 2024.01&lt;/li>
&lt;/ul>
&lt;h2 id="ìˆœì„œ">ìˆœì„œ
&lt;/h2>&lt;ol>
&lt;li>Terraformì„ í™œìš©í•œ ì¸í”„ë¼ êµ¬ì„±&lt;/li>
&lt;li>Ansibleë¥¼ í™œìš©í•œ í™˜ê²½ êµ¬ì„± ë° ë¹Œë“œ&lt;/li>
&lt;li>cAdvisorë¥¼ í™œìš©í•œ ëª¨ë‹ˆí„°ë§&lt;/li>
&lt;/ol>
&lt;h3 id="cadvisorë¥¼-ì„ íƒí•œ-ì´ìœ ">cAdvisorë¥¼ ì„ íƒí•œ ì´ìœ 
&lt;/h3>&lt;p>cAdvsiorëŠ” ì»¨í…Œì´ë„ˆì˜ Metrixë¥¼ ëª¨ë‹ˆí„°ë§í•  ìˆ˜ ìˆëŠ” ë„êµ¬ì…ë‹ˆë‹¤. &lt;strong>ê¸°ë³¸ì ì¸ ì»¨í…Œì´ë„ˆ ë©”íŠ¸ë¦­ ì •ë³´ë¥¼ ìš°ì„  í™•ì¸&lt;/strong>í•˜ê¸° ìœ„í•´ ì„ íƒí•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;h2 id="ì „ì²´-êµ¬ì„±ë„">ì „ì²´ êµ¬ì„±ë„
&lt;/h2>&lt;p>&lt;img src="https://s0okju.github.io/p/opsathlan-1/image.png"
width="1110"
height="750"
srcset="https://s0okju.github.io/p/opsathlan-1/image_hu_5fa145ba6b0316be.png 480w, https://s0okju.github.io/p/opsathlan-1/image_hu_85b134d47a92c584.png 1024w"
loading="lazy"
alt="êµ¬ì„±ë„"
class="gallery-image"
data-flex-grow="148"
data-flex-basis="355px"
>&lt;/p>
&lt;h2 id="terraformì„-í™œìš©í•œ-ë¦¬ì†ŒìŠ¤-ë°°í¬">Terraformì„ í™œìš©í•œ ë¦¬ì†ŒìŠ¤ ë°°í¬
&lt;/h2>&lt;p>ë°°í¬í•´ì•¼ í•  ê²ƒì€ ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤.&lt;/p>
&lt;ul>
&lt;li>Nova Instance&lt;/li>
&lt;li>Network
&lt;ul>
&lt;li>Subnet&lt;/li>
&lt;li>Router&lt;/li>
&lt;li>Floating ip&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Security
&lt;ul>
&lt;li>Security Group
&lt;ul>
&lt;li>ssh, spring web port(8080), cAdvisor(8081)ë¥¼ ìœ„í•œ rule ìƒì„±&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>ssh í†µì‹ ì„ ìœ„í•œ keypair&lt;/li>
&lt;/ul>
&lt;h3 id="terraform-code">Terraform code
&lt;/h3>&lt;p>terraformì€ ì ˆì°¨ ì§€í–¥ì ì´ê¸° ë•Œë¬¸ì— ë¦¬ì†ŒìŠ¤ ì‘ì„± ìˆœì„œê°€ ì¤‘ìš”í•©ë‹ˆë‹¤.ê·¸ë˜ì„œ ê°„ë‹¨í•œ nova ì¸ìŠ¤í„´ìŠ¤ ë°°í¬ì˜ ê²½ìš° ì•„ë˜ì™€ ê°™ì€ ìˆœì„œë¥¼ ë”°ëìŠµë‹ˆë‹¤.&lt;/p>
&lt;ol>
&lt;li>ë„¤íŠ¸ì›Œí¬&lt;/li>
&lt;li>ì¸ìŠ¤í„´ìŠ¤ ìƒì„±&lt;/li>
&lt;li>floating ip í• ë‹¹&lt;/li>
&lt;/ol>
&lt;blockquote>
&lt;p>ì „ì²´ ì½”ë“œëŠ” &lt;a class="link" href="https://github.com/S0okJu/OpsAthlan/tree/sc/1/scenario_01/terraform" target="_blank" rel="noopener"
>ê¹ƒí—ˆë¸Œ&lt;/a>ë¥¼ ì°¸ê³ í•˜ê¸¸ ë°”ëë‹ˆë‹¤.&lt;/p>&lt;/blockquote>
&lt;p>ë„¤íŠ¸ì›Œí¬ë¥¼ ìƒì„±í•œ ì´í›„ subnetë¥¼ ìƒì„±í•œë‹¤. ì™¸ë¶€ì™€ í†µì‹ í•˜ê¸° ìœ„í•´ì„œëŠ” external_networkì™€ ì„œë¸Œë„·ê³¼ì˜ ì—°ê²°ì´ í•„ìš”í•©ë‹ˆë‹¤. ê·¸ëŸ¬ë¯€ë¡œ &lt;code>router&lt;/code>ë¥¼ ìƒì„±í•œ í›„ &lt;code>router_interface&lt;/code>ë¥¼ í†µí•´ external_networkì™€ ì„œë¸Œë„·ì´ ì—°ê²°í•˜ê²Œ ë©ë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-tf" data-lang="tf">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Network ìƒì„±
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kr">resource&lt;/span> &lt;span class="s2">&amp;#34;openstack_networking_network_v2&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;opsathlan_network&amp;#34;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">name&lt;/span> = &lt;span class="s2">&amp;#34;opsathlan-&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nb">var&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">scenario_id&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">-network&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">admin_state_up&lt;/span> = &lt;span class="kc">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">port_security_enabled&lt;/span> = &lt;span class="nb">var&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">port_security_enabled&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>&lt;span class="c1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Subnet ìƒì„±
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kr">resource&lt;/span> &lt;span class="s2">&amp;#34;openstack_networking_subnet_v2&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;opsathlan_subnet&amp;#34;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">name&lt;/span> = &lt;span class="s2">&amp;#34;opsathlan-&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nb">var&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">scenario_id&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">-subnet&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">network_id&lt;/span> = &lt;span class="nx">openstack_networking_network_v2&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">opsathlan_network&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">id&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">cidr&lt;/span> = &lt;span class="nb">var&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">subnet_cidr&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">ip_version&lt;/span> = &lt;span class="m">4&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">dns_nameservers&lt;/span> = &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;8.8.8.8&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;8.8.4.4&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>&lt;span class="c1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Router ìƒì„±
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kr">resource&lt;/span> &lt;span class="s2">&amp;#34;openstack_networking_router_v2&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;opsathlan_router&amp;#34;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">name&lt;/span> = &lt;span class="s2">&amp;#34;opsathlan-&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nb">var&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">scenario_id&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">-router&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">admin_state_up&lt;/span> = &lt;span class="kc">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">external_network_id&lt;/span> = &lt;span class="nb">data&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">openstack_networking_network_v2&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">ext_network&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">id&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>&lt;span class="c1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Router Interface ìƒì„±
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kr">resource&lt;/span> &lt;span class="s2">&amp;#34;openstack_networking_router_interface_v2&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;router_interface&amp;#34;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">router_id&lt;/span> = &lt;span class="nx">openstack_networking_router_v2&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">opsathlan_router&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">id&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">subnet_id&lt;/span> = &lt;span class="nx">openstack_networking_subnet_v2&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">opsathlan_subnet&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">id&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="ì¸ìŠ¤í„´ìŠ¤-ìƒì„±">ì¸ìŠ¤í„´ìŠ¤ ìƒì„±
&lt;/h3>&lt;p>ì¸ìŠ¤í„´ìŠ¤ì— ì ‘ê·¼í•˜ëŠ”ë° ì‚¬ìš©ë˜ëŠ” keypairë¥¼ ìƒì„±í•©ë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Keypair ìƒì„±&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">resource&lt;/span> &lt;span class="s2">&amp;#34;openstack_compute_keypair_v2&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;opsathlan_keypair&amp;#34;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;opsathlan-${var.scenario_id}-keypair&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">public_key&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">file&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">pubkey_file_path&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Nova ì¸ìŠ¤í„´ìŠ¤ì˜ ì ‘ê·¼ ì œì–´ë¥¼ ê´€ë¦¬í•˜ëŠ” Security groupë¥¼ ì„¤ì •í•©ë‹ˆë‹¤. security group ruleì€ &lt;code>variables.tf&lt;/code> ì—ì„œ ë¦¬ìŠ¤íŠ¸ë¡œ ë°›ì€ í›„ì— ì ìš©í•  ìˆ˜ ìˆë„ë¡ êµ¬ì„±í•©ë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Security Group ìƒì„±&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">resource&lt;/span> &lt;span class="s2">&amp;#34;openstack_networking_secgroup_v2&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;opsathlan_secgroup&amp;#34;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;opsathlan-${var.scenario_id}-secgroup&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">description&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;OpsAthaln Security Group&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">delete_default_rules&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="bp">false&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Security Group Rule ìƒì„±&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">resource&lt;/span> &lt;span class="s2">&amp;#34;openstack_networking_secgroup_rule_v2&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;secgroup_rules&amp;#34;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">count&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">length&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">allowed_ports&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">direction&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;ingress&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ethertype&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;IPv4&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">protocol&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">lookup&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">allowed_ports&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">count&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">index&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="s2">&amp;#34;protocol&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;tcp&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">port_range_min&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">lookup&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">allowed_ports&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">count&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">index&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="s2">&amp;#34;port_range_min&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">port_range_max&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">lookup&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">allowed_ports&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">count&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">index&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="s2">&amp;#34;port_range_max&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">remote_ip_prefix&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">lookup&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">allowed_ports&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">count&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">index&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="s2">&amp;#34;remote_ip_prefix&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;0.0.0.0/0&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">security_group_id&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">openstack_networking_secgroup_v2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">opsathlan_secgroup&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">id&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>variables.tf&lt;/code> ì—ì„œëŠ” ì™¸ë¶€ì—ì„œ ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” í¬íŠ¸ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.&lt;/p>
&lt;ul>
&lt;li>ssh&lt;/li>
&lt;li>spring boot application(8080)&lt;/li>
&lt;li>cAdvisor(8081)&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="o">//&lt;/span> &lt;span class="n">variables&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">tf&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">variable&lt;/span> &lt;span class="s2">&amp;#34;allowed_ports&amp;#34;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">description&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;List of maps defining allowed ports for the security group. Each map should include protocol, port_range_min, port_range_max, and optionally remote_ip_prefix.&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">type&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">list&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">object&lt;/span>&lt;span class="p">({&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">protocol&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">port_range_min&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">number&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">port_range_max&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">number&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">remote_ip_prefix&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">optional&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">string&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;0.0.0.0/0&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">default&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">protocol&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;tcp&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">port_range_min&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">22&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">port_range_max&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">22&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">protocol&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;tcp&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">port_range_min&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">8080&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">port_range_max&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">8080&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">protocol&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;tcp&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">port_range_min&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">8081&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">port_range_max&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">8081&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="floating-ip-í• ë‹¹-ë°-ì„¤ì •">Floating ip í• ë‹¹ ë° ì„¤ì •
&lt;/h3>&lt;p>floating ipë¥¼ ìƒì„±í•œ í›„ì— nova instanceì— ë¶™í™ë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 5. Floating IP ìƒì„± ë° ì—°ê²°&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">resource&lt;/span> &lt;span class="s2">&amp;#34;openstack_networking_floatingip_v2&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;floating_ip&amp;#34;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">pool&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">data&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">openstack_networking_network_v2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ext_network&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">name&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 4. Nova Instance ìƒì„±&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">resource&lt;/span> &lt;span class="s2">&amp;#34;openstack_compute_instance_v2&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;nova_instance&amp;#34;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;opsathlan-${var.scenario_id}-instance&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">image_name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">var&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">image_name&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">flavor_name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">var&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">flavor_name&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">key_pair&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">openstack_compute_keypair_v2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">opsathlan_keypair&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">name&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">security_groups&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">openstack_networking_secgroup_v2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">opsathlan_secgroup&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">name&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">network&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">uuid&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">openstack_networking_network_v2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">opsathlan_network&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">id&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">depends_on&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">openstack_networking_subnet_v2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">opsathlan_subnet&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">resource&lt;/span> &lt;span class="s2">&amp;#34;openstack_compute_floatingip_associate_v2&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;floating_ip_association&amp;#34;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">floating_ip&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">openstack_networking_floatingip_v2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">floating_ip&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">address&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">instance_id&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">openstack_compute_instance_v2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">nova_instance&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">id&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="ansibleë¥¼-í™œìš©í•œ-í™˜ê²½-êµ¬ì„±-ë°-ì»¨í…Œì´ë„ˆ-ì‹¤í–‰">Ansibleë¥¼ í™œìš©í•œ í™˜ê²½ êµ¬ì„± ë° ì»¨í…Œì´ë„ˆ ì‹¤í–‰
&lt;/h2>&lt;p>Ansibleë¥¼ í™œìš©í•˜ì—¬ &lt;strong>ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€ë¥¼ ë¹Œë“œí•˜ê³  ì‹¤í–‰ì‹œí‚¬ ìˆ˜ ìˆëŠ” í™˜ê²½ì„ êµ¬ì„±&lt;/strong>í•´ì•¼ í•©ë‹ˆë‹¤. ê·¸ë˜ì„œ ì´ 4ê°œì˜ roleë¥¼ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;ul>
&lt;li>java ì„¤ì¹˜&lt;/li>
&lt;li>docker ì„¤ì¹˜&lt;/li>
&lt;li>springboot ì´ë¯¸ì§€ ë¹Œë“œ ë° ìˆ˜í–‰&lt;/li>
&lt;li>cAdvisor ì‹¤í–‰&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;p>ğŸ¤” &lt;strong>ì—¬ë‹´&lt;/strong>&lt;/p>
&lt;p>Jenkinsì™€ ê°™ì´ ìë™í™” ë„êµ¬ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆì§€ë§Œ ì´ˆë°˜ì—ëŠ” ë¶ˆí•„ìš”í•˜ë‹¤ê³  ìƒê°í–ˆìŠµë‹ˆë‹¤. ë°°í¬í•˜ê³ ì í•˜ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ê·œëª¨ëŠ” í˜„ì €í•˜ê²Œ ì‘ì•˜ê³ , ë‚œì´ë„ê°€ ìˆì–´ ì˜ëª»í•˜ë©´ ì˜ˆìƒë³´ë‹¤ ì‹œê°„ì„ ë§ì´ í• ì• í•  ìˆ˜ ìˆë‹¤ê³  íŒë‹¨í–ˆìŠµë‹ˆë‹¤.&lt;/p>&lt;/blockquote>
&lt;h3 id="spring-boot-application-ë°°í¬">spring boot application ë°°í¬
&lt;/h3>&lt;h4 id="application-ì†Œê°œ">application ì†Œê°œ
&lt;/h4>&lt;p>ë°°í¬ ì• í”Œë¦¬ì¼€ì´ì…˜ì€ ê°„ë‹¨í•˜ê²Œ hello worldë§Œ ë°˜í™˜í•˜ëŠ” ì›¹ ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="line">&lt;span class="cl">&lt;span class="nd">@RestController&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="kd">public&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kd">class&lt;/span> &lt;span class="nc">EchoController&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nd">@GetMapping&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;/echo&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">public&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">String&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nf">echo&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">return&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;Hello, World!&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="ë¹Œë“œ-ë°-ì‹¤í–‰">ë¹Œë“œ ë° ì‹¤í–‰
&lt;/h4>&lt;p>Ansibleë¥¼ í™œìš©í•˜ì—¬ spring boot application ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤. ì´ë•Œ ì»¨í…Œì´ë„ˆëŠ” 8080 ì™¸ë¶€ í¬íŠ¸ë¡œ ì—´ì–´ë‘¡ë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;strong>ìˆœì„œ&lt;/strong>&lt;/p>
&lt;ol>
&lt;li>Repository clone&lt;/li>
&lt;li>Spring boot application build&lt;/li>
&lt;li>Container Image build&lt;/li>
&lt;li>Docker ì‹¤í–‰&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yml" data-lang="yml">&lt;span class="line">&lt;span class="cl">&lt;span class="nn">---&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Clone Spring Boot application repository&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">git&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">repo&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;https://github.com/S0okJu/OpsAthlan.git&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">dest&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">/home/ubuntu/app/spring-boot-app&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">version&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">sc/1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Build Spring Boot application using Gradle&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">command&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">./gradlew clean build&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">args&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">chdir&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">/home/ubuntu/app/spring-boot-app/scenario_01/spring_echo&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">register&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">gradle_build&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">failed_when&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">gradle_build.rc != 0&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Check if JAR file exists&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">stat&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">path&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">/home/ubuntu/app/spring-boot-app/scenario_01/spring_echo/build/libs/&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">register&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">jar_dir&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Fail if JAR file does not exist&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">fail&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">msg&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;JAR file was not built successfully.&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">when&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">jar_dir.stat.exists == False or jar_dir.stat.isdir == False&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Copy Dockerfile for Spring Boot&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">copy&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">src&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Dockerfile&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">dest&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">/home/ubuntu/app/spring-boot-app/scenario_01/spring_echo/Dockerfile&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Build Docker image for Spring Boot application&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">docker_image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">echo-springboot-app&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">tag&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">latest&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">source&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">build&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">build&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">path&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">/home/ubuntu/app/spring-boot-app/scenario_01/spring_echo&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Run Spring Boot container&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">docker_container&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">sc1-springboot-app&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">echo-springboot-app:latest&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">state&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">started&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;8080:8080&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ìì„¸í•œ ì½”ë“œëŠ” &lt;a class="link" href="https://github.com/S0okJu/OpsAthlan/tree/sc/1/scenario_01/ansible" target="_blank" rel="noopener"
>github&lt;/a> ì°¸ê³  ë°”ëë‹ˆë‹¤.&lt;/p>
&lt;h3 id="cadvisor">cAdvisor
&lt;/h3>&lt;p>cAdvisorëŠ” ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€ë¥¼ ë‹¤ìš´ë°›ê³  ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆë„ë¡ êµ¬ì„±í•©ë‹ˆë‹¤. ì»¨í…Œì´ë„ˆëŠ” 8081ë¡œ ì™¸ë¶€í¬íŠ¸ë¥¼ ì—´ì–´ ê°œë°œìê°€ ëŒ€ì‹œë³´ë“œë¥¼ í™•ì¸í•  ìˆ˜ ìˆë„ë¡ ì„¤ì •í•©ë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yml" data-lang="yml">&lt;span class="line">&lt;span class="cl">&lt;span class="nn">---&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Pull cAdvisor image&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">docker_image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">google/cadvisor:latest&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">source&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">pull&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Run cAdvisor container&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">docker_container&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">cadvisor&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">google/cadvisor:latest&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">state&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">started&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;8081:8080&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">volumes&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;/:/rootfs:ro&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;/var/run:/var/run:ro&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;/sys:/sys:ro&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;/var/lib/docker/:/var/lib/docker:ro&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="ì»¨í…Œì´ë„ˆ-ì§€í‘œ-ëª¨ë‹ˆí„°ë§">ì»¨í…Œì´ë„ˆ ì§€í‘œ ëª¨ë‹ˆí„°ë§
&lt;/h2>&lt;h3 id="cadvisor-ì ‘ì†">cAdvisor ì ‘ì†
&lt;/h3>&lt;p>{floating_ip}:8081ì— ì ‘ì†í•©ë‹ˆë‹¤.
container ì°½ì— ë“¤ì–´ê°€ springboot applicationì„ í™•ì¸í•©ë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/opsathlan-1/image-1.png"
width="1121"
height="383"
srcset="https://s0okju.github.io/p/opsathlan-1/image-1_hu_e0d6f86c77e75558.png 480w, https://s0okju.github.io/p/opsathlan-1/image-1_hu_87efe80569411306.png 1024w"
loading="lazy"
alt="cAdvisor ì ‘ì†"
class="gallery-image"
data-flex-grow="292"
data-flex-basis="702px"
> &lt;img src="https://s0okju.github.io/p/opsathlan-1/image-2.png"
width="945"
height="277"
srcset="https://s0okju.github.io/p/opsathlan-1/image-2_hu_a3ec52c0fe72fa75.png 480w, https://s0okju.github.io/p/opsathlan-1/image-2_hu_6fc748575390485b.png 1024w"
loading="lazy"
alt="cAdvisorì—ì„œ í™•ì¸í•œ ì»¨í…Œì´ë„ˆ ëª©ë¡"
class="gallery-image"
data-flex-grow="341"
data-flex-basis="818px"
>&lt;/p>
&lt;p>springboot applicationì— ëŒ€í•œ ê¸°ë³¸ì ì¸ ì§€í‘œë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/opsathlan-1/image-3.png"
width="1096"
height="389"
srcset="https://s0okju.github.io/p/opsathlan-1/image-3_hu_69ef7a997f587bc7.png 480w, https://s0okju.github.io/p/opsathlan-1/image-3_hu_51496bad0560d51f.png 1024w"
loading="lazy"
alt="cAdvisorì—ì„œ í™•ì¸í•œ ë©”íŠ¸ë¦­"
class="gallery-image"
data-flex-grow="281"
data-flex-basis="676px"
>&lt;/p>
&lt;h3 id="test">Test
&lt;/h3>&lt;p>ìì²´ì ìœ¼ë¡œ ë§Œë“  test ë„êµ¬ì¸ &lt;a class="link" href="https://github.com/S0okJu/GoNetWorker" target="_blank" rel="noopener"
>gonetworker&lt;/a>ë¥¼ í™œìš©í•˜ê² ìŠµë‹ˆë‹¤.&lt;/p>
&lt;blockquote>
&lt;p>&lt;strong>GoNetWorker&lt;/strong>&lt;/p>
&lt;p>ìì²´ì ìœ¼ë¡œ ë§Œë“  ë„¤íŠ¸ì›Œí¬ í…ŒìŠ¤íŠ¸ ë„êµ¬ì…ë‹ˆë‹¤. ì„œë²„ì— requestë¥¼ ì—°ì†ì—ì„œ ìš”ì²­í•œë‹¤ëŠ” íŠ¹ì§•ì´ ìˆìŠµë‹ˆë‹¤.&lt;/p>&lt;/blockquote>
&lt;p>ë¸”ë¡œê·¸ ì‘ì„± ê¸°ì¤€ GoNetWorkerëŠ” ë™ì‹œë¡œ ì „ì†¡í•˜ëŠ” ê¸°ëŠ¥ì´ ì—†ì–´ &lt;strong>ìˆœì°¨ì ìœ¼ë¡œ requestë¥¼ ìš”ì²­&lt;/strong>í•©ë‹ˆë‹¤. request ìš”ì²­ ì´í›„ ë¬´ì‘ìœ„ë¡œ sleepí•©ë‹ˆë‹¤. ì—°ì†ì ìœ¼ë¡œ ë¦¬ì†ŒìŠ¤ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šì„ ê²ƒì´ë¼ê³  ì˜ˆìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;h4 id="network">Network
&lt;/h4>&lt;p>ë„¤íŠ¸ì›Œí¬ ì²˜ë¦¬ìœ¨ì„ ë³´ë©´ ì²˜ë¦¬ê°€ ë˜ì—ˆë‹¤ê°€ 0byteë¡œ ë–¨ì–´ì¡Œë‹¤ê°€ ë‹¤ì‹œ ìƒìŠ¹í•©ë‹ˆë‹¤. ì´ëŠ” ì €í¬ê°€ ì‚¬ìš©í•œ ë„êµ¬ì¸ GoNetWorkerì˜ íŠ¹ì§• ë•Œë¬¸ì— ë°œìƒí•œ ê·¸ë˜í”„ì…ë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/opsathlan-1/image-4.png"
width="665"
height="330"
srcset="https://s0okju.github.io/p/opsathlan-1/image-4_hu_fd6fbbaa30b660af.png 480w, https://s0okju.github.io/p/opsathlan-1/image-4_hu_7ce75c807bae32b0.png 1024w"
loading="lazy"
alt="Springboot application bytes per second"
class="gallery-image"
data-flex-grow="201"
data-flex-basis="483px"
>&lt;/p>
&lt;p>ê·¸ ì´ì™¸ì—ë„ ì•„ë˜ì™€ ê°™ì€ íŠ¹ì§•ì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;ul>
&lt;li>í‰ê· ì ìœ¼ë¡œ 1200bytesë¥¼ ë„˜ì–´ê°€ì§€ ì•ŠëŠ”ë‹¤.&lt;/li>
&lt;/ul>
&lt;h4 id="memory">Memory
&lt;/h4>&lt;p>ê·¸ì— ë¹„í•´ memoryëŠ” ì ì§„ì ìœ¼ë¡œ ìƒìŠ¹í•˜ëŠ” ê·¸ë˜í”„ë¥¼ ë³´ì—¬ì£¼ê³  ìˆìŠµë‹ˆë‹¤. ê·¸ë˜í”„ë¥¼ ë³´ë‹ˆ &lt;strong>ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ë¶ˆí•„ìš”í•œ ë©”ëª¨ë¦¬ ìì›ì„ ë‚­ë¹„í•œë‹¤&lt;/strong>ê³  ìƒê°í–ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/opsathlan-1/image-5.png"
width="685"
height="394"
srcset="https://s0okju.github.io/p/opsathlan-1/image-5_hu_1e07337cdd1a2258.png 480w, https://s0okju.github.io/p/opsathlan-1/image-5_hu_6369399b43d196dd.png 1024w"
loading="lazy"
alt="Springboot applicationì˜ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰"
class="gallery-image"
data-flex-grow="173"
data-flex-basis="417px"
>&lt;/p>
&lt;p>ì›ì¸ì„ êµ¬ì²´ì ìœ¼ë¡œ íŒŒì•…í•˜ê¸° ìœ„í•´ì„œëŠ” springbootì— ëŒ€í•œ ë©”íŠ¸ë¦­ì´ í•„ìš”í•©ë‹ˆë‹¤. cAdvisor ë§Œìœ¼ë¡œëŠ” ì •êµí•œ ë©”íŠ¸ë¦­ ìˆ˜ì§‘ì— í•œê³„ê°€ ìˆìœ¼ë¯€ë¡œ í”„ë¡œë©”í…Œìš°ìŠ¤ë¥¼ í™œìš©í•´ì•¼ í•  ê²ƒ ê°™ìŠµë‹ˆë‹¤.&lt;/p>
&lt;h2 id="ë‹¤ìŒí¸ì—ëŠ”-">ë‹¤ìŒí¸ì—ëŠ” &amp;hellip;
&lt;/h2>&lt;p>ë‹¤ìŒ í¸ì—ëŠ” í”„ë¡œë©”í…Œìš°ìŠ¤ë¥¼ í™œìš©í•˜ì—¬ springboot ê´€ë ¨ ë©”íŠ¸ë¦­ìŠ¤ë¥¼ ìˆ˜ì§‘í•˜ê³  ë¬¸ì œë¥¼ í•´ê²°í•´ ë³´ê² ìŠµë‹ˆë‹¤.&lt;/p></description></item><item><title>Openstack - Kubesprayë¥¼ í™œìš©í•œ Kubernetes ì„¤ì¹˜ ì‹œ Ansible ì˜¤ë¥˜</title><link>https://s0okju.github.io/p/openstack-kubernetes-installation-2/</link><pubDate>Sat, 17 Aug 2024 00:00:00 +0900</pubDate><guid>https://s0okju.github.io/p/openstack-kubernetes-installation-2/</guid><description>&lt;p>Kubernetes ì„¤ì¹˜ëŠ” &lt;a class="link" href="https://velog.io/@jaehan/Openstack-%EA%B8%B0%EB%B0%98-Kubernets-%EA%B5%AC%EC%B6%95-with-Kubespray" target="_blank" rel="noopener"
>ë³€ì¬í•œë‹˜ì˜ ë¸”ë¡œê·¸&lt;/a>ë¥¼ ì°¸ê³ í–ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;h2 id="ansible-ping-ë¬¸ì œ">Ansible Ping ë¬¸ì œ
&lt;/h2>&lt;p>Ansible Ping ìˆ˜í–‰ ì‹œ ëª¨ë“  ë…¸ë“œì— ì•„ë˜ì™€ ê°™ì€ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆë‹¤. ì—ëŸ¬ ë©”ì„¸ì§€ë¥¼ í™•ì¸í•´ë³´ë‹ˆ ssh í‚¤ê°€ ì œëŒ€ë¡œ ì ìš©ë˜ì§€ ì•Šì€ ê²ƒì²˜ëŸ¼ ë³´ì˜€ë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">Kubernetes-k8s-node-nf-2 | UNREACHABLE! =&amp;gt; {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;changed&amp;#34;: false,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;msg&amp;#34;: &amp;#34;Data could not be sent to remote host \&amp;#34;10.0.2.176\&amp;#34;. Make sure this host can be reached over ssh: kex_exchange_identification: Connection closed by remote host\r\nConnection closed by UNKNOWN port 65535\r\n&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;unreachable&amp;#34;: true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>Ansibleì€ sshë¥¼ í™œìš©í•˜ì—¬ target ë…¸ë“œì™€ í†µì‹ í•œë‹¤.&lt;/p>&lt;/blockquote>
&lt;h3 id="í•´ê²°ì±…-1-ê³µê°œí‚¤-ì•Œê³ ë¦¬ì¦˜-ë³€ê²½">í•´ê²°ì±… 1. ê³µê°œí‚¤ ì•Œê³ ë¦¬ì¦˜ ë³€ê²½
&lt;/h3>&lt;p>openstack logë¥¼ í™•ì¸í•´ë³´ë‹ˆ debian imageì— ê³µê°œí‚¤ê°€ authorized_keysì— ì œëŒ€ë¡œ ë³µì‚¬ë˜ì§€ ì•Šì•„ ssh í†µì‹ ì„ ì œëŒ€ë¡œ ìˆ˜í–‰í•˜ì§€ ëª»í•œ ê²ƒì´ì—ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/openstack-kubernetes-installation-2/img1.png"
width="608"
height="123"
srcset="https://s0okju.github.io/p/openstack-kubernetes-installation-2/img1_hu_e5807834ed8d4fd4.png 480w, https://s0okju.github.io/p/openstack-kubernetes-installation-2/img1_hu_27f00a1ffa2a1250.png 1024w"
loading="lazy"
alt="publickeyê°€ ì œëŒ€ë¡œ ë³µì‚¬ë˜ì§€ ì•Šì€ ê²½ìš° instance log"
class="gallery-image"
data-flex-grow="494"
data-flex-basis="1186px"
>&lt;/p>
&lt;p>ssh í‚¤ë¥¼ ed25519 ì•Œê³ ë¦¬ì¦˜ìœ¼ë¡œ ìƒì„±í•˜ë©´ í‚¤ê°€ ì œëŒ€ë¡œ ë³µì‚¬ë˜ì§€ ì•Šì•˜ì§€ë§Œ rsaë¡œ ë³€ê²½í•˜ë©´ ì•„ë˜ì™€ ê°™ì´ í‚¤ê°€ ë³µì‚¬ëœë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/openstack-kubernetes-installation-2/img2.png"
width="1135"
height="149"
srcset="https://s0okju.github.io/p/openstack-kubernetes-installation-2/img2_hu_9d69f1ff65c3dfe3.png 480w, https://s0okju.github.io/p/openstack-kubernetes-installation-2/img2_hu_75d3c555cf79e835.png 1024w"
loading="lazy"
alt="publickeyê°€ ì œëŒ€ë¡œ ë³€ê²½ëœ ëª¨ìŠµ"
class="gallery-image"
data-flex-grow="761"
data-flex-basis="1828px"
>&lt;/p>
&lt;blockquote>
&lt;p>ë³´ì•ˆì„ ê³ ë ¤í•˜ë©´ rsaë³´ë‹¤ëŠ” ed25519 ì•Œê³ ë¦¬ì¦˜ì´ ê¶Œì¥ëœë‹¤.&lt;sup id="fnref:1">&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref">1&lt;/a>&lt;/sup>&lt;/p>&lt;/blockquote>
&lt;p>ë‹¤ì‹œ pingì„ ìˆ˜í–‰í•˜ë©´ ì œëŒ€ë¡œ ìˆ˜í–‰ëœë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/openstack-kubernetes-installation-2/img3.png"
width="831"
height="784"
srcset="https://s0okju.github.io/p/openstack-kubernetes-installation-2/img3_hu_4089e898ba9ca705.png 480w, https://s0okju.github.io/p/openstack-kubernetes-installation-2/img3_hu_d20a18dc5b158690.png 1024w"
loading="lazy"
alt="Ansible ping ì„±ê³µ"
class="gallery-image"
data-flex-grow="105"
data-flex-basis="254px"
>&lt;/p>
&lt;h3 id="í•´ê²°ì±…-2-ssh-agent-ì‹¤í–‰">í•´ê²°ì±… 2. ssh-agent ì‹¤í–‰
&lt;/h3>&lt;p>ë§Œì•½ì— ì›ê²©ìœ¼ë¡œ openstack ì„œë²„ì— ì ‘ì†í•œë‹¤ê³  ê°€ì •í•´ë³´ì. ì‚¬ìš©ìë¥¼ ë³€ê²½í•˜ê±°ë‚˜ ì„¸ì…˜ì„ í•œë²ˆ ëŠê²Œ ë˜ë©´ ë™ì¼í•œ ì´ìœ ë¡œ ë¬¸ì œê°€ ìƒê¸´ë‹¤.&lt;/p>
&lt;p>ìš°ì„  ìš°ë¦¬ê°€ ì´ˆê¸°ì— ansibleë¥¼ ì„¸íŒ…í•  ë•Œ ssh-agentë¥¼ ì‹¤í–‰í•˜ê³  private keyë¥¼ ì¶”ê°€í•˜ëŠ” ì‘ì—…ì„ í•œë‹¤. ssh-agentëŠ” ssh-add ëª…ë ¹ì–´ë¥¼ í™œìš©í•˜ì—¬ í‚¤ë¥¼ ê¸°ì–µí•˜ê³  ì‚¬ìš©í•˜ê²Œ ëœë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"># ë°±ê·¸ë¼ìš´ë“œì— agent ì‹¤í–‰
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">eval &amp;#34;$(ssh-agent -s)&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># í‚¤ ì¶”ê°€
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ssh-add ~/.ssh/id_rsa
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ssh-agentëŠ” í”„ë¡œì„¸ìŠ¤ë¡œì¨ ì‘ë™ë¼ ì¤‘ê°„ì— sshê°€ ì¤‘ë‹¨ë˜ë”ë¼ë„ í”„ë¡œì„¸ìŠ¤ê°€ ë‚¨ì•„ìˆë‹¤. ê·¸ëŸ¬ë¯€ë¡œ &lt;strong>í˜„ì¬ ì‚¬ìš©ì(stack)ê°€ ì‹¤í–‰ì‹œí‚¨ í”„ë¡œì„¸ìŠ¤ë¥¼ ë¨¼ì € ì—†ì• ê³  ssh-agentë¥¼ ì‹¤í–‰ì‹œí‚¤ë„ë¡ êµ¬í˜„&lt;/strong>í•˜ë©´ ëœë‹¤.&lt;/p>
&lt;p>openstackì€ stack ì‚¬ìš©ìê°€ ê´€ë¦¬í•œë‹¤. stack ì‚¬ìš©ìì˜ &lt;code>~/.bashrc&lt;/code> ì— ssh-agentë¥¼ ì¶”ê°€í•˜ì—¬ stack ì‚¬ìš©ìë¡œ ë¡œê·¸ì¸ ì„±ê³µí• ë•Œë§ˆë‹¤ ì‹¤í–‰í•  ìˆ˜ ìˆë„ë¡ í•œë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Ansible ssh agent&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">## Delete used ssh-agent&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="o">[&lt;/span> -f ~/scripts/delete_ssh_agent.sh &lt;span class="o">]&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> . ~/scripts/delete_ssh_agent.sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">## Create new ssh-agent&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">eval&lt;/span> &lt;span class="k">$(&lt;/span>ssh-agent -s&lt;span class="k">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ssh-add ~/.ssh/id_rsa.kubespray
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>delete_ssh_agent.sh&lt;/code> ì€ openstackì„ ê´€ë¦¬í•˜ëŠ” ì‚¬ìš©ì(stack)ê°€ ê°€ì§€ê³  ìˆëŠ” ssh-agentë¥¼ ì‚­ì œí•˜ëŠ” ìŠ¤í¬ë¦½íŠ¸ì´ë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#!/bin/bash
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Get all PIDs of ssh-agent processes owned by the user &amp;#39;stack&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">pids&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="k">$(&lt;/span>pgrep -u stack ssh-agent&lt;span class="k">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Check if any PIDs were found&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="o">[&lt;/span> -z &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$pids&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="o">]&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;No ssh-agent processes found for user &amp;#39;stack&amp;#39;.&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">exit&lt;/span> &lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">else&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># Loop through each PID and attempt to kill the process&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> pid in &lt;span class="nv">$pids&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">do&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;Killing ssh-agent process with PID &lt;/span>&lt;span class="nv">$pid&lt;/span>&lt;span class="s2">...&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">kill&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$pid&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> sleep &lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># Check if the process was successfully killed&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> pgrep -u stack -x ssh-agent &amp;gt; /dev/null&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;Failed to kill process with PID &lt;/span>&lt;span class="nv">$pid&lt;/span>&lt;span class="s2">. You may need to use sudo.&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;Successfully killed process with PID &lt;/span>&lt;span class="nv">$pid&lt;/span>&lt;span class="s2">.&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">done&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">fi&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ìƒˆë¡­ê²Œ ì ‘ì†í•˜ë©´ ì•„ë˜ì™€ ê°™ì´ ì •ìƒì ìœ¼ë¡œ ì‹¤í–‰ë˜ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/openstack-kubernetes-installation-2/img7.png"
width="610"
height="92"
srcset="https://s0okju.github.io/p/openstack-kubernetes-installation-2/img7_hu_a8b640fef4c16e5c.png 480w, https://s0okju.github.io/p/openstack-kubernetes-installation-2/img7_hu_4358267c652fdfaa.png 1024w"
loading="lazy"
alt="stack login ì„±ê³µ"
class="gallery-image"
data-flex-grow="663"
data-flex-basis="1591px"
>&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/openstack-kubernetes-installation-2/img8.png"
width="723"
height="67"
srcset="https://s0okju.github.io/p/openstack-kubernetes-installation-2/img8_hu_549a8973f9ecfad9.png 480w, https://s0okju.github.io/p/openstack-kubernetes-installation-2/img8_hu_a7ace842a3dc952f.png 1024w"
loading="lazy"
alt="ssh-agent í”„ë¡œì„¸ìŠ¤ í™•ì¸"
class="gallery-image"
data-flex-grow="1079"
data-flex-basis="2589px"
>&lt;/p>
&lt;blockquote>
&lt;p>ì´ ë°©ì‹ì€ ë‹¨ì¼ ì‚¬ìš©ìë§Œ ê´€ë¦¬í•œë‹¤ëŠ” ê°€ì •í•˜ì—ì„œ ë§Œë“  í•´ê²°ì±…ì´ë‹¤.&lt;/p>&lt;/blockquote>
&lt;h2 id="nameserver-ë¬¸ì œ">Nameserver ë¬¸ì œ
&lt;/h2>&lt;p>playbookë¥¼ ë°°í¬í•´ë³´ì.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">ansible-playbook --become -i inventory/test-cluster/hosts cluster.yml
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>nameserverë¡œ ì¸í•´ ë¬¸ì œê°€ ë°œìƒí–ˆë‹¤. ë³´í†µ ì´ëŸ° ë¬¸ì œëŠ” nameserverì˜ ì„¤ì •ì´ ì˜ëª»ëœ ê²½ìš°ì— ë°œìƒë˜ë©° ì•ˆì „í•œ google dns(8.8.8.8, 8.8.4.4)ë¡œ ì„¤ì •í•˜ë©´ í•´ê²°ëœë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"> &amp;#34;msg&amp;#34;: &amp;#34;E: Failed to fetch http://security.debian.org/debian-security/pool/updates/main/p/python-apt/python-apt-common_1.8.4.3_all.deb Temporary failure resolving &amp;#39;deb.debian.org&amp;#39;\nE: Failed to fetch http://security.debian.org/debian-security/pool/updates/main/p/python-apt/python3-apt_1.8.4.3_amd64.deb Temporary failure resolving &amp;#39;deb.debian.org&amp;#39;\nE: Unable to fetch some archives, maybe run apt-get update or try with --fix-missing?&amp;#34;,
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="í•´ê²°ì±…-1-resolvconf-ìˆ˜ì •ì˜ëª»ëœ-ì ‘ê·¼">í•´ê²°ì±… 1. resolv.conf ìˆ˜ì •(ì˜ëª»ëœ ì ‘ê·¼)
&lt;/h3>&lt;p>DNSë¥¼ ì„¤ì •í•˜ëŠ” &lt;code>resolv.conf&lt;/code> ë¥¼ í™•ì¸í•´ë³´ë©´ 127.0.0.53ë¡œ ì„¤ì •ë˜ì–´ ìˆë‹¤. ì•ˆì „í•˜ê²Œ google dns ì„œë²„ë¡œ ë³€ê²½í•´ë³´ì&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"># Dynamic resolv.conf(5) file for glibc resolver(3) generated by resolvconf(8)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># DO NOT EDIT THIS FILE BY HAND -- YOUR CHANGES WILL BE OVERWRITTEN
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nameserver 127.0.0.53
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ì‹¤ì œë¡œëŠ” &lt;strong>ìš°ë¦¬ê°€ ì§ì ‘ ë³€ê²½í•˜ë©´ ì•ˆëœë‹¤.&lt;/strong>&lt;/p>
&lt;blockquote>
&lt;p>DO NOT EDIT THIS FILE BY HAND &amp;ndash; YOUR CHANGES WILL BE OVERWRITTEN&lt;/p>&lt;/blockquote>
&lt;p>resolv.confì€ /run í´ë” ë‚´ì— ì‹¬ë³¼ë§ ë§í¬ê°€ ë˜ì–´ ìˆê¸° ë•Œë¬¸ì— ë§ˆìŒëŒ€ë¡œ ìˆ˜ì •í•˜ëŠ” ê²ƒì€ ê¶Œì¥í•˜ì§€ ì•ŠëŠ”ë‹¤.&lt;sup id="fnref:2">&lt;a href="#fn:2" class="footnote-ref" role="doc-noteref">2&lt;/a>&lt;/sup>&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/openstack-kubernetes-installation-2/img4.png"
width="945"
height="89"
srcset="https://s0okju.github.io/p/openstack-kubernetes-installation-2/img4_hu_73ed2070f1e893e9.png 480w, https://s0okju.github.io/p/openstack-kubernetes-installation-2/img4_hu_e21ab95a89f6dc6f.png 1024w"
loading="lazy"
alt="resolv.conf ì‹¬ë³¼ë¦­ ë§í¬"
class="gallery-image"
data-flex-grow="1061"
data-flex-basis="2548px"
>&lt;/p>
&lt;p>ì‹¤ì œë¡œ &lt;a class="link" href="https://libguestfs.org/virt-customize.1.html" target="_blank" rel="noopener"
>virt-customize&lt;/a> ë¥¼ í™œìš©í•´ì„œ resolv.confë¥¼ ìˆ˜ì •í•˜ëŠ” ì´ë¯¸ì§€ë¥¼ ë³„ë„ë¡œ ë§Œë“¤ì—ˆì§€ë§Œ ì˜ë¯¸ê°€ ì—†ì—ˆë‹¤.&lt;/p>
&lt;h3 id="í•´ê²°ì±…-2-terraform-ìˆ˜ì •">í•´ê²°ì±… 2. Terraform ìˆ˜ì •
&lt;/h3>&lt;p>ê°€ì¥ ì•ˆì „í•œ ì ‘ê·¼ë²•ì´ë‹¤.
ë„¤íŠ¸ì›Œí¬ í† í´ë¡œì§€ë¥¼ ë³´ë©´ ì¿ ë²„ë„¤í‹°ìŠ¤ ë…¸ë“œë“¤ì´ kubernetes-network subnetë¥¼ í™œìš©í•œë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/openstack-kubernetes-installation-2/img5.png"
width="809"
height="609"
srcset="https://s0okju.github.io/p/openstack-kubernetes-installation-2/img5_hu_8439cdaf7cf3ba90.png 480w, https://s0okju.github.io/p/openstack-kubernetes-installation-2/img5_hu_bc133586b33d2d14.png 1024w"
loading="lazy"
alt="kubernetes ë„¤íŠ¸ì›Œí¬ í† í´ë¡œì§€"
class="gallery-image"
data-flex-grow="132"
data-flex-basis="318px"
>&lt;/p>
&lt;p>Openstackì˜ subnetì— DNS nameserverë¥¼ ëª…ì‹œí•  ìˆ˜ ìˆë‹¤. ê·¸ëŸ¬ë¯€ë¡œ Openstack ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë°°í¬í•˜ëŠ” terraform íŒŒì¼ì„ ìˆ˜ì •í•œë‹¤.
&lt;code>~/kubespray/contrib/terraform/openstack/modules/network/main.tf&lt;/code> ë‚´ì— &lt;code>dns_nameservers&lt;/code> ë¥¼ google dnsë¡œ ë³€ê²½ì‹œí‚¨ë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-tf" data-lang="tf">&lt;span class="line">&lt;span class="cl">&lt;span class="kr">resource&lt;/span> &lt;span class="s2">&amp;#34;openstack_networking_subnet_v2&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;k8s&amp;#34;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">name&lt;/span> = &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nb">var&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">cluster_name&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">-internal-network&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">count&lt;/span> = &lt;span class="nb">var&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">use_neutron&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">network_id&lt;/span> = &lt;span class="nx">openstack_networking_network_v2&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">k8s&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nb">count&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">index&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="nx">id&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">cidr&lt;/span> = &lt;span class="nb">var&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">subnet_cidr&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">ip_version&lt;/span> = &lt;span class="m">4&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">dns_nameservers&lt;/span> = &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;8.8.8.8&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s2">&amp;#34;8.8.4.4&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ì›ë˜ë¼ë©´ variables.tfë¥¼ ìˆ˜ì •í•´ì•¼ í–ˆì§€ë§Œ ì œëŒ€ë¡œ ì ìš©ì´ ë˜ì§€ ì•Šì•˜ê³ , google dns serverëŠ” ê±°ì˜ ë¶ˆë³€ì— ê°€ê¹ê¸° ë•Œë¬¸ì— main.tfì— ì§ì ‘ ì‘ì„±í•´ë„ ëœë‹¤ê³  íŒë‹¨í–ˆë‹¤.&lt;/p>
&lt;p>ì•„ë˜ì™€ ê°™ì´ ì œëŒ€ë¡œ ì ìš©ëœë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/openstack-kubernetes-installation-2/img6.png"
width="522"
height="322"
srcset="https://s0okju.github.io/p/openstack-kubernetes-installation-2/img6_hu_51df20edfa301982.png 480w, https://s0okju.github.io/p/openstack-kubernetes-installation-2/img6_hu_28c470b480812ee0.png 1024w"
loading="lazy"
alt="dns nameserver ì„±ê³µ"
class="gallery-image"
data-flex-grow="162"
data-flex-basis="389px"
>&lt;/p>
&lt;h2 id="ê·¸-ì´ì™¸ì˜-debian-ë¬¸ì œë“¤">ê·¸ ì´ì™¸ì˜ debian ë¬¸ì œë“¤
&lt;/h2>&lt;p>ê·¸ ì´í›„ë¶€í„° debianì—ëŠ” ì¡ë‹¤í•œ ë¬¸ì œê°€ ë°œìƒí–ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/openstack-kubernetes-installation-2/img9.png"
width="1036"
height="237"
srcset="https://s0okju.github.io/p/openstack-kubernetes-installation-2/img9_hu_553433dc621022b1.png 480w, https://s0okju.github.io/p/openstack-kubernetes-installation-2/img9_hu_9f5de3996762c738.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="437"
data-flex-basis="1049px"
>&lt;/p>
&lt;h3 id="í•´ê²°ì±…-1-í´ë¼ìš°ë“œ-ì´ë¯¸ì§€ë¥¼-ubuntuë¡œ-ë³€ê²½">í•´ê²°ì±… 1. í´ë¼ìš°ë“œ ì´ë¯¸ì§€ë¥¼ ubuntuë¡œ ë³€ê²½
&lt;/h3>&lt;p>í´ë¼ìš°ë“œ ì´ë¯¸ì§€ë¥¼ debianì—ì„œ ubuntuë¡œ ë³€ê²½í–ˆë‹¤. ssh í‚¤ë¥¼ ed25519 ì•Œê³ ë¦¬ì¦˜ìœ¼ë¡œ ì ìš©í•´ë„ ì •ìƒì ìœ¼ë¡œ ì‘ë™ëœë‹¤.
Ansible playbookë¥¼ ì‘ë™ì‹œí‚¤ë©´ ì •ìƒì ìœ¼ë¡œ kubernetesê°€ ë°°í¬ëœë‹¤.&lt;/p>
&lt;div class="footnotes" role="doc-endnotes">
&lt;hr>
&lt;ol>
&lt;li id="fn:1">
&lt;p>&lt;a class="link" href="https://dev.to/ccoveille/how-to-generate-a-secure-and-robust-ssh-key-in-2024-3f4f" target="_blank" rel="noopener"
>https://dev.to/ccoveille/how-to-generate-a-secure-and-robust-ssh-key-in-2024-3f4f&lt;/a>&amp;#160;&lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;li id="fn:2">
&lt;p>&lt;a class="link" href="https://askubuntu.com/questions/351168/diffrence-between-the-dns-setting-in-etc-resolv-conf-and-etc-network-interfaces" target="_blank" rel="noopener"
>https://askubuntu.com/questions/351168/diffrence-between-the-dns-setting-in-etc-resolv-conf-and-etc-network-interfaces&lt;/a>&amp;#160;&lt;a href="#fnref:2" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/div></description></item><item><title>Openstack - Kubesprayë¥¼ í™œìš©í•œ Kubernetes ì„¤ì¹˜ ì‹œ Terraform ì˜¤ë¥˜</title><link>https://s0okju.github.io/p/openstack-kubernetes-installation-1/</link><pubDate>Thu, 01 Aug 2024 00:00:00 +0900</pubDate><guid>https://s0okju.github.io/p/openstack-kubernetes-installation-1/</guid><description>&lt;h2 id="openstack-ì„¤ì¹˜">Openstack ì„¤ì¹˜
&lt;/h2>&lt;p>&lt;a class="link" href="https://velog.io/@im2sh/Ubuntu-22.04%EC%97%90%EC%84%9C-Devstack-%EC%84%A4%EC%B9%98" target="_blank" rel="noopener"
>im2sh.log velog&lt;/a>ì„ ì°¸ê³ í•´ì„œ Devstackì„ í™œìš©í•´ Openstackì„ ì„¤ì¹˜í•˜ë©´ ëœë‹¤. ë‹¤ë§Œ ë¡œì»¬ í™˜ê²½ì—ì„œë§Œ ìˆ˜í–‰í•  ì˜ˆì •ì´ë¯€ë¡œ ê°€ìƒ public ip ëŒ€ì—­ ìƒì„±ì€ ì œì™¸í–ˆë‹¤.&lt;/p>
&lt;h3 id="ì´ë¯¸ì§€-ìƒì„±">ì´ë¯¸ì§€ ìƒì„±
&lt;/h3>&lt;p>Novaì— ì˜¬ë¦° ì´ë¯¸ì§€ë¥¼ ìƒì„±í•œë‹¤. Ubuntuë³´ë‹¤ Debianì´ ê°€ë³ê³  ì»¤ìŠ¤í…€í•˜ê¸° ìš©ì´í•´ì„œ ì„ íƒ&lt;sup id="fnref:1">&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref">1&lt;/a>&lt;/sup>í•˜ê²Œ ë˜ì—ˆë‹¤.
ì•„ë˜ì˜ ëª…ë ¹ì–´ëŠ” &lt;a class="link" href="https://cloud.debian.org/cdimage/cloud/OpenStack/current-10/" target="_blank" rel="noopener"
>debian ê³µì‹ í™ˆí˜ì´ì§€&lt;/a>ë¥¼ ì°¸ê³ í–ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">wget https://cloud.debian.org/cdimage/cloud/OpenStack/current-10/debian-10-openstack-amd64.qcow2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">openstack image create &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --container-format bare &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --disk-format qcow2 &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --file debian-10-openstack-amd64.qcow2 &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> debian-10-openstack-amd64
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>dashboardë¥¼ ë³´ë©´ ì •ìƒì ìœ¼ë¡œ ì´ë¯¸ì§€ê°€ ì—…ë¡œë“œëœ ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/openstack-kubernetes-installation-1/img1.png"
width="423"
height="236"
srcset="https://s0okju.github.io/p/openstack-kubernetes-installation-1/img1_hu_7b3a554076681dea.png 480w, https://s0okju.github.io/p/openstack-kubernetes-installation-1/img1_hu_53f471c3f0509ba8.png 1024w"
loading="lazy"
alt="horizonì—ì„œ í™•ì¸í•œ ì´ë¯¸ì§€"
class="gallery-image"
data-flex-grow="179"
data-flex-basis="430px"
>&lt;/p>
&lt;h2 id="kubesprayë¥¼-í™œìš©í•œ-kubernetes-êµ¬ì¶•">Kubesprayë¥¼ í™œìš©í•œ Kubernetes êµ¬ì¶•
&lt;/h2>&lt;ul>
&lt;li>OS - Ubuntu 24.04&lt;/li>
&lt;li>Openstack - 2024.1&lt;/li>
&lt;li>Kubespray - v2.21.0&lt;/li>
&lt;li>Terraform - v1.9.3&lt;/li>
&lt;/ul>
&lt;p>ì „ë°˜ì ì¸ ì„¤ì¹˜ ê³¼ì •ì€ &lt;a class="link" href="https://velog.io/@jaehan/Openstack-%EA%B8%B0%EB%B0%98-Kubernets-%EA%B5%AC%EC%B6%95-with-Kubespray" target="_blank" rel="noopener"
>ë³€ì¬í•œë‹˜ì˜ velog&lt;/a>ë¥¼ ì°¸ê³ í–ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;blockquote>
&lt;p>openstack v2, v3 APIëŠ” ë‹¤ë¥¸ì ì´ ë§ìŠµë‹ˆë‹¤. ë§Œì•½ì— v2 ë²„ì „ìœ¼ë¡œ í•˜ê³  ì‹¶ë‹¤ë©´ ìš´ì˜ì²´ì œì™€ kubespray, terraform ë²„ì „ì„ ë§ì¶”ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.&lt;/p>&lt;/blockquote>
&lt;h3 id="ssh-í†µì‹ ì„-ìœ„í•œ-ê³µê°œí‚¤-ìƒì„±">ssh í†µì‹ ì„ ìœ„í•œ ê³µê°œí‚¤ ìƒì„±
&lt;/h3>&lt;p>ì¿ ë²„ë„¤í‹°ìŠ¤ í™˜ê²½ ì„¤ì •ì„ ìœ„í•´ Ansibleë¥¼ ì‚¬ìš©í•œë‹¤. Ansibleì€ sshë¥¼ í™œìš©í•˜ì—¬ ëŒ€ìƒì— ì ‘ì†í•  ìˆ˜ ìˆë‹¤. ì´ í‚¤ëŠ” ì¶”í›„ Kubernetesì—ì„œ ë…¸ë“œë¼ë¦¬ í†µì‹ í•  ìˆ˜ ìˆëŠ” openstackì˜ keypairë¡œì¨ í™œìš©ëœë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">ssh-keygen -t ed25519 -N &lt;span class="s1">&amp;#39;&amp;#39;&lt;/span> -f ~/.ssh/id_rsa.kubespray
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">eval&lt;/span> &lt;span class="k">$(&lt;/span>ssh-agent -s&lt;span class="k">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ssh-add ~/.ssh/id_rsa.kubespray
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="ì˜¤ë¥˜---one-of-auth_url-or-cloud-must-be-specified">ì˜¤ë¥˜ - One of auth_url or cloud must be specified
&lt;/h2>&lt;p>ê²°ë¡ ë¶€í„° ë§í•˜ìë©´ í´ë¼ì´ì–¸íŠ¸ì™€ ê´€ë ¨ëœ í™˜ê²½ ë³€ìˆ˜ê°€ ì €ì¥ë˜ì§€ ì•Šì•„ì„œ ìƒê¸´ ì¼ì´ë‹¤.&lt;/p>
&lt;h3 id="í•´ê²°-ê³¼ì •">í•´ê²° ê³¼ì •
&lt;/h3>&lt;p>ì•„ë˜ì˜ ì˜¤ë¥˜ë¥¼ ì½ì–´ë³´ë©´ openstackì˜ providerë¥¼ ì •ì˜í•˜ëŠ” tfíŒŒì¼ì— ì†ì„±ì´ ì •ì˜ë˜ì–´ ìˆì§€ ì•Šë‹¤ê³  í•œë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/openstack-kubernetes-installation-1/img2.png"
width="890"
height="330"
srcset="https://s0okju.github.io/p/openstack-kubernetes-installation-1/img2_hu_fc4a8193524b8cf3.png 480w, https://s0okju.github.io/p/openstack-kubernetes-installation-1/img2_hu_dd3a8e38b0318d0c.png 1024w"
loading="lazy"
alt="kubernetes ì„¤ì¹˜ ì‹œ ë°œìƒí•˜ëŠ” ì˜¤ë¥˜"
class="gallery-image"
data-flex-grow="269"
data-flex-basis="647px"
>&lt;/p>
&lt;p>&lt;code>~/kubespray/contrib/terraform/openstack/version.tf&lt;/code> ë¥¼ ë³´ë©´ providerê°€ ì •ì˜ë˜ì–´ ìˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/openstack-kubernetes-installation-1/img4.png"
width="536"
height="172"
srcset="https://s0okju.github.io/p/openstack-kubernetes-installation-1/img4_hu_f38e3ad95202f96e.png 480w, https://s0okju.github.io/p/openstack-kubernetes-installation-1/img4_hu_1484e534dcbff86a.png 1024w"
loading="lazy"
alt="~/kubespray/contrib/terraform/openstack/version.tf"
class="gallery-image"
data-flex-grow="311"
data-flex-basis="747px"
>&lt;/p>
&lt;p>&lt;a class="link" href="https://registry.terraform.io/providers/terraform-provider-openstack/openstack/1.54.1/docs" target="_blank" rel="noopener"
>ê³µì‹ í™ˆí˜ì´ì§€&lt;/a>ë¥¼ ë³´ë©´ ì„¤ì •ê°’ì„ ì¶”ê°€í•  ìˆ˜ ìˆëŠ”ë° ì „ë¶€ë‹¤ ì„ íƒì‚¬í•­ì´ì§€ë§Œ &lt;strong>Openstack ì„¤ì •ê³¼ ê´€ë ¨ í™˜ê²½ë³€ìˆ˜ê°€ ë°˜ë“œì‹œ ì €ì¥&lt;/strong>ë˜ì–´ ìˆì–´ì•¼ í•œë‹¤. ê·¸ë ‡ì§€ ì•Šìœ¼ë©´ terraformì— ë³„ë„ë¡œ ì„¤ì •í•´ì•¼ í•œë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-hcl" data-lang="hcl">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Configure the OpenStack Provider
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">provider&lt;/span> &lt;span class="s2">&amp;#34;openstack&amp;#34;&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> user_name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;admin&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> tenant_name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;admin&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> password&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;pwd&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> auth_url&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;http://myauthurl:5000/v3&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> region&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;RegionOne&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ì¦‰ ìœ„ì™€ ê°™ì€ ë¬¸ì œê°€ ë°œìƒí•œ ê²ƒì€ í´ë¼ì´ì–¸íŠ¸ì™€ identity ì„œë¹„ìŠ¤ê°€ ìƒí˜¸ ì‘ìš©ì„ ìœ„í•œ í™˜ê²½ ë³€ìˆ˜ê°€ ì—†ì–´ì„œ ìƒê¸´ ì¼ì¸ ê²ƒì´ë‹¤.&lt;/p>
&lt;p>ë‹¤ë§Œ ìˆ˜ë™ìœ¼ë¡œ terraform íŒŒì¼ì— ì‘ì„±í•˜ê±°ë‚˜ í™˜ê²½ë³€ìˆ˜ë¥¼ ì„¤ì •í•˜ê²Œ ë˜ë©´ Domain ì •ë³´ê°€ ë¶€ì •í™•í•˜ë‹¤ëŠ” ì—ëŸ¬ ë©”ì„¸ì§€ë¥¼ ë§ˆì£¼í•  ìˆ˜ ìˆë‹¤. openstack ë²„ì „ì— ë”°ë¼ì„œ ì§€ì›í•˜ëŠ” í™˜ê²½ ë³€ìˆ˜ë„ ë‹¤ë¥´ê±°ë‚˜, ê°™ì€ ì¡°ê±´ì— ì‚¬ëŒë§ˆë‹¤ ì‹¤í–‰ ê°€ëŠ¥ ì—¬ë¶€ê°€ ë‹¤ë¥¸ ë“± ë³µí•©ì ì¸ ì´ìœ ê°€ ì¡´ì¬í•œ ê²ƒ ê°™ì•˜ë‹¤.&lt;sup id="fnref:2">&lt;a href="#fn:2" class="footnote-ref" role="doc-noteref">2&lt;/a>&lt;/sup>&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/openstack-kubernetes-installation-1/img3.png"
width="937"
height="174"
srcset="https://s0okju.github.io/p/openstack-kubernetes-installation-1/img3_hu_6ea1b2e2e8a36d5a.png 480w, https://s0okju.github.io/p/openstack-kubernetes-installation-1/img3_hu_22bc8b542dd33664.png 1024w"
loading="lazy"
alt="Invalid DomainID ì˜¤ë¥˜"
class="gallery-image"
data-flex-grow="538"
data-flex-basis="1292px"
>&lt;/p>
&lt;h3 id="í•´ê²°ì±…">í•´ê²°ì±…
&lt;/h3>&lt;p>Openstackì—ì„œ ì œê³µí•´ì£¼ëŠ” &lt;a class="link" href="https://docs.openstack.org/liberty/ko_KR/install-guide-obs/keystone-openrc.html" target="_blank" rel="noopener"
>í´ë¼ì´ì–¸íŠ¸ í™˜ê²½ ìŠ¤í¬ë¦½íŠ¸(openrc)&lt;/a>ë¥¼ ì‚¬ìš©í•˜ë©´ ëœë‹¤.&lt;/p>
&lt;p>horizonì— ì‚¬ìš©ìë¥¼ í´ë¦­í•˜ë©´ openstack rc íŒŒì¼ì´ ìˆëŠ”ë°, ì´ë¥¼ ë‹¤ìš´ë¡œë“œí•´ì„œ ì‹¤í–‰ì‹œí‚¤ë©´ ëœë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/openstack-kubernetes-installation-1/img5.png"
width="266"
height="290"
srcset="https://s0okju.github.io/p/openstack-kubernetes-installation-1/img5_hu_d249ba80f6d9d707.png 480w, https://s0okju.github.io/p/openstack-kubernetes-installation-1/img5_hu_c4c096730e86dce0.png 1024w"
loading="lazy"
alt="horizonì—ì„œ ë‹¤ìš´ë¡œë“œ ê°€ëŠ¥í•œ OpenStack RC íŒŒì¼"
class="gallery-image"
data-flex-grow="91"
data-flex-basis="220px"
>&lt;/p>
&lt;p>Linuxì—ì„œ í™˜ê²½ ë³€ìˆ˜ëŠ” bashë¥¼ exití•˜ëŠ” ìˆœê°„ ì‚¬ë¼ì§„ë‹¤.&lt;sup id="fnref:3">&lt;a href="#fn:3" class="footnote-ref" role="doc-noteref">3&lt;/a>&lt;/sup> ì»´í“¨í„°ê°€ í•œë²ˆ êº¼ì§€ê²Œ ë˜ë©´ openrc ìŠ¤í¬ë¦½íŠ¸ë¥¼ ê³„ì† ì‹¤í–‰ì‹œì¼œì¤˜ì•¼ í•œë‹¤.
í™˜ê²½ë³€ìˆ˜ë¥¼ ì˜ì†ì ìœ¼ë¡œ ì €ì¥í•˜ëŠ” ë°©ë²•ì€ &lt;code>~/.bashrc&lt;/code>ë¥¼ ì„¤ì •í•˜ëŠ” ê²ƒì´ë‹¤. ë‹¤ìš´ë¡œë“œí•œ rc íŒŒì¼ì„ ì‹¤í–‰ì‹œí‚¤ë„ë¡ íŒŒì¼ì„ ì„¤ì •í•œë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="o">[&lt;/span> -f ~/rc/k8s-openrc.sh &lt;span class="o">]&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> . ~/rc/k8s-openrc.sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">fi&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ì¤‘ê°„ì— ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥ ë°›ì•„ì•¼ í•˜ë¯€ë¡œ openrc ìŠ¤í¬ë¦½íŠ¸ì— ë¹„ë°€ë²ˆí˜¸ë¥¼ ë„£ëŠ”ë‹¤. ê°œì¸ì ìœ¼ë¡œ ì´ëŸ° ë°©ë²•ì€ ë³´ì•ˆ ì¸¡ë©´ì—ì„œëŠ” ì¢‹ì§€ ì•Šì•„ ë³´ì¸ë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">export&lt;/span> &lt;span class="nv">OS_USERNAME&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;k8s&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># With Keystone you pass the keystone password.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># echo &amp;#34;Please enter your OpenStack Password for project $OS_PROJECT_NAME as user $OS_USERNAME: &amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># read -sr OS_PASSWORD_INPUT&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">export&lt;/span> &lt;span class="nv">OS_PASSWORD&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;yourpassword&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>source ~/.bashrc&lt;/code>ë¥¼ ìˆ˜í–‰í•˜ë©´ ì•„ë˜ì™€ ê°™ì´ í™˜ê²½ ë³€ìˆ˜ê°€ ì •ìƒì ìœ¼ë¡œ ì„¤ì •ëœë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/openstack-kubernetes-installation-1/img6.png"
width="304"
height="85"
srcset="https://s0okju.github.io/p/openstack-kubernetes-installation-1/img6_hu_b01a460903ee8bda.png 480w, https://s0okju.github.io/p/openstack-kubernetes-installation-1/img6_hu_7b321d24896448f.png 1024w"
loading="lazy"
alt="í™˜ê²½ ë³€ìˆ˜ í™•ì¸"
class="gallery-image"
data-flex-grow="357"
data-flex-basis="858px"
>&lt;/p>
&lt;p>ë‹¤ì‹œ terraformìœ¼ë¡œ kubernetesë¥¼ ì„¤ì¹˜í•˜ë©´ ì •ìƒì ìœ¼ë¡œ ì‹¤í–‰ëœë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/openstack-kubernetes-installation-1/img7.png"
width="648"
height="100"
srcset="https://s0okju.github.io/p/openstack-kubernetes-installation-1/img7_hu_2c07656d4e44353f.png 480w, https://s0okju.github.io/p/openstack-kubernetes-installation-1/img7_hu_5bdecc80a8256da1.png 1024w"
loading="lazy"
alt="ë°°í¬ ì™„ë£Œ"
class="gallery-image"
data-flex-grow="648"
data-flex-basis="1555px"
>&lt;/p>
&lt;div class="footnotes" role="doc-endnotes">
&lt;hr>
&lt;ol>
&lt;li id="fn:1">
&lt;p>&lt;a class="link" href="https://www.quora.com/Which-Linux-distribution-is-best-suited-for-a-cloud-server-environment-and-why" target="_blank" rel="noopener"
>https://www.quora.com/Which-Linux-distribution-is-best-suited-for-a-cloud-server-environment-and-why&lt;/a>&amp;#160;&lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;li id="fn:2">
&lt;p>&lt;a class="link" href="https://github.com/terraform-provider-openstack/terraform-provider-openstack/issues/267" target="_blank" rel="noopener"
>https://github.com/terraform-provider-openstack/terraform-provider-openstack/issues/267&lt;/a>&amp;#160;&lt;a href="#fnref:2" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;li id="fn:3">
&lt;p>&lt;a class="link" href="https://askubuntu.com/questions/395212/why-environment-variable-disappears-after-terminal-reopen" target="_blank" rel="noopener"
>https://askubuntu.com/questions/395212/why-environment-variable-disappears-after-terminal-reopen&lt;/a>&amp;#160;&lt;a href="#fnref:3" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/div></description></item></channel></rss>