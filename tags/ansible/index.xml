<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Ansible on S0okJu.dev</title><link>https://s0okju.github.io/tags/ansible/</link><description>Recent content in Ansible on S0okJu.dev</description><generator>Hugo -- gohugo.io</generator><language>en</language><lastBuildDate>Mon, 04 Nov 2024 00:00:00 +0900</lastBuildDate><atom:link href="https://s0okju.github.io/tags/ansible/index.xml" rel="self" type="application/rss+xml"/><item><title>OpsAthlan 3-1. Hello MySQL</title><link>https://s0okju.github.io/p/opsathlan-3-1/</link><pubDate>Mon, 04 Nov 2024 00:00:00 +0900</pubDate><guid>https://s0okju.github.io/p/opsathlan-3-1/</guid><description>&lt;h2 id="ÏãúÎÇòÎ¶¨Ïò§">ÏãúÎÇòÎ¶¨Ïò§
&lt;/h2>&lt;p>Îç∞Ïù¥ÌÑ∞Î≤†Ïù¥Ïä§Î•º ÏÑ§ÏπòÌïòÍ≥† ÏùΩÍ∏∞ÏôÄ Ïì∞Í∏∞Î•º ÌÉêÏÉâÌï¥Î≥¥Ïûê&lt;/p>
&lt;h3 id="Íµ¨ÏÑ±ÎèÑ">Íµ¨ÏÑ±ÎèÑ
&lt;/h3>&lt;ol>
&lt;li>JenkinsÎ•º ÌôúÏö©Ìïú Ïª®ÌÖåÏù¥ÎÑà ÏûêÎèô ÎπåÎìú Î∞è docker-compose Î∞∞Ìè¨&lt;/li>
&lt;li>NovaÏóê Mysql ÏÑúÎ≤Ñ ÏÑ§Ïπò Î∞è volumeÏóê Îç∞Ïù¥ÌÑ∞ Ï†ÄÏû•&lt;/li>
&lt;/ol>
&lt;p>&lt;img src="https://s0okju.github.io/p/opsathlan-3-1/image.png"
width="1140"
height="460"
srcset="https://s0okju.github.io/p/opsathlan-3-1/image_hu_f31c09a612fdea3a.png 480w, https://s0okju.github.io/p/opsathlan-3-1/image_hu_89a4fa1a418eb7ba.png 1024w"
loading="lazy"
alt="Ï†ÑÏ≤¥ Íµ¨ÏÑ±ÎèÑ"
class="gallery-image"
data-flex-grow="247"
data-flex-basis="594px"
>&lt;/p>
&lt;h2 id="trove-ÏÑ§Ïπò-Ïã§Ìå®">Trove ÏÑ§Ïπò Ïã§Ìå®
&lt;/h2>&lt;p>Ï¥àÍ∏∞ ÏÑ§Í≥ÑÏóêÏÑúÎäî RDSÏôÄ Ïú†ÏÇ¨ÌïòÎã§Í≥† ÏÉùÍ∞ÅÌïú&lt;sup id="fnref:1">&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref">1&lt;/a>&lt;/sup> ÏÑúÎπÑÏä§Ïù∏ TroveÎ•º ÌôúÏö©Ìï¥ÏÑú Íµ¨ÏÑ±Ìï† ÏòàÏ†ïÏù¥ÏóàÏäµÎãàÎã§. Í∑∏Îü∞Îç∞ Îî∞Î°ú ÎÑ§Ìä∏ÏõåÌÅ¨Î•º Íµ¨Ï∂ïÌïòÍ≥† ÏÑ§ÏπòÌï¥Î≥¥Î©¥ÏÑú Îã§ÏñëÌïú Ïò§Î•òÏÇ¨Ìï≠ÏùÑ ÎßàÏ£ºÌñàÏäµÎãàÎã§. ÏõêÏù∏ÏùÄ ÎåÄÎûµÏ†ÅÏúºÎ°ú Ï∞æÏïòÏúºÎÇò Íµ¨Ï≤¥Ï†ÅÏù∏ Ìï¥Í≤∞ Î∞©ÏïàÏùÑ Ï∞æÏßÄ Î™ªÌï¥ÏÑú &lt;strong>Nova Ïù∏Ïä§ÌÑ¥Ïä§Ïóê mysql ÏÑúÎ≤ÑÎ•º ÏÇ¨Ïö©ÌïòÎäî Î∞©ÏãùÏúºÎ°ú Ï†ÑÌôò&lt;/strong>ÌñàÏäµÎãàÎã§.&lt;/p>
&lt;h3 id="Ïò§Î•òÏÇ¨Ìï≠">Ïò§Î•òÏÇ¨Ìï≠
&lt;/h3>&lt;p>Ïö∞ÏÑ† TroveÍ∞Ä Î¨¥ÏóáÏù∏ÏßÄ ÏïåÏïÑÎ¥ÖÏãúÎã§. &lt;a class="link" href="https://wiki.openstack.org/wiki/Trove" target="_blank" rel="noopener"
>Í≥µÏãùÎ¨∏ÏÑú&lt;/a>Ïóê ÏùòÌïòÎ©¥ troveÎäî Îã§Î•∏ ÌçºÎ∏îÎ¶≠ ÌÅ¥ÎùºÏö∞ÎìúÏùò Îç∞Ïù¥ÌÑ∞Î≤†Ïù¥Ïä§ ÏÑúÎπÑÏä§Í≥º Ïú†ÏÇ¨Ìïú Í∏∞Îä•ÏùÑ Í∞ÄÏßÄÍ≥† ÏûàÏäµÎãàÎã§. ÏïàÏ†ïÏÑ±ÏùÑ ÏúÑÌïú ÎåÄÎ∂ÄÎ∂ÑÏùò Í∏∞Îä•ÏùÑ Ï†úÍ≥µÌï©ÎãàÎã§.&lt;/p>
&lt;blockquote>
&lt;p>Trove is &lt;strong>Database as a Service&lt;/strong> for OpenStack. It&amp;rsquo;s designed to run entirely on¬†&lt;a class="link" href="https://wiki.openstack.org/wiki/OpenStack" title="OpenStack"
target="_blank" rel="noopener"
>OpenStack&lt;/a>, with the goal of allowing users to quickly and easily utilize the features of a relational or non-relational database without the burden of handling complex administrative tasks.
&amp;hellip; Initially, the service will focus on providing resource isolation at high performance while &lt;strong>automating complex administrative tasks including deployment, configuration, patching, backups, restores, and monitoring.&lt;/strong>&lt;/p>&lt;/blockquote>
&lt;p>Ï†ÄÎäî Kolla-AnsibleÎ•º ÏÇ¨Ïö©ÌïòÍ≥† ÏûàÏñ¥ ÏâΩÍ≤å Î¶¨ÏÜåÏä§Î•º Ï∂îÍ∞ÄÌï† Ïàò ÏûàÏäµÎãàÎã§. &lt;code>globals.yml&lt;/code> ÏóêÏÑú trove Î¶¨ÏÜåÏä§ Î∂ÄÎ∂ÑÏùÑ yesÎ°ú Î∞îÍæ∏Í∏∞Îßå ÌïòÎ©¥ Îê©ÎãàÎã§. ÏÑ§Ï†ïÏùÑ Ï∂îÍ∞ÄÌïòÍ≥† Ïû¨Î∞∞Ìè¨ÌïòÎ©¥ Ï¥ù 3Í∞úÏùò trove Ïª®ÌÖåÏù¥ÎÑàÍ∞Ä ÏÉùÏÑ±Îê©ÎãàÎã§.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/opsathlan-3-1/image-1.png"
width="569"
height="126"
srcset="https://s0okju.github.io/p/opsathlan-3-1/image-1_hu_fcc5fc92feacc3f9.png 480w, https://s0okju.github.io/p/opsathlan-3-1/image-1_hu_ecfb01e6231c6060.png 1024w"
loading="lazy"
alt="trove ÏÑúÎπÑÏä§ Í¥ÄÎ†® Ïª®ÌÖåÏù¥ÎÑà"
class="gallery-image"
data-flex-grow="451"
data-flex-basis="1083px"
>&lt;/p>
&lt;p>TroveÎäî Nova Ïù∏Ïä§ÌÑ¥Ïä§ ÎÇ¥ÏóêÏÑú ÏûëÎèôÎê©ÎãàÎã§. Í¥ÄÎ†® Ïù¥ÎØ∏ÏßÄÎ•º Îã§Ïö¥Î°úÎìú Î∞õÏïÑÏÑú glaceÏóê ÏóÖÎ°úÎìúÌïú ÌõÑ datastore versionÏùÑ Ï†ïÏùòÌï†Îïå ÏÇ¨Ïö©Ìï©ÎãàÎã§.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Image Îã§Ïö¥Î°úÎìú&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">wget https://tarballs.opendev.org/openstack/trove/images/trove-master-guest-ubuntu-jammy.qcow2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Ïù¥ÎØ∏ÏßÄ GlanceÎ°ú ÏóÖÎ°úÎìú&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">openstack image create Trove-Ubuntu --disk-format qcow2 --container-format bare --public --tag trove --tag mysql --file trove-master-guest-ubuntu-jammy.qcow2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># datastore version Ï†ïÏùò&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">openstack datastore version create 5.7.29 mysql mysql &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span> --image-tags trove,mysql --active --default --version-number 5.7.29
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ÏúÑÏùò Î™ÖÎ†πÏñ¥Î•º Î™®Îëê ÏàòÌñâÌïú ÌõÑ ÏïÑÎûòÏùò Î™ÖÎ†πÏñ¥Î•º ÌôïÏù∏Ìï¥Î≥¥Î©¥ mysqlÏóê Ìï¥ÎãπÎêòÎäî datastoreÎ•º ÌôïÏù∏Ìï† Ïàò ÏûàÏäµÎãàÎã§.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/opsathlan-3-1/image-2.png"
width="538"
height="103"
srcset="https://s0okju.github.io/p/opsathlan-3-1/image-2_hu_6883ceb9aca8d146.png 480w, https://s0okju.github.io/p/opsathlan-3-1/image-2_hu_856bc01d71a3a345.png 1024w"
loading="lazy"
alt="datastore ÌôïÏù∏"
class="gallery-image"
data-flex-grow="522"
data-flex-basis="1253px"
>&lt;/p>
&lt;p>Í∑∏Î¶¨Í≥† trove Í¥ÄÎ¶¨ ÎÑ§Ìä∏ÏõåÌÅ¨Î•º Îî∞Î°ú ÎßåÎì† ÌõÑÏóê Îç∞Ïù¥ÌÑ∞Î≤†Ïù¥Ïä§Î•º ÏÉùÏÑ±ÌñàÏäµÎãàÎã§.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">openstack database instance create test_db &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --flavor m1.medium &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --size &lt;span class="m">10&lt;/span> &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --nic net-id&lt;span class="o">={&lt;/span>custom trove manangement network id&lt;span class="o">}&lt;/span> &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --database testdb &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --users tester:mypassword &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --datastore mysql &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --datastore-version 5.7.29 &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --allowed-cidr 0.0.0.0/0
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Î™ÖÎ†πÏñ¥ ÏàòÌñâ Ïù¥ÌõÑ ÎπåÎìú ÏãúÍ∞ÑÏù¥ Í∏∏ÏóàÏäµÎãàÎã§. Timeout ÏóêÎü¨Í∞Ä Î∞úÏÉùÌï† Í≤ÉÏù¥ÎùºÍ≥† ÏòàÏÉÅÌñàÍ≥†, ÏÉùÍ∞ÅÌïúÎåÄÎ°ú Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/opsathlan-3-1/image-3.png"
width="1529"
height="171"
srcset="https://s0okju.github.io/p/opsathlan-3-1/image-3_hu_441c481c934e614b.png 480w, https://s0okju.github.io/p/opsathlan-3-1/image-3_hu_6d5d606e9be556a2.png 1024w"
loading="lazy"
alt="trove ÏÉùÏÑ± ÏóêÎü¨"
class="gallery-image"
data-flex-grow="894"
data-flex-basis="2145px"
>&lt;/p>
&lt;p>trove - api ÏóêÏÑú taskmanagerÎ°ú ÏûëÏóÖÏùÑ ÏàòÌñâÌï†Îïå message bus Î∂ÄÎ∂ÑÏóêÏÑú Î¨∏Ï†úÍ∞Ä ÏÉùÍ∏¥ Í≤É Í∞ôÏäµÎãàÎã§.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/opsathlan-3-1/image-4.png"
width="300"
height="184"
srcset="https://s0okju.github.io/p/opsathlan-3-1/image-4_hu_e9833adf3828b2b2.png 480w, https://s0okju.github.io/p/opsathlan-3-1/image-4_hu_20fe353ca2d78f1b.png 1024w"
loading="lazy"
alt="Ï∂úÏ≤ò - https://www.odbms.org/2016/02/10-things-you-should-know-about-openstack-trove-the-open-source-database-as-a-service/"
class="gallery-image"
data-flex-grow="163"
data-flex-basis="391px"
>&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/opsathlan-3-1/image-5.png"
width="1060"
height="448"
srcset="https://s0okju.github.io/p/opsathlan-3-1/image-5_hu_dbec9d141b136f5c.png 480w, https://s0okju.github.io/p/opsathlan-3-1/image-5_hu_6f1fcae678aef8c5.png 1024w"
loading="lazy"
alt="trove timeout error"
class="gallery-image"
data-flex-grow="236"
data-flex-basis="567px"
>&lt;/p>
&lt;p>Ïö∞Î¶¨Ïùò Î™©Ï†ÅÏùÄ Í∞ÑÎã®ÌïòÍ≤å APIÎ•º ÌÖåÏä§Ìä∏ÌïòÎäî Í≤ÉÏù¥Í∏∞ ÎïåÎ¨∏Ïóê ÎåÄÍ∑úÎ™®Ïóê Ï†ÅÌï©Ìïú Îç∞Ïù¥ÌÑ∞Î≤†Ïù¥Ïä§ ÏãúÏä§ÌÖúÏù¥ ÏïÑÎãàÏó¨ÎèÑ Í¥úÏ∞ÆÏäµÎãàÎã§. Í∑∏Îü¨ÎØÄÎ°ú &lt;strong>Í∞ÑÎã®ÌïòÍ≤å Nova Ïù∏Ïä§ÌÑ¥Ïä§ ÎÇ¥Ïóê Mysql ÏÑúÎ≤ÑÎ•º ÏÑ§ÏπòÌïòÎäî Î∞©Î≤ï&lt;/strong>ÏùÑ ÏÑ†ÌÉùÌñàÏäµÎãàÎã§.&lt;/p>
&lt;h2 id="ÌîÑÎ°úÎπÑÏ†ÄÎãùprovisioning">ÌîÑÎ°úÎπÑÏ†ÄÎãù(Provisioning)
&lt;/h2>&lt;blockquote>
&lt;p>ÌîÑÎ°úÎπÑÏ†ÄÎãù(Provisioning) Ïù¥ÎûÄ ÏùòÎØ∏Îäî ÏòÅÏñ¥ ÏßÅÏó≠Ìïú Í∑∏ÎåÄÎ°ú &amp;ldquo;Ï†úÍ≥µÌïòÎäîÍ≤É&amp;rdquo; Ïù¥Îã§.¬†
Ïñ¥Îñ§ Ï¢ÖÎ•òÏùò ÏÑúÎπÑÏä§Îì†¬†&lt;strong>ÏÇ¨Ïö©ÏûêÏùò ÏöîÍµ¨Ïóê ÎßûÍ≤å ÏãúÏä§ÌÖú ÏûêÏ≤¥Î•º Ï†úÍ≥µ ÌïòÎäî Í≤É&lt;/strong>ÏùÑ¬†ÌîÑÎ°úÎπÑÏ†ÄÎãùÏù¥ÎùºÍ≥† ÌïòÎ©∞ Ï†úÍ≥µÌï¥Ï§Ñ Ïàò ÏûàÎäî Í≤ÉÏùÄ Ïù∏ÌîÑÎùº ÏûêÏõêÏù¥ÎÇò ÏÑúÎπÑÏä§, ÎòêÎäî Ïû•ÎπÑÍ∞Ä Îê† ÏàòÎèÑ ÏûàÎã§.&lt;/p>
&lt;p>Ï∂úÏ≤ò - &lt;a class="link" href="https://jins-dev.tistory.com/entry/%ED%94%84%EB%A1%9C%EB%B9%84%EC%A0%80%EB%8B%9DProvisioning-%EC%9D%B4%EB%9E%80" target="_blank" rel="noopener"
>Jins&amp;rsquo; Dev Inside - ÌîÑÎ°úÎπÑÏ†ÄÎãùÏù¥ÎûÄ?&lt;/a>&lt;/p>&lt;/blockquote>
&lt;p>ÏïûÏúºÎ°úÎäî Ïù∏ÌîÑÎùºÎ•º ÏÉùÏÑ±, ÌôòÍ≤ΩÏùÑ ÏÑ§Ï†ï Í≥ºÏ†ïÏùÑ ÌîÑÎ°úÎπÑÏ†ÄÎãùÏù¥ÎùºÎäî Ïö©Ïñ¥Î°ú Ïπ≠ÌïòÍ≤†ÏäµÎãàÎã§.&lt;/p>
&lt;h3 id="Î¶¨ÏÜåÏä§-ÏÉùÏÑ±">Î¶¨ÏÜåÏä§ ÏÉùÏÑ±
&lt;/h3>&lt;p>Ï†ÄÌù¨Îäî ÌÅ¨Í≤å 2Í∞ÄÏßÄÏùò Nova Ïù∏Ïä§ÌÑ¥Ïä§Í∞Ä ÌïÑÏöîÌï©ÎãàÎã§.&lt;/p>
&lt;ol>
&lt;li>Docker, Jenkins ÏÑúÎ≤ÑÍ∞Ä ÏÑ§ÏπòÎêòÏñ¥ ÏûàÎäî Ïù∏Ïä§ÌÑ¥Ïä§ -&amp;gt; &lt;strong>Nova Ïù∏Ïä§ÌÑ¥Ïä§&lt;/strong>&lt;/li>
&lt;li>Block Storage(Cinder)ÏôÄ Ïó∞Í≤∞ÎêòÏñ¥ ÏûàÏúºÎ©∞ MySQL ServerÍ∞Ä ÏÑ§ÏπòÎêú Ïù∏Ïä§ÌÑ¥Ïä§ -&amp;gt; Block &lt;strong>Storage(Cinder)Í∞Ä Ïó∞Í≤∞Îêú Nova Ïù∏Ïä§ÌÑ¥Ïä§&lt;/strong>&lt;/li>
&lt;/ol>
&lt;p>&lt;img src="https://s0okju.github.io/p/opsathlan-3-1/image.png"
width="1140"
height="460"
srcset="https://s0okju.github.io/p/opsathlan-3-1/image_hu_f31c09a612fdea3a.png 480w, https://s0okju.github.io/p/opsathlan-3-1/image_hu_89a4fa1a418eb7ba.png 1024w"
loading="lazy"
alt="Ï†ÑÏ≤¥ Íµ¨ÏÑ±ÎèÑ"
class="gallery-image"
data-flex-grow="247"
data-flex-basis="594px"
>&lt;/p>
&lt;p>OpenstackÏóêÏÑúÎäî Nova Ïù∏Ïä§ÌÑ¥Ïä§Î•º ÏÉùÏÑ±Ìï† Îïå Volume(Block Storage)ÏùÑ Ï∂îÍ∞ÄÌï† Ïàò ÏûàÏäµÎãàÎã§. ÏâΩÍ≤å AWSÏùò EBSÎùºÍ≥† ÏÉùÍ∞ÅÌïòÏãúÎ©¥ Îê©ÎãàÎã§.&lt;br>
ÏïûÏÑú ÎßêÌñàÎìØÏù¥ Trove ÏÑúÎπÑÏä§ ÏÑ§ÏπòÎ•º Ïã§Ìå®ÌïòÍ≤å ÎêòÎ©¥ÏÑú ÎåÄÏïàÏ±ÖÏúºÎ°ú NovaÏóê MySQL ÏÑúÎ≤ÑÎ•º ÏÑ§ÏπòÌïòÎäî Î∞©ÏïàÏùÑ ÏÑ†ÌÉùÌïòÍ≤å ÎêòÏóàÏäµÎãàÎã§. VolumeÏù¥ Ïó∞Í≤∞Îêú Nova InstanceÎ•º ÌôúÏö©ÌïòÏó¨ &lt;strong>Îç∞Ïù¥ÌÑ∞Î≤†Ïù¥Ïä§Ïùò Îç∞Ïù¥ÌÑ∞Í∞Ä Block StorageÏóê ÏòÅÍµ¨Ï†ÅÏúºÎ°ú Ï†ÄÏû•Ìï† Ïàò ÏûàÍ≤å Íµ¨ÏÑ±&lt;/strong>ÌñàÏäµÎãàÎã§.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-hcl" data-lang="hcl">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Block Storage Volume for MySQL Instance
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">resource&lt;/span> &lt;span class="s2">&amp;#34;openstack_blockstorage_volume_v3&amp;#34; &amp;#34;db_volume&amp;#34;&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;${var.project_name}-db-volume&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> size&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">var&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">volume_size&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}&lt;span class="c1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Nova Instance with Volume (MySQL Server)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">resource&lt;/span> &lt;span class="s2">&amp;#34;openstack_compute_instance_v2&amp;#34; &amp;#34;db_instance&amp;#34;&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;${var.project_name}-db-instance&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> image_name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">var&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">image&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> flavor_name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">var&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">flavor&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> key_pair&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">openstack_compute_keypair_v2&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">keypair&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">name&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">network&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> port&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">openstack_networking_port_v2&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">db_port&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">id&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> metadata&lt;/span> &lt;span class="o">=&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> ssh_user&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;ubuntu&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}&lt;span class="c1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Attach Volume to MySQL Instance
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">resource&lt;/span> &lt;span class="s2">&amp;#34;openstack_compute_volume_attach_v2&amp;#34; &amp;#34;db_volume_attach&amp;#34;&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> instance_id&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">openstack_compute_instance_v2&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">db_instance&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">id&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> volume_id&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">openstack_blockstorage_volume_v3&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">db_volume&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">id&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ÏúÑÏùò ÏΩîÎìúÎ•º Ìè¨Ìï®Ìïú 2Í∞úÏùò Nova InstanceÎ•º ÏÉùÏÑ±ÌïòÎ©¥ ÏïÑÎûòÏôÄ Í∞ôÏùÄ ÎÑ§Ìä∏ÏõåÌÅ¨ ÌÜ†Ìè¥Î°úÏßÄÎ•º ÌôïÏù∏Ìï† Ïàò ÏûàÏäµÎãàÎã§.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/opsathlan-3-1/image-6.png"
width="534"
height="534"
srcset="https://s0okju.github.io/p/opsathlan-3-1/image-6_hu_94e427a8f5d9f424.png 480w, https://s0okju.github.io/p/opsathlan-3-1/image-6_hu_305549788cf8ba30.png 1024w"
loading="lazy"
alt="ÎÑ§Ìä∏ÏõåÌÅ¨ ÌÜ†Ìè¥Î°úÏßÄ"
class="gallery-image"
data-flex-grow="100"
data-flex-basis="240px"
>&lt;/p>
&lt;p>Î≥∏ÎûòÎùºÎ©¥ Í¥ÄÎ¶¨ ÎÑ§Ìä∏ÏõåÌÅ¨ÏôÄ Ïô∏Î∂Ä ÎÑ§Ìä∏ÏõåÌÅ¨Í∞Ä Î∂ÑÎ¶¨ÎêòÏñ¥Ïïº ÌïòÏßÄÎßå ÌÜµÌï©ÎêòÏñ¥ ÏûàÎäî Í¥ÄÍ≥ÑÎ°ú Î™®Îëê floating ipÎ•º Ìï†ÎãπÌïòÍ≤å ÎêòÏóàÏäµÎãàÎã§.&lt;br>
ÎßåÏïΩÏóê ÎÑ§Ìä∏ÏõåÌÅ¨Í∞Ä Ïó≠Ìï†Ïóê Îî∞Îùº Î∂ÑÎ™ÖÌïòÍ≤å Î∂ÑÎ¶¨ÎêòÏñ¥ ÏûàÎã§Î©¥ web-instanceÎäî Ïô∏Î∂Ä ÎÑ§Ìä∏ÏõåÌÅ¨Î°ú Íµ¨ÏÑ±ÌïòÍ≥† db-instanceÎäî Í¥ÄÎ¶¨ ÎÑ§Ìä∏ÏõåÌÅ¨ ipÎ•º Ìï†ÎãπÎ∞õÏïÑÏïº Ìï† Í≤ÉÏûÖÎãàÎã§.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/opsathlan-3-1/image-7.png"
width="720"
height="243"
srcset="https://s0okju.github.io/p/opsathlan-3-1/image-7_hu_bb6e2db3eb986ddf.png 480w, https://s0okju.github.io/p/opsathlan-3-1/image-7_hu_ef8807c6f11ded7f.png 1024w"
loading="lazy"
alt="Nova Instance Î™©Î°ù"
class="gallery-image"
data-flex-grow="296"
data-flex-basis="711px"
>&lt;/p>
&lt;p>Îç∞Ïù¥ÌÑ∞ Î≤†Ïù¥Ïä§ ÏÑúÎ≤ÑÎ•º ÏÑ§ÏπòÌï† &lt;code>OpsAthlan-03-db-instance&lt;/code> Ïù∏Ïä§ÌÑ¥Ïä§Î•º ÌôïÏù∏Ìï¥ Î≥¥Í≤†ÏäµÎãàÎã§. Ìï¥Îãπ Ï†ïÎ≥¥Ïóê Îì§Ïñ¥Í∞ÄÎ≥¥Î©¥ &lt;code>OpsAthlan-03-db-volume&lt;/code> &lt;strong>volumeÏù¥ Ïù∏Ïä§ÌÑ¥Ïä§Ïùò /dev/vdb Í≤ΩÎ°úÎ°ú ÎßàÏö¥ÌåÖ&lt;/strong>ÎêòÏóàÏùåÏùÑ ÌôïÏù∏ÌñàÏäµÎãàÎã§.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/opsathlan-3-1/image-8.png"
width="465"
height="559"
srcset="https://s0okju.github.io/p/opsathlan-3-1/image-8_hu_7dfdc3a64402eccd.png 480w, https://s0okju.github.io/p/opsathlan-3-1/image-8_hu_6fc84c3f2e651575.png 1024w"
loading="lazy"
alt="NovaÏóê AttachÎêú Volume Ï†ïÎ≥¥"
class="gallery-image"
data-flex-grow="83"
data-flex-basis="199px"
>&lt;/p>
&lt;h3 id="mysql-ÏÑúÎ≤Ñ-ÏÑ§Ïπò">MySQL ÏÑúÎ≤Ñ ÏÑ§Ïπò
&lt;/h3>&lt;p>Ï≤òÏùåÏóêÎäî AnsibleÎ•º ÌôúÏö©ÌïòÏó¨ ÌïúÎ≤àÏóê MySQL ÏÑúÎ≤ÑÎ•º ÏÑ§ÏπòÌï† ÏòàÏ†ïÏù¥ÏóàÏäµÎãàÎã§. Í∑∏Îü¨ÎÇò Ï†ÄÏû• Í≤ΩÎ°ú ÏàòÏ†ï ÏûëÏóÖÏù¥ ÏöîÍµ¨ÎêòÎ©¥ÏÑú ÏûêÎèôÌôîÎäî ÌûòÎì§Îã§Í≥† ÌåêÎã®ÌñàÏäµÎãàÎã§.&lt;/p>
&lt;blockquote>
&lt;p>ÏÉÅÎãπÌûà ÏûëÏóÖÏù¥ Î≤àÍ±∞Î°úÏö¥ Í¥ÄÍ≥ÑÎ°ú &lt;a class="link" href="https://jongsky.tistory.com/81" target="_blank" rel="noopener"
>JONGSKYÎãòÏùò Î∏îÎ°úÍ∑∏(ÏãúÍ∞ÑÏùò ÎÜçÎèÑ) - MySQL Ï†ÄÏû•Í≤ΩÎ°ú Î≥ÄÍ≤ΩÌïòÍ∏∞(feat. ubuntu)&lt;/a> Î°ú ÎåÄÏ≤¥ÌïòÍ≤†ÏäµÎãàÎã§.&lt;/p>&lt;/blockquote>
&lt;p>ÏúÑÏùò Î∞©Î≤ïÏùÑ Î™®Îëê Îî∞ÎùºÌïòÎ©¥ mysql ÏÑúÎ≤Ñ ÏÑ§ÏπòÍ∞Ä ÏôÑÎ£åÎê©ÎãàÎã§.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/opsathlan-3-1/image-9.png"
width="739"
height="202"
srcset="https://s0okju.github.io/p/opsathlan-3-1/image-9_hu_a57512bfc759a4cc.png 480w, https://s0okju.github.io/p/opsathlan-3-1/image-9_hu_1db43807fdf4bdcd.png 1024w"
loading="lazy"
alt="mysql server Ï†ïÏÉÅ Ïã§Ìñâ ÏÉÅÌÉú"
class="gallery-image"
data-flex-grow="365"
data-flex-basis="878px"
>&lt;/p>
&lt;p>&lt;code>web-instance&lt;/code> Ïóê mysql clientÎ•º ÏÑ§ÏπòÌïòÏó¨ ÌÖåÏä§Ìä∏Î•º ÏàòÌñâÌï¥ Î≥¥Í≤†ÏäµÎãàÎã§. mysql ÏÑúÎ≤ÑÏóê Í≥ÑÏ†ïÏùÑ ÎßåÎì† ÌõÑ ÌÖåÏä§Ìä∏Î•º Ìï¥Î≥¥Î©¥ Ïó∞Í≤∞Ìï† Ïàò ÏóÜÎã§Îäî Ïò§Î•òÎ•º Î≥º Ïàò ÏûàÏäµÎãàÎã§. &lt;strong>&lt;code>db-instance&lt;/code> security groupÏóê mysql ÏÑúÎ≤Ñ Ìè¨Ìä∏Ïù∏ 3306 Í∑úÏπôÏùÑ Ï∂îÍ∞ÄÌï¥ÎèÑ ÎòëÍ∞ôÏùÄ Ïò§Î•òÍ∞Ä Î∞úÏÉù&lt;/strong>Îê©ÎãàÎã§.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/opsathlan-3-1/image-10.png"
width="803"
height="67"
srcset="https://s0okju.github.io/p/opsathlan-3-1/image-10_hu_b0e69f8a16a00faf.png 480w, https://s0okju.github.io/p/opsathlan-3-1/image-10_hu_ae5c25dad2f3a6f4.png 1024w"
loading="lazy"
alt="Mysql Ïó∞Í≤∞ Ïò§Î•ò"
class="gallery-image"
data-flex-grow="1198"
data-flex-basis="2876px"
>&lt;/p>
&lt;p>&lt;code>/etc/mysql/mysql.conf.d/mysqld.cnf&lt;/code> mysql ÏÑ§Ï†ï ÌååÏùºÏóê Ïô∏Î∂Ä ÌÜµÏã†ÏùÑ ÌóàÏö©Ìï¥Ï£ºÎ©¥ Ï†ïÏÉÅÏ†ÅÏúºÎ°ú Ïó∞Í≤∞Ìï† Ïàò ÏûàÍ≤å Îê©ÎãàÎã§.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">bind-address = 0.0.0.0
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="Îã§Ïùå-Ïù¥ÏïºÍ∏∞">Îã§Ïùå Ïù¥ÏïºÍ∏∞
&lt;/h2>&lt;p>Îç∞Ïù¥ÌÑ∞Î≤†Ïù¥Ïä§ ÏÑúÎ≤ÑÎ•º Íµ¨ÏÑ±ÌñàÏúºÎãà jenkinsÎ•º ÌÜµÌïú CI/CDÎ•º Íµ¨Ï∂ïÌï¥Î≥¥Í≤†ÏäµÎãàÎã§.&lt;/p>
&lt;div class="footnotes" role="doc-endnotes">
&lt;hr>
&lt;ol>
&lt;li id="fn:1">
&lt;p>ÏôÑÏ†Ñ Í¥ÄÎ¶¨Ìòï ÏÑúÎπÑÏä§Îäî ÏïÑÎãôÎãàÎã§!&amp;#160;&lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/div></description></item><item><title>OpsAthlan 2 - 2. Advanced echo server Î©îÌä∏Î¶≠ Î∂ÑÏÑù</title><link>https://s0okju.github.io/p/opsathlan-2-2/</link><pubDate>Sun, 29 Sep 2024 00:00:00 +0900</pubDate><guid>https://s0okju.github.io/p/opsathlan-2-2/</guid><description>&lt;h2 id="jvmÏùò-Î©îÎ™®Î¶¨-ÏÇ¨Ïö©-ÌòïÌÉú">JVMÏùò Î©îÎ™®Î¶¨ ÏÇ¨Ïö© ÌòïÌÉú
&lt;/h2>&lt;p>JVMÏóêÎäî 3Í∞ÄÏßÄ Î©îÎ™®Î¶¨ ÏÇ¨Ïö© ÌòïÌÉúÍ∞Ä ÏûàÏäµÎãàÎã§.&lt;/p>
&lt;ul>
&lt;li>used: JVMÏù¥ ÏÇ¨Ïö© Ï§ëÏù∏ Î©îÎ™®Î¶¨ Ïñë&lt;/li>
&lt;li>committed: JVMÏù¥ ÏãúÏä§ÌÖúÏóêÍ≤å ÏöîÏ≤≠Ìïú Î©îÎ™®Î¶¨ Ïñë&lt;/li>
&lt;li>max : Ïã§Ìñâ Ï§ëÏù∏ ÌôòÍ≤ΩÏóêÏÑú ÏµúÎåÄÎ°ú Ìï†ÎãπÌï† Ïàò ÏûàÎäî Î©îÎ™®Î¶¨ Ïñë&lt;/li>
&lt;/ul>
&lt;p>Î©îÎ™®Î¶¨ Ïö©ÎüâÏùÄ used &amp;lt;= committed &amp;lt;= maxÎ•º Îî∞Î•¥ÎäîÎç∞, used Î©îÎ™®Î¶¨ ÏñëÏù¥ committed, max Î©îÎ™®Î¶¨Î≥¥Îã§ ÌÅ¨Í≤å ÎêúÎã§Î©¥ OOM(Out Of Memory)Ïù¥ Î∞úÏÉù&lt;sup id="fnref:1">&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref">1&lt;/a>&lt;/sup>ÌïòÍ≤å Îê©ÎãàÎã§.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/opsathlan-2-2/image.png"
width="1280"
height="658"
srcset="https://s0okju.github.io/p/opsathlan-2-2/image_hu_7eff0a0e3e83f7ce.png 480w, https://s0okju.github.io/p/opsathlan-2-2/image_hu_122e62af3cace43b.png 1024w"
loading="lazy"
alt="Ï∂úÏ≤ò - https://swmobenz.tistory.com/37"
class="gallery-image"
data-flex-grow="194"
data-flex-basis="466px"
>&lt;/p>
&lt;p>Í∑∏ÎùºÌååÎÇòÎ•º ÌôïÏù∏Ìï¥Î≥¥Î©¥ 3Í∞ÄÏßÄÏùò Î©îÎ™®Î¶¨ ÌòïÌÉúÎ•º Ïïå Ïàò ÏûàÏäµÎãàÎã§.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/opsathlan-2-2/image-1.png"
width="1132"
height="298"
srcset="https://s0okju.github.io/p/opsathlan-2-2/image-1_hu_fbf00331a397b61c.png 480w, https://s0okju.github.io/p/opsathlan-2-2/image-1_hu_339a5807185ccf79.png 1024w"
loading="lazy"
alt="Í∑∏ÎùºÌååÎÇòÏóêÏÑú ÌôïÏù∏Ìïú JVM Memory"
class="gallery-image"
data-flex-grow="379"
data-flex-basis="911px"
>&lt;/p>
&lt;h3 id="committed-memoryÏùò-Ïó≠Ìï†">Committed MemoryÏùò Ïó≠Ìï†
&lt;/h3>&lt;blockquote>
&lt;p>&lt;a class="link" href="https://swmobenz.tistory.com/37" target="_blank" rel="noopener"
>YGwanÎãòÏùò Î∏îÎ°úÍ∑∏: JVM MemoryÏùò 3Í∞ÄÏßÄ Î©îÌä∏Î¶≠ ÏßÄÌëú - Committed MemoryÎûÄ?&lt;/a>Î•º ÏùΩÏñ¥Î≥¥Îäî Í≤ÉÏùÑ Ï∂îÏ≤úÎìúÎ¶ΩÎãàÎã§.&lt;/p>&lt;/blockquote>
&lt;p>&lt;strong>Î©îÎ™®Î¶¨Î•º Ìï†ÎãπÌïòÍ≥† Ìï¥Ï†úÌïòÎäîÎç∞ ÌïÑÏöîÌïú Ïò§Î≤ÑÌó§ÎìúÎ•º Ï§ÑÏùº Ïàò ÏûàÎã§Îäî ÌäπÏßï&lt;/strong>ÏùÑ Í∞ÄÏßÄÍ≥† ÏûàÏäµÎãàÎã§.&lt;br>
JVMÏù¥ ÏãúÏä§ÌÖúÏùÑ ÌÜµÌï¥ ÎØ∏Î¶¨ Î©îÎ™®Î¶¨Î•º Ìï†ÎãπÌïòÏó¨ ÏÇ¨Ïö© Ïãú Í∞ÄÏßÄÍ≥† ÏûàÎäî Ïó¨Ïú† Î©îÎ™®Î¶¨ Í≥µÍ∞ÑÏùÑ ÌôúÏö©Ìï©ÎãàÎã§. Ïù¥Î•º ÌÜµÌï¥ Î©îÎ™®Î¶¨Î•º Ï¶âÏãú ÏÇ¨Ïö©Ìï† Ïàò ÏûàÏúºÎ©∞ Î©îÎ™®Î¶¨Î•º Ìï†ÎãπÌïòÎäîÎç∞ Î∞úÏÉùÌïòÎäî Ïò§Î≤ÑÌó§ÎìúÎ•º Ï§ÑÏùº Ïàò ÏûàÍ≤å Îê©ÎãàÎã§.&lt;/p>
&lt;h2 id="advanced-echo-server-jvm-Î©îÌä∏Î¶≠-ÌäπÏßï">Advanced echo server jvm Î©îÌä∏Î¶≠ ÌäπÏßï
&lt;/h2>&lt;p>Ïù¥Ï†Ñ Í∏ÄÏóêÏÑú Ïä§ÌîÑÎßÅÎ∂ÄÌä∏ Ïª®ÌÖåÏù¥ÎÑàÏùò Î©îÎ™®Î¶¨Í∞Ä ÏßÄÏÜçÏ†ÅÏúºÎ°ú Ï¶ùÍ∞ÄÌïúÎã§Í≥† Ïñ∏Í∏âÌñàÏäµÎãàÎã§. Í∑∏ÎûòÏÑú Ï†ÄÎäî jvmÏóê Î¨∏Ï†úÍ∞Ä ÏûàÏùÑ Ïàò ÏûàÍ≤†Îã§Îäî ÏÉùÍ∞ÅÏù¥ Îì§Ïñ¥ Í¥ÄÎ†® ÏßÄÌëúÎ•º ÌôïÏù∏Ìï¥Î≥¥Í≤†ÏäµÎãàÎã§.&lt;br>
Ï≤òÏùåÏóê ÎààÏó¨Í≤® Î¥§Îçò Í≤ÉÏùÄ JVMÏùò committed Î©îÎ™®Î¶¨ ÏñëÏù¥ Ï†êÏßÑÏ†ÅÏúºÎ°ú Ï¶ùÍ∞ÄÌïòÍ≥† ÏûàÎã§Îäî Ï†êÏù¥ÏóàÏäµÎãàÎã§.&lt;/p>
&lt;p>üòÇ ÏÇ¨ÏßÑÏóêÏÑúÎäî Ïûò Î≥¥Ïù¥ÏßÄ ÏïäÏßÄÎßå ÏûêÏÑ∏Ìûà Î≥¥Î©¥ 1MBÏî© ÏÉÅÏäπÌïòÍ≥† ÏûàÏäµÎãàÎã§.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/opsathlan-2-2/image-2.png"
width="393"
height="278"
srcset="https://s0okju.github.io/p/opsathlan-2-2/image-2_hu_18af394033c56b55.png 480w, https://s0okju.github.io/p/opsathlan-2-2/image-2_hu_7d2028e9a7d4acdf.png 1024w"
loading="lazy"
alt="JVM Î©îÎ™®Î¶¨ ÏÇ¨Ïö©Îüâ"
class="gallery-image"
data-flex-grow="141"
data-flex-basis="339px"
>&lt;/p>
&lt;p>ÏûêÏÑ∏Ìûà ÏïåÏïÑÎ≥¥Í∏∞ Ï†ÑÏóê heapÍ≥º non-heap Î©îÎ™®Î¶¨Ïóê ÎåÄÌï¥ ÏïåÏïÑÎ¥ÖÏãúÎã§.&lt;/p>
&lt;ul>
&lt;li>Java Heap : InstanceÏôÄ Í∞ùÏ≤¥Í∞Ä Ï†ÄÏû•ÎêòÎäî Í≥µÍ∞ÑÏúºÎ°ú Î™®Îì† ThreadÏóê ÏùòÌï¥ Í≥µÏú†ÎêòÎäî ÏòÅÏó≠&lt;sup id="fnref:2">&lt;a href="#fn:2" class="footnote-ref" role="doc-noteref">2&lt;/a>&lt;/sup>&lt;/li>
&lt;li>Native Area(non-heap) : OSÎ†àÎ≤®ÏóêÏÑú Í¥ÄÎ¶¨ÌïòÎäî ÏòÅÏó≠ÏúºÎ°ú JVM ÌÅ¨Í∏∞Ïóê Í∞ïÏ†úÎêòÏßÄ ÏïäÍ∏∞ ÎïåÎ¨∏Ïóê &lt;strong>ÌîÑÎ°úÏÑ∏Ïä§Í∞Ä Ïù¥Ïö©Ìï† Ïàò ÏûàÎäî Î©îÎ™®Î¶¨ ÏûêÏõêÏùÑ ÏµúÎåÄÌïú ÌôúÏö©Ìï† Ïàò ÏûàÏäµÎãàÎã§.&lt;/strong>&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://s0okju.github.io/p/opsathlan-2-2/image-3.png"
width="844"
height="250"
srcset="https://s0okju.github.io/p/opsathlan-2-2/image-3_hu_3aa78af60af0e37e.png 480w, https://s0okju.github.io/p/opsathlan-2-2/image-3_hu_263681960e80b037.png 1024w"
loading="lazy"
alt="Ï∂úÏ≤ò :¬†https://www.samsungsds.com/kr/insights/1232761_4627.html"
class="gallery-image"
data-flex-grow="337"
data-flex-basis="810px"
>&lt;/p>
&lt;p>Îã§Ïãú ÎèåÏïÑÏôÄ Ï†úÍ∞Ä Ïö¥ÏòÅÌïòÍ≥† ÏûàÎäî Ïõπ Ïï†ÌîåÎ¶¨ÏºÄÏù¥ÏÖòÏùÑ ÌôïÏù∏Ìï¥ Î≥ºÍπåÏöî.&lt;br>
Ï†ïÎßê Í∞ÑÎã®Ìïú EchoControllerÏôÄ ÌîÑÎ°úÎ©îÌÖåÏö∞Ïä§ metric ÏàòÏßëÏùÑ ÏúÑÌïú MetricControllerÍ∞Ä ÏûàÏäµÎãàÎã§.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="line">&lt;span class="cl">&lt;span class="nd">@RestController&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="kd">public&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kd">class&lt;/span> &lt;span class="nc">EchoController&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nd">@GetMapping&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;/echo&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">public&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">String&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nf">echo&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">return&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;Hello, World!&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Ïõπ Ïï†ÌîåÎ¶¨ÏºÄÏù¥ÏÖòÏù¥ ÎπÑÍµêÏ†Å Îã®ÏàúÌïòÍ∏∞ ÎïåÎ¨∏Ïóê Heap ÏòÅÏó≠Ïùò Î¨∏Ï†úÎäî ÏïÑÎãàÎùºÍ≥† ÏÉùÍ∞ÅÌñàÏäµÎãàÎã§.&lt;br>
Í∑∏ÎûòÎèÑ JVM HeapÎ•º ÌôïÏù∏Ìï¥ Î≥¥Í≤†ÏäµÎãàÎã§. Ìûô Î©îÎ™®Î¶¨Ïùò ÏÇ¨Ïö©ÎüâÏùÄ Îß§Ïö∞ Ï†ÅÍ≤å ÏÇ¨Ïö©ÎêòÏóàÍ≥†, ÏïàÏ†ïÏ†ÅÏúºÎ°ú Ïú†ÏßÄÎêòÏóàÏäµÎãàÎã§.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/opsathlan-2-2/image-4.png"
width="793"
height="464"
srcset="https://s0okju.github.io/p/opsathlan-2-2/image-4_hu_da43a9130de5bae4.png 480w, https://s0okju.github.io/p/opsathlan-2-2/image-4_hu_588eb2d140d0d865.png 1024w"
loading="lazy"
alt="JVM Heap Memory ÏÇ¨Ïö©Îüâ"
class="gallery-image"
data-flex-grow="170"
data-flex-basis="410px"
>&lt;/p>
&lt;p>non-heap ÏòÅÏó≠ÏùÑ Î¥êÎ¥ÖÏãúÎã§.&lt;br>
Î≥ÄÌôîÌè≠Ïù¥ Ï†ÅÏñ¥ÏÑú Ï∞®Ïù¥Î•º Î™®Î•¥Í≤†ÏßÄÎßå Î©îÎ™®Î¶¨Í∞Ä ÏÇ¨Ïö©ÎüâÏù¥ Ï°∞Í∏àÏî© Ï¶ùÍ∞ÄÌïòÍ≥† ÏûàÏäµÎãàÎã§.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/opsathlan-2-2/image-5.png"
width="475"
height="278"
srcset="https://s0okju.github.io/p/opsathlan-2-2/image-5_hu_80ffab263e3341fa.png 480w, https://s0okju.github.io/p/opsathlan-2-2/image-5_hu_3d49181a476e3d68.png 1024w"
loading="lazy"
alt="JVM Non-Heap Memory ÏÇ¨Ïö©Îüâ"
class="gallery-image"
data-flex-grow="170"
data-flex-basis="410px"
>&lt;/p>
&lt;p>Ïö∞ÏÑ† &lt;a class="link" href="https://ko.wikipedia.org/wiki/%ED%94%84%EB%A1%9C%ED%8C%8C%EC%9D%BC%EB%A7%81_%28%EC%BB%B4%ED%93%A8%ED%84%B0_%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D%29" target="_blank" rel="noopener"
>ÌîÑÎ°úÌååÏùºÎßÅ&lt;/a>ÏùÄ Î¨¥ÏóáÏùÑ ÏùòÎØ∏Ìï†ÍπåÏöî. &lt;a class="link" href="https://hudi.blog/jvm-warm-up/" target="_blank" rel="noopener"
>hudi.blog: Ïä§ÌîÑÎßÅ Ïï†ÌîåÎ¶¨ÏºÄÏù¥ÏÖò Î∞∞Ìè¨ ÏßÅÌõÑ Î∞úÏÉùÌïòÎäî LatencyÏùò ÏõêÏù∏Í≥º Ïù¥Î•º Ìï¥Í≤∞ÌïòÍ∏∞ ÏúÑÌïú JVM Warm-up&lt;/a>Î•º Ï∞∏Í≥†ÌïòÍ≤†ÏäµÎãàÎã§.&lt;/p>
&lt;blockquote>
&lt;p>&lt;strong>JIT Ïª¥ÌååÏùºÎü¨&lt;/strong>Îäî Ïï†ÌîåÎ¶¨ÏºÄÏù¥ÏÖòÏóêÏÑú¬†&lt;strong>ÏûêÏ£º Ïã§ÌñâÎêúÎã§Í≥† ÌåêÎã®ÎêòÎäî ÌäπÏ†ï Î∂ÄÎ∂ÑÎßåÏùÑ Í∏∞Í≥ÑÏñ¥Î°ú Ïª¥ÌååÏùº&lt;/strong>ÌïúÎã§. Ïù¥ Î∂ÄÎ∂ÑÏùÑ¬†&lt;strong>Ìï´Ïä§Ìåü(Hotspot)&lt;/strong> Ïù¥ÎùºÍ≥† Î∂ÄÎ•∏Îã§. JIT Ïª¥ÌååÏùºÎü¨Îäî Ïã§ÌñâÏ§ëÏù∏ Ïï†ÌîåÎ¶¨ÏºÄÏù¥ÏÖòÏùò ÎèôÏûëÏùÑ Î∂ÑÏÑùÌïòÍ≥† ÏΩîÎìú Ïã§Ìñâ ÌöüÏàò, Î£®ÌîÑ Î∞òÎ≥µ ÌöüÏàò, Î©îÏÜåÎìú Ìò∏Ï∂ú Îì±Ïùò Ï†ïÎ≥¥Î•º Ï∏°Ï†ïÌïòÍ≥† Í∏∞Î°ùÌïúÎã§. Ïù¥Î•º¬†&lt;strong>ÌîÑÎ°úÌååÏùºÎßÅ&lt;/strong>Ïù¥ÎùºÍ≥† ÌïúÎã§.&lt;br>
JIT Ïª¥ÌååÏùºÎü¨Îäî ÌîÑÎ°úÌååÏùºÎßÅ Í≤∞Í≥ºÎ•º ÌÜ†ÎåÄÎ°ú Ìï´Ïä§ÌåüÏùÑ ÏãùÎ≥ÑÌïúÎã§. Ìï´Ïä§ÌåüÏù¥ ÏãùÎ≥ÑÎêòÏóàÎã§Î©¥, JIT Ïª¥ÌååÏùºÎü¨Îäî¬†&lt;strong>Î©îÏÜåÎìú Îã®ÏúÑÎ°ú Î∞îÏù¥Ìä∏ ÏΩîÎìúÎ•º Í∏∞Í≥ÑÏñ¥Î°ú Î≤àÏó≠&lt;/strong>ÌïúÎã§.
JIT Ïª¥ÌååÏùºÎü¨Îäî Ïù¥Î†áÍ≤å Î≤àÏó≠Îêú Í∏∞Í≥ÑÏñ¥Î•º¬†&lt;strong>ÏΩîÎìú Ï∫êÏãú(Code Cache)&lt;/strong> ÎùºÎäî Ï∫êÏãúÍ≥µÍ∞ÑÏóê Ï†ÄÏû•ÌïúÎã§.&lt;/p>
&lt;p>Ï∂úÏ≤ò - &lt;a class="link" href="https://hudi.blog/jvm-warm-up/" target="_blank" rel="noopener"
>https://hudi.blog/jvm-warm-up/&lt;/a>&lt;/p>&lt;/blockquote>
&lt;p>JITÎäî Ï†ÑÏ≤¥ ÏΩîÎìúÎ•º Ïª¥ÌååÏùº ÌïòÎäî Í≤ÉÏù¥ ÏïÑÎãå ÏûêÏ£º Ïã§ÌñâÎêòÎäî Î∂ÄÎ∂ÑÏóêÎßå Ïª¥ÌååÏùºÌïòÎ©∞ Ïù¥Ïóê ÎåÄÌïú Îç∞Ïù¥ÌÑ∞Î•º Code CacheÏóê Ï†ÄÏû•ÌïòÍ≤å Îê©ÎãàÎã§.&lt;/p>
&lt;p>Non HeapÍ≥º Í¥ÄÎ†®Îêú ÏßÄÌëúÎ•º ÌôïÏù∏Ìï¥Î¥ÖÏãúÎã§.&lt;br>
ÏïÑÎûòÏùò ÏÑ∏ Í∞ÄÏßÄ ÏßÄÌëúÍ∞Ä ÎØ∏ÏÑ∏ÌïòÍ≤å Ï¶ùÍ∞ÄÌïòÍ≥† ÏûàÏäµÎãàÎã§.&lt;/p>
&lt;ul>
&lt;li>Metaspace : JVMÏù¥ Î°úÎìúÌïú Î©îÌÉÄÎç∞Ïù¥ÌÑ∞Î•º Ï†ÄÏû•&lt;/li>
&lt;li>CodeHeap : JIT Ïª¥ÌååÏùºÎü¨ Í¥ÄÎ†® ÏßÄÌëú
&lt;ul>
&lt;li>profiled nmethods&lt;/li>
&lt;li>non-profiled nmethods&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://s0okju.github.io/p/opsathlan-2-2/image-6.png"
width="1888"
height="303"
srcset="https://s0okju.github.io/p/opsathlan-2-2/image-6_hu_8ea4aaec242958a.png 480w, https://s0okju.github.io/p/opsathlan-2-2/image-6_hu_b5ce4ee5c73aea89.png 1024w"
loading="lazy"
alt="JVM Memory Pool(non-heap) ÏßÄÌëú"
class="gallery-image"
data-flex-grow="623"
data-flex-basis="1495px"
>&lt;/p>
&lt;p>ÌïòÏßÄÎßå &lt;strong>Ïû•Í∏∞Ï†ÅÏù∏ Í¥ÄÏ†êÏóêÏÑú Î∞îÎùºÎ¥§ÏùÑÎïå Î©îÎ™®Î¶¨ ÎÇ≠ÎπÑÏùº Ïàò ÏûàÍ≤†Îã§Îäî ÏÉùÍ∞Å&lt;/strong>Ïù¥ Îì§ÏóàÏäµÎãàÎã§.&lt;br>
ÌäπÌûà MetaspaceÎäî JVM ÌÅ¨Í∏∞Ïóê Í∞ïÏ†úÎêòÏßÄ ÏïäÍ∏∞ ÎïåÎ¨∏Ïóê ÌîÑÎ°úÏÑ∏Ïä§Í∞Ä ÏÇ¨Ïö©Ìï† Ïàò ÏûàÎäî Î©îÎ™®Î¶¨ ÏûêÏõêÏùÑ ÏµúÎåÄÌïú ÌôúÏö©Ìï† Ïàò ÏûàÍ≤å Îê©ÎãàÎã§. Í∑∏Îü¨ÎØÄÎ°ú Metaspace Î©îÎ™®Î¶¨Î•º Ï†úÌïúÌïòÏó¨ Ïö¥ÏòÅÌï† ÌïÑÏöîÍ∞Ä ÏûàÏäµÎãàÎã§.&lt;br>
Ïù¥Îü¨Ìïú ÏÑ±Îä• Ï†úÌïúÏùÄ MetaspaceÏóêÎßå Ï†ÅÏö©ÎêòÎäî Í≤ÉÏù¥ ÏïÑÎãàÎùº Îã§Î•∏ ÏòÅÏó≠ÏóêÏÑúÏùò Î©îÎ™®Î¶¨ ÏÇ¨Ïù¥Ï¶à Ï†úÌïúÏù¥ ÌïÑÏöîÌï©ÎãàÎã§.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/opsathlan-2-2/image-7.png"
width="1600"
height="922"
srcset="https://s0okju.github.io/p/opsathlan-2-2/image-7_hu_bde5af3f07961ba8.png 480w, https://s0okju.github.io/p/opsathlan-2-2/image-7_hu_62dab2ea9282642c.png 1024w"
loading="lazy"
alt="Ï∂úÏ≤ò - https://cloud.theodo.com/en/blog/jvm-oom"
class="gallery-image"
data-flex-grow="173"
data-flex-basis="416px"
>&lt;/p>
&lt;p>ÏïàÏ†ÑÌïòÍ≤å Ïï†ÌîåÎ¶¨ÏºÄÏù¥ÏÖòÏùÑ Ïö¥ÏòÅÌïòÍ∏∞ ÏúÑÌï¥ÏÑúÎäî Í∞Å Î©îÎ™®Î¶¨ ÏòÅÏó≠Ïóê ÎßûÎäî ÏöîÍµ¨ÏÇ¨Ìï≠ÏùÑ Í≥†Î†§ÌïòÏó¨ Í≤∞Ï†ïÌïòÎäî Í≤ÉÏù¥ Î∞îÎûåÏßÅÌï©ÎãàÎã§.&lt;/p>
&lt;blockquote>
&lt;p>Java Ïñ¥ÌîåÎ¶¨ÏºÄÏù¥ÏÖòÏùÄ ÌÅ¨Í≤å ÏúÑÏùò HeapÍ≥º Off-Heap Îëê Í≥µÍ∞ÑÏùÑ ÌôúÏö©ÌïòÏó¨ ÎèôÏûëÌïòÎäîÎç∞, Îî∞ÎùºÏÑú Ïñ¥ÌîåÎ¶¨ÏºÄÏù¥ÏÖòÏùÑ Î∞∞Ìè¨Ìï† Îïå Î©îÎ™®Î¶¨ Î™á GBÎ•º Ìï†ÎãπÌï¥Ïïº ÌïòÎäîÏßÄ Í≤∞Ï†ïÌïòÍ∏∞ ÏúÑÌï¥ÏÑúÎäî Îã®ÏàúÌûà Xmx(Heap Î©îÎ™®Î¶¨ ÏµúÎåÄÏπòÎ•º Í≤∞Ï†ïÌïòÎäî Java ÏòµÏÖò) Í∞íÎßå ÏÉùÍ∞ÅÌïòÎ©¥ OOMEÏóê Îπ†ÏßÄÍ∏∞ ÏâΩÎã§. Ïã§Ï†úÎ°úÎäî &lt;strong>XmxÏóê MaxMetaspaceÍ∞íÏùÑ ÎçîÌïòÍ≥†, Ï∂îÍ∞ÄÎ°ú ÌîÑÎ°úÍ∑∏Îû®ÏóêÏÑú NIOÎ•º ÏÇ¨Ïö©Ìï¥ Native MemoryÎ•º ÏßÅÏ†ë Ìï†ÎãπÎ∞õÎäî Î°úÏßÅÏùÑ Í≥†Î†§Ìï¥ÏÑú Heap + Native Memory ÏÇ¨Ïö©Ï¥ùÎüâÏúºÎ°ú Ìï†ÎãπÏùÑ Ìï¥Ïïº ÎπÑÍµêÏ†Å Ï†ïÌôï&lt;/strong>ÌïòÎã§. ÌäπÌûà Ïª®ÌÖåÏù¥ÎÑàÏùò Í≤ΩÏö∞ Í≥ÑÏÇ∞ÏùÑ Ï¢Ä Îçî Ï†ïÌôïÌïòÍ≤å Ìï¥Ïïº ÏãúÏä§ÌÖúÏóêÏÑú OOM killedÎêòÎäî ÏÉÅÌô©ÏùÑ Î©¥Ìï† Ïàò ÏûàÎã§.&lt;/p>
&lt;p>Ï∂úÏ≤ò - &lt;a class="link" href="https://www.samsungsds.com/kr/insights/1232761_4627.html" target="_blank" rel="noopener"
>https://www.samsungsds.com/kr/insights/1232761_4627.html&lt;/a>&lt;/p>&lt;/blockquote>
&lt;h2 id="Ï†ïÎ¶¨">Ï†ïÎ¶¨
&lt;/h2>&lt;p>Ïã§Ï†úÎ°ú Î∞∞Ìè¨Ìï¥Î≥¥Î©¥ÏÑú Ïª®ÌÖåÏù¥ÎÑàÏùò ÏßÄÏÜçÏ†ÅÏù∏ Î©îÎ™®Î¶¨ ÏÇ¨Ïö©ÎüâÏù¥ Ï¶ùÍ∞ÄÌïòÎäî Í≤ÉÏóê ÏùòÎ¨∏Ï†êÏùÑ Í∞ÄÏßÄÍ≤å ÎêòÏóàÏäµÎãàÎã§. ÏûêÎ∞î Ïª®ÌÖåÏù¥ÎÑàÏùò Î©îÎ™®Î¶¨ ÏÇ¨Ïö©ÏùÄ JVMÏù¥ Ïª®Ìä∏Î°§Ìï† Ïàò ÏóÜÎäî Î∂ÄÎ∂ÑÏù¥ ÎßéÏïÑ Ï∂îÏ†ÅÌïòÍ∏∞ Ïñ¥Î†µÏäµÎãàÎã§&lt;sup id="fnref:3">&lt;a href="#fn:3" class="footnote-ref" role="doc-noteref">3&lt;/a>&lt;/sup>.&lt;br>
Í∑∏ÎûòÏÑú ÏûêÏÑ∏Ìûà ÌôïÏù∏Ìï† Ïàò ÏûàÎäî JVM ÏúÑÏ£ºÎ°ú ÌôïÏù∏ÌïòÍ≤å ÎêòÏóàÏäµÎãàÎã§. non-heap ÏòÅÏó≠Ïù¥ ÎØ∏ÏÑ∏ÌïòÍ≤å ÏÉÅÏäπÌïòÍ≥† ÏûàÏóàÍ≥†, Ïù¥Îäî Ï†ïÏÉÅÏ†ÅÏù∏ ÏßÄÌëúÎùºÍ≥† ÏÉùÍ∞ÅÌñàÏäµÎãàÎã§. Í∑∏Îü¨ÎÇò Ïû•Í∏∞Ï†ÅÏúºÎ°úÎäî Î©îÎ™®Î¶¨ ÎÇ≠ÎπÑÍ∞Ä Îê† Ïàò ÏûàÏúºÎØÄÎ°ú Î©îÎ™®Î¶¨ ÏÇ¨Ïù¥Ï¶àÎ•º Ï†úÌïúÌïòÏó¨ Ïö¥ÏòÅÌï¥Ïïº Ìï©ÎãàÎã§.&lt;/p>
&lt;h2 id="reference">Reference
&lt;/h2>&lt;ul>
&lt;li>&lt;a class="link" href="https://swmobenz.tistory.com/37" target="_blank" rel="noopener"
>https://swmobenz.tistory.com/37&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://hudi.blog/jvm-warm-up/" target="_blank" rel="noopener"
>https://hudi.blog/jvm-warm-up/&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://velog.io/@dongvelop/Spring-Boot-%EC%84%9C%EB%B2%84-%EB%AA%A8%EB%8B%88%ED%84%B0%EB%A7%81-%EB%8C%80%EC%8B%9C%EB%B3%B4%EB%93%9C%EB%B3%84-%EC%84%A4%EB%AA%85-%EB%B0%8F-%EC%9C%A0%EC%9D%98%EC%82%AC%ED%95%AD#codeheap-non-profiled-nmethods-non-heap" target="_blank" rel="noopener"
>https://velog.io/@dongvelop/Spring-Boot-%EC%84%9C%EB%B2%84-%EB%AA%A8%EB%8B%88%ED%84%B0%EB%A7%81-%EB%8C%80%EC%8B%9C%EB%B3%B4%EB%93%9C%EB%B3%84-%EC%84%A4%EB%AA%85-%EB%B0%8F-%EC%9C%A0%EC%9D%98%EC%82%AC%ED%95%AD#codeheap-non-profiled-nmethods-non-heap&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://www.samsungsds.com/kr/insights/1232761_4627.html" target="_blank" rel="noopener"
>https://www.samsungsds.com/kr/insights/1232761_4627.html&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://obv-cloud.com/41" target="_blank" rel="noopener"
>https://obv-cloud.com/41&lt;/a>&lt;/li>
&lt;/ul>
&lt;div class="footnotes" role="doc-endnotes">
&lt;hr>
&lt;ol>
&lt;li id="fn:1">
&lt;p>&lt;a class="link" href="https://swmobenz.tistory.com/37" target="_blank" rel="noopener"
>https://swmobenz.tistory.com/37&lt;/a>&amp;#160;&lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;li id="fn:2">
&lt;p>&lt;a class="link" href="https://12bme.tistory.com/382" target="_blank" rel="noopener"
>https://12bme.tistory.com/382&lt;/a>&amp;#160;&lt;a href="#fnref:2" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;li id="fn:3">
&lt;p>&lt;a class="link" href="https://stackoverflow.com/questions/53451103/java-using-much-more-memory-than-heap-size-or-size-correctly-docker-memory-limi" target="_blank" rel="noopener"
>https://stackoverflow.com/questions/53451103/java-using-much-more-memory-than-heap-size-or-size-correctly-docker-memory-limi&lt;/a>&amp;#160;&lt;a href="#fnref:3" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/div></description></item><item><title>OpsAthlan 2 - 1. Advanced echo server Íµ¨Ï∂ï</title><link>https://s0okju.github.io/p/opsathlan-2-1/</link><pubDate>Thu, 26 Sep 2024 00:00:00 +0900</pubDate><guid>https://s0okju.github.io/p/opsathlan-2-1/</guid><description>&lt;h2 id="ÏãúÎÇòÎ¶¨Ïò§">ÏãúÎÇòÎ¶¨Ïò§
&lt;/h2>&lt;p>&lt;a class="link" href="https://s0okju.github.io/p/opsathlan-1/" target="_blank" rel="noopener"
>Ïù¥Ï†ÑÍ∏Ä&lt;/a> ÏùÑ Î≥¥Îãà Ïä§ÌîÑÎßÅ Ïï†ÌîåÎ¶¨ÏºÄÏù¥ÏÖò Ïª®ÌÖåÏù¥ÎÑàÏóê Î¨∏Ï†úÍ∞Ä ÏÉùÍ∏¥ Í≤É Í∞ôÎã§. spring boot Ïï†ÌîåÎ¶¨ÏºÄÏù¥ÏÖòÏóê ÎåÄÌïú ÏßÄÌëúÎ•º ÏàòÏßëÌï† Ïàò ÏûàÎèÑÎ°ù ÌôòÍ≤ΩÏùÑ Íµ¨Ï∂ïÌï¥Î≥¥Ïûê.&lt;/p>
&lt;h3 id="ÌôòÍ≤Ω">ÌôòÍ≤Ω
&lt;/h3>&lt;ul>
&lt;li>Ubuntu 22.04&lt;/li>
&lt;li>Openstack 2024.1&lt;/li>
&lt;/ul>
&lt;h3 id="Ï†ÑÏ≤¥-Íµ¨ÏÉÅÎèÑ">Ï†ÑÏ≤¥ Íµ¨ÏÉÅÎèÑ
&lt;/h3>&lt;p>ÏïÑÎûòÏôÄ Í∞ôÏù¥ Íµ¨ÏÉÅÎê©ÎãàÎã§. cAdvisorÎ•º ÏÑ§Ï†ïÌïú Ïù¥Ïú†Îäî Ïª®ÌÖåÏù¥ÎÑà Í¥ÄÎ†® Î©îÌä∏Î¶≠ÏùÑ ÏàòÏßëÌïòÍ∏∞ ÏúÑÌï¥ ÏÑ§Ï†ïÌñàÏäµÎãàÎã§.
docker-composeÎ•º ÌÜµÌï¥ Ïª®ÌÖåÏù¥ÎÑàÎ•º Î∞∞Ìè¨ÌñàÏäµÎãàÎã§.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/opsathlan-2-1/image.png"
width="810"
height="750"
srcset="https://s0okju.github.io/p/opsathlan-2-1/image_hu_ad21e66785afcdf9.png 480w, https://s0okju.github.io/p/opsathlan-2-1/image_hu_984a11c238db3a47.png 1024w"
loading="lazy"
alt="ÏÇ¨ÏßÑ - OpsAthlan 2 Íµ¨ÏÑ±ÎèÑ"
class="gallery-image"
data-flex-grow="108"
data-flex-basis="259px"
>&lt;/p>
&lt;blockquote>
&lt;p>Ïø†Î≤ÑÎÑ§Ìã∞Ïä§Îäî Ïª®ÌÖåÏù¥ÎÑàÎì§Ïùò Î¶¨ÏÜåÏä§ ÏßÄÌëúÎ•º Ï†úÍ≥µÌïòÍ∏∞ ÏúÑÌï¥ cAdvisorÎ•º Í∏∞Î≥∏Ï†ÅÏúºÎ°ú Ï†úÍ≥µÌï©ÎãàÎã§.&lt;sup id="fnref:1">&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref">1&lt;/a>&lt;/sup>&lt;/p>&lt;/blockquote>
&lt;h3 id="Ï†àÏ∞®">Ï†àÏ∞®
&lt;/h3>&lt;ol>
&lt;li>Terraform, AnsibleÎ•º ÌôúÏö©Ìïú ÌôòÍ≤Ω Íµ¨ÏÑ±&lt;/li>
&lt;li>ÌîÑÎ°úÎ©îÌÖåÏö∞Ïä§Î•º ÌôúÏö©Ìïú ÏßÄÌëú ÏàòÏßë&lt;/li>
&lt;li>Í∑∏ÎùºÌååÎÇò ÏãúÍ∞ÅÌôî&lt;/li>
&lt;/ol>
&lt;h2 id="ÌôòÍ≤Ω-Íµ¨ÏÑ±">ÌôòÍ≤Ω Íµ¨ÏÑ±
&lt;/h2>&lt;p>ÌÅ¥ÎùºÏö∞Îìú Î¶¨ÏÜåÏä§Ïùò Íµ¨ÏÑ± ÏûêÏ≤¥Îäî &lt;a class="link" href="https://s0okju.github.io/p/opsathlan-1/" target="_blank" rel="noopener"
>Ïù¥Ï†Ñ&lt;/a>Í≥º Î≥ÄÌôîÌïòÏßÄ ÏïäÏïòÏäµÎãàÎã§.&lt;/p>
&lt;h3 id="docker-compose">docker compose
&lt;/h3>&lt;p>Îã§Îßå ÌôòÍ≤Ω Íµ¨ÏÑ±ÏùÄ Î≥ÄÌñàÏäµÎãàÎã§. Í∞úÎ≥Ñ Ïª®ÌÖåÏù¥ÎÑàÎ°ú Î∞∞Ìè¨ÌïòÎäî Í≤ÉÏù¥ ÏïÑÎãå docker-composeÎ•º ÌÜµÌï¥ Í¥ÄÎ†® Ïª®ÌÖåÏù¥ÎÑàÎ•º Î∞∞Ìè¨ÌñàÏäµÎãàÎã§. Í∑∏ Ïù¥Ïú†Îäî Ïª®ÌÖåÏù¥ÎÑàÏùò Í∞úÏàòÍ∞Ä ÎßéÏïÑÏßêÏóê Îî∞Îùº Ïª®ÌÖåÏù¥ÎÑàÎ•º ÌÅ∞ Î¨∂ÏùåÏúºÎ°ú Í¥ÄÎ¶¨ÌïòÍ∏∞ ÏúÑÌï¥ÏÑúÏûÖÎãàÎã§.&lt;/p>
&lt;p>Ï¥ù 4Í∞úÏùò Ïª®ÌÖåÏù¥ÎÑàÎ•º Î∞∞Ìè¨ÌïòÍ≤å Îê©ÎãàÎã§&lt;/p>
&lt;ul>
&lt;li>Prometheus&lt;/li>
&lt;li>Grafana&lt;/li>
&lt;li>Springboot application&lt;/li>
&lt;li>cAdvisor&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yml" data-lang="yml">&lt;span class="line">&lt;span class="cl">&lt;span class="c"># docker-compose.yml&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">version&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;3.7&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">services&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># Prometheus service&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">prometheus&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">prom/prometheus:latest&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">container_name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">prometheus&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">volumes&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">./prometheus/prometheus.yml:/etc/prometheus/prometheus.yml&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;9090:9090&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># Expose Prometheus web UI&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">networks&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">monitoring&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># Grafana service&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">grafana&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">grafana/grafana:latest&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">container_name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">grafana&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;3000:3000&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># Expose Grafana web UI&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">networks&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">monitoring&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">depends_on&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">prometheus&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># Spring Boot app service&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">advanced-echo&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">opsathlan-advanced-echo:latest&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">container_name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">opsathlan-advanced-echo&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;8080:8080&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">networks&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">monitoring&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># cadvsior config&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">cadvisor&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">container_name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">cadvisor&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">gcr.io/cadvisor/cadvisor:latest&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;8081:8080&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">volumes&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;/:/rootfs:ro&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;/var/run:/var/run:ro&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;/sys:/sys:ro&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;/var/lib/docker/:/var/lib/docker:ro&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># docker container log&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">networks&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">monitoring&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">networks&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">monitoring&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">driver&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">bridge&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="ÌîÑÎ°úÎ©îÌÖåÏö∞Ïä§">ÌîÑÎ°úÎ©îÌÖåÏö∞Ïä§
&lt;/h3>&lt;p>ÌîÑÎ°úÎ©îÌÖåÏö∞Ïä§Í∞Ä ÏàòÏßëÌïú Î©îÌä∏Î¶≠ ÏßÄÌëúÎäî springboot container Í¥ÄÎ†® ÏßÄÌëúÏôÄ Ïª®ÌÖåÏù¥ÎÑà Í¥ÄÎ†® ÏßÄÌëúÏûÖÎãàÎã§. Í∑∏ÎûòÏÑú &lt;code>scrape_configs&lt;/code> targetÏóê Í¥ÄÎ†® Ïª®ÌÖåÏù¥ÎÑà URLÎ•º Í∏∞ÏûÖÌïòÍ≤å Îê©ÎãàÎã§.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yml" data-lang="yml">&lt;span class="line">&lt;span class="cl">&lt;span class="c"># prometheus.yml&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">global&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">scrape_interval&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">10s&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># How often to scrape targets&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">scrape_configs&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">job_name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;opsathlan-advanced-echo&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">static_configs&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">targets&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;opsathlan-advanced-echo:8080&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;cadvisor:8080&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">labels&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">group&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;test&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="docker-composeÎ•º-Ïã§ÌñâÌïòÎäî-ansible-playbook">docker composeÎ•º Ïã§ÌñâÌïòÎäî Ansible playbook
&lt;/h3>&lt;p>novaÏóêÏÑú docker-composeÎ•º Ïã§ÌñâÏãúÌÇ§Í∏∞ ÏúÑÌï¥ÏÑúÎäî &lt;strong>Í¥ÄÎ†® Î∞îÏù¥ÎÑàÎ¶¨Î•º ÏÑ§Ïπò&lt;/strong>ÌïòÍ≥†, &lt;strong>ÌïÑÏöîÌïú ÌôòÍ≤Ω ÌååÏùºÏùÑ Ïù∏Ïä§ÌÑ¥Ïä§Ïóê Î≥µÏÇ¨&lt;/strong>ÌïòÎäî ÏûëÏóÖÏù¥ ÌïÑÏöîÌï©ÎãàÎã§. &lt;a class="link" href="https://github.com/S0okJu/OpsAthlan/tree/sc/2/scenario_02/ansible/docker-compose" target="_blank" rel="noopener"
>docker-compose ÎùºÎäî ansible role&lt;/a>Î•º ÎßåÎì§Ïñ¥ Ïä§ÌîÑÎßÅ Ïª®ÌÖåÏù¥ÎÑà Ïù¥ÎØ∏ÏßÄÎ•º ÎπåÎìúÌïòÍ≥†, docker composeÎ•º Ïã§ÌñâÏãúÌÇ§Îäî ÌÖåÏä§ÌÅ¨Î•º Ï∂îÍ∞ÄÌñàÏäµÎãàÎã§.&lt;/p>
&lt;p>Í∞úÏù∏Ï†ÅÏúºÎ°ú ÏûëÏóÖÌïú &lt;a class="link" href="https://github.com/S0okJu/OpsAthlan/tree/sc/2/scenario_02/ansible/docker-installation" target="_blank" rel="noopener"
>ÎèÑÏª§ ÏÑ§Ïπò ansible-role&lt;/a> Î•º ÌôïÏù∏Ìï¥Î≥¥Î©¥ docker ÏÑ§ÏπòÌï†Îïå &lt;code>docker-compose plugin&lt;/code>Î•º ÏÑ§ÏπòÌïòÍ≤å Îê©ÎãàÎã§. Í∑∏ÎûòÏÑú Î≥ÑÎèÑÏùò ÏÑ§Ïπò ÏóÜÏù¥ &lt;code>docker compose&lt;/code> Î™ÖÎ†πÏñ¥ ÎßåÏúºÎ°úÎèÑ docker-compose ÌååÏùºÏùÑ Ïã§ÌñâÏãúÌÇ¨ Ïàò ÏûàÍ≤å Îê©ÎãàÎã§.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yml" data-lang="yml">&lt;span class="line">&lt;span class="cl">- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Update apt cache&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">apt&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">update_cache&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">yes&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Install Docker Engine, CLI, containerd, and plugins&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">apt&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">docker-ce&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">docker-ce-cli&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">containerd.io&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">docker-buildx-plugin&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">docker-compose-plugin&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">state&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">present&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ÌîÑÎ°úÎ©îÌÖåÏö∞Ïä§Î•º Ïã§ÌñâÏãúÌÇ§Í∏∞ ÏúÑÌï¥ÏÑúÎäî config ÌååÏùºÏùÑ nova Ïù∏Ïä§ÌÑ¥Ïä§Ïóê ÏßÅÏ†ë Ï†ÄÏû•Ìï¥Ïïº ÌïòÎäî ÏûëÏóÖÏù¥ ÌïÑÏöîÌï©ÎãàÎã§. &lt;code>docker-compose.yml&lt;/code> Î•º Îã§Ïãú ÌôïÏù∏Ìï¥Î≥¥Î©¥ local volumeÏù¥ &lt;code>./prometheus/prometheus.yml&lt;/code> Î°ú ÎêòÏñ¥ ÏûàÏäµÎãàÎã§. ÌååÏùº Í≤ΩÎ°úÎäî nova Ïù∏Ïä§ÌÑ¥Ïä§Ïùò ÌååÏùº Í≤ΩÎ°úÎ°ú Ìï¥Îãπ ÌååÏùº Í≤ΩÎ°úÏóê ÎßûÍ≤å ÏÑ§Ï†ï ÌååÏùº(prometheus.yml)Î•º Ï†ÄÏû•Ìï¥Ïïº Ìï©ÎãàÎã§.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yml" data-lang="yml">&lt;span class="line">&lt;span class="cl">&lt;span class="c"># docker-compose.yml&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">services&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># Prometheus service&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">prometheus&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">prom/prometheus:latest&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">container_name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">prometheus&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">volumes&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">./prometheus/prometheus.yml:/etc/prometheus/prometheus.yml&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;9090:9090&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># Expose Prometheus web UI&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">networks&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">monitoring&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>prometheusÏùò Ìè¥ÎçîÎ•º ÎßåÎì† ÌõÑÏóê Î≥µÏÇ¨ÌïòÎäî ÏûëÏóÖÏùÑ ÌïòÎ©¥ ÌååÏùºÏù¥ Ï†ÄÏû•Îê©ÎãàÎã§.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yml" data-lang="yml">&lt;span class="line">&lt;span class="cl">- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Create Prometheus configuration directory&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">file&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">path&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;/home/ubuntu/prometheus&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">state&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">directory&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">owner&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;ubuntu&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">group&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;ubuntu&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">mode&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;0755&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Copy Prometheus config file&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">copy&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">src&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">./prometheus.yml&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">dest&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">/home/ubuntu/prometheus/prometheus.yml&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">owner&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;ubuntu&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">group&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;ubuntu&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">mode&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;0644&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>docker compose Î™ÖÎ†πÏñ¥Î•º ÏàòÌñâÌïòÎ©¥ docker-compose ÌååÏùºÏóê Ï†ïÏùòÎêú Ïª®ÌÖåÏù¥ÎÑàÎì§ÏùÑ Ïã§ÌñâÏãúÌÇ¨ Ïàò ÏûàÏäµÎãàÎã§.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yml" data-lang="yml">&lt;span class="line">&lt;span class="cl">- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Copy docker-compose.yml to the target machine&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">copy&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">src&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">./docker-compose.yml&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">dest&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">/home/ubuntu/docker-compose.yml&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># Destination on the target machine&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">owner&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;ubuntu&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">group&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;ubuntu&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">mode&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;0644&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Run docker-compose up to start containers&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">command&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">docker compose up -d&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">args&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">chdir&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">/home/ubuntu/&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">become&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="ÌîÑÎ°úÎ©îÌÖåÏö∞Ïä§Î•º-ÌôúÏö©Ìïú-ÏßÄÌëú-ÏàòÏßë">ÌîÑÎ°úÎ©îÌÖåÏö∞Ïä§Î•º ÌôúÏö©Ìïú ÏßÄÌëú ÏàòÏßë
&lt;/h2>&lt;p>Î©îÌä∏Î¶≠ ÏàòÏßë, ÏãúÍ∞ÅÌôî, ÏïåÎ¶º, ÏÑúÎπÑÏä§ ÎîîÏä§Ïª§Î≤ÑÎ¶¨ Í∏∞Îä•ÏùÑ Î™®Îëê Ï†úÍ≥µÌïòÎäî Ïò§Ìîà ÏÜåÏä§ Î™®ÎãàÌÑ∞ÎßÅ ÏãúÏä§ÌÖúÏûÖÎãàÎã§. Pull Î∞©ÏãùÏúºÎ°ú Î©îÌä∏Î¶≠ÏùÑ ÏàòÏßëÌïòÍ≥† ÏãúÍ≥ÑÏó¥ Îç∞Ïù¥ÌÑ∞Î≤†Ïù¥Ïä§Ïóê Ï†ÄÏû•ÌïòÎäî ÌäπÏßïÏùÑ Í∞ÄÏßÄÍ≥† ÏûàÏäµÎãàÎã§.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/opsathlan-2-1/image-1.png"
width="1042"
height="745"
srcset="https://s0okju.github.io/p/opsathlan-2-1/image-1_hu_41053c1b5000d2e1.png 480w, https://s0okju.github.io/p/opsathlan-2-1/image-1_hu_316dad82b9ca44a2.png 1024w"
loading="lazy"
alt="Ï∂úÏ≤ò - https://www.geeksforgeeks.org/prometheus-monitoring/"
class="gallery-image"
data-flex-grow="139"
data-flex-basis="335px"
>&lt;/p>
&lt;p>pull Î∞©ÏãùÏùÄ ÌîÑÎ°úÎ©îÌÖåÏö∞Ïä§Í∞Ä ÌïÑÏöîÌïú Î©îÌä∏Î¶≠ ÏßÄÌëúÎ•º ÎåÄÏÉÅ ÏÑúÎ≤ÑÎ°úÎ∂ÄÌÑ∞ Í∞ÄÏ†∏Ïò®Îã§Îäî Í≤ÉÍ≥º Í∞ôÏùÄ ÎßêÏûÖÎãàÎã§. Í∑∏ÎûòÏÑú ÎåÄÏÉÅÏù¥ ÎêòÎäî ÏÑúÎ≤ÑÎäî ÌîÑÎ°úÎ©îÌÖåÏö∞Ïä§Í∞Ä Î©îÌä∏Î¶≠ÏùÑ Î∞õÏïÑÍ∞à Ïàò ÏûàÎèÑÎ°ù endpointÎ•º Ïó¥Ïñ¥Îë¨Ïïº Ìï©ÎãàÎã§.&lt;/p>
&lt;p>Î≥¥ÌÜµÏùò Î∞©ÏãùÏù¥ÎùºÎ©¥ spring boot actuatorÎ•º ÌôúÏö©ÌïòÏó¨ &lt;code>/actuator/metrics&lt;/code> ÏóîÎìúÌè¨Ïù∏Ìä∏Î•º Ïó¨Îäî Î∞©Î≤ïÏùÑ ÏÇ¨Ïö©Ìï† Ïàò ÏûàÏäµÎãàÎã§.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-properties" data-lang="properties">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># application.properties&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">management.endpoints.web.exposure.include&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">prometheus,metrics&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">management.endpoint.prometheus.enabled&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">management.prometheus.metrics.export.enabled&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">true&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ÏúÑÏôÄ Í∞ôÏùÄ Î∞©ÏãùÏùÑ ÏÇ¨Ïö©ÌïòÍ≤å ÎêòÎ©¥ EOF Ïò§Î•òÍ∞Ä Î∞úÏÉùÌï¥ ÌîÑÎ°úÎ©îÌÖåÏö∞Ïä§Í∞Ä Ï†ïÏÉÅÏ†ÅÏúºÎ°ú ÏßÄÌëúÎ•º Í∞ÄÏ†∏Ïò¨ Ïàò ÏóÜÏóàÏäµÎãàÎã§. Í∑∏ÎûòÏÑú headerÎ•º &lt;code>TEXT_PLAIN&lt;/code>ÏúºÎ°ú ÏßÄÏ†ïÌï¥Ï£ºÎäî controllerÎ•º ÏÉùÏÑ±ÌñàÏäµÎãàÎã§.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nn">io.micrometer.prometheusmetrics.PrometheusMeterRegistry&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nd">@RestController&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nd">@RequiredArgsConstructor&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="kd">public&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kd">class&lt;/span> &lt;span class="nc">MetricsController&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">private&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kd">final&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">PrometheusMeterRegistry&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">prometheusMeterRegistry&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nd">@GetMapping&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;/metrics&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">public&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">ResponseEntity&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">String&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nf">metrics&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">String&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">scrape&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">prometheusMeterRegistry&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">scrape&lt;/span>&lt;span class="p">();&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">HttpHeaders&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">headers&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">new&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">HttpHeaders&lt;/span>&lt;span class="p">();&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">headers&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">setContentType&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">MediaType&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">TEXT_PLAIN&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">return&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">new&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">ResponseEntity&lt;/span>&lt;span class="o">&amp;lt;&amp;gt;&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">scrape&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">headers&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">HttpStatus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">OK&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>springboot actuator
Ïä§ÌîÑÎßÅÎ∂ÄÌä∏ Ïï†ÌîåÎ¶¨ÏºÄÏù¥ÏÖò Î™®ÎãàÌÑ∞ÎßÅÍ≥º Í¥ÄÎ¶¨Ïóê ÌïÑÏöîÌïú Í∏∞Îä•ÏùÑ Ï†úÍ≥µÌï©ÎãàÎã§.&lt;/p>&lt;/blockquote>
&lt;p>9090 Ìè¨Ìä∏Ïóê Ï†ëÏÜçÌï¥ ÌîÑÎ°úÎ©îÌÖåÏö∞Ïä§ web uiÎ•º Î≥¥Î©¥ Ïä§ÌîÑÎßÅÎ∂ÄÌä∏ Ïï†ÌîåÎ¶¨ÏºÄÏù¥ÏÖòÍ≥º cAdvisor ÏßÄÌëúÍ∞Ä Ï†ïÏÉÅÏ†ÅÏúºÎ°ú ÌÜµÏã†Îê®ÏùÑ Ïïå Ïàò ÏûàÏäµÎãàÎã§.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/opsathlan-2-1/image-2.png"
width="1447"
height="245"
srcset="https://s0okju.github.io/p/opsathlan-2-1/image-2_hu_ec8ddf7d8eb4e121.png 480w, https://s0okju.github.io/p/opsathlan-2-1/image-2_hu_2bfc4c1f6f167ed5.png 1024w"
loading="lazy"
alt="ÏÇ¨ÏßÑ - ÌîÑÎ°úÎ©îÌÖåÏö∞Ïä§ UIÏóêÏÑú ÌôïÏù∏Ìïú Target"
class="gallery-image"
data-flex-grow="590"
data-flex-basis="1417px"
>&lt;/p>
&lt;h2 id="Í∑∏ÎùºÌååÎÇòÎ•º-ÌÜµÌïú-ÏãúÍ∞ÅÌôî">Í∑∏ÎùºÌååÎÇòÎ•º ÌÜµÌïú ÏãúÍ∞ÅÌôî
&lt;/h2>&lt;h3 id="cadvisor-ÏßÄÌëú-ÏãúÍ∞ÅÌôî">cAdvisor ÏßÄÌëú ÏãúÍ∞ÅÌôî
&lt;/h3>&lt;p>Í∑∏ÎùºÌååÎÇòÏóêÏÑú containerÏùò Î©îÎ™®Î¶¨ ÏÇ¨Ïö©ÎüâÏùÑ ÌôïÏù∏Ìï¥Î¥ÖÎãàÎã§. Î©îÎ™®Î¶¨ Îã®ÏúÑÎ°ú ÌôïÏù∏ÌïòÍ∏∞ ÏúÑÌï¥ 1024Î•º ÎëêÎ≤à ÎÇòÎà¥ÏäµÎãàÎã§.&lt;/p>
&lt;blockquote>
&lt;p>Í¥ÄÎ†® ÏßÄÌëúÎäî &lt;a class="link" href="https://github.com/google/cadvisor/blob/master/docs/storage/prometheus.md" target="_blank" rel="noopener"
>cadvisor Github&lt;/a>Î•º Ï∞∏Í≥†ÌïòÍ∏∏ Î∞îÎûçÎãàÎã§.&lt;/p>&lt;/blockquote>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-promql" data-lang="promql">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">container_memory_usage_bytes&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="nl">name&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">&amp;#34;&lt;/span>&lt;span class="s">instance_name&lt;/span>&lt;span class="p">&amp;#34;}&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1024&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1024&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ÏïÑÎûòÏùò Í∑∏ÎûòÌîÑÎ•º Î≥¥Î©¥ Í≥ÑÏÜç ÏÉÅÏäπÌïòÍ≥† ÏûàÎäî Í∑∏ÎûòÌîÑÎ•º ÌôïÏù∏Ìï† Ïàò ÏûàÏäµÎãàÎã§.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/opsathlan-2-1/image-3.png"
width="1204"
height="670"
srcset="https://s0okju.github.io/p/opsathlan-2-1/image-3_hu_f5dd534c3d025bd8.png 480w, https://s0okju.github.io/p/opsathlan-2-1/image-3_hu_de1b884a5834c99d.png 1024w"
loading="lazy"
alt="ÏÇ¨ÏßÑ - Ïª®ÌÖåÏù¥ÎÑà Î©îÎ™®Î¶¨ ÏÇ¨Ïö©Îüâ ÏãúÍ∞ÅÌôî"
class="gallery-image"
data-flex-grow="179"
data-flex-basis="431px"
>&lt;/p>
&lt;h3 id="Ïä§ÌîÑÎßÅ-Ïï†ÌîåÎ¶¨ÏºÄÏù¥ÏÖò-Í¥ÄÎ†®-ÏßÄÌëú-ÏãúÍ∞ÅÌôî">Ïä§ÌîÑÎßÅ Ïï†ÌîåÎ¶¨ÏºÄÏù¥ÏÖò Í¥ÄÎ†® ÏßÄÌëú ÏãúÍ∞ÅÌôî
&lt;/h3>&lt;p>Ï†ÄÎäî &lt;a class="link" href="https://grafana.com/grafana/dashboards/4701-jvm-micrometer/" target="_blank" rel="noopener"
>GrafanaLabsÏóêÏÑú Ï†úÍ≥µÌï¥Ï£ºÎäî JVM ÎåÄÏãúÎ≥¥Îìú&lt;/a>Î•º ÏÇ¨Ïö©ÌñàÏäµÎãàÎã§. dashboard ipÎ•º ÏÑ§Ï†ïÌïòÎ©¥ Îã§ÏñëÌïú Í∑∏ÎûòÌîÑÎ•º ÌôïÏù∏Ìï† Ïàò ÏûàÏäµÎãàÎã§.&lt;/p>
&lt;p>ÏïÑÎûòÏùò ÏÇ¨ÏßÑÏùÄ ÏùºÎ∂ÄÎßå ÎÇòÌÉÄÎÇ∏ Í≤ÉÏù¥Î©∞ Ïù¥Í≤É Ïù¥Ïô∏ÏóêÎèÑ Îã§ÏñëÌïú ÏßÄÌëúÍ∞Ä ÏûàÏäµÎãàÎã§.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/opsathlan-2-1/image-4.png"
width="794"
height="270"
srcset="https://s0okju.github.io/p/opsathlan-2-1/image-4_hu_34f8309885b1faf7.png 480w, https://s0okju.github.io/p/opsathlan-2-1/image-4_hu_475e1ab500e73524.png 1024w"
loading="lazy"
alt="ÏÇ¨ÏßÑ - Í∑∏ÎùºÌååÎÇòÏóêÏÑú ÌôïÏù∏Ìïú Í∑∏ÎûòÌîÑ(ÏùºÎ∂Ä)"
class="gallery-image"
data-flex-grow="294"
data-flex-basis="705px"
>&lt;/p>
&lt;h2 id="Îã§ÏùåÍ∏Ä">Îã§ÏùåÍ∏Ä
&lt;/h2>&lt;p>ÏßÄÍ∏àÍπåÏßÄ Î™®ÎãàÌÑ∞ÎßÅÌï† Ïàò ÏûàÎäî ÌôòÍ≤ΩÏùÑ Íµ¨Ï∂ïÌñàÏäµÎãàÎã§. Îã§ÏùåÌé∏ÏóêÎäî ÏãúÍ∞ÅÌôîÌïú ÌëúÎ•º Î∂ÑÏÑùÌï¥Î≥¥Îäî ÏãúÍ∞ÑÏùÑ Í∞ÄÏßÄÎèÑÎ°ù ÌïòÍ≤†ÏäµÎãàÎã§.&lt;/p>
&lt;div class="footnotes" role="doc-endnotes">
&lt;hr>
&lt;ol>
&lt;li id="fn:1">
&lt;p>&lt;a class="link" href="https://themapisto.tistory.com/44" target="_blank" rel="noopener"
>https://themapisto.tistory.com/44&lt;/a>&amp;#160;&lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/div></description></item><item><title>OpsAthlan 1 - Simple echo server</title><link>https://s0okju.github.io/p/opsathlan-1/</link><pubDate>Thu, 19 Sep 2024 00:00:00 +0900</pubDate><guid>https://s0okju.github.io/p/opsathlan-1/</guid><description>&lt;h2 id="ÏãúÎÇòÎ¶¨Ïò§">ÏãúÎÇòÎ¶¨Ïò§
&lt;/h2>&lt;p>Hello WorldÎ•º Î∞òÌôòÌï¥Ï£ºÎäî springboot ÎèÑÏª§ ÏÑúÎπÑÏä§Í∞Ä ÏûàÎã§. Î∞∞Ìè¨Ìï¥Î≥¥Ïûê!&lt;/p>
&lt;h2 id="ÌôòÍ≤Ω">ÌôòÍ≤Ω
&lt;/h2>&lt;ul>
&lt;li>ubuntu 22.04&lt;/li>
&lt;li>openstack 2024.01&lt;/li>
&lt;/ul>
&lt;h2 id="ÏàúÏÑú">ÏàúÏÑú
&lt;/h2>&lt;ol>
&lt;li>TerraformÏùÑ ÌôúÏö©Ìïú Ïù∏ÌîÑÎùº Íµ¨ÏÑ±&lt;/li>
&lt;li>AnsibleÎ•º ÌôúÏö©Ìïú ÌôòÍ≤Ω Íµ¨ÏÑ± Î∞è ÎπåÎìú&lt;/li>
&lt;li>cAdvisorÎ•º ÌôúÏö©Ìïú Î™®ÎãàÌÑ∞ÎßÅ&lt;/li>
&lt;/ol>
&lt;h3 id="cadvisorÎ•º-ÏÑ†ÌÉùÌïú-Ïù¥Ïú†">cAdvisorÎ•º ÏÑ†ÌÉùÌïú Ïù¥Ïú†
&lt;/h3>&lt;p>cAdvsiorÎäî Ïª®ÌÖåÏù¥ÎÑàÏùò MetrixÎ•º Î™®ÎãàÌÑ∞ÎßÅÌï† Ïàò ÏûàÎäî ÎèÑÍµ¨ÏûÖÎãàÎã§. &lt;strong>Í∏∞Î≥∏Ï†ÅÏù∏ Ïª®ÌÖåÏù¥ÎÑà Î©îÌä∏Î¶≠ Ï†ïÎ≥¥Î•º Ïö∞ÏÑ† ÌôïÏù∏&lt;/strong>ÌïòÍ∏∞ ÏúÑÌï¥ ÏÑ†ÌÉùÌïòÍ≤å ÎêòÏóàÏäµÎãàÎã§.&lt;/p>
&lt;h2 id="Ï†ÑÏ≤¥-Íµ¨ÏÑ±ÎèÑ">Ï†ÑÏ≤¥ Íµ¨ÏÑ±ÎèÑ
&lt;/h2>&lt;p>&lt;img src="https://s0okju.github.io/p/opsathlan-1/image.png"
width="1110"
height="750"
srcset="https://s0okju.github.io/p/opsathlan-1/image_hu_5fa145ba6b0316be.png 480w, https://s0okju.github.io/p/opsathlan-1/image_hu_85b134d47a92c584.png 1024w"
loading="lazy"
alt="Íµ¨ÏÑ±ÎèÑ"
class="gallery-image"
data-flex-grow="148"
data-flex-basis="355px"
>&lt;/p>
&lt;h2 id="terraformÏùÑ-ÌôúÏö©Ìïú-Î¶¨ÏÜåÏä§-Î∞∞Ìè¨">TerraformÏùÑ ÌôúÏö©Ìïú Î¶¨ÏÜåÏä§ Î∞∞Ìè¨
&lt;/h2>&lt;p>Î∞∞Ìè¨Ìï¥Ïïº Ìï† Í≤ÉÏùÄ ÏïÑÎûòÏôÄ Í∞ôÏäµÎãàÎã§.&lt;/p>
&lt;ul>
&lt;li>Nova Instance&lt;/li>
&lt;li>Network
&lt;ul>
&lt;li>Subnet&lt;/li>
&lt;li>Router&lt;/li>
&lt;li>Floating ip&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Security
&lt;ul>
&lt;li>Security Group
&lt;ul>
&lt;li>ssh, spring web port(8080), cAdvisor(8081)Î•º ÏúÑÌïú rule ÏÉùÏÑ±&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>ssh ÌÜµÏã†ÏùÑ ÏúÑÌïú keypair&lt;/li>
&lt;/ul>
&lt;h3 id="terraform-code">Terraform code
&lt;/h3>&lt;p>terraformÏùÄ Ï†àÏ∞® ÏßÄÌñ•Ï†ÅÏù¥Í∏∞ ÎïåÎ¨∏Ïóê Î¶¨ÏÜåÏä§ ÏûëÏÑ± ÏàúÏÑúÍ∞Ä Ï§ëÏöîÌï©ÎãàÎã§.Í∑∏ÎûòÏÑú Í∞ÑÎã®Ìïú nova Ïù∏Ïä§ÌÑ¥Ïä§ Î∞∞Ìè¨Ïùò Í≤ΩÏö∞ ÏïÑÎûòÏôÄ Í∞ôÏùÄ ÏàúÏÑúÎ•º Îî∞ÎûêÏäµÎãàÎã§.&lt;/p>
&lt;ol>
&lt;li>ÎÑ§Ìä∏ÏõåÌÅ¨&lt;/li>
&lt;li>Ïù∏Ïä§ÌÑ¥Ïä§ ÏÉùÏÑ±&lt;/li>
&lt;li>floating ip Ìï†Îãπ&lt;/li>
&lt;/ol>
&lt;blockquote>
&lt;p>Ï†ÑÏ≤¥ ÏΩîÎìúÎäî &lt;a class="link" href="https://github.com/S0okJu/OpsAthlan/tree/sc/1/scenario_01/terraform" target="_blank" rel="noopener"
>ÍπÉÌóàÎ∏å&lt;/a>Î•º Ï∞∏Í≥†ÌïòÍ∏∏ Î∞îÎûçÎãàÎã§.&lt;/p>&lt;/blockquote>
&lt;p>ÎÑ§Ìä∏ÏõåÌÅ¨Î•º ÏÉùÏÑ±Ìïú Ïù¥ÌõÑ subnetÎ•º ÏÉùÏÑ±ÌïúÎã§. Ïô∏Î∂ÄÏôÄ ÌÜµÏã†ÌïòÍ∏∞ ÏúÑÌï¥ÏÑúÎäî external_networkÏôÄ ÏÑúÎ∏åÎÑ∑Í≥ºÏùò Ïó∞Í≤∞Ïù¥ ÌïÑÏöîÌï©ÎãàÎã§. Í∑∏Îü¨ÎØÄÎ°ú &lt;code>router&lt;/code>Î•º ÏÉùÏÑ±Ìïú ÌõÑ &lt;code>router_interface&lt;/code>Î•º ÌÜµÌï¥ external_networkÏôÄ ÏÑúÎ∏åÎÑ∑Ïù¥ Ïó∞Í≤∞ÌïòÍ≤å Îê©ÎãàÎã§.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-tf" data-lang="tf">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Network ÏÉùÏÑ±
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kr">resource&lt;/span> &lt;span class="s2">&amp;#34;openstack_networking_network_v2&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;opsathlan_network&amp;#34;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">name&lt;/span> = &lt;span class="s2">&amp;#34;opsathlan-&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nb">var&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">scenario_id&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">-network&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">admin_state_up&lt;/span> = &lt;span class="kc">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">port_security_enabled&lt;/span> = &lt;span class="nb">var&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">port_security_enabled&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>&lt;span class="c1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Subnet ÏÉùÏÑ±
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kr">resource&lt;/span> &lt;span class="s2">&amp;#34;openstack_networking_subnet_v2&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;opsathlan_subnet&amp;#34;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">name&lt;/span> = &lt;span class="s2">&amp;#34;opsathlan-&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nb">var&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">scenario_id&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">-subnet&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">network_id&lt;/span> = &lt;span class="nx">openstack_networking_network_v2&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">opsathlan_network&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">id&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">cidr&lt;/span> = &lt;span class="nb">var&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">subnet_cidr&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">ip_version&lt;/span> = &lt;span class="m">4&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">dns_nameservers&lt;/span> = &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;8.8.8.8&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;8.8.4.4&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>&lt;span class="c1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Router ÏÉùÏÑ±
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kr">resource&lt;/span> &lt;span class="s2">&amp;#34;openstack_networking_router_v2&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;opsathlan_router&amp;#34;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">name&lt;/span> = &lt;span class="s2">&amp;#34;opsathlan-&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nb">var&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">scenario_id&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">-router&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">admin_state_up&lt;/span> = &lt;span class="kc">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">external_network_id&lt;/span> = &lt;span class="nb">data&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">openstack_networking_network_v2&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">ext_network&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">id&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>&lt;span class="c1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Router Interface ÏÉùÏÑ±
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kr">resource&lt;/span> &lt;span class="s2">&amp;#34;openstack_networking_router_interface_v2&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;router_interface&amp;#34;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">router_id&lt;/span> = &lt;span class="nx">openstack_networking_router_v2&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">opsathlan_router&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">id&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">subnet_id&lt;/span> = &lt;span class="nx">openstack_networking_subnet_v2&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">opsathlan_subnet&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">id&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="Ïù∏Ïä§ÌÑ¥Ïä§-ÏÉùÏÑ±">Ïù∏Ïä§ÌÑ¥Ïä§ ÏÉùÏÑ±
&lt;/h3>&lt;p>Ïù∏Ïä§ÌÑ¥Ïä§Ïóê Ï†ëÍ∑ºÌïòÎäîÎç∞ ÏÇ¨Ïö©ÎêòÎäî keypairÎ•º ÏÉùÏÑ±Ìï©ÎãàÎã§.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Keypair ÏÉùÏÑ±&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">resource&lt;/span> &lt;span class="s2">&amp;#34;openstack_compute_keypair_v2&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;opsathlan_keypair&amp;#34;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;opsathlan-${var.scenario_id}-keypair&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">public_key&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">file&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">pubkey_file_path&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Nova Ïù∏Ïä§ÌÑ¥Ïä§Ïùò Ï†ëÍ∑º Ï†úÏñ¥Î•º Í¥ÄÎ¶¨ÌïòÎäî Security groupÎ•º ÏÑ§Ï†ïÌï©ÎãàÎã§. security group ruleÏùÄ &lt;code>variables.tf&lt;/code> ÏóêÏÑú Î¶¨Ïä§Ìä∏Î°ú Î∞õÏùÄ ÌõÑÏóê Ï†ÅÏö©Ìï† Ïàò ÏûàÎèÑÎ°ù Íµ¨ÏÑ±Ìï©ÎãàÎã§.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Security Group ÏÉùÏÑ±&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">resource&lt;/span> &lt;span class="s2">&amp;#34;openstack_networking_secgroup_v2&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;opsathlan_secgroup&amp;#34;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;opsathlan-${var.scenario_id}-secgroup&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">description&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;OpsAthaln Security Group&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">delete_default_rules&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="bp">false&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Security Group Rule ÏÉùÏÑ±&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">resource&lt;/span> &lt;span class="s2">&amp;#34;openstack_networking_secgroup_rule_v2&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;secgroup_rules&amp;#34;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">count&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">length&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">allowed_ports&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">direction&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;ingress&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ethertype&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;IPv4&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">protocol&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">lookup&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">allowed_ports&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">count&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">index&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="s2">&amp;#34;protocol&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;tcp&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">port_range_min&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">lookup&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">allowed_ports&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">count&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">index&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="s2">&amp;#34;port_range_min&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">port_range_max&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">lookup&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">allowed_ports&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">count&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">index&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="s2">&amp;#34;port_range_max&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">remote_ip_prefix&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">lookup&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">allowed_ports&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">count&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">index&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="s2">&amp;#34;remote_ip_prefix&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;0.0.0.0/0&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">security_group_id&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">openstack_networking_secgroup_v2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">opsathlan_secgroup&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">id&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>variables.tf&lt;/code> ÏóêÏÑúÎäî Ïô∏Î∂ÄÏóêÏÑú Ï†ëÍ∑ºÌï† Ïàò ÏûàÎäî Ìè¨Ìä∏Î•º ÏÑ§Ï†ïÌï©ÎãàÎã§.&lt;/p>
&lt;ul>
&lt;li>ssh&lt;/li>
&lt;li>spring boot application(8080)&lt;/li>
&lt;li>cAdvisor(8081)&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="o">//&lt;/span> &lt;span class="n">variables&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">tf&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">variable&lt;/span> &lt;span class="s2">&amp;#34;allowed_ports&amp;#34;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">description&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;List of maps defining allowed ports for the security group. Each map should include protocol, port_range_min, port_range_max, and optionally remote_ip_prefix.&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">type&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">list&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">object&lt;/span>&lt;span class="p">({&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">protocol&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">port_range_min&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">number&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">port_range_max&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">number&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">remote_ip_prefix&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">optional&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">string&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;0.0.0.0/0&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">default&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">protocol&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;tcp&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">port_range_min&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">22&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">port_range_max&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">22&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">protocol&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;tcp&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">port_range_min&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">8080&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">port_range_max&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">8080&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">protocol&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;tcp&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">port_range_min&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">8081&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">port_range_max&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">8081&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="floating-ip-Ìï†Îãπ-Î∞è-ÏÑ§Ï†ï">Floating ip Ìï†Îãπ Î∞è ÏÑ§Ï†ï
&lt;/h3>&lt;p>floating ipÎ•º ÏÉùÏÑ±Ìïú ÌõÑÏóê nova instanceÏóê Î∂ôÌûôÎãàÎã§.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 5. Floating IP ÏÉùÏÑ± Î∞è Ïó∞Í≤∞&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">resource&lt;/span> &lt;span class="s2">&amp;#34;openstack_networking_floatingip_v2&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;floating_ip&amp;#34;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">pool&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">data&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">openstack_networking_network_v2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ext_network&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">name&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 4. Nova Instance ÏÉùÏÑ±&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">resource&lt;/span> &lt;span class="s2">&amp;#34;openstack_compute_instance_v2&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;nova_instance&amp;#34;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;opsathlan-${var.scenario_id}-instance&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">image_name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">var&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">image_name&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">flavor_name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">var&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">flavor_name&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">key_pair&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">openstack_compute_keypair_v2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">opsathlan_keypair&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">name&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">security_groups&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">openstack_networking_secgroup_v2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">opsathlan_secgroup&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">name&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">network&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">uuid&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">openstack_networking_network_v2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">opsathlan_network&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">id&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">depends_on&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">openstack_networking_subnet_v2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">opsathlan_subnet&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">resource&lt;/span> &lt;span class="s2">&amp;#34;openstack_compute_floatingip_associate_v2&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;floating_ip_association&amp;#34;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">floating_ip&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">openstack_networking_floatingip_v2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">floating_ip&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">address&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">instance_id&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">openstack_compute_instance_v2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">nova_instance&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">id&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="ansibleÎ•º-ÌôúÏö©Ìïú-ÌôòÍ≤Ω-Íµ¨ÏÑ±-Î∞è-Ïª®ÌÖåÏù¥ÎÑà-Ïã§Ìñâ">AnsibleÎ•º ÌôúÏö©Ìïú ÌôòÍ≤Ω Íµ¨ÏÑ± Î∞è Ïª®ÌÖåÏù¥ÎÑà Ïã§Ìñâ
&lt;/h2>&lt;p>AnsibleÎ•º ÌôúÏö©ÌïòÏó¨ &lt;strong>Ïª®ÌÖåÏù¥ÎÑà Ïù¥ÎØ∏ÏßÄÎ•º ÎπåÎìúÌïòÍ≥† Ïã§ÌñâÏãúÌÇ¨ Ïàò ÏûàÎäî ÌôòÍ≤ΩÏùÑ Íµ¨ÏÑ±&lt;/strong>Ìï¥Ïïº Ìï©ÎãàÎã§. Í∑∏ÎûòÏÑú Ï¥ù 4Í∞úÏùò roleÎ•º ÎßåÎì§ÏóàÏäµÎãàÎã§.&lt;/p>
&lt;ul>
&lt;li>java ÏÑ§Ïπò&lt;/li>
&lt;li>docker ÏÑ§Ïπò&lt;/li>
&lt;li>springboot Ïù¥ÎØ∏ÏßÄ ÎπåÎìú Î∞è ÏàòÌñâ&lt;/li>
&lt;li>cAdvisor Ïã§Ìñâ&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;p>ü§î &lt;strong>Ïó¨Îã¥&lt;/strong>&lt;/p>
&lt;p>JenkinsÏôÄ Í∞ôÏù¥ ÏûêÎèôÌôî ÎèÑÍµ¨Î•º ÏÇ¨Ïö©Ìï† Ïàò ÏûàÏßÄÎßå Ï¥àÎ∞òÏóêÎäî Î∂àÌïÑÏöîÌïòÎã§Í≥† ÏÉùÍ∞ÅÌñàÏäµÎãàÎã§. Î∞∞Ìè¨ÌïòÍ≥†Ïûê ÌïòÎäî Ïï†ÌîåÎ¶¨ÏºÄÏù¥ÏÖòÏùò Í∑úÎ™®Îäî ÌòÑÏ†ÄÌïòÍ≤å ÏûëÏïòÍ≥†, ÎÇúÏù¥ÎèÑÍ∞Ä ÏûàÏñ¥ ÏûòÎ™ªÌïòÎ©¥ ÏòàÏÉÅÎ≥¥Îã§ ÏãúÍ∞ÑÏùÑ ÎßéÏù¥ Ìï†Ïï†Ìï† Ïàò ÏûàÎã§Í≥† ÌåêÎã®ÌñàÏäµÎãàÎã§.&lt;/p>&lt;/blockquote>
&lt;h3 id="spring-boot-application-Î∞∞Ìè¨">spring boot application Î∞∞Ìè¨
&lt;/h3>&lt;h4 id="application-ÏÜåÍ∞ú">application ÏÜåÍ∞ú
&lt;/h4>&lt;p>Î∞∞Ìè¨ Ïï†ÌîåÎ¶¨ÏºÄÏù¥ÏÖòÏùÄ Í∞ÑÎã®ÌïòÍ≤å hello worldÎßå Î∞òÌôòÌïòÎäî Ïõπ ÏÑúÎπÑÏä§ÏûÖÎãàÎã§.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="line">&lt;span class="cl">&lt;span class="nd">@RestController&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="kd">public&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kd">class&lt;/span> &lt;span class="nc">EchoController&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nd">@GetMapping&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;/echo&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">public&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">String&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nf">echo&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">return&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;Hello, World!&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="ÎπåÎìú-Î∞è-Ïã§Ìñâ">ÎπåÎìú Î∞è Ïã§Ìñâ
&lt;/h4>&lt;p>AnsibleÎ•º ÌôúÏö©ÌïòÏó¨ spring boot application Ïª®ÌÖåÏù¥ÎÑàÎ•º Ïã§ÌñâÌï©ÎãàÎã§. Ïù¥Îïå Ïª®ÌÖåÏù¥ÎÑàÎäî 8080 Ïô∏Î∂Ä Ìè¨Ìä∏Î°ú Ïó¥Ïñ¥Îë°ÎãàÎã§.&lt;/p>
&lt;p>&lt;strong>ÏàúÏÑú&lt;/strong>&lt;/p>
&lt;ol>
&lt;li>Repository clone&lt;/li>
&lt;li>Spring boot application build&lt;/li>
&lt;li>Container Image build&lt;/li>
&lt;li>Docker Ïã§Ìñâ&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yml" data-lang="yml">&lt;span class="line">&lt;span class="cl">&lt;span class="nn">---&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Clone Spring Boot application repository&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">git&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">repo&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;https://github.com/S0okJu/OpsAthlan.git&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">dest&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">/home/ubuntu/app/spring-boot-app&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">version&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">sc/1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Build Spring Boot application using Gradle&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">command&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">./gradlew clean build&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">args&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">chdir&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">/home/ubuntu/app/spring-boot-app/scenario_01/spring_echo&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">register&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">gradle_build&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">failed_when&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">gradle_build.rc != 0&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Check if JAR file exists&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">stat&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">path&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">/home/ubuntu/app/spring-boot-app/scenario_01/spring_echo/build/libs/&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">register&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">jar_dir&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Fail if JAR file does not exist&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">fail&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">msg&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;JAR file was not built successfully.&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">when&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">jar_dir.stat.exists == False or jar_dir.stat.isdir == False&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Copy Dockerfile for Spring Boot&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">copy&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">src&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Dockerfile&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">dest&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">/home/ubuntu/app/spring-boot-app/scenario_01/spring_echo/Dockerfile&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Build Docker image for Spring Boot application&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">docker_image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">echo-springboot-app&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">tag&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">latest&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">source&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">build&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">build&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">path&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">/home/ubuntu/app/spring-boot-app/scenario_01/spring_echo&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Run Spring Boot container&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">docker_container&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">sc1-springboot-app&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">echo-springboot-app:latest&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">state&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">started&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;8080:8080&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ÏûêÏÑ∏Ìïú ÏΩîÎìúÎäî &lt;a class="link" href="https://github.com/S0okJu/OpsAthlan/tree/sc/1/scenario_01/ansible" target="_blank" rel="noopener"
>github&lt;/a> Ï∞∏Í≥† Î∞îÎûçÎãàÎã§.&lt;/p>
&lt;h3 id="cadvisor">cAdvisor
&lt;/h3>&lt;p>cAdvisorÎäî Ïª®ÌÖåÏù¥ÎÑà Ïù¥ÎØ∏ÏßÄÎ•º Îã§Ïö¥Î∞õÍ≥† Ïª®ÌÖåÏù¥ÎÑàÎ•º Ïã§ÌñâÌï† Ïàò ÏûàÎèÑÎ°ù Íµ¨ÏÑ±Ìï©ÎãàÎã§. Ïª®ÌÖåÏù¥ÎÑàÎäî 8081Î°ú Ïô∏Î∂ÄÌè¨Ìä∏Î•º Ïó¥Ïñ¥ Í∞úÎ∞úÏûêÍ∞Ä ÎåÄÏãúÎ≥¥ÎìúÎ•º ÌôïÏù∏Ìï† Ïàò ÏûàÎèÑÎ°ù ÏÑ§Ï†ïÌï©ÎãàÎã§.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yml" data-lang="yml">&lt;span class="line">&lt;span class="cl">&lt;span class="nn">---&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Pull cAdvisor image&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">docker_image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">google/cadvisor:latest&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">source&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">pull&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Run cAdvisor container&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">docker_container&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">cadvisor&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">google/cadvisor:latest&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">state&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">started&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;8081:8080&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">volumes&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;/:/rootfs:ro&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;/var/run:/var/run:ro&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;/sys:/sys:ro&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;/var/lib/docker/:/var/lib/docker:ro&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="Ïª®ÌÖåÏù¥ÎÑà-ÏßÄÌëú-Î™®ÎãàÌÑ∞ÎßÅ">Ïª®ÌÖåÏù¥ÎÑà ÏßÄÌëú Î™®ÎãàÌÑ∞ÎßÅ
&lt;/h2>&lt;h3 id="cadvisor-Ï†ëÏÜç">cAdvisor Ï†ëÏÜç
&lt;/h3>&lt;p>{floating_ip}:8081Ïóê Ï†ëÏÜçÌï©ÎãàÎã§.
container Ï∞ΩÏóê Îì§Ïñ¥Í∞Ä springboot applicationÏùÑ ÌôïÏù∏Ìï©ÎãàÎã§.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/opsathlan-1/image-1.png"
width="1121"
height="383"
srcset="https://s0okju.github.io/p/opsathlan-1/image-1_hu_e0d6f86c77e75558.png 480w, https://s0okju.github.io/p/opsathlan-1/image-1_hu_87efe80569411306.png 1024w"
loading="lazy"
alt="cAdvisor Ï†ëÏÜç"
class="gallery-image"
data-flex-grow="292"
data-flex-basis="702px"
> &lt;img src="https://s0okju.github.io/p/opsathlan-1/image-2.png"
width="945"
height="277"
srcset="https://s0okju.github.io/p/opsathlan-1/image-2_hu_a3ec52c0fe72fa75.png 480w, https://s0okju.github.io/p/opsathlan-1/image-2_hu_6fc748575390485b.png 1024w"
loading="lazy"
alt="cAdvisorÏóêÏÑú ÌôïÏù∏Ìïú Ïª®ÌÖåÏù¥ÎÑà Î™©Î°ù"
class="gallery-image"
data-flex-grow="341"
data-flex-basis="818px"
>&lt;/p>
&lt;p>springboot applicationÏóê ÎåÄÌïú Í∏∞Î≥∏Ï†ÅÏù∏ ÏßÄÌëúÎ•º ÌôïÏù∏Ìï† Ïàò ÏûàÏäµÎãàÎã§.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/opsathlan-1/image-3.png"
width="1096"
height="389"
srcset="https://s0okju.github.io/p/opsathlan-1/image-3_hu_69ef7a997f587bc7.png 480w, https://s0okju.github.io/p/opsathlan-1/image-3_hu_51496bad0560d51f.png 1024w"
loading="lazy"
alt="cAdvisorÏóêÏÑú ÌôïÏù∏Ìïú Î©îÌä∏Î¶≠"
class="gallery-image"
data-flex-grow="281"
data-flex-basis="676px"
>&lt;/p>
&lt;h3 id="test">Test
&lt;/h3>&lt;p>ÏûêÏ≤¥Ï†ÅÏúºÎ°ú ÎßåÎì† test ÎèÑÍµ¨Ïù∏ &lt;a class="link" href="https://github.com/S0okJu/GoNetWorker" target="_blank" rel="noopener"
>gonetworker&lt;/a>Î•º ÌôúÏö©ÌïòÍ≤†ÏäµÎãàÎã§.&lt;/p>
&lt;blockquote>
&lt;p>&lt;strong>GoNetWorker&lt;/strong>&lt;/p>
&lt;p>ÏûêÏ≤¥Ï†ÅÏúºÎ°ú ÎßåÎì† ÎÑ§Ìä∏ÏõåÌÅ¨ ÌÖåÏä§Ìä∏ ÎèÑÍµ¨ÏûÖÎãàÎã§. ÏÑúÎ≤ÑÏóê requestÎ•º Ïó∞ÏÜçÏóêÏÑú ÏöîÏ≤≠ÌïúÎã§Îäî ÌäπÏßïÏù¥ ÏûàÏäµÎãàÎã§.&lt;/p>&lt;/blockquote>
&lt;p>Î∏îÎ°úÍ∑∏ ÏûëÏÑ± Í∏∞Ï§Ä GoNetWorkerÎäî ÎèôÏãúÎ°ú Ï†ÑÏÜ°ÌïòÎäî Í∏∞Îä•Ïù¥ ÏóÜÏñ¥ &lt;strong>ÏàúÏ∞®Ï†ÅÏúºÎ°ú requestÎ•º ÏöîÏ≤≠&lt;/strong>Ìï©ÎãàÎã§. request ÏöîÏ≤≠ Ïù¥ÌõÑ Î¨¥ÏûëÏúÑÎ°ú sleepÌï©ÎãàÎã§. Ïó∞ÏÜçÏ†ÅÏúºÎ°ú Î¶¨ÏÜåÏä§Î•º ÏÇ¨Ïö©ÌïòÏßÄ ÏïäÏùÑ Í≤ÉÏù¥ÎùºÍ≥† ÏòàÏÉÅÌï† Ïàò ÏûàÏäµÎãàÎã§.&lt;/p>
&lt;h4 id="network">Network
&lt;/h4>&lt;p>ÎÑ§Ìä∏ÏõåÌÅ¨ Ï≤òÎ¶¨Ïú®ÏùÑ Î≥¥Î©¥ Ï≤òÎ¶¨Í∞Ä ÎêòÏóàÎã§Í∞Ä 0byteÎ°ú Îñ®Ïñ¥Ï°åÎã§Í∞Ä Îã§Ïãú ÏÉÅÏäπÌï©ÎãàÎã§. Ïù¥Îäî Ï†ÄÌù¨Í∞Ä ÏÇ¨Ïö©Ìïú ÎèÑÍµ¨Ïù∏ GoNetWorkerÏùò ÌäπÏßï ÎïåÎ¨∏Ïóê Î∞úÏÉùÌïú Í∑∏ÎûòÌîÑÏûÖÎãàÎã§.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/opsathlan-1/image-4.png"
width="665"
height="330"
srcset="https://s0okju.github.io/p/opsathlan-1/image-4_hu_fd6fbbaa30b660af.png 480w, https://s0okju.github.io/p/opsathlan-1/image-4_hu_7ce75c807bae32b0.png 1024w"
loading="lazy"
alt="Springboot application bytes per second"
class="gallery-image"
data-flex-grow="201"
data-flex-basis="483px"
>&lt;/p>
&lt;p>Í∑∏ Ïù¥Ïô∏ÏóêÎèÑ ÏïÑÎûòÏôÄ Í∞ôÏùÄ ÌäπÏßïÏùÑ Ïïå Ïàò ÏûàÏäµÎãàÎã§.&lt;/p>
&lt;ul>
&lt;li>ÌèâÍ∑†Ï†ÅÏúºÎ°ú 1200bytesÎ•º ÎÑòÏñ¥Í∞ÄÏßÄ ÏïäÎäîÎã§.&lt;/li>
&lt;/ul>
&lt;h4 id="memory">Memory
&lt;/h4>&lt;p>Í∑∏Ïóê ÎπÑÌï¥ memoryÎäî Ï†êÏßÑÏ†ÅÏúºÎ°ú ÏÉÅÏäπÌïòÎäî Í∑∏ÎûòÌîÑÎ•º Î≥¥Ïó¨Ï£ºÍ≥† ÏûàÏäµÎãàÎã§. Í∑∏ÎûòÌîÑÎ•º Î≥¥Îãà &lt;strong>Ïõπ Ïï†ÌîåÎ¶¨ÏºÄÏù¥ÏÖòÏù¥ Î∂àÌïÑÏöîÌïú Î©îÎ™®Î¶¨ ÏûêÏõêÏùÑ ÎÇ≠ÎπÑÌïúÎã§&lt;/strong>Í≥† ÏÉùÍ∞ÅÌñàÏäµÎãàÎã§.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/opsathlan-1/image-5.png"
width="685"
height="394"
srcset="https://s0okju.github.io/p/opsathlan-1/image-5_hu_1e07337cdd1a2258.png 480w, https://s0okju.github.io/p/opsathlan-1/image-5_hu_6369399b43d196dd.png 1024w"
loading="lazy"
alt="Springboot applicationÏùò Î©îÎ™®Î¶¨ ÏÇ¨Ïö©Îüâ"
class="gallery-image"
data-flex-grow="173"
data-flex-basis="417px"
>&lt;/p>
&lt;p>ÏõêÏù∏ÏùÑ Íµ¨Ï≤¥Ï†ÅÏúºÎ°ú ÌååÏïÖÌïòÍ∏∞ ÏúÑÌï¥ÏÑúÎäî springbootÏóê ÎåÄÌïú Î©îÌä∏Î¶≠Ïù¥ ÌïÑÏöîÌï©ÎãàÎã§. cAdvisor ÎßåÏúºÎ°úÎäî Ï†ïÍµêÌïú Î©îÌä∏Î¶≠ ÏàòÏßëÏóê ÌïúÍ≥ÑÍ∞Ä ÏûàÏúºÎØÄÎ°ú ÌîÑÎ°úÎ©îÌÖåÏö∞Ïä§Î•º ÌôúÏö©Ìï¥Ïïº Ìï† Í≤É Í∞ôÏäµÎãàÎã§.&lt;/p>
&lt;h2 id="Îã§ÏùåÌé∏ÏóêÎäî-">Îã§ÏùåÌé∏ÏóêÎäî &amp;hellip;
&lt;/h2>&lt;p>Îã§Ïùå Ìé∏ÏóêÎäî ÌîÑÎ°úÎ©îÌÖåÏö∞Ïä§Î•º ÌôúÏö©ÌïòÏó¨ springboot Í¥ÄÎ†® Î©îÌä∏Î¶≠Ïä§Î•º ÏàòÏßëÌïòÍ≥† Î¨∏Ï†úÎ•º Ìï¥Í≤∞Ìï¥ Î≥¥Í≤†ÏäµÎãàÎã§.&lt;/p></description></item></channel></rss>